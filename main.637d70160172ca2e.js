"use strict";(self.webpackChunkangularcr=self.webpackChunkangularcr||[]).push([[179],{2011:(at,De,F)=>{F.d(De,{xv:()=>ye,Dh:()=>ue,GT:()=>_e,cc:()=>$e,on:()=>Ie,pX:()=>fe});var u=F(5e3),X=F(127);at=F.hmd(at);const V=["ngOnDestroy"],fe=(te,Se,We,Je={})=>new Proxy(te,{get:(Ee,he)=>We.runOutsideAngular(()=>{var pe;if(te[he])return(null===(pe=null==Je?void 0:Je.spy)||void 0===pe?void 0:pe.get)&&Je.spy.get(he,te[he]),te[he];if(V.indexOf(he)>-1)return()=>{};const Ve=Se.toPromise().then(Ge=>{const ee=Ge&&Ge[he];return"function"==typeof ee?ee.bind(Ge):ee&&ee.then?ee.then(K=>We.run(()=>K)):We.run(()=>ee)});return new Proxy(()=>{},{get:(Ge,ee)=>Ve[ee],apply:(Ge,ee,K)=>Ve.then(re=>{var ce;const ie=re&&re(...K);return(null===(ce=null==Je?void 0:Je.spy)||void 0===ce?void 0:ce.apply)&&Je.spy.apply(he,K,ie),ie})})})}),_e=(te,Se)=>{Se.forEach(We=>{Object.getOwnPropertyNames(We.prototype||We).forEach(Je=>{Object.defineProperty(te.prototype,Je,Object.getOwnPropertyDescriptor(We.prototype||We,Je))})})};class we{constructor(Se){return Se}}const ue=new u.OlP("angularfire2.app.options"),ye=new u.OlP("angularfire2.app.name");function Ie(te,Se,We){const Ee="object"==typeof We&&We||{};Ee.name=Ee.name||"string"==typeof We&&We||"[DEFAULT]";const pe=X.Z.apps.filter(Ve=>Ve&&Ve.name===Ee.name)[0]||Se.runOutsideAngular(()=>X.Z.initializeApp(te,Ee));try{JSON.stringify(te)!==JSON.stringify(pe.options)&&G("error",`${pe.name} Firebase App already initialized with different options${at.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Ve){}return new we(pe)}const G=(te,...Se)=>{(0,u.X6Q)()&&"undefined"!=typeof console&&console[te](...Se)};function $e(te,Se,We,Je,Ee){const[,he,pe]=globalThis.\u0275AngularfireInstanceCache.find(Ve=>Ve[0]===te)||[];if(he)return function xe(te,Se){try{return te.toString()===Se.toString()}catch(We){return te===Se}}(Ee,pe)||(Oe("error",`${Se} was already initialized on the ${We} Firebase App with different settings.${Fe?" You may need to reload as Firebase is not HMR aware.":""}`),Oe("warn",{is:Ee,was:pe})),he;{const Ve=Je();return globalThis.\u0275AngularfireInstanceCache.push([te,Ve,Ee]),Ve}}const Fe=!!at.hot,Oe=(te,...Se)=>{(0,u.X6Q)()&&"undefined"!=typeof console&&console[te](...Se)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2090:(at,De,F)=>{F.d(De,{BH:()=>xe,LL:()=>bt,ZR:()=>se,gQ:()=>lo,zI:()=>ce,hu:()=>V,g5:()=>fe,US:()=>ue,tV:()=>G,h$:()=>ye,L:()=>Ie,$s:()=>Jo,r3:()=>tn,Sg:()=>Fe,ne:()=>ft,p$:()=>H,vZ:()=>Yo,ZB:()=>J,Lj:()=>Ut,gK:()=>vn,pd:()=>Qo,m9:()=>lt,z$:()=>Oe,GJ:()=>us,jU:()=>We,ru:()=>Je,d:()=>he,xb:()=>ds,w1:()=>pe,hl:()=>K,uI:()=>te,UG:()=>Se,Yr:()=>Ge,b$:()=>Ee,G6:()=>ee,Mn:()=>Ve,w9:()=>en,cI:()=>rt,UI:()=>Ii,X3:()=>ct,xO:()=>hs,zd:()=>ao,DV:()=>Nt,ug:()=>nt,dS:()=>Pt,Pz:()=>ht,Dv:()=>Fa,Wj:()=>Ds,lb:()=>La,eu:()=>re});var u=F(5861);const V=function(U,L){if(!U)throw fe(L)},fe=function(U){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+U)},_e=function(U){const L=[];let $=0;for(let ae=0;ae<U.length;ae++){let Y=U.charCodeAt(ae);Y<128?L[$++]=Y:Y<2048?(L[$++]=Y>>6|192,L[$++]=63&Y|128):55296==(64512&Y)&&ae+1<U.length&&56320==(64512&U.charCodeAt(ae+1))?(Y=65536+((1023&Y)<<10)+(1023&U.charCodeAt(++ae)),L[$++]=Y>>18|240,L[$++]=Y>>12&63|128,L[$++]=Y>>6&63|128,L[$++]=63&Y|128):(L[$++]=Y>>12|224,L[$++]=Y>>6&63|128,L[$++]=63&Y|128)}return L},ue={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(U,L){if(!Array.isArray(U))throw Error("encodeByteArray takes an array as a parameter");this.init_();const $=L?this.byteToCharMapWebSafe_:this.byteToCharMap_,ae=[];for(let Y=0;Y<U.length;Y+=3){const Be=U[Y],gt=Y+1<U.length,Yt=gt?U[Y+1]:0,Tr=Y+2<U.length,qt=Tr?U[Y+2]:0;let ln=(15&Yt)<<2|qt>>6,Jn=63&qt;Tr||(Jn=64,gt||(ln=64)),ae.push($[Be>>2],$[(3&Be)<<4|Yt>>4],$[ln],$[Jn])}return ae.join("")},encodeString(U,L){return this.HAS_NATIVE_SUPPORT&&!L?btoa(U):this.encodeByteArray(_e(U),L)},decodeString(U,L){return this.HAS_NATIVE_SUPPORT&&!L?atob(U):function(U){const L=[];let $=0,ae=0;for(;$<U.length;){const Y=U[$++];if(Y<128)L[ae++]=String.fromCharCode(Y);else if(Y>191&&Y<224){const Be=U[$++];L[ae++]=String.fromCharCode((31&Y)<<6|63&Be)}else if(Y>239&&Y<365){const Tr=((7&Y)<<18|(63&U[$++])<<12|(63&U[$++])<<6|63&U[$++])-65536;L[ae++]=String.fromCharCode(55296+(Tr>>10)),L[ae++]=String.fromCharCode(56320+(1023&Tr))}else{const Be=U[$++],gt=U[$++];L[ae++]=String.fromCharCode((15&Y)<<12|(63&Be)<<6|63&gt)}}return L.join("")}(this.decodeStringToByteArray(U,L))},decodeStringToByteArray(U,L){this.init_();const $=L?this.charToByteMapWebSafe_:this.charToByteMap_,ae=[];for(let Y=0;Y<U.length;){const Be=$[U.charAt(Y++)],Yt=Y<U.length?$[U.charAt(Y)]:0;++Y;const qt=Y<U.length?$[U.charAt(Y)]:64;++Y;const Mt=Y<U.length?$[U.charAt(Y)]:64;if(++Y,null==Be||null==Yt||null==qt||null==Mt)throw Error();ae.push(Be<<2|Yt>>4),64!==qt&&(ae.push(Yt<<4&240|qt>>2),64!==Mt&&ae.push(qt<<6&192|Mt))}return ae},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let U=0;U<this.ENCODED_VALS.length;U++)this.byteToCharMap_[U]=this.ENCODED_VALS.charAt(U),this.charToByteMap_[this.byteToCharMap_[U]]=U,this.byteToCharMapWebSafe_[U]=this.ENCODED_VALS_WEBSAFE.charAt(U),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[U]]=U,U>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(U)]=U,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(U)]=U)}}},ye=function(U){const L=_e(U);return ue.encodeByteArray(L,!0)},Ie=function(U){return ye(U).replace(/\./g,"")},G=function(U){try{return ue.decodeString(U,!0)}catch(L){console.error("base64Decode failed: ",L)}return null};function H(U){return J(void 0,U)}function J(U,L){if(!(L instanceof Object))return L;switch(L.constructor){case Date:return new Date(L.getTime());case Object:void 0===U&&(U={});break;case Array:U=[];break;default:return L}for(const $ in L)!L.hasOwnProperty($)||!$e($)||(U[$]=J(U[$],L[$]));return U}function $e(U){return"__proto__"!==U}class xe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((L,$)=>{this.resolve=L,this.reject=$})}wrapCallback(L){return($,ae)=>{$?this.reject($):this.resolve(ae),"function"==typeof L&&(this.promise.catch(()=>{}),1===L.length?L($):L($,ae))}}}function Fe(U,L){if(U.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ae=L||"demo-project",Y=U.iat||0,Be=U.sub||U.user_id;if(!Be)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const gt=Object.assign({iss:`https://securetoken.google.com/${ae}`,aud:ae,iat:Y,exp:Y+3600,auth_time:Y,sub:Be,user_id:Be,firebase:{sign_in_provider:"custom",identities:{}}},U);return[Ie(JSON.stringify({alg:"none",type:"JWT"})),Ie(JSON.stringify(gt)),""].join(".")}function Oe(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function te(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Oe())}function Se(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(U){return!1}}function We(){return"object"==typeof self&&self.self===self}function Je(){const U="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof U&&void 0!==U.id}function Ee(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function he(){return Oe().indexOf("Electron/")>=0}function pe(){const U=Oe();return U.indexOf("MSIE ")>=0||U.indexOf("Trident/")>=0}function Ve(){return Oe().indexOf("MSAppHost/")>=0}function Ge(){return!1}function ee(){return!Se()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function K(){return"object"==typeof indexedDB}function re(){return new Promise((U,L)=>{try{let $=!0;const ae="validate-browser-context-for-indexeddb-analytics-module",Y=self.indexedDB.open(ae);Y.onsuccess=()=>{Y.result.close(),$||self.indexedDB.deleteDatabase(ae),U(!0)},Y.onupgradeneeded=()=>{$=!1},Y.onerror=()=>{var Be;L((null===(Be=Y.error)||void 0===Be?void 0:Be.message)||"")}}catch($){L($)}})}function ce(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class se extends Error{constructor(L,$,ae){super($),this.code=L,this.customData=ae,this.name="FirebaseError",Object.setPrototypeOf(this,se.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,bt.prototype.create)}}class bt{constructor(L,$,ae){this.service=L,this.serviceName=$,this.errors=ae}create(L,...$){const ae=$[0]||{},Y=`${this.service}/${L}`,Be=this.errors[L],gt=Be?function Kt(U,L){return U.replace(Qn,($,ae)=>{const Y=L[ae];return null!=Y?String(Y):`<${ae}?>`})}(Be,ae):"Error";return new se(Y,`${this.serviceName}: ${gt} (${Y}).`,ae)}}const Qn=/\{\$([^}]+)}/g;function rt(U){return JSON.parse(U)}function ht(U){return JSON.stringify(U)}const Cn=function(U){let L={},$={},ae={},Y="";try{const Be=U.split(".");L=rt(G(Be[0])||""),$=rt(G(Be[1])||""),Y=Be[2],ae=$.d||{},delete $.d}catch(Be){}return{header:L,claims:$,data:ae,signature:Y}},en=function(U){const $=Cn(U).claims;return!!$&&"object"==typeof $&&$.hasOwnProperty("iat")},us=function(U){const L=Cn(U).claims;return"object"==typeof L&&!0===L.admin};function tn(U,L){return Object.prototype.hasOwnProperty.call(U,L)}function Nt(U,L){if(Object.prototype.hasOwnProperty.call(U,L))return U[L]}function ds(U){for(const L in U)if(Object.prototype.hasOwnProperty.call(U,L))return!1;return!0}function Ii(U,L,$){const ae={};for(const Y in U)Object.prototype.hasOwnProperty.call(U,Y)&&(ae[Y]=L.call($,U[Y],Y,U));return ae}function Yo(U,L){if(U===L)return!0;const $=Object.keys(U),ae=Object.keys(L);for(const Y of $){if(!ae.includes(Y))return!1;const Be=U[Y],gt=L[Y];if(Fr(Be)&&Fr(gt)){if(!Yo(Be,gt))return!1}else if(Be!==gt)return!1}for(const Y of ae)if(!$.includes(Y))return!1;return!0}function Fr(U){return null!==U&&"object"==typeof U}function hs(U){const L=[];for(const[$,ae]of Object.entries(U))Array.isArray(ae)?ae.forEach(Y=>{L.push(encodeURIComponent($)+"="+encodeURIComponent(Y))}):L.push(encodeURIComponent($)+"="+encodeURIComponent(ae));return L.length?"&"+L.join("&"):""}function ao(U){const L={};return U.replace(/^\?/,"").split("&").forEach(ae=>{if(ae){const[Y,Be]=ae.split("=");L[decodeURIComponent(Y)]=decodeURIComponent(Be)}}),L}function Qo(U){const L=U.indexOf("?");if(!L)return"";const $=U.indexOf("#",L);return U.substring(L,$>0?$:void 0)}class lo{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let L=1;L<this.blockSize;++L)this.pad_[L]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(L,$){$||($=0);const ae=this.W_;if("string"==typeof L)for(let Mt=0;Mt<16;Mt++)ae[Mt]=L.charCodeAt($)<<24|L.charCodeAt($+1)<<16|L.charCodeAt($+2)<<8|L.charCodeAt($+3),$+=4;else for(let Mt=0;Mt<16;Mt++)ae[Mt]=L[$]<<24|L[$+1]<<16|L[$+2]<<8|L[$+3],$+=4;for(let Mt=16;Mt<80;Mt++){const ln=ae[Mt-3]^ae[Mt-8]^ae[Mt-14]^ae[Mt-16];ae[Mt]=4294967295&(ln<<1|ln>>>31)}let qt,On,Y=this.chain_[0],Be=this.chain_[1],gt=this.chain_[2],Yt=this.chain_[3],Tr=this.chain_[4];for(let Mt=0;Mt<80;Mt++){Mt<40?Mt<20?(qt=Yt^Be&(gt^Yt),On=1518500249):(qt=Be^gt^Yt,On=1859775393):Mt<60?(qt=Be&gt|Yt&(Be|gt),On=2400959708):(qt=Be^gt^Yt,On=3395469782);const ln=(Y<<5|Y>>>27)+qt+Tr+On+ae[Mt]&4294967295;Tr=Yt,Yt=gt,gt=4294967295&(Be<<30|Be>>>2),Be=Y,Y=ln}this.chain_[0]=this.chain_[0]+Y&4294967295,this.chain_[1]=this.chain_[1]+Be&4294967295,this.chain_[2]=this.chain_[2]+gt&4294967295,this.chain_[3]=this.chain_[3]+Yt&4294967295,this.chain_[4]=this.chain_[4]+Tr&4294967295}update(L,$){if(null==L)return;void 0===$&&($=L.length);const ae=$-this.blockSize;let Y=0;const Be=this.buf_;let gt=this.inbuf_;for(;Y<$;){if(0===gt)for(;Y<=ae;)this.compress_(L,Y),Y+=this.blockSize;if("string"==typeof L){for(;Y<$;)if(Be[gt]=L.charCodeAt(Y),++gt,++Y,gt===this.blockSize){this.compress_(Be),gt=0;break}}else for(;Y<$;)if(Be[gt]=L[Y],++gt,++Y,gt===this.blockSize){this.compress_(Be),gt=0;break}}this.inbuf_=gt,this.total_+=$}digest(){const L=[];let $=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let Y=this.blockSize-1;Y>=56;Y--)this.buf_[Y]=255&$,$/=256;this.compress_(this.buf_);let ae=0;for(let Y=0;Y<5;Y++)for(let Be=24;Be>=0;Be-=8)L[ae]=this.chain_[Y]>>Be&255,++ae;return L}}function ft(U,L){const $=new ji(U,L);return $.subscribe.bind($)}class ji{constructor(L,$){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=$,this.task.then(()=>{L(this)}).catch(ae=>{this.error(ae)})}next(L){this.forEachObserver($=>{$.next(L)})}error(L){this.forEachObserver($=>{$.error(L)}),this.close(L)}complete(){this.forEachObserver(L=>{L.complete()}),this.close()}subscribe(L,$,ae){let Y;if(void 0===L&&void 0===$&&void 0===ae)throw new Error("Missing Observer.");Y=function cr(U,L){if("object"!=typeof U||null===U)return!1;for(const $ of L)if($ in U&&"function"==typeof U[$])return!0;return!1}(L,["next","error","complete"])?L:{next:L,error:$,complete:ae},void 0===Y.next&&(Y.next=co),void 0===Y.error&&(Y.error=co),void 0===Y.complete&&(Y.complete=co);const Be=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Y.error(this.finalError):Y.complete()}catch(gt){}}),this.observers.push(Y),Be}unsubscribeOne(L){void 0===this.observers||void 0===this.observers[L]||(delete this.observers[L],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(L){if(!this.finalized)for(let $=0;$<this.observers.length;$++)this.sendOne($,L)}sendOne(L,$){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[L])try{$(this.observers[L])}catch(ae){"undefined"!=typeof console&&console.error&&console.error(ae)}})}close(L){this.finalized||(this.finalized=!0,void 0!==L&&(this.finalError=L),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function co(){}const Fa=function(U,L,$,ae){let Y;if(ae<L?Y="at least "+L:ae>$&&(Y=0===$?"none":"no more than "+$),Y)throw new Error(U+" failed: Was called with "+ae+(1===ae?" argument.":" arguments.")+" Expects "+Y+".")};function vn(U,L){return`${U} failed: ${L} argument `}function Ds(U,L,$,ae){if((!ae||$)&&"function"!=typeof $)throw new Error(vn(U,L)+"must be a valid function.")}function La(U,L,$,ae){if((!ae||$)&&("object"!=typeof $||null===$))throw new Error(vn(U,L)+"must be a valid context object.")}const Pt=function(U){const L=[];let $=0;for(let ae=0;ae<U.length;ae++){let Y=U.charCodeAt(ae);if(Y>=55296&&Y<=56319){const Be=Y-55296;ae++,V(ae<U.length,"Surrogate pair missing trail surrogate."),Y=65536+(Be<<10)+(U.charCodeAt(ae)-56320)}Y<128?L[$++]=Y:Y<2048?(L[$++]=Y>>6|192,L[$++]=63&Y|128):Y<65536?(L[$++]=Y>>12|224,L[$++]=Y>>6&63|128,L[$++]=63&Y|128):(L[$++]=Y>>18|240,L[$++]=Y>>12&63|128,L[$++]=Y>>6&63|128,L[$++]=63&Y|128)}return L},nt=function(U){let L=0;for(let $=0;$<U.length;$++){const ae=U.charCodeAt($);ae<128?L++:ae<2048?L+=2:ae>=55296&&ae<=56319?(L+=4,$++):L+=3}return L};function Jo(U,L=1e3,$=2){const ae=L*Math.pow($,U),Y=Math.round(.5*ae*(Math.random()-.5)*2);return Math.min(144e5,ae+Y)}function lt(U){return U&&U._delegate?U._delegate:U}function si(U,L){return new Promise(($,ae)=>{U.onsuccess=Y=>{$(Y.target.result)},U.onerror=Y=>{var Be;ae(`${L}: ${null===(Be=Y.target.error)||void 0===Be?void 0:Be.message}`)}})}class Ft{constructor(L){this._db=L,this.objectStoreNames=this._db.objectStoreNames}transaction(L,$){return new ze(this._db.transaction.call(this._db,L,$))}createObjectStore(L,$){return new ve(this._db.createObjectStore(L,$))}close(){this._db.close()}}class ze{constructor(L){this._transaction=L,this.complete=new Promise(($,ae)=>{this._transaction.oncomplete=function(){$()},this._transaction.onerror=()=>{ae(this._transaction.error)},this._transaction.onabort=()=>{ae(this._transaction.error)}})}objectStore(L){return new ve(this._transaction.objectStore(L))}}class ve{constructor(L){this._store=L}index(L){return new Ze(this._store.index(L))}createIndex(L,$,ae){return new Ze(this._store.createIndex(L,$,ae))}get(L){return si(this._store.get(L),"Error reading from IndexedDB")}put(L,$){return si(this._store.put(L,$),"Error writing to IndexedDB")}delete(L){return si(this._store.delete(L),"Error deleting from IndexedDB")}clear(){return si(this._store.clear(),"Error clearing IndexedDB object store")}}class Ze{constructor(L){this._index=L}get(L){return si(this._index.get(L),"Error reading from IndexedDB")}}function ct(U,L,$){return new Promise((ae,Y)=>{try{const Be=indexedDB.open(U,L);Be.onsuccess=gt=>{ae(new Ft(gt.target.result))},Be.onerror=gt=>{var Yt;Y(`Error opening indexedDB: ${null===(Yt=gt.target.error)||void 0===Yt?void 0:Yt.message}`)},Be.onupgradeneeded=gt=>{$(new Ft(Be.result),gt.oldVersion,gt.newVersion,new ze(Be.transaction))}}catch(Be){Y(`Error opening indexedDB: ${Be.message}`)}})}function Ut(U){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,u.Z)(function*(U){return new Promise((L,$)=>{try{const ae=indexedDB.deleteDatabase(U);ae.onsuccess=()=>{L()},ae.onerror=Y=>{var Be;$(`Error deleting indexedDB database "${U}": ${null===(Be=Y.target.error)||void 0===Be?void 0:Be.message}`)}}catch(ae){$(`Error deleting indexedDB database "${U}": ${ae.message}`)}})})).apply(this,arguments)}},872:(at,De,F)=>{var u=F(5e3);let X=null;function V(){return X}const ue=new u.OlP("DocumentToken");let ye=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return function Ie(){return(0,u.LFG)(H)}()},providedIn:"platform"}),n})();const G=new u.OlP("Location Initialized");let H=(()=>{class n extends ye{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return V().getBaseHref(this._doc)}onPopState(t){const r=V().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=V().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){J()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){J()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ue))},n.\u0275prov=u.Yz7({token:n,factory:function(){return function $e(){return new H((0,u.LFG)(ue))}()},providedIn:"platform"}),n})();function J(){return!!window.history.pushState}function xe(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Fe(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Oe(n){return n&&"?"!==n[0]?"?"+n:n}let te=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return function Se(n){const e=(0,u.LFG)(ue).location;return new Je((0,u.LFG)(ye),e&&e.origin||"")}()},providedIn:"root"}),n})();const We=new u.OlP("appBaseHref");let Je=(()=>{class n extends te{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return xe(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Oe(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const l=this.prepareExternalUrl(i+Oe(s));this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,s){const l=this.prepareExternalUrl(i+Oe(s));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ye),u.LFG(We,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),Ee=(()=>{class n extends te{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=xe(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let l=this.prepareExternalUrl(i+Oe(s));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,s){let l=this.prepareExternalUrl(i+Oe(s));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ye),u.LFG(We,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),he=(()=>{class n{constructor(t,r){this._subject=new u.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Fe(Ge(i)),this._platformStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Oe(r))}normalize(t){return n.stripTrailingSlash(function Ve(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Ge(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Oe(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Oe(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=Oe,n.joinWithSlash=xe,n.stripTrailingSlash=Fe,n.\u0275fac=function(t){return new(t||n)(u.LFG(te),u.LFG(ye))},n.\u0275prov=u.Yz7({token:n,factory:function(){return function pe(){return new he((0,u.LFG)(te),(0,u.LFG)(ye))}()},providedIn:"root"}),n})();function Ge(n){return n.replace(/\/index.html$/,"")}function ta(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}let Ur=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new sn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Ip("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Ip("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.s_b),u.Y36(u.Rgc))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class sn{constructor(){this.$implicit=null,this.ngIf=null}}function Ip(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,u.AaK)(e)}'.`)}class jl{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let oi=(()=>{class n{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const r=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||r,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),r}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let r=0;r<this._defaultViews.length;r++)this._defaultViews[r].enforceState(t)}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),n})(),jr=(()=>{class n{constructor(t,r,i){this.ngSwitch=i,i._addCase(),this._view=new jl(t,r)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.s_b),u.Y36(u.Rgc),u.Y36(oi,9))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),n})(),fo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();const xd="browser";function Ir(n){return"server"===n}let nu=(()=>{class n{}return n.\u0275prov=(0,u.Yz7)({token:n,providedIn:"root",factory:()=>new ru((0,u.LFG)(ue),window)}),n})();class ru{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function kd(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const l=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(l)return l}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Rd(this.window.history)||Rd(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function Rd(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class pn{}class $a extends class iu extends class we{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function _e(n){X||(X=n)}(new $a)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Vp(){return un=un||document.querySelector("base"),un?un.getAttribute("href"):null}();return null==t?null:function ql(n){zl=zl||document.createElement("a"),zl.setAttribute("href",n);const e=zl.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){un=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return ta(document.cookie,e)}}let zl,un=null;const Sr=new u.OlP("TRANSITION_ID"),Wl=[{provide:u.ip1,useFactory:function su(n,e,t){return()=>{t.get(u.CZH).donePromise.then(()=>{const r=V(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<i.length;s++)r.remove(i[s])})}},deps:[Sr,ue,u.zs3],multi:!0}];class xs{static init(){(0,u.VLi)(new xs)}addToWindow(e){u.dqk.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new Error("Could not find testability for element.");return s},u.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),u.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),u.dqk.frameworkStabilizers||(u.dqk.frameworkStabilizers=[]),u.dqk.frameworkStabilizers.push(r=>{const i=u.dqk.getAllAngularTestabilities();let s=i.length,l=!1;const d=function(p){l=l||p,s--,0==s&&r(l)};i.forEach(function(p){p.whenStable(d)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?V().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Ar=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const za=new u.OlP("EventManagerPlugins");let po=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let s=0;s<i.length;s++){const l=i[s];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(za),u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class Bp{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=V().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Hi=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),qa=(()=>{class n extends Hi{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(s=>{const l=this._doc.createElement("style");l.textContent=s,i.push(r.appendChild(l))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Wa),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Wa))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ue))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();function Wa(n){V().remove(n)}const ut={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ou=/%COMP%/g;function me(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?me(n,i,t):(i=i.replace(ou,n),t.push(i))}return t}function Ot(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Dn=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Za(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case u.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new Fd(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case u.ifc.ShadowDom:return new Ld(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=me(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(po),u.LFG(qa),u.LFG(u.AFp))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class Za{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(ut[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=ut[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=ut[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(u.JOm.DashCase|u.JOm.Important)?e.style.setProperty(t,r,i&u.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&u.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Ot(r)):this.eventManager.addEventListener(e,t,Ot(r))}}class Fd extends Za{constructor(e,t,r,i){super(e),this.component=r;const s=me(i+"-"+r.id,r.styles,[]);t.addStyles(s),this.contentAttr=function Nd(n){return"_ngcontent-%COMP%".replace(ou,n)}(i+"-"+r.id),this.hostAttr=function B_(n){return"_nghost-%COMP%".replace(ou,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Ld extends Za{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=me(i.id,i.styles,[]);for(let l=0;l<s.length;l++){const d=document.createElement("style");d.textContent=s[l],this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Hp=(()=>{class n extends Bp{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ue))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const Gp=["alt","control","meta","shift"],Ka={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},hr={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Gi={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let $p=(()=>{class n extends Bp{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),l=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>V().onAndCancel(t,s.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let l="";if(Gp.forEach(p=>{const y=r.indexOf(p);y>-1&&(r.splice(y,1),l+=p+".")}),l+=s,0!=r.length||0===s.length)return null;const d={};return d.domEventName=i,d.fullKey=l,d}static getEventFullKey(t){let r="",i=function go(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&hr.hasOwnProperty(e)&&(e=hr[e]))}return Ka[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Gp.forEach(s=>{s!=i&&Gi[s](t)&&(r+=s+".")}),r+=i,r}static eventCallback(t,r,i){return s=>{n.getEventFullKey(s)===t&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ue))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const U_=(0,u.eFA)(u._c5,"browser",[{provide:u.Lbi,useValue:xd},{provide:u.g9A,useValue:function Rs(){$a.makeCurrent(),xs.init()},multi:!0},{provide:ue,useFactory:function zp(){return(0,u.RDi)(document),document},deps:[]}]),Yl=[{provide:u.zSh,useValue:"root"},{provide:u.qLn,useFactory:function Vd(){return new u.qLn},deps:[]},{provide:za,useClass:Hp,multi:!0,deps:[ue,u.R0b,u.Lbi]},{provide:za,useClass:$p,multi:!0,deps:[ue]},{provide:Dn,useClass:Dn,deps:[po,qa,u.AFp]},{provide:u.FYo,useExisting:Dn},{provide:Hi,useExisting:qa},{provide:qa,useClass:qa,deps:[ue]},{provide:u.dDg,useClass:u.dDg,deps:[u.R0b]},{provide:po,useClass:po,deps:[za,u.R0b]},{provide:pn,useClass:Ar,deps:[]}];let lu=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:u.AFp,useValue:t.appId},{provide:Sr,useExisting:u.AFp},Wl]}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(n,12))},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:Yl,imports:[fo,u.hGG]}),n})();"undefined"!=typeof window&&window;var gn=F(8996),Ps=F(3269);function Ke(...n){const e=(0,Ps.yG)(n);return(0,gn.D)(n,e)}var St=F(7579);class xr extends St.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var Vn=F(8306);const{isArray:Ja}=Array,{getPrototypeOf:Yp,prototype:yn,keys:$_}=Object;function Fs(n){if(1===n.length){const e=n[0];if(Ja(e))return{args:e,keys:null};if(function Wd(n){return n&&"object"==typeof n&&Yp(n)===yn}(e)){const t=$_(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Mi=F(4671),st=F(4004);const{isArray:Qp}=Array;function Kd(n){return(0,st.U)(e=>function Zd(n,e){return Qp(e)?n(...e):n(e)}(n,e))}function Xl(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var an=F(5403),sa=F(9672);function oa(n,e,t){n?(0,sa.f)(t,n,e):e()}var Gr=F(576);function yo(n,e){const t=(0,Gr.m)(n)?n:()=>n,r=i=>i.error(t());return new Vn.y(e?i=>e.schedule(r,0,i):r)}const aa=(0,F(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var el=F(8189);function Yd(...n){return function z_(){return(0,el.J)(1)}()((0,gn.D)(n,(0,Ps.yG)(n)))}var fs=F(8421);function xi(n){return new Vn.y(e=>{(0,fs.Xf)(n()).subscribe(e)})}var la=F(515),ca=F(727),Bn=F(4482);function Ls(){return(0,Bn.e)((n,e)=>{let t=null;n._refCount++;const r=(0,an.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Xp extends Vn.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Bn.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ca.w0;const t=this.getSubject();e.add(this.source.subscribe((0,an.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ca.w0.EMPTY)}return e}refCount(){return Ls()(this)}}function Nn(n,e){return(0,Bn.e)((t,r)=>{let i=null,s=0,l=!1;const d=()=>l&&!i&&r.complete();t.subscribe((0,an.x)(r,p=>{null==i||i.unsubscribe();let y=0;const C=s++;(0,fs.Xf)(n(p,C)).subscribe(i=(0,an.x)(r,D=>r.next(e?e(p,D,C,y++):D),()=>{i=null,d()}))},()=>{l=!0,d()}))})}var $r=F(5698);function ci(...n){const e=(0,Ps.yG)(n);return(0,Bn.e)((t,r)=>{(e?Yd(n,t,e):Yd(n,t)).subscribe(r)})}function tl(n,e,t,r,i){return(s,l)=>{let d=t,p=e,y=0;s.subscribe((0,an.x)(l,C=>{const D=y++;p=d?n(p,C,D):(d=!0,C),r&&l.next(p)},i&&(()=>{d&&l.next(p),l.complete()})))}}function Rr(n,e){return(0,Bn.e)(tl(n,e,arguments.length>=2,!0))}function tr(n,e){return(0,Bn.e)((t,r)=>{let i=0;t.subscribe((0,an.x)(r,s=>n.call(e,s,i++)&&r.next(s)))})}function $i(n){return(0,Bn.e)((e,t)=>{let s,r=null,i=!1;r=e.subscribe((0,an.x)(t,void 0,void 0,l=>{s=(0,fs.Xf)(n(l,$i(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}var In=F(5577);function ua(n,e){return(0,Gr.m)(e)?(0,In.z)(n,e,1):(0,In.z)(n,1)}function Qd(n){return n<=0?()=>la.E:(0,Bn.e)((e,t)=>{let r=[];e.subscribe((0,an.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Sn(n=q_){return(0,Bn.e)((e,t)=>{let r=!1;e.subscribe((0,an.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function q_(){return new aa}function W_(n){return(0,Bn.e)((e,t)=>{let r=!1;e.subscribe((0,an.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function da(n,e){const t=arguments.length>=2;return r=>r.pipe(n?tr((i,s)=>n(i,s,r)):Mi.y,(0,$r.q)(1),t?W_(e):Sn(()=>new aa))}function fr(n,e,t){const r=(0,Gr.m)(n)||e||t?{next:n,error:e,complete:t}:n;return r?(0,Bn.e)((i,s)=>{var l;null===(l=r.subscribe)||void 0===l||l.call(r);let d=!0;i.subscribe((0,an.x)(s,p=>{var y;null===(y=r.next)||void 0===y||y.call(r,p),s.next(p)},()=>{var p;d=!1,null===(p=r.complete)||void 0===p||p.call(r),s.complete()},p=>{var y;d=!1,null===(y=r.error)||void 0===y||y.call(r,p),s.error(p)},()=>{var p,y;d&&(null===(p=r.unsubscribe)||void 0===p||p.call(r)),null===(y=r.finalize)||void 0===y||y.call(r)}))}):Mi.y}class vo{constructor(e,t){this.id=e,this.url=t}}class Vs extends vo{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class uu extends vo{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class An extends vo{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Jd extends vo{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ha extends vo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class JC extends vo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Xd extends vo{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class kr extends vo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ri extends vo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class eh{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class fa{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Bs{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class bo{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class th{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class K_{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Y_{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const kt="primary";class du{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function qn(n){return new du(n)}const hu="ngNavigationCancelingError";function wo(n){const e=Error("NavigationCancelingError: "+n);return e[hu]=!0,e}function tg(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const l=r[s],d=n[s];if(l.startsWith(":"))i[l.substring(1)]=d;else if(l!==d.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function ps(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!fu(n[i],e[i]))return!1;return!0}function fu(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function pu(n){return Array.prototype.concat.apply([],n)}function ng(n){return n.length>0?n[n.length-1]:null}function Wn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function ui(n){return(0,u.CqO)(n)?n:(0,u.QGY)(n)?(0,gn.D)(Promise.resolve(n)):Ke(n)}const pa={exact:function rh(n,e,t){if(!gs(n.segments,e.segments)||!Co(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!rh(n.children[r],e.children[r],t))return!1;return!0},subset:ih},nl={exact:function ig(n,e){return ps(n,e)},subset:function Q_(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>fu(n[t],e[t]))},ignored:()=>!0};function ec(n,e,t){return pa[t.paths](n.root,e.root,t.matrixParams)&&nl[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function ih(n,e,t){return mu(n,e,e.segments,t)}function mu(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!gs(i,t)||e.hasChildren()||!Co(i,t,r))}if(n.segments.length===t.length){if(!gs(n.segments,t)||!Co(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!ih(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(gs(n.segments,i)&&Co(n.segments,i,r)&&n.children[kt])&&mu(n.children[kt],e,s,r)}}function Co(n,e,t){return e.every((r,i)=>nl[t](n[i].parameters,r.parameters))}class Eo{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=qn(this.queryParams)),this._queryParamMap}toString(){return oh.serialize(this)}}class xt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Wn(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return nc(this)}}class Mn{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=qn(this.parameters)),this._parameterMap}toString(){return ga(this)}}function gs(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class Do{}class tc{parse(e){const t=new yu(e);return new Eo(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${ms(e.root,!0)}`,r=function J_(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${il(t)}=${il(i)}`).join("&"):`${il(t)}=${il(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function sl(n){return encodeURI(n)}(e.fragment)}`:""}`}}const oh=new tc;function nc(n){return n.segments.map(e=>ga(e)).join("/")}function ms(n,e){if(!n.hasChildren())return nc(n);if(e){const t=n.children[kt]?ms(n.children[kt],!1):"",r=[];return Wn(n.children,(i,s)=>{s!==kt&&r.push(`${s}:${ms(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function sh(n,e){let t=[];return Wn(n.children,(r,i)=>{i===kt&&(t=t.concat(e(r,i)))}),Wn(n.children,(r,i)=>{i!==kt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===kt?[ms(n.children[kt],!1)]:[`${i}:${ms(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[kt]?`${nc(n)}/${t[0]}`:`${nc(n)}/(${t.join("//")})`}}function rl(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function il(n){return rl(n).replace(/%3B/gi,";")}function _u(n){return rl(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function rc(n){return decodeURIComponent(n)}function ic(n){return rc(n.replace(/\+/g,"%20"))}function ga(n){return`${_u(n.path)}${function og(n){return Object.keys(n).map(e=>`;${_u(e)}=${_u(n[e])}`).join("")}(n.parameters)}`}const X_=/^[^\/()?;=#]+/;function zi(n){const e=n.match(X_);return e?e[0]:""}const sc=/^[^=?&#]+/,ty=/^[^&#]+/;class yu{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new xt([],{}):new xt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[kt]=new xt(e,t)),r}parseSegment(){const e=zi(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Mn(rc(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=zi(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=zi(this.remaining);i&&(r=i,this.capture(r))}e[rc(t)]=rc(r)}parseQueryParam(e){const t=function ey(n){const e=n.match(sc);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function ag(n){const e=n.match(ty);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const i=ic(t),s=ic(r);if(e.hasOwnProperty(i)){let l=e[i];Array.isArray(l)||(l=[l],e[i]=l),l.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=zi(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let s;r.indexOf(":")>-1?(s=r.substr(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=kt);const l=this.parseChildren();t[s]=1===Object.keys(l).length?l[kt]:new xt([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class ny{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=ah(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=ah(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=lh(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return lh(e,this._root).map(t=>t.value)}}function ah(n,e){if(n===e.value)return e;for(const t of e.children){const r=ah(n,t);if(r)return r}return null}function lh(n,e){if(n===e.value)return[e];for(const t of e.children){const r=lh(n,t);if(r.length)return r.unshift(e),r}return[]}class Us{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function js(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class vu extends ny{constructor(e,t){super(e),this.snapshot=t,wu(this,e)}toString(){return this.snapshot.toString()}}function ma(n,e){const t=function ry(n,e){const l=new ol([],{},{},"",{},kt,e,null,n.root,-1,{});return new ch("",new Us(l,[]))}(n,e),r=new xr([new Mn("",{})]),i=new xr({}),s=new xr({}),l=new xr({}),d=new xr(""),p=new To(r,i,l,d,s,kt,e,t.root);return p.snapshot=t.root,new vu(new Us(p,[]),t)}class To{constructor(e,t,r,i,s,l,d,p){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=l,this.component=d,this._futureSnapshot=p}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,st.U)(e=>qn(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,st.U)(e=>qn(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function iy(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function bu(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class ol{constructor(e,t,r,i,s,l,d,p,y,C,D){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=l,this.component=d,this.routeConfig=p,this._urlSegment=y,this._lastPathIndex=C,this._resolve=D}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=qn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=qn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class ch extends ny{constructor(e,t){super(t),this.url=e,wu(this,t)}toString(){return Cu(this._root)}}function wu(n,e){e.value._routerState=n,e.children.forEach(t=>wu(n,t))}function Cu(n){const e=n.children.length>0?` { ${n.children.map(Cu).join(", ")} } `:"";return`${n.value}${e}`}function Hs(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,ps(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),ps(e.params,t.params)||n.params.next(t.params),function nh(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!ps(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),ps(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function uh(n,e){const t=ps(n.params,e.params)&&function sg(n,e){return gs(n,e)&&n.every((t,r)=>ps(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||uh(n.parent,e.parent))}function oc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function dh(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return oc(n,r,i);return oc(n,r)})}(n,e,t);return new Us(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const l=s.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(d=>oc(n,d)),l}}const r=function oy(n){return new To(new xr(n.url),new xr(n.params),new xr(n.queryParams),new xr(n.fragment),new xr(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>oc(n,s));return new Us(r,i)}}function Gs(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function _a(n){return"object"==typeof n&&null!=n&&n.outlets}function hh(n,e,t,r,i){let s={};if(r&&Wn(r,(d,p)=>{s[p]=Array.isArray(d)?d.map(y=>`${y}`):`${d}`}),n===e)return new Eo(t,s,i);const l=Eu(n,e,t);return new Eo(l,s,i)}function Eu(n,e,t){const r={};return Wn(n.children,(i,s)=>{r[s]=i===e?t:Eu(i,e,t)}),new xt(n.segments,r)}class lg{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Gs(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(_a);if(i&&i!==ng(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Du{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function cy(n,e,t){if(n||(n=new xt([],{})),0===n.segments.length&&n.hasChildren())return _s(n,e,t);const r=function XC(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const l=n.segments[i],d=t[r];if(_a(d))break;const p=`${d}`,y=r<t.length-1?t[r+1]:null;if(i>0&&void 0===p)break;if(p&&y&&"object"==typeof y&&void 0===y.outlets){if(!di(p,y,l))return s;r+=2}else{if(!di(p,{},l))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new xt(n.segments.slice(0,r.pathIndex),{});return s.children[kt]=new xt(n.segments.slice(r.pathIndex),n.children),_s(s,0,i)}return r.match&&0===i.length?new xt(n.segments,{}):r.match&&!n.hasChildren()?fh(n,e,t):r.match?_s(n,0,i):fh(n,e,t)}function _s(n,e,t){if(0===t.length)return new xt(n.segments,{});{const r=function ly(n){return _a(n[0])?n[0].outlets:{[kt]:n}}(t),i={};return Wn(r,(s,l)=>{"string"==typeof s&&(s=[s]),null!==s&&(i[l]=cy(n.children[l],e,s))}),Wn(n.children,(s,l)=>{void 0===r[l]&&(i[l]=s)}),new xt(n.segments,i)}}function fh(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(_a(s)){const p=ya(s.outlets);return new xt(r,p)}if(0===i&&Gs(t[0])){r.push(new Mn(n.segments[e].path,ph(t[0]))),i++;continue}const l=_a(s)?s.outlets[kt]:`${s}`,d=i<t.length-1?t[i+1]:null;l&&d&&Gs(d)?(r.push(new Mn(l,ph(d))),i+=2):(r.push(new Mn(l,{})),i++)}return new xt(r,{})}function ya(n){const e={};return Wn(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=fh(new xt([],{}),0,t))}),e}function ph(n){const e={};return Wn(n,(t,r)=>e[r]=`${t}`),e}function di(n,e,t){return n==t.path&&ps(e,t.parameters)}class dg{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Hs(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=js(t);e.children.forEach(s=>{const l=s.value.outlet;this.deactivateRoutes(s,i[l],r),delete i[l]}),Wn(i,(s,l)=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const l=r.getContext(i.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=js(e);for(const l of Object.keys(s))this.deactivateRouteAndItsChildren(s[l],i);if(r&&r.outlet){const l=r.outlet.detach(),d=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:d})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=js(e);for(const l of Object.keys(s))this.deactivateRouteAndItsChildren(s[l],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=js(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new K_(s.value.snapshot))}),e.children.length&&this.forwardEvent(new bo(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(Hs(i),i===s)if(i.component){const l=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const l=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const d=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),l.children.onOutletReAttached(d.contexts),l.attachRef=d.componentRef,l.route=d.route.value,l.outlet&&l.outlet.attach(d.componentRef,d.route.value),Hs(d.route.value),this.activateChildRoutes(e,null,l.children)}else{const d=function Tu(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),p=d?d.module.componentFactoryResolver:null;l.attachRef=null,l.route=i,l.resolver=p,l.outlet&&l.outlet.activateWith(i,p),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class Iu{constructor(e,t){this.routes=e,this.module=t}}function va(n){return"function"==typeof n}function al(n){return n instanceof Eo}const lc=Symbol("INITIAL_VALUE");function Io(){return Nn(n=>function Xa(...n){const e=(0,Ps.yG)(n),t=(0,Ps.jO)(n),{args:r,keys:i}=Fs(n);if(0===r.length)return(0,gn.D)([],e);const s=new Vn.y(function cu(n,e,t=Mi.y){return r=>{oa(e,()=>{const{length:i}=n,s=new Array(i);let l=i,d=i;for(let p=0;p<i;p++)oa(e,()=>{const y=(0,gn.D)(n[p],e);let C=!1;y.subscribe((0,an.x)(r,D=>{s[p]=D,C||(C=!0,d--),d||r.next(t(s.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,i?l=>Xl(i,l):Mi.y));return t?s.pipe(Kd(t)):s}(n.map(e=>e.pipe((0,$r.q)(1),ci(lc)))).pipe(Rr((e,t)=>{let r=!1;return t.reduce((i,s,l)=>i!==lc?i:(s===lc&&(r=!0),r||!1!==s&&l!==t.length-1&&!al(s)?i:s),e)},lc),tr(e=>e!==lc),(0,st.U)(e=>al(e)?e:!0===e),(0,$r.q)(1)))}class uy{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new cc,this.attachRef=null}}class cc{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new uy,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let Su=(()=>{class n{constructor(t,r,i,s,l){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=l,this.activated=null,this._activatedRoute=null,this.activateEvents=new u.vpe,this.deactivateEvents=new u.vpe,this.attachEvents=new u.vpe,this.detachEvents=new u.vpe,this.name=s||kt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const l=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),d=this.parentContexts.getOrCreateContext(this.name).children,p=new yh(t,d,this.location.injector);this.activated=this.location.createComponent(l,this.location.length,p),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(cc),u.Y36(u.s_b),u.Y36(u._Vd),u.$8M("name"),u.Y36(u.sBO))},n.\u0275dir=u.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class yh{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===To?this.route:e===cc?this.childContexts:this.parent.get(e,t)}}let vh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&u._UZ(0,"router-outlet")},directives:[Su],encapsulation:2}),n})();function uc(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];dc(r,bh(e,r))}}function dc(n,e){n.children&&uc(n.children,e)}function bh(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function wh(n){const e=n.children&&n.children.map(wh),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==kt&&(t.component=vh),t}function Wt(n){return n.outlet||kt}function Ch(n,e){const t=n.filter(r=>Wt(r)===e);return t.push(...n.filter(r=>Wt(r)!==e)),t}const fg={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ll(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},fg):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const s=(e.matcher||tg)(t,n,e);if(!s)return Object.assign({},fg);const l={};Wn(s.posParams,(p,y)=>{l[y]=p.path});const d=s.consumed.length>0?Object.assign(Object.assign({},l),s.consumed[s.consumed.length-1].parameters):l;return{matched:!0,consumedSegments:s.consumed,remainingSegments:t.slice(s.consumed.length),parameters:d,positionalParamSegments:null!==(r=s.posParams)&&void 0!==r?r:{}}}function hc(n,e,t,r,i="corrected"){if(t.length>0&&function hy(n,e,t){return t.some(r=>Mu(n,e,r)&&Wt(r)!==kt)}(n,t,r)){const l=new xt(e,function Au(n,e,t,r){const i={};i[kt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&Wt(s)!==kt){const l=new xt([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,i[Wt(s)]=l}return i}(n,e,r,new xt(t,n.children)));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:[]}}if(0===t.length&&function pg(n,e,t){return t.some(r=>Mu(n,e,r))}(n,t,r)){const l=new xt(n.segments,function dy(n,e,t,r,i,s){const l={};for(const d of r)if(Mu(n,t,d)&&!i[Wt(d)]){const p=new xt([],{});p._sourceSegment=n,p._segmentIndexShift="legacy"===s?n.segments.length:e.length,l[Wt(d)]=p}return Object.assign(Object.assign({},i),l)}(n,e,t,r,n.children,i));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}const s=new xt(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}function Mu(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function fy(n,e,t,r){return!!(Wt(n)===r||r!==kt&&Mu(e,t,n))&&("**"===n.path||ll(e,n,t).matched)}function py(n,e,t){return 0===e.length&&!n.children[t]}class So{constructor(e){this.segmentGroup=e||null}}class nr{constructor(e){this.urlTree=e}}function $s(n){return yo(new So(n))}function fc(n){return yo(new nr(n))}class Dh{constructor(e,t,r,i,s){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=s,this.allowRedirects=!0,this.ngModule=e.get(u.h0i)}apply(){const e=hc(this.urlTree.root,[],[],this.config).segmentGroup,t=new xt(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,kt).pipe((0,st.U)(s=>this.createUrlTree(wa(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe($i(s=>{if(s instanceof nr)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof So?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,kt).pipe((0,st.U)(i=>this.createUrlTree(wa(i),e.queryParams,e.fragment))).pipe($i(i=>{throw i instanceof So?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new xt([],{[kt]:e}):e;return new Eo(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,st.U)(s=>new xt([],s))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return(0,gn.D)(i).pipe(ua(s=>{const l=r.children[s],d=Ch(t,s);return this.expandSegmentGroup(e,d,l,s).pipe((0,st.U)(p=>({segment:p,outlet:s})))}),Rr((s,l)=>(s[l.outlet]=l.segment,s),{}),function QC(n,e){const t=arguments.length>=2;return r=>r.pipe(n?tr((i,s)=>n(i,s,r)):Mi.y,Qd(1),t?W_(e):Sn(()=>new aa))}())}expandSegment(e,t,r,i,s,l){return(0,gn.D)(r).pipe(ua(d=>this.expandSegmentAgainstRoute(e,t,r,d,i,s,l).pipe($i(y=>{if(y instanceof So)return Ke(null);throw y}))),da(d=>!!d),$i((d,p)=>{if(d instanceof aa||"EmptyError"===d.name)return py(t,i,s)?Ke(new xt([],{})):$s(t);throw d}))}expandSegmentAgainstRoute(e,t,r,i,s,l,d){return fy(i,t,s,l)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,s,l):d&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,l):$s(t):$s(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,l){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?fc(s):this.lineralizeSegments(r,s).pipe((0,In.z)(l=>{const d=new xt(l,{});return this.expandSegment(e,d,t,l,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,l){const{matched:d,consumedSegments:p,remainingSegments:y,positionalParamSegments:C}=ll(t,i,s);if(!d)return $s(t);const D=this.applyRedirectCommands(p,i.redirectTo,C);return i.redirectTo.startsWith("/")?fc(D):this.lineralizeSegments(i,D).pipe((0,In.z)(M=>this.expandSegment(e,t,r,M.concat(y),l,!1)))}matchSegmentAgainstRoute(e,t,r,i,s){if("**"===r.path)return r.loadChildren?(r._loadedConfig?Ke(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,st.U)(D=>(r._loadedConfig=D,new xt(i,{})))):Ke(new xt(i,{}));const{matched:l,consumedSegments:d,remainingSegments:p}=ll(t,r,i);return l?this.getChildConfig(e,r,i).pipe((0,In.z)(C=>{const D=C.module,M=C.routes,{segmentGroup:R,slicedSegments:N}=hc(t,d,p,M),j=new xt(R.segments,R.children);if(0===N.length&&j.hasChildren())return this.expandChildren(D,M,j).pipe((0,st.U)(He=>new xt(d,He)));if(0===M.length&&0===N.length)return Ke(new xt(d,{}));const Q=Wt(r)===s;return this.expandSegment(D,j,M,N,Q?kt:s,!0).pipe((0,st.U)(be=>new xt(d.concat(be.segments),be.children)))})):$s(t)}getChildConfig(e,t,r){return t.children?Ke(new Iu(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?Ke(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,In.z)(i=>i?this.configLoader.load(e.injector,t).pipe((0,st.U)(s=>(t._loadedConfig=s,s))):function pr(n){return yo(wo(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):Ke(new Iu([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;return i&&0!==i.length?Ke(i.map(l=>{const d=e.get(l);let p;if(function gh(n){return n&&va(n.canLoad)}(d))p=d.canLoad(t,r);else{if(!va(d))throw new Error("Invalid CanLoad guard");p=d(t,r)}return ui(p)})).pipe(Io(),fr(l=>{if(!al(l))return;const d=wo(`Redirecting to "${this.urlSerializer.serialize(l)}"`);throw d.url=l,d}),(0,st.U)(l=>!0===l)):Ke(!0)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Ke(r);if(i.numberOfChildren>1||!i.children[kt])return yo(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));i=i.children[kt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new Eo(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Wn(e,(i,s)=>{if("string"==typeof i&&i.startsWith(":")){const d=i.substring(1);r[s]=t[d]}else r[s]=i}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let l={};return Wn(t.children,(d,p)=>{l[p]=this.createSegmentGroup(e,d,r,i)}),new xt(s,l)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function wa(n){const e={};for(const r of Object.keys(n.children)){const s=wa(n.children[r]);(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function hi(n){if(1===n.numberOfChildren&&n.children[kt]){const e=n.children[kt];return new xt(n.segments.concat(e.segments),e.children)}return n}(new xt(n.segments,e))}class gg{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Ca{constructor(e,t){this.component=e,this.route=t}}function Ih(n,e,t){const r=n._root;return zr(r,e?e._root:null,t,[r.value])}function pc(n,e,t){const r=function gy(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function zr(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=js(e);return n.children.forEach(l=>{(function _g(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,l=e?e.value:null,d=t?t.getContext(n.value.outlet):null;if(l&&s.routeConfig===l.routeConfig){const p=function my(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!gs(n.url,e.url);case"pathParamsOrQueryParamsChange":return!gs(n.url,e.url)||!ps(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!uh(n,e)||!ps(n.queryParams,e.queryParams);default:return!uh(n,e)}}(l,s,s.routeConfig.runGuardsAndResolvers);p?i.canActivateChecks.push(new gg(r)):(s.data=l.data,s._resolvedData=l._resolvedData),zr(n,e,s.component?d?d.children:null:t,r,i),p&&d&&d.outlet&&d.outlet.isActivated&&i.canDeactivateChecks.push(new Ca(d.outlet.component,l))}else l&&Ea(e,d,i),i.canActivateChecks.push(new gg(r)),zr(n,null,s.component?d?d.children:null:t,r,i)})(l,s[l.value.outlet],t,r.concat([l.value]),i),delete s[l.value.outlet]}),Wn(s,(l,d)=>Ea(l,t.getContext(d),i)),i}function Ea(n,e,t){const r=js(n),i=n.value;Wn(r,(s,l)=>{Ea(s,i.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new Ca(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class Mh{}function xh(n){return new Vn.y(e=>e.error(n))}class Rh{constructor(e,t,r,i,s,l){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=s,this.relativeLinkResolution=l}recognize(){const e=hc(this.urlTree.root,[],[],this.config.filter(l=>void 0===l.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,kt);if(null===t)return null;const r=new ol([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},kt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Us(r,t),s=new ch(this.url,i);return this.inheritParamsAndData(s._root),s}inheritParamsAndData(e){const t=e.value,r=iy(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const s of Object.keys(t.children)){const l=t.children[s],d=Ch(e,s),p=this.processSegmentGroup(d,l,s);if(null===p)return null;r.push(...p)}const i=vg(r);return function by(n){n.sort((e,t)=>e.value.outlet===kt?-1:t.value.outlet===kt?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(e,t,r,i){for(const s of e){const l=this.processSegmentAgainstRoute(s,t,r,i);if(null!==l)return l}return py(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!fy(e,t,r,i))return null;let s,l=[],d=[];if("**"===e.path){const R=r.length>0?ng(r).parameters:{};s=new ol(r,R,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,w(e),Wt(e),e.component,e,g(t),_(t)+r.length,S(e))}else{const R=ll(t,e,r);if(!R.matched)return null;l=R.consumedSegments,d=R.remainingSegments,s=new ol(l,R.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,w(e),Wt(e),e.component,e,g(t),_(t)+l.length,S(e))}const p=function wy(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:y,slicedSegments:C}=hc(t,l,d,p.filter(R=>void 0===R.redirectTo),this.relativeLinkResolution);if(0===C.length&&y.hasChildren()){const R=this.processChildren(p,y);return null===R?null:[new Us(s,R)]}if(0===p.length&&0===C.length)return[new Us(s,[])];const D=Wt(e)===i,M=this.processSegment(p,y,C,D?kt:i);return null===M?null:[new Us(s,M)]}}function Cy(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function vg(n){const e=[],t=new Set;for(const r of n){if(!Cy(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=vg(r.children);e.push(new Us(r.value,i))}return e.filter(r=>!t.has(r))}function g(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function _(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function w(n){return n.data||{}}function S(n){return n.resolve||{}}function qe(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function et(n){return Nn(e=>{const t=n(e);return t?(0,gn.D)(t).pipe((0,st.U)(()=>e)):Ke(e)})}class mc extends class ki{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const cl=new u.OlP("ROUTES");class ul{constructor(e,t,r,i){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe((0,st.U)(s=>{this.onLoadEndListener&&this.onLoadEndListener(t);const l=s.create(e);return new Iu(pu(l.injector.get(cl,void 0,u.XFs.Self|u.XFs.Optional)).map(wh),l)}),$i(s=>{throw t._loader$=void 0,s}));return t._loader$=new Xp(i,()=>new St.x).pipe(Ls()),t._loader$}loadModuleFactory(e){return ui(e()).pipe((0,In.z)(t=>t instanceof u.YKP?Ke(t):(0,gn.D)(this.compiler.compileModuleAsync(t))))}}class Ey{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function Ao(n){throw n}function xu(n,e,t){return e.parse("/")}function Ru(n,e){return Ke(null)}const Oh={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},ku={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let fi=(()=>{class n{constructor(t,r,i,s,l,d,p){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=s,this.config=p,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new St.x,this.errorHandler=Ao,this.malformedUriErrorHandler=xu,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Ru,afterPreactivation:Ru},this.urlHandlingStrategy=new Ey,this.routeReuseStrategy=new mc,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=l.get(u.h0i),this.console=l.get(u.c2e);const D=l.get(u.R0b);this.isNgZoneEnabled=D instanceof u.R0b&&u.R0b.isInAngularZone(),this.resetConfig(p),this.currentUrlTree=function rg(){return new Eo(new xt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new ul(l,d,M=>this.triggerEvent(new eh(M)),M=>this.triggerEvent(new fa(M))),this.routerState=ma(this.currentUrlTree,this.rootComponentType),this.transitions=new xr({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(tr(i=>0!==i.id),(0,st.U)(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Nn(i=>{let s=!1,l=!1;return Ke(i).pipe(fr(d=>{this.currentNavigation={id:d.id,initialUrl:d.currentRawUrl,extractedUrl:d.extractedUrl,trigger:d.source,extras:d.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Nn(d=>{const p=this.browserUrlTree.toString(),y=!this.navigated||d.extractedUrl.toString()!==p||p!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||y)&&this.urlHandlingStrategy.shouldProcessUrl(d.rawUrl))return bg(d.source)&&(this.browserUrlTree=d.extractedUrl),Ke(d).pipe(Nn(D=>{const M=this.transitions.getValue();return r.next(new Vs(D.id,this.serializeUrl(D.extractedUrl),D.source,D.restoredState)),M!==this.transitions.getValue()?la.E:Promise.resolve(D)}),function Th(n,e,t,r){return Nn(i=>function ba(n,e,t,r,i){return new Dh(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,st.U)(s=>Object.assign(Object.assign({},i),{urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),fr(D=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:D.urlAfterRedirects})}),function O(n,e,t,r,i){return(0,In.z)(s=>function vy(n,e,t,r,i="emptyOnly",s="legacy"){try{const l=new Rh(n,e,t,r,i,s).recognize();return null===l?xh(new Mh):Ke(l)}catch(l){return xh(l)}}(n,e,s.urlAfterRedirects,t(s.urlAfterRedirects),r,i).pipe((0,st.U)(l=>Object.assign(Object.assign({},s),{targetSnapshot:l}))))}(this.rootComponentType,this.config,D=>this.serializeUrl(D),this.paramsInheritanceStrategy,this.relativeLinkResolution),fr(D=>{if("eager"===this.urlUpdateStrategy){if(!D.extras.skipLocationChange){const R=this.urlHandlingStrategy.merge(D.urlAfterRedirects,D.rawUrl);this.setBrowserUrl(R,D)}this.browserUrlTree=D.urlAfterRedirects}const M=new ha(D.id,this.serializeUrl(D.extractedUrl),this.serializeUrl(D.urlAfterRedirects),D.targetSnapshot);r.next(M)}));if(y&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:M,extractedUrl:R,source:N,restoredState:j,extras:Q}=d,Te=new Vs(M,this.serializeUrl(R),N,j);r.next(Te);const be=ma(R,this.rootComponentType).snapshot;return Ke(Object.assign(Object.assign({},d),{targetSnapshot:be,urlAfterRedirects:R,extras:Object.assign(Object.assign({},Q),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=d.rawUrl,d.resolve(null),la.E}),et(d=>{const{targetSnapshot:p,id:y,extractedUrl:C,rawUrl:D,extras:{skipLocationChange:M,replaceUrl:R}}=d;return this.hooks.beforePreactivation(p,{navigationId:y,appliedUrlTree:C,rawUrlTree:D,skipLocationChange:!!M,replaceUrl:!!R})}),fr(d=>{const p=new JC(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);this.triggerEvent(p)}),(0,st.U)(d=>Object.assign(Object.assign({},d),{guards:Ih(d.targetSnapshot,d.currentSnapshot,this.rootContexts)})),function _y(n,e){return(0,In.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:l}}=t;return 0===l.length&&0===s.length?Ke(Object.assign(Object.assign({},t),{guardsResult:!0})):function yg(n,e,t,r){return(0,gn.D)(n).pipe((0,In.z)(i=>function gc(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?Ke(s.map(d=>{const p=pc(d,e,i);let y;if(function e0(n){return n&&va(n.canDeactivate)}(p))y=ui(p.canDeactivate(n,e,t,r));else{if(!va(p))throw new Error("Invalid CanDeactivate guard");y=ui(p(n,e,t,r))}return y.pipe(da())})).pipe(Io()):Ke(!0)}(i.component,i.route,t,e,r)),da(i=>!0!==i,!0))}(l,r,i,n).pipe((0,In.z)(d=>d&&function hg(n){return"boolean"==typeof n}(d)?function rr(n,e,t,r){return(0,gn.D)(e).pipe(ua(i=>Yd(function Ah(n,e){return null!==n&&e&&e(new Bs(n)),Ke(!0)}(i.route.parent,r),function Sh(n,e){return null!==n&&e&&e(new th(n)),Ke(!0)}(i.route,r),function zs(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(l=>function mg(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>xi(()=>Ke(l.guards.map(p=>{const y=pc(p,l.node,t);let C;if(function _h(n){return n&&va(n.canActivateChild)}(y))C=ui(y.canActivateChild(r,n));else{if(!va(y))throw new Error("Invalid CanActivateChild guard");C=ui(y(r,n))}return C.pipe(da())})).pipe(Io())));return Ke(s).pipe(Io())}(n,i.path,t),function yy(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Ke(!0);const i=r.map(s=>xi(()=>{const l=pc(s,e,t);let d;if(function mh(n){return n&&va(n.canActivate)}(l))d=ui(l.canActivate(e,n));else{if(!va(l))throw new Error("Invalid CanActivate guard");d=ui(l(e,n))}return d.pipe(da())}));return Ke(i).pipe(Io())}(n,i.route,t))),da(i=>!0!==i,!0))}(r,s,n,e):Ke(d)),(0,st.U)(d=>Object.assign(Object.assign({},t),{guardsResult:d})))})}(this.ngModule.injector,d=>this.triggerEvent(d)),fr(d=>{if(al(d.guardsResult)){const y=wo(`Redirecting to "${this.serializeUrl(d.guardsResult)}"`);throw y.url=d.guardsResult,y}const p=new Xd(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot,!!d.guardsResult);this.triggerEvent(p)}),tr(d=>!!d.guardsResult||(this.restoreHistory(d),this.cancelNavigationTransition(d,""),!1)),et(d=>{if(d.guards.canActivateChecks.length)return Ke(d).pipe(fr(p=>{const y=new kr(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(y)}),Nn(p=>{let y=!1;return Ke(p).pipe(function z(n,e){return(0,In.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Ke(t);let s=0;return(0,gn.D)(i).pipe(ua(l=>function ne(n,e,t,r){return function Pe(n,e,t,r){const i=qe(n);if(0===i.length)return Ke({});const s={};return(0,gn.D)(i).pipe((0,In.z)(l=>function dt(n,e,t,r){const i=pc(n,e,r);return ui(i.resolve?i.resolve(e,t):i(e,t))}(n[l],e,t,r).pipe(fr(d=>{s[l]=d}))),Qd(1),(0,In.z)(()=>qe(s).length===i.length?Ke(s):la.E))}(n._resolve,n,e,r).pipe((0,st.U)(s=>(n._resolvedData=s,n.data=Object.assign(Object.assign({},n.data),iy(n,t).resolve),null)))}(l.route,r,n,e)),fr(()=>s++),Qd(1),(0,In.z)(l=>s===i.length?Ke(t):la.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),fr({next:()=>y=!0,complete:()=>{y||(this.restoreHistory(p),this.cancelNavigationTransition(p,"At least one route resolver didn't emit any value."))}}))}),fr(p=>{const y=new Ri(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(y)}))}),et(d=>{const{targetSnapshot:p,id:y,extractedUrl:C,rawUrl:D,extras:{skipLocationChange:M,replaceUrl:R}}=d;return this.hooks.afterPreactivation(p,{navigationId:y,appliedUrlTree:C,rawUrlTree:D,skipLocationChange:!!M,replaceUrl:!!R})}),(0,st.U)(d=>{const p=function sy(n,e,t){const r=oc(n,e._root,t?t._root:void 0);return new vu(r,e)}(this.routeReuseStrategy,d.targetSnapshot,d.currentRouterState);return Object.assign(Object.assign({},d),{targetRouterState:p})}),fr(d=>{this.currentUrlTree=d.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl),this.routerState=d.targetRouterState,"deferred"===this.urlUpdateStrategy&&(d.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,d),this.browserUrlTree=d.urlAfterRedirects)}),((n,e,t)=>(0,st.U)(r=>(new dg(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,d=>this.triggerEvent(d)),fr({next(){s=!0},complete(){s=!0}}),function Z_(n){return(0,Bn.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var d;s||l||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null===(d=this.currentNavigation)||void 0===d?void 0:d.id)===i.id&&(this.currentNavigation=null)}),$i(d=>{if(l=!0,function eg(n){return n&&n[hu]}(d)){const p=al(d.url);p||(this.navigated=!0,this.restoreHistory(i,!0));const y=new An(i.id,this.serializeUrl(i.extractedUrl),d.message);r.next(y),p?setTimeout(()=>{const C=this.urlHandlingStrategy.merge(d.url,this.rawUrlTree),D={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||bg(i.source)};this.scheduleNavigation(C,"imperative",null,D,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const p=new Jd(i.id,this.serializeUrl(i.extractedUrl),d);r.next(p);try{i.resolve(this.errorHandler(d))}catch(y){i.reject(y)}}return la.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var i;const s={replaceUrl:!0},l=(null===(i=t.state)||void 0===i?void 0:i.navigationId)?t.state:null;if(l){const p=Object.assign({},l);delete p.navigationId,delete p.\u0275routerPageId,0!==Object.keys(p).length&&(s.state=p)}const d=this.parseUrl(t.url);this.scheduleNavigation(d,r,l,s)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){uc(t),this.config=t.map(wh),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:l,queryParamsHandling:d,preserveFragment:p}=r,y=i||this.routerState.root,C=p?this.currentUrlTree.fragment:l;let D=null;switch(d){case"merge":D=Object.assign(Object.assign({},this.currentUrlTree.queryParams),s);break;case"preserve":D=this.currentUrlTree.queryParams;break;default:D=s||null}return null!==D&&(D=this.removeEmptyProps(D)),function qi(n,e,t,r,i){if(0===t.length)return hh(e.root,e.root,e.root,r,i);const s=function cg(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new lg(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,l)=>{if("object"==typeof s&&null!=s){if(s.outlets){const d={};return Wn(s.outlets,(p,y)=>{d[y]="string"==typeof p?p.split("/"):p}),[...i,{outlets:d}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===l?(s.split("/").forEach((d,p)=>{0==p&&"."===d||(0==p&&""===d?t=!0:".."===d?e++:""!=d&&i.push(d))}),i):[...i,s]},[]);return new lg(t,e,r)}(t);if(s.toRoot())return hh(e.root,e.root,new xt([],{}),r,i);const l=function ug(n,e,t){if(n.isAbsolute)return new Du(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const s=t.snapshot._urlSegment;return new Du(s,s===e.root,0)}const r=Gs(n.commands[0])?0:1;return function ay(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new Du(r,!1,i-s)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(s,e,n),d=l.processChildren?_s(l.segmentGroup,l.index,s.commands):cy(l.segmentGroup,l.index,s.commands);return hh(e.root,l.segmentGroup,d,r,i)}(y,this.currentUrlTree,t,D,null!=C?C:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=al(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function Nh(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?Object.assign({},Oh):!1===r?Object.assign({},ku):r,al(t))return ec(this.currentUrlTree,t,i);const s=this.parseUrl(t);return ec(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const s=t[i];return null!=s&&(r[i]=s),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new uu(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,s,l){var d,p;if(this.disposed)return Promise.resolve(!1);let y,C,D;l?(y=l.resolve,C=l.reject,D=l.promise):D=new Promise((N,j)=>{y=N,C=j});const M=++this.navigationId;let R;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),R=i&&i.\u0275routerPageId?i.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?null!==(d=this.browserPageId)&&void 0!==d?d:0:(null!==(p=this.browserPageId)&&void 0!==p?p:0)+1):R=0,this.setTransition({id:M,targetPageId:R,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:s,resolve:y,reject:C,promise:D,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),D.catch(N=>Promise.reject(N))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),s=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",s):this.location.go(i,"",s)}restoreHistory(t,r=!1){var i,s;if("computed"===this.canceledNavigationResolution){const l=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===l?this.currentUrlTree===(null===(s=this.currentNavigation)||void 0===s?void 0:s.finalUrl)&&0===l&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(l)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new An(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){u.$Z()},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();function bg(n){return"imperative"!==n}class Sy{}class n0{preload(e,t){return Ke(null)}}let r0=(()=>{class n{constructor(t,r,i,s){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=new ul(i,r,p=>t.triggerEvent(new eh(p)),p=>t.triggerEvent(new fa(p)))}setUpPreloading(){this.subscription=this.router.events.pipe(tr(t=>t instanceof uu),ua(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(u.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r)if(s.loadChildren&&!s.canLoad&&s._loadedConfig){const l=s._loadedConfig;i.push(this.processRoutes(l.module,l.routes))}else s.loadChildren&&!s.canLoad?i.push(this.preloadConfig(t,s)):s.children&&i.push(this.processRoutes(t,s.children));return(0,gn.D)(i).pipe((0,el.J)(),(0,st.U)(s=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?Ke(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,In.z)(s=>(r._loadedConfig=s,this.processRoutes(s.module,s.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(fi),u.LFG(u.Sil),u.LFG(u.zs3),u.LFG(Sy))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),wg=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Vs?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof uu&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Y_&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new Y_(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){u.$Z()},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const Wi=new u.OlP("ROUTER_CONFIGURATION"),My=new u.OlP("ROUTER_FORROOT_GUARD"),s0=[he,{provide:Do,useClass:tc},{provide:fi,useFactory:function Ry(n,e,t,r,i,s,l={},d,p){const y=new fi(null,n,e,t,r,i,pu(s));return d&&(y.urlHandlingStrategy=d),p&&(y.routeReuseStrategy=p),function l0(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(l,y),l.enableTracing&&y.events.subscribe(C=>{var D,M;null===(D=console.group)||void 0===D||D.call(console,`Router Event: ${C.constructor.name}`),console.log(C.toString()),console.log(C),null===(M=console.groupEnd)||void 0===M||M.call(console)}),y},deps:[Do,cc,he,u.zs3,u.Sil,cl,Wi,[class kh{},new u.FiY],[class bn{},new u.FiY]]},cc,{provide:To,useFactory:function Cg(n){return n.routerState.root},deps:[fi]},r0,n0,class Ay{preload(e,t){return t().pipe($i(()=>Ke(null)))}},{provide:Wi,useValue:{enableTracing:!1}}];function QS(){return new u.PXZ("Router",fi)}let Ph=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[s0,xy(t),{provide:My,useFactory:a0,deps:[[fi,new u.FiY,new u.tp0]]},{provide:Wi,useValue:r||{}},{provide:te,useFactory:o0,deps:[ye,[new u.tBr(We),new u.FiY],Wi]},{provide:wg,useFactory:JS,deps:[fi,nu,Wi]},{provide:Sy,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:n0},{provide:u.PXZ,multi:!0,useFactory:QS},[Nu,{provide:u.ip1,multi:!0,useFactory:c0,deps:[Nu]},{provide:Oy,useFactory:ky,deps:[Nu]},{provide:u.tb,multi:!0,useExisting:Oy}]]}}static forChild(t){return{ngModule:n,providers:[xy(t)]}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(My,8),u.LFG(fi,8))},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();function JS(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new wg(n,e,t)}function o0(n,e,t={}){return t.useHash?new Ee(n,e):new Je(n,e)}function a0(n){return"guarded"}function xy(n){return[{provide:u.deG,multi:!0,useValue:n},{provide:cl,multi:!0,useValue:n}]}let Nu=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new St.x}appInitializer(){return this.injector.get(G,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(d=>r=d),s=this.injector.get(fi),l=this.injector.get(Wi);return"disabled"===l.initialNavigation?(s.setUpLocationChangeListener(),r(!0)):"enabled"===l.initialNavigation||"enabledBlocking"===l.initialNavigation?(s.hooks.afterPreactivation=()=>this.initNavigation?Ke(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),s.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(Wi),i=this.injector.get(r0),s=this.injector.get(wg),l=this.injector.get(fi),d=this.injector.get(u.z2F);t===d.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&l.initialNavigation(),i.setUpPreloading(),s.init(),l.resetRootComponentType(d.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.zs3))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();function c0(n){return n.appInitializer.bind(n)}function ky(n){return n.bootstrapListener.bind(n)}const Oy=new u.OlP("Router Initializer"),XS=[];let u0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[Ph.forRoot(XS)],Ph]}),n})();class d0{}class h0{}class Zi{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),s=i.toLowerCase(),l=t.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(l):this.headers.set(s,[l])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Zi?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Zi;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Zi?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const s=e.value;if(s){let l=this.headers.get(t);if(!l)return;l=l.filter(d=>-1===s.indexOf(d)),0===l.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,l)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class Py{encodeKey(e){return g0(e)}encodeValue(e){return g0(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const xL=/%(\d[a-f0-9])/gi,p0={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function g0(n){return encodeURIComponent(n).replace(xL,(e,t)=>{var r;return null!==(r=p0[t])&&void 0!==r?r:e})}function Fy(n){return`${n}`}class dl{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Py,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function f0(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const s=i.indexOf("="),[l,d]=-1==s?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],p=t.get(l)||[];p.push(d),t.set(l,p)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t];this.map.set(t,Array.isArray(r)?r:[r])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new dl({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(Fy(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(Fy(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class qs{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function Ly(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function m0(n){return"undefined"!=typeof Blob&&n instanceof Blob}function _0(n){return"undefined"!=typeof FormData&&n instanceof FormData}class Fh{constructor(e,t,r,i){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function eA(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new Zi),this.context||(this.context=new qs),this.params){const l=this.params.toString();if(0===l.length)this.urlWithParams=t;else{const d=t.indexOf("?");this.urlWithParams=t+(-1===d?"?":d<t.length-1?"&":"")+l}}else this.params=new dl,this.urlWithParams=t}serializeBody(){return null===this.body?null:Ly(this.body)||m0(this.body)||_0(this.body)||function tA(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof dl?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||_0(this.body)?null:m0(this.body)?this.body.type||null:Ly(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof dl?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const r=e.method||this.method,i=e.url||this.url,s=e.responseType||this.responseType,l=void 0!==e.body?e.body:this.body,d=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,p=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let y=e.headers||this.headers,C=e.params||this.params;const D=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(y=Object.keys(e.setHeaders).reduce((M,R)=>M.set(R,e.setHeaders[R]),y)),e.setParams&&(C=Object.keys(e.setParams).reduce((M,R)=>M.set(R,e.setParams[R]),C)),new Fh(r,i,l,{params:C,headers:y,context:D,reportProgress:p,responseType:s,withCredentials:d})}}var Zn=(()=>((Zn=Zn||{})[Zn.Sent=0]="Sent",Zn[Zn.UploadProgress=1]="UploadProgress",Zn[Zn.ResponseHeader=2]="ResponseHeader",Zn[Zn.DownloadProgress=3]="DownloadProgress",Zn[Zn.Response=4]="Response",Zn[Zn.User=5]="User",Zn))();class Vy{constructor(e,t=200,r="OK"){this.headers=e.headers||new Zi,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class By extends Vy{constructor(e={}){super(e),this.type=Zn.ResponseHeader}clone(e={}){return new By({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Dg extends Vy{constructor(e={}){super(e),this.type=Zn.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Dg({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Ct extends Vy{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function Tg(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let Lh=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let s;if(t instanceof Fh)s=t;else{let p,y;p=i.headers instanceof Zi?i.headers:new Zi(i.headers),i.params&&(y=i.params instanceof dl?i.params:new dl({fromObject:i.params})),s=new Fh(t,r,void 0!==i.body?i.body:null,{headers:p,context:i.context,params:y,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const l=Ke(s).pipe(ua(p=>this.handler.handle(p)));if(t instanceof Fh||"events"===i.observe)return l;const d=l.pipe(tr(p=>p instanceof Dg));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return d.pipe((0,st.U)(p=>{if(null!==p.body&&!(p.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return p.body}));case"blob":return d.pipe((0,st.U)(p=>{if(null!==p.body&&!(p.body instanceof Blob))throw new Error("Response is not a Blob.");return p.body}));case"text":return d.pipe((0,st.U)(p=>{if(null!==p.body&&"string"!=typeof p.body)throw new Error("Response is not a string.");return p.body}));default:return d.pipe((0,st.U)(p=>p.body))}case"response":return d;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new dl).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,Tg(i,r))}post(t,r,i={}){return this.request("POST",t,Tg(i,r))}put(t,r,i={}){return this.request("PUT",t,Tg(i,r))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(d0))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class Uy{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const Vh=new u.OlP("HTTP_INTERCEPTORS");let Ws=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const w0=/^\)\]\}',?\n/;let Bh=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Vn.y(r=>{const i=this.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach((R,N)=>i.setRequestHeader(R,N.join(","))),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const R=t.detectContentTypeHeader();null!==R&&i.setRequestHeader("Content-Type",R)}if(t.responseType){const R=t.responseType.toLowerCase();i.responseType="json"!==R?R:"text"}const s=t.serializeBody();let l=null;const d=()=>{if(null!==l)return l;const R=i.statusText||"OK",N=new Zi(i.getAllResponseHeaders()),j=function OL(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||t.url;return l=new By({headers:N,status:i.status,statusText:R,url:j}),l},p=()=>{let{headers:R,status:N,statusText:j,url:Q}=d(),Te=null;204!==N&&(Te=void 0===i.response?i.responseText:i.response),0===N&&(N=Te?200:0);let be=N>=200&&N<300;if("json"===t.responseType&&"string"==typeof Te){const He=Te;Te=Te.replace(w0,"");try{Te=""!==Te?JSON.parse(Te):null}catch(Ne){Te=He,be&&(be=!1,Te={error:Ne,text:Te})}}be?(r.next(new Dg({body:Te,headers:R,status:N,statusText:j,url:Q||void 0})),r.complete()):r.error(new Ct({error:Te,headers:R,status:N,statusText:j,url:Q||void 0}))},y=R=>{const{url:N}=d(),j=new Ct({error:R,status:i.status||0,statusText:i.statusText||"Unknown Error",url:N||void 0});r.error(j)};let C=!1;const D=R=>{C||(r.next(d()),C=!0);let N={type:Zn.DownloadProgress,loaded:R.loaded};R.lengthComputable&&(N.total=R.total),"text"===t.responseType&&!!i.responseText&&(N.partialText=i.responseText),r.next(N)},M=R=>{let N={type:Zn.UploadProgress,loaded:R.loaded};R.lengthComputable&&(N.total=R.total),r.next(N)};return i.addEventListener("load",p),i.addEventListener("error",y),i.addEventListener("timeout",y),i.addEventListener("abort",y),t.reportProgress&&(i.addEventListener("progress",D),null!==s&&i.upload&&i.upload.addEventListener("progress",M)),i.send(s),r.next({type:Zn.Sent}),()=>{i.removeEventListener("error",y),i.removeEventListener("abort",y),i.removeEventListener("load",p),i.removeEventListener("timeout",y),t.reportProgress&&(i.removeEventListener("progress",D),null!==s&&i.upload&&i.upload.removeEventListener("progress",M)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(pn))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const Pu=new u.OlP("XSRF_COOKIE_NAME"),Uh=new u.OlP("XSRF_HEADER_NAME");class Ig{}let jy=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=ta(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ue),u.LFG(u.Lbi),u.LFG(Pu))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),C0=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const i=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||i.startsWith("http://")||i.startsWith("https://"))return r.handle(t);const s=this.tokenService.getToken();return null!==s&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,s)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Ig),u.LFG(Uh))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),iA=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get(Vh,[]);this.chain=r.reduceRight((i,s)=>new Uy(i,s),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(h0),u.LFG(u.zs3))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),sA=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:C0,useClass:Ws}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:Pu,useValue:t.cookieName}:[],t.headerName?{provide:Uh,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[C0,{provide:Vh,useExisting:C0,multi:!0},{provide:Ig,useClass:jy},{provide:Pu,useValue:"XSRF-TOKEN"},{provide:Uh,useValue:"X-XSRF-TOKEN"}]}),n})(),E0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[Lh,{provide:d0,useClass:iA},Bh,{provide:h0,useExisting:Bh}],imports:[[sA.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n})(),Hy=(()=>{class n{constructor(t){this.httpClient=t}getAllCars(){return this.httpClient.get("http://localhost:3000/data")}createCar(t){var i=new Zi({"content-type":"application/json"});return this.httpClient.post("http://localhost:3000/data",t,{headers:i})}deleteCar(t){var r=`http://localhost:3000/data/${t}`,i=JSON.parse(localStorage.jwt).jwt,s=(new Zi).set("authorize",`bearer${i}`);return this.httpClient.delete(r,{headers:s})}updateCar(t,r){var i=`http://localhost:3000/data/${r}`,s=JSON.parse(localStorage.jwt).jwt,l=(new Zi).set("authorize",`bearer${s}`).set("content-type","application/json");return this.httpClient.put(i,t,{headers:l})}getCarDataById(t){return this.httpClient.get(`http://localhost:3000/data/${t}`)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Lh))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Or(n){return null!=n&&"false"!=`${n}`}function Sg(n){return Array.isArray(n)?n:[n]}function ir(n){return null==n?"":"string"==typeof n?n:`${n}px`}function fl(n){return n instanceof u.SBq?n.nativeElement:n}var LL=F(1144);const VL=["addListener","removeListener"],BL=["addEventListener","removeEventListener"],UL=["on","off"];function Gy(n,e,t,r){if((0,Gr.m)(t)&&(r=t,t=void 0),r)return Gy(n,e,t).pipe(Kd(r));const[i,s]=function $y(n){return(0,Gr.m)(n.addEventListener)&&(0,Gr.m)(n.removeEventListener)}(n)?BL.map(l=>d=>n[l](e,d,t)):function jL(n){return(0,Gr.m)(n.addListener)&&(0,Gr.m)(n.removeListener)}(n)?VL.map(aA(n,e)):function pl(n){return(0,Gr.m)(n.on)&&(0,Gr.m)(n.off)}(n)?UL.map(aA(n,e)):[];if(!i&&(0,LL.z)(n))return(0,In.z)(l=>Gy(l,e,t))((0,fs.Xf)(n));if(!i)throw new TypeError("Invalid event target");return new Vn.y(l=>{const d=(...p)=>l.next(1<p.length?p:p[0]);return i(d),()=>s(d)})}function aA(n,e){return t=>r=>n[t](e,r)}class lA extends ca.w0{constructor(e,t){super()}schedule(e,t=0){return this}}const jh={setInterval(n,e,...t){const{delegate:r}=jh;return(null==r?void 0:r.setInterval)?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=jh;return((null==e?void 0:e.clearInterval)||clearInterval)(n)},delegate:void 0};var zy=F(8737);class Hh extends lA{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const r=this.id,i=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(i,r,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(i,this.id,t),this}requestAsyncId(e,t,r=0){return jh.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;jh.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,(0,zy.P)(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const _c={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:r}=_c;r&&(e=r.requestAnimationFrame,t=r.cancelAnimationFrame);const i=e(s=>{t=void 0,n(s)});return new ca.w0(()=>null==t?void 0:t(i))},requestAnimationFrame(...n){const{delegate:e}=_c;return((null==e?void 0:e.requestAnimationFrame)||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=_c;return((null==e?void 0:e.cancelAnimationFrame)||cancelAnimationFrame)(...n)},delegate:void 0},Mo={now:()=>(Mo.delegate||Date).now(),delegate:void 0};class Fu{constructor(e,t=Fu.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}Fu.now=Mo.now;class Ag extends Fu{constructor(e,t=Fu.now){super(e,t),this.actions=[],this._active=!1,this._scheduled=void 0}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}new class qy extends Ag{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}}(class cA extends Hh{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=_c.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,r=0){if(null!=r&&r>0||null==r&&this.delay>0)return super.recycleAsyncId(e,t,r);e.actions.some(i=>i.id===t)||(_c.cancelAnimationFrame(t),e._scheduled=void 0)}});let Wy,hA=1;const gl={};function yc(n){return n in gl&&(delete gl[n],!0)}const Zy={setImmediate(n){const e=hA++;return gl[e]=!0,Wy||(Wy=Promise.resolve()),Wy.then(()=>yc(e)&&n()),e},clearImmediate(n){yc(n)}},{setImmediate:$h,clearImmediate:Lu}=Zy,Mg={setImmediate(...n){const{delegate:e}=Mg;return((null==e?void 0:e.setImmediate)||$h)(...n)},clearImmediate(n){const{delegate:e}=Mg;return((null==e?void 0:e.clearImmediate)||Lu)(n)},delegate:void 0},vc=(new class I0 extends Ag{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}}(class T0 extends Hh{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=Mg.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,r=0){if(null!=r&&r>0||null==r&&this.delay>0)return super.recycleAsyncId(e,t,r);e.actions.some(i=>i.id===t)||(Mg.clearImmediate(t),e._scheduled=void 0)}}),new Ag(Hh)),xg=vc;var A0=F(3532);function Yy(n,e=vc){return function fA(n){return(0,Bn.e)((e,t)=>{let r=!1,i=null,s=null,l=!1;const d=()=>{if(null==s||s.unsubscribe(),s=null,r){r=!1;const y=i;i=null,t.next(y)}l&&t.complete()},p=()=>{s=null,l&&t.complete()};e.subscribe((0,an.x)(t,y=>{r=!0,i=y,s||(0,fs.Xf)(n(y)).subscribe(s=(0,an.x)(t,d,p))},()=>{l=!0,(!r||!s||s.closed)&&t.complete()}))})}(()=>function M0(n=0,e,t=xg){let r=-1;return null!=e&&((0,A0.K)(e)?t=e:r=e),new Vn.y(i=>{let s=function HL(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;s<0&&(s=0);let l=0;return t.schedule(function(){i.closed||(i.next(l++),0<=r?this.schedule(void 0,r):i.complete())},s)})}(n,e))}let Qy;try{Qy="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(n){Qy=!1}let Vu,pi=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function Hr(n){return n===xd}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!Qy)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.Lbi))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Oi=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function x0(){if(Vu)return Vu;if("object"!=typeof document||!document)return Vu=new Set(Oi),Vu;let n=document.createElement("input");return Vu=new Set(Oi.filter(e=>(n.setAttribute("type",e),n.type===e))),Vu}let zh,Bu,Rg;function Jy(n){return function $L(){if(null==zh&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>zh=!0}))}finally{zh=zh||!1}return zh}()?n:!!n.capture}function pA(){if(null==Bu){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Bu=!1,Bu;if("scrollBehavior"in document.documentElement.style)Bu=!0;else{const n=Element.prototype.scrollTo;Bu=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return Bu}function Xy(){let n="undefined"!=typeof document&&document?document.activeElement:null;for(;n&&n.shadowRoot;){const e=n.shadowRoot.activeElement;if(e===n)break;n=e}return n}function ml(n){return n.composedPath?n.composedPath()[0]:n.target}function ev(){return"undefined"!=typeof __karma__&&!!__karma__||"undefined"!=typeof jasmine&&!!jasmine||"undefined"!=typeof jest&&!!jest||"undefined"!=typeof Mocha&&!!Mocha}const k0=new u.OlP("cdk-dir-doc",{providedIn:"root",factory:function _A(){return(0,u.f3M)(ue)}}),yA=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let Uu=(()=>{class n{constructor(t){if(this.value="ltr",this.change=new u.vpe,t){const i=t.documentElement?t.documentElement.dir:null;this.value=function O0(n){const e=(null==n?void 0:n.toLowerCase())||"";return"auto"===e&&"undefined"!=typeof navigator&&(null==navigator?void 0:navigator.language)?yA.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||i||"ltr")}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(k0,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ni=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})(),wA=(()=>{class n{constructor(t,r,i){this._ngZone=t,this._platform=r,this._scrolled=new St.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=i}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const r=this.scrollContainers.get(t);r&&(r.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new Vn.y(r=>{this._globalSubscription||this._addGlobalListener();const i=t>0?this._scrolled.pipe(Yy(t)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{i.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Ke()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(t,r){const i=this.getAncestorScrollContainers(t);return this.scrolled(r).pipe(tr(s=>!s||i.indexOf(s)>-1))}getAncestorScrollContainers(t){const r=[];return this.scrollContainers.forEach((i,s)=>{this._scrollableContainsElement(s,t)&&r.push(s)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,r){let i=fl(r),s=t.getElementRef().nativeElement;do{if(i==s)return!0}while(i=i.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>Gy(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.R0b),u.LFG(pi),u.LFG(ue,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),tv=(()=>{class n{constructor(t,r,i){this._platform=t,this._change=new St.x,this._changeListener=s=>{this._change.next(s)},this._document=i,r.runOutsideAngular(()=>{if(t.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:r,height:i}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+i,right:t.left+r,height:i,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,r=this._getWindow(),i=t.documentElement,s=i.getBoundingClientRect();return{top:-s.top||t.body.scrollTop||r.scrollY||i.scrollTop||0,left:-s.left||t.body.scrollLeft||r.scrollX||i.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(Yy(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(pi),u.LFG(u.R0b),u.LFG(ue,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),rv=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})(),iv=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[Ni,rv],Ni,rv]}),n})();class kg{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class Og extends kg{constructor(e,t,r,i){super(),this.component=e,this.viewContainerRef=t,this.injector=r,this.componentFactoryResolver=i}}class sv extends kg{constructor(e,t,r){super(),this.templateRef=e,this.viewContainerRef=t,this.context=r}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class Da extends kg{constructor(e){super(),this.element=e instanceof u.SBq?e.nativeElement:e}}class ju{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof Og?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof sv?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof Da?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class TA extends ju{constructor(e,t,r,i,s){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=r,this._defaultInjector=i,this.attachDomPortal=l=>{const d=l.element,p=this._document.createComment("dom-portal");d.parentNode.insertBefore(p,d),this.outletElement.appendChild(d),this._attachedPortal=l,super.setDisposeFn(()=>{p.parentNode&&p.parentNode.replaceChild(d,p)})},this._document=s}attachComponentPortal(e){const r=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let i;return e.viewContainerRef?(i=e.viewContainerRef.createComponent(r,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector),this.setDisposeFn(()=>i.destroy())):(i=r.create(e.injector||this._defaultInjector),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.detachView(i.hostView),i.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(i)),this._attachedPortal=e,i}attachTemplatePortal(e){let t=e.viewContainerRef,r=t.createEmbeddedView(e.templateRef,e.context);return r.rootNodes.forEach(i=>this.outletElement.appendChild(i)),r.detectChanges(),this.setDisposeFn(()=>{let i=t.indexOf(r);-1!==i&&t.remove(i)}),this._attachedPortal=e,r}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let Ng=(()=>{class n extends ju{constructor(t,r,i){super(),this._componentFactoryResolver=t,this._viewContainerRef=r,this._isInitialized=!1,this.attached=new u.vpe,this.attachDomPortal=s=>{const l=s.element,d=this._document.createComment("dom-portal");s.setAttachedHost(this),l.parentNode.insertBefore(d,l),this._getRootNode().appendChild(l),this._attachedPortal=s,super.setDisposeFn(()=>{d.parentNode&&d.parentNode.replaceChild(l,d)})},this._document=i}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(t){t.setAttachedHost(this);const r=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,s=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),l=r.createComponent(s,r.length,t.injector||r.injector);return r!==this._viewContainerRef&&this._getRootNode().appendChild(l.hostView.rootNodes[0]),super.setDisposeFn(()=>l.destroy()),this._attachedPortal=t,this._attachedRef=l,this.attached.emit(l),l}attachTemplatePortal(t){t.setAttachedHost(this);const r=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=r,this.attached.emit(r),r}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u._Vd),u.Y36(u.s_b),u.Y36(ue))},n.\u0275dir=u.lG2({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[u.qOj]}),n})(),j0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();var Hu=F(6451),ov=F(5032);function Zs(n){return(0,Bn.e)((e,t)=>{(0,fs.Xf)(n).subscribe((0,an.x)(t,()=>t.complete(),ov.Z)),!t.closed&&e.subscribe(t)})}const G0=pA();class av{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=ir(-this._previousScrollPosition.left),e.style.top=ir(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,r=e.style,i=this._document.body.style,s=r.scrollBehavior||"",l=i.scrollBehavior||"";this._isEnabled=!1,r.left=this._previousHTMLStyles.left,r.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),G0&&(r.scrollBehavior=i.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),G0&&(r.scrollBehavior=s,i.scrollBehavior=l)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,r=this._viewportRuler.getViewportSize();return t.scrollHeight>r.height||t.scrollWidth>r.width}}class SA{constructor(e,t,r,i){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=r,this._config=i,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class lv{enable(){}disable(){}attach(){}}function _l(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function cv(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class AA{constructor(e,t,r,i){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=r,this._config=i,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:r,height:i}=this._viewportRuler.getViewportSize();_l(t,[{width:r,height:i,bottom:i,right:r,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let MA=(()=>{class n{constructor(t,r,i,s){this._scrollDispatcher=t,this._viewportRuler=r,this._ngZone=i,this.noop=()=>new lv,this.close=l=>new SA(this._scrollDispatcher,this._ngZone,this._viewportRuler,l),this.block=()=>new av(this._viewportRuler,this._document),this.reposition=l=>new AA(this._scrollDispatcher,this._viewportRuler,this._ngZone,l),this._document=s}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(wA),u.LFG(tv),u.LFG(u.R0b),u.LFG(ue))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class bc{constructor(e){if(this.scrollStrategy=new lv,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const r of t)void 0!==e[r]&&(this[r]=e[r])}}}class xA{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}class uv{constructor(e,t,r,i,s,l,d,p,y){this._portalOutlet=e,this._host=t,this._pane=r,this._config=i,this._ngZone=s,this._keyboardDispatcher=l,this._document=d,this._location=p,this._outsideClickDispatcher=y,this._backdropElement=null,this._backdropClick=new St.x,this._attachments=new St.x,this._detachments=new St.x,this._locationChanges=ca.w0.EMPTY,this._backdropClickHandler=C=>this._backdropClick.next(C),this._backdropTransitionendHandler=C=>{this._disposeBackdrop(C.target)},this._keydownEvents=new St.x,this._outsidePointerEvents=new St.x,i.scrollStrategy&&(this._scrollStrategy=i.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=i.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){let t=this._portalOutlet.attach(e);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe((0,$r.q)(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){var e;const t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),null===(e=this._host)||void 0===e||e.remove(),this._previousHostParent=this._pane=this._host=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=Object.assign(Object.assign({},this._config),e),this._updateElementSize()}setDirection(e){this._config=Object.assign(Object.assign({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=ir(this._config.width),e.height=ir(this._config.height),e.minWidth=ir(this._config.minWidth),e.minHeight=ir(this._config.minHeight),e.maxWidth=ir(this._config.maxWidth),e.maxHeight=ir(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;!e||(e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500)))}_toggleClasses(e,t,r){const i=Sg(t||[]).filter(s=>!!s);i.length&&(r?e.classList.add(...i):e.classList.remove(...i))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(Zs((0,Hu.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}let Fg=(()=>{class n{constructor(t,r){this._platform=r,this._document=t}ngOnDestroy(){var t;null===(t=this._containerElement)||void 0===t||t.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||ev()){const i=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let s=0;s<i.length;s++)i[s].remove()}const r=this._document.createElement("div");r.classList.add(t),ev()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ue),u.LFG(pi))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const dv="cdk-overlay-connected-position-bounding-box",$0=/([A-Za-z%]+)$/;class z0{constructor(e,t,r,i,s){this._viewportRuler=t,this._document=r,this._platform=i,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new St.x,this._resizeSubscription=ca.w0.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}get positions(){return this._preferredPositions}attach(e){this._validatePositions(),e.hostElement.classList.add(dv),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,r=this._viewportRect,i=this._containerRect,s=[];let l;for(let d of this._preferredPositions){let p=this._getOriginPoint(e,i,d),y=this._getOverlayPoint(p,t,d),C=this._getOverlayFit(y,t,r,d);if(C.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(d,p);this._canFitWithFlexibleDimensions(C,y,r)?s.push({position:d,origin:p,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(p,d)}):(!l||l.overlayFit.visibleArea<C.visibleArea)&&(l={overlayFit:C,overlayPoint:y,originPoint:p,position:d,overlayRect:t})}if(s.length){let d=null,p=-1;for(const y of s){const C=y.boundingBoxRect.width*y.boundingBoxRect.height*(y.position.weight||1);C>p&&(p=C,d=y)}return this._isPushed=!1,void this._applyPosition(d.position,d.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(l.position,l.originPoint);this._applyPosition(l.position,l.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&wc(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(dv),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,r){let i,s;if("center"==r.originX)i=e.left+e.width/2;else{const l=this._isRtl()?e.right:e.left,d=this._isRtl()?e.left:e.right;i="start"==r.originX?l:d}return t.left<0&&(i-=t.left),s="center"==r.originY?e.top+e.height/2:"top"==r.originY?e.top:e.bottom,t.top<0&&(s-=t.top),{x:i,y:s}}_getOverlayPoint(e,t,r){let i,s;return i="center"==r.overlayX?-t.width/2:"start"===r.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,s="center"==r.overlayY?-t.height/2:"top"==r.overlayY?0:-t.height,{x:e.x+i,y:e.y+s}}_getOverlayFit(e,t,r,i){const s=W0(t);let{x:l,y:d}=e,p=this._getOffset(i,"x"),y=this._getOffset(i,"y");p&&(l+=p),y&&(d+=y);let M=0-d,R=d+s.height-r.height,N=this._subtractOverflows(s.width,0-l,l+s.width-r.width),j=this._subtractOverflows(s.height,M,R),Q=N*j;return{visibleArea:Q,isCompletelyWithinViewport:s.width*s.height===Q,fitsInViewportVertically:j===s.height,fitsInViewportHorizontally:N==s.width}}_canFitWithFlexibleDimensions(e,t,r){if(this._hasFlexibleDimensions){const i=r.bottom-t.y,s=r.right-t.x,l=q0(this._overlayRef.getConfig().minHeight),d=q0(this._overlayRef.getConfig().minWidth),y=e.fitsInViewportHorizontally||null!=d&&d<=s;return(e.fitsInViewportVertically||null!=l&&l<=i)&&y}return!1}_pushOverlayOnScreen(e,t,r){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const i=W0(t),s=this._viewportRect,l=Math.max(e.x+i.width-s.width,0),d=Math.max(e.y+i.height-s.height,0),p=Math.max(s.top-r.top-e.y,0),y=Math.max(s.left-r.left-e.x,0);let C=0,D=0;return C=i.width<=s.width?y||-l:e.x<this._viewportMargin?s.left-r.left-e.x:0,D=i.height<=s.height?p||-d:e.y<this._viewportMargin?s.top-r.top-e.y:0,this._previousPushAmount={x:C,y:D},{x:e.x+C,y:e.y+D}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const r=this._getScrollVisibility(),i=new xA(e,r);this._positionChanges.next(i)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let r,i=e.overlayY;r="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let s=0;s<t.length;s++)t[s].style.transformOrigin=`${r} ${i}`}_calculateBoundingBoxRect(e,t){const r=this._viewportRect,i=this._isRtl();let s,l,d,C,D,M;if("top"===t.overlayY)l=e.y,s=r.height-l+this._viewportMargin;else if("bottom"===t.overlayY)d=r.height-e.y+2*this._viewportMargin,s=r.height-d+this._viewportMargin;else{const R=Math.min(r.bottom-e.y+r.top,e.y),N=this._lastBoundingBoxSize.height;s=2*R,l=e.y-R,s>N&&!this._isInitialRender&&!this._growAfterOpen&&(l=e.y-N/2)}if("end"===t.overlayX&&!i||"start"===t.overlayX&&i)M=r.width-e.x+this._viewportMargin,C=e.x-this._viewportMargin;else if("start"===t.overlayX&&!i||"end"===t.overlayX&&i)D=e.x,C=r.right-e.x;else{const R=Math.min(r.right-e.x+r.left,e.x),N=this._lastBoundingBoxSize.width;C=2*R,D=e.x-R,C>N&&!this._isInitialRender&&!this._growAfterOpen&&(D=e.x-N/2)}return{top:l,left:D,bottom:d,right:M,width:C,height:s}}_setBoundingBoxStyles(e,t){const r=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(r.height=Math.min(r.height,this._lastBoundingBoxSize.height),r.width=Math.min(r.width,this._lastBoundingBoxSize.width));const i={};if(this._hasExactPosition())i.top=i.left="0",i.bottom=i.right=i.maxHeight=i.maxWidth="",i.width=i.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,l=this._overlayRef.getConfig().maxWidth;i.height=ir(r.height),i.top=ir(r.top),i.bottom=ir(r.bottom),i.width=ir(r.width),i.left=ir(r.left),i.right=ir(r.right),i.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",i.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",s&&(i.maxHeight=ir(s)),l&&(i.maxWidth=ir(l))}this._lastBoundingBoxSize=r,wc(this._boundingBox.style,i)}_resetBoundingBoxStyles(){wc(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){wc(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const r={},i=this._hasExactPosition(),s=this._hasFlexibleDimensions,l=this._overlayRef.getConfig();if(i){const C=this._viewportRuler.getViewportScrollPosition();wc(r,this._getExactOverlayY(t,e,C)),wc(r,this._getExactOverlayX(t,e,C))}else r.position="static";let d="",p=this._getOffset(t,"x"),y=this._getOffset(t,"y");p&&(d+=`translateX(${p}px) `),y&&(d+=`translateY(${y}px)`),r.transform=d.trim(),l.maxHeight&&(i?r.maxHeight=ir(l.maxHeight):s&&(r.maxHeight="")),l.maxWidth&&(i?r.maxWidth=ir(l.maxWidth):s&&(r.maxWidth="")),wc(this._pane.style,r)}_getExactOverlayY(e,t,r){let i={top:"",bottom:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,r)),"bottom"===e.overlayY?i.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":i.top=ir(s.y),i}_getExactOverlayX(e,t,r){let l,i={left:"",right:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,r)),l=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===l?i.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":i.left=ir(s.x),i}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),r=this._scrollables.map(i=>i.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:cv(e,r),isOriginOutsideView:_l(e,r),isOverlayClipped:cv(t,r),isOverlayOutsideView:_l(t,r)}}_subtractOverflows(e,...t){return t.reduce((r,i)=>r-Math.max(i,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,r=this._viewportRuler.getViewportScrollPosition();return{top:r.top+this._viewportMargin,left:r.left+this._viewportMargin,right:r.left+e-this._viewportMargin,bottom:r.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&Sg(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof u.SBq)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,r=e.height||0;return{top:e.y,bottom:e.y+r,left:e.x,right:e.x+t,height:r,width:t}}}function wc(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function q0(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split($0);return t&&"px"!==t?null:parseFloat(e)}return n||null}function W0(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const Z0="cdk-global-overlay-wrapper";class K0{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(Z0),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._rightOffset="",this._leftOffset=e,this._justifyContent="flex-start",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._leftOffset="",this._rightOffset=e,this._justifyContent="flex-end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._justifyContent="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,r=this._overlayRef.getConfig(),{width:i,height:s,maxWidth:l,maxHeight:d}=r,p=!("100%"!==i&&"100vw"!==i||l&&"100%"!==l&&"100vw"!==l),y=!("100%"!==s&&"100vh"!==s||d&&"100%"!==d&&"100vh"!==d);e.position=this._cssPosition,e.marginLeft=p?"0":this._leftOffset,e.marginTop=y?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=this._rightOffset,p?t.justifyContent="flex-start":"center"===this._justifyContent?t.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?t.justifyContent="flex-end":"flex-end"===this._justifyContent&&(t.justifyContent="flex-start"):t.justifyContent=this._justifyContent,t.alignItems=y?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,r=t.style;t.classList.remove(Z0),r.justifyContent=r.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let rV=(()=>{class n{constructor(t,r,i,s){this._viewportRuler=t,this._document=r,this._platform=i,this._overlayContainer=s}global(){return new K0}flexibleConnectedTo(t){return new z0(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(tv),u.LFG(ue),u.LFG(pi),u.LFG(Fg))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),hv=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const r=this._attachedOverlays.indexOf(t);r>-1&&this._attachedOverlays.splice(r,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ue))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),RA=(()=>{class n extends hv{constructor(t,r){super(t),this._ngZone=r,this._keydownListener=i=>{const s=this._attachedOverlays;for(let l=s.length-1;l>-1;l--)if(s[l]._keydownEvents.observers.length>0){const d=s[l]._keydownEvents;this._ngZone?this._ngZone.run(()=>d.next(i)):d.next(i);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ue),u.LFG(u.R0b,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),kA=(()=>{class n extends hv{constructor(t,r,i){super(t),this._platform=r,this._ngZone=i,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=ml(s)},this._clickListener=s=>{const l=ml(s),d="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:l;this._pointerDownEventTarget=null;const p=this._attachedOverlays.slice();for(let y=p.length-1;y>-1;y--){const C=p[y];if(C._outsidePointerEvents.observers.length<1||!C.hasAttached())continue;if(C.overlayElement.contains(l)||C.overlayElement.contains(d))break;const D=C._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>D.next(s)):D.next(s)}}}add(t){if(super.add(t),!this._isAttached){const r=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(r)):this._addEventListeners(r),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ue),u.LFG(pi),u.LFG(u.R0b,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),iV=0,fv=(()=>{class n{constructor(t,r,i,s,l,d,p,y,C,D,M){this.scrollStrategies=t,this._overlayContainer=r,this._componentFactoryResolver=i,this._positionBuilder=s,this._keyboardDispatcher=l,this._injector=d,this._ngZone=p,this._document=y,this._directionality=C,this._location=D,this._outsideClickDispatcher=M}create(t){const r=this._createHostElement(),i=this._createPaneElement(r),s=this._createPortalOutlet(i),l=new bc(t);return l.direction=l.direction||this._directionality.value,new uv(s,r,i,l,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(t){const r=this._document.createElement("div");return r.id="cdk-overlay-"+iV++,r.classList.add("cdk-overlay-pane"),t.appendChild(r),r}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(u.z2F)),new TA(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(MA),u.LFG(Fg),u.LFG(u._Vd),u.LFG(rV),u.LFG(RA),u.LFG(u.zs3),u.LFG(u.R0b),u.LFG(ue),u.LFG(Uu),u.LFG(he),u.LFG(kA))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const Ks={provide:new u.OlP("cdk-connected-overlay-scroll-strategy"),deps:[fv],useFactory:function sV(n){return()=>n.scrollStrategies.reposition()}};let oV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[fv,Ks],imports:[[Ni,j0,iv],iv]}),n})();function Ug(n,e=Mi.y){return n=null!=n?n:fE,(0,Bn.e)((t,r)=>{let i,s=!0;t.subscribe((0,an.x)(r,l=>{const d=e(l);(s||!n(i,d))&&(s=!1,i=d,r.next(l))}))})}function fE(n,e){return n===e}let Sv=(()=>{class n{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function gE(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const r=function CM(n){try{return n.frameElement}catch(e){return null}}(function xv(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(t));if(r&&(-1===Av(r)||!this.isVisible(r)))return!1;let i=t.nodeName.toLowerCase(),s=Av(t);return t.hasAttribute("contenteditable")?-1!==s:!("iframe"===i||"object"===i||this._platform.WEBKIT&&this._platform.IOS&&!function qV(n){let e=n.nodeName.toLowerCase(),t="input"===e&&n.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===i?!!t.hasAttribute("controls")&&-1!==s:"video"===i?-1!==s&&(null!==s||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,r){return function Mv(n){return!function $u(n){return function DM(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function mE(n){let e=n.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(n)||function EM(n){return function _E(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||yE(n))}(t)&&!this.isDisabled(t)&&((null==r?void 0:r.ignoreVisibility)||this.isVisible(t))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(pi))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function yE(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let e=n.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function Av(n){if(!yE(n))return null;const e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class Ro{constructor(e,t,r,i,s=!1){this._element=e,this._checker=t,this._ngZone=r,this._document=i,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){const t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){const r=this._getFirstTabbableElement(t);return null==r||r.focus(e),!!r}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){const t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let r=0;r<t.length;r++){const i=t[r].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[r]):null;if(i)return i}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let r=t.length-1;r>=0;r--){const i=t[r].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[r]):null;if(i)return i}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe((0,$r.q)(1)).subscribe(e)}}let TM=(()=>{class n{constructor(t,r,i){this._checker=t,this._ngZone=r,this._document=i}create(t,r=!1){return new Ro(t,this._checker,this._ngZone,this._document,r)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Sv),u.LFG(u.R0b),u.LFG(ue))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function vE(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function bE(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const AM=new u.OlP("cdk-input-modality-detector-options"),MM={ignoreKeys:[18,17,224,91,16]},No=Jy({passive:!0,capture:!0});let xM=(()=>{class n{constructor(t,r,i,s){this._platform=t,this._mostRecentTarget=null,this._modality=new xr(null),this._lastTouchMs=0,this._onKeydown=l=>{var d,p;(null===(p=null===(d=this._options)||void 0===d?void 0:d.ignoreKeys)||void 0===p?void 0:p.some(y=>y===l.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=ml(l))},this._onMousedown=l=>{Date.now()-this._lastTouchMs<650||(this._modality.next(vE(l)?"keyboard":"mouse"),this._mostRecentTarget=ml(l))},this._onTouchstart=l=>{bE(l)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=ml(l))},this._options=Object.assign(Object.assign({},MM),s),this.modalityDetected=this._modality.pipe(function Dv(n){return tr((e,t)=>n<=t)}(1)),this.modalityChanged=this.modalityDetected.pipe(Ug()),t.isBrowser&&r.runOutsideAngular(()=>{i.addEventListener("keydown",this._onKeydown,No),i.addEventListener("mousedown",this._onMousedown,No),i.addEventListener("touchstart",this._onTouchstart,No)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,No),document.removeEventListener("mousedown",this._onMousedown,No),document.removeEventListener("touchstart",this._onTouchstart,No))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(pi),u.LFG(u.R0b),u.LFG(ue),u.LFG(AM,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const PM=new u.OlP("cdk-focus-monitor-default-options"),sf=Jy({passive:!0,capture:!0});let Hg=(()=>{class n{constructor(t,r,i,s,l){this._ngZone=t,this._platform=r,this._inputModalityDetector=i,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new St.x,this._rootNodeFocusAndBlurListener=d=>{const p=ml(d),y="focus"===d.type?this._onFocus:this._onBlur;for(let C=p;C;C=C.parentElement)y.call(this,d,C)},this._document=s,this._detectionMode=(null==l?void 0:l.detectionMode)||0}monitor(t,r=!1){const i=fl(t);if(!this._platform.isBrowser||1!==i.nodeType)return Ke(null);const s=function mA(n){if(function gA(){if(null==Rg){const n="undefined"!=typeof document?document.head:null;Rg=!(!n||!n.createShadowRoot&&!n.attachShadow)}return Rg}()){const e=n.getRootNode?n.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(i)||this._getDocument(),l=this._elementInfo.get(i);if(l)return r&&(l.checkChildren=!0),l.subject;const d={checkChildren:r,subject:new St.x,rootNode:s};return this._elementInfo.set(i,d),this._registerGlobalListeners(d),d.subject}stopMonitoring(t){const r=fl(t),i=this._elementInfo.get(r);i&&(i.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(i))}focusVia(t,r,i){const s=fl(t);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([d,p])=>this._originChanged(d,r,p)):(this._setOrigin(r),"function"==typeof s.focus&&s.focus(i))}ngOnDestroy(){this._elementInfo.forEach((t,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!(null==t?void 0:t.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(t,r){t.classList.toggle("cdk-focused",!!r),t.classList.toggle("cdk-touch-focused","touch"===r),t.classList.toggle("cdk-keyboard-focused","keyboard"===r),t.classList.toggle("cdk-mouse-focused","mouse"===r),t.classList.toggle("cdk-program-focused","program"===r)}_setOrigin(t,r=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&r,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,r){const i=this._elementInfo.get(r),s=ml(t);!i||!i.checkChildren&&r!==s||this._originChanged(r,this._getFocusOrigin(s),i)}_onBlur(t,r){const i=this._elementInfo.get(r);!i||i.checkChildren&&t.relatedTarget instanceof Node&&r.contains(t.relatedTarget)||(this._setClasses(r),this._emitOrigin(i.subject,null))}_emitOrigin(t,r){this._ngZone.run(()=>t.next(r))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const r=t.rootNode,i=this._rootNodeFocusListenerCount.get(r)||0;i||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,sf),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,sf)}),this._rootNodeFocusListenerCount.set(r,i+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Zs(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(t){const r=t.rootNode;if(this._rootNodeFocusListenerCount.has(r)){const i=this._rootNodeFocusListenerCount.get(r);i>1?this._rootNodeFocusListenerCount.set(r,i-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,sf),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,sf),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,r,i){this._setClasses(t,r),this._emitOrigin(i.subject,r),this._lastFocusOrigin=r}_getClosestElementsInfo(t){const r=[];return this._elementInfo.forEach((i,s)=>{(s===t||i.checkChildren&&s.contains(t))&&r.push([s,i])}),r}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.R0b),u.LFG(pi),u.LFG(xM),u.LFG(ue,8),u.LFG(PM,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const af="cdk-high-contrast-black-on-white",kv="cdk-high-contrast-white-on-black",Gg="cdk-high-contrast-active";let CE=(()=>{class n{constructor(t,r){this._platform=t,this._document=r}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(t):null,s=(i&&i.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(Gg),t.remove(af),t.remove(kv),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?(t.add(Gg),t.add(af)):2===r&&(t.add(Gg),t.add(kv))}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(pi),u.LFG(ue))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Ov{}const Po="*";function Nv(n,e){return{type:7,name:n,definitions:e,options:{}}}function Pv(n,e=null){return{type:4,styles:e,timings:n}}function DE(n,e=null){return{type:3,steps:n,options:e}}function TE(n,e=null){return{type:2,steps:n,options:e}}function yl(n){return{type:6,styles:n,offset:null}}function Fv(n,e,t){return{type:0,name:n,styles:e,options:t}}function Lv(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function IE(n=null){return{type:9,options:n}}function SE(n,e,t=null){return{type:11,selector:n,animation:e,options:t}}function AE(n){Promise.resolve(null).then(n)}class lf{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){AE(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class ME{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const s=this.players.length;0==s?AE(()=>this._onFinish()):this.players.forEach(l=>{l.onDone(()=>{++t==s&&this._onFinish()}),l.onDestroy(()=>{++r==s&&this._onDestroy()}),l.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((l,d)=>Math.max(l,d.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}const jt=!1;function Bv(n){return new u.vHH(3e3,jt)}function HE(){return"undefined"!=typeof window&&void 0!==window.document}function Zg(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function vl(n){switch(n.length){case 0:return new lf;case 1:return n[0];default:return new ME(n)}}function GE(n,e,t,r,i={},s={}){const l=[],d=[];let p=-1,y=null;if(r.forEach(C=>{const D=C.offset,M=D==p,R=M&&y||{};Object.keys(C).forEach(N=>{let j=N,Q=C[N];if("offset"!==N)switch(j=e.normalizePropertyName(j,l),Q){case"!":Q=i[N];break;case Po:Q=s[N];break;default:Q=e.normalizeStyleValue(N,j,Q,l)}R[j]=Q}),M||d.push(R),y=R,p=D}),l.length)throw function jM(n){return new u.vHH(3502,jt)}();return d}function Gv(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&Cc(t,"start",n)));break;case"done":n.onDone(()=>r(t&&Cc(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&Cc(t,"destroy",n)))}}function Cc(n,e,t){const r=t.totalTime,s=$v(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,null==r?n.totalTime:r,!!t.disabled),l=n._data;return null!=l&&(s._data=l),s}function $v(n,e,t,r,i="",s=0,l){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:s,disabled:!!l}}function Ki(n,e,t){let r;return n instanceof Map?(r=n.get(e),r||n.set(e,r=t)):(r=n[e],r||(r=n[e]=t)),r}function $E(n){const e=n.indexOf(":");return[n.substring(1,e),n.substr(e+1)]}let Wu=(n,e)=>!1,zv=(n,e,t)=>[],qv=null;function Kg(n){const e=n.parentNode||n.host;return e===qv?null:e}(Zg()||"undefined"!=typeof Element)&&(HE()?(qv=(()=>document.documentElement)(),Wu=(n,e)=>{for(;e;){if(e===n)return!0;e=Kg(e)}return!1}):Wu=(n,e)=>n.contains(e),zv=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let Qs=null,zE=!1;function qE(n){Qs||(Qs=function qM(){return"undefined"!=typeof document?document.body:null}()||{},zE=!!Qs.style&&"WebkitAppearance"in Qs.style);let e=!0;return Qs.style&&!function cf(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Qs.style,!e&&zE&&(e="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in Qs.style)),e}const Wv=Wu,Zv=zv;let WE=(()=>{class n{validateStyleProperty(t){return qE(t)}matchesElement(t,r){return!1}containsElement(t,r){return Wv(t,r)}getParentElement(t){return Kg(t)}query(t,r,i){return Zv(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,s,l,d=[],p){return new lf(i,s)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),Yg=(()=>{class n{}return n.NOOP=new WE,n})();const KE="ng-enter",Kv="ng-leave",Yv="ng-trigger",uf=".ng-trigger",df="ng-animating",Qv=".ng-animating";function Ec(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Qg(parseFloat(e[1]),e[2])}function Qg(n,e){return"s"===e?1e3*n:n}function bl(n,e,t){return n.hasOwnProperty("duration")?n:function KM(n,e,t){let i,s=0,l="";if("string"==typeof n){const d=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===d)return e.push(Bv()),{duration:0,delay:0,easing:""};i=Qg(parseFloat(d[1]),d[2]);const p=d[3];null!=p&&(s=Qg(parseFloat(p),d[4]));const y=d[5];y&&(l=y)}else i=n;if(!t){let d=!1,p=e.length;i<0&&(e.push(function xE(){return new u.vHH(3100,jt)}()),d=!0),s<0&&(e.push(function RE(){return new u.vHH(3101,jt)}()),d=!0),d&&e.splice(p,0,Bv())}return{duration:i,delay:s,easing:l}}(n,e,t)}function Zu(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function wl(n,e,t={}){if(e)for(let r in n)t[r]=n[r];else Zu(n,t);return t}function QE(n,e,t){return t?e+":"+t+";":""}function Jv(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=QE(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=QE(0,eb(t),n.style[t]));n.setAttribute("style",e)}function Fo(n,e,t){n.style&&(Object.keys(e).forEach(r=>{const i=Xv(r);t&&!t.hasOwnProperty(r)&&(t[r]=n.style[i]),n.style[i]=e[r]}),Zg()&&Jv(n))}function Dc(n,e){n.style&&(Object.keys(e).forEach(t=>{const r=Xv(t);n.style[r]=""}),Zg()&&Jv(n))}function Lo(n){return Array.isArray(n)?1==n.length?n[0]:TE(n):n}const Jg=new RegExp("{{\\s*(.+?)\\s*}}","g");function JE(n){let e=[];if("string"==typeof n){let t;for(;t=Jg.exec(n);)e.push(t[1]);Jg.lastIndex=0}return e}function hf(n,e,t){const r=n.toString(),i=r.replace(Jg,(s,l)=>{let d=e[l];return e.hasOwnProperty(l)||(t.push(function OE(n){return new u.vHH(3003,jt)}()),d=""),d.toString()});return i==r?n:i}function Xg(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const XE=/-+([a-z0-9])/g;function Xv(n){return n.replace(XE,(...e)=>e[1].toUpperCase())}function eb(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Pi(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function NE(n){return new u.vHH(3004,jt)}()}}function tD(n,e){return window.getComputedStyle(n)[e]}function XM(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function ex(n,e,t){if(":"==n[0]){const p=function tx(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function eB(n){return new u.vHH(3016,jt)}()),"* => *"}}(n,t);if("function"==typeof p)return void e.push(p);n=p}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function BE(n){return new u.vHH(3015,jt)}()),e;const i=r[1],s=r[2],l=r[3];e.push(nb(i,l));"<"==s[0]&&!("*"==i&&"*"==l)&&e.push(nb(l,i))}(r,t,e)):t.push(n),t}const rm=new Set(["true","1"]),im=new Set(["false","0"]);function nb(n,e){const t=rm.has(n)||im.has(n),r=rm.has(e)||im.has(e);return(i,s)=>{let l="*"==n||n==i,d="*"==e||e==s;return!l&&t&&"boolean"==typeof i&&(l=i?rm.has(n):im.has(n)),!d&&r&&"boolean"==typeof s&&(d=s?rm.has(e):im.has(e)),l&&d}}const nx=new RegExp("s*:selfs*,?","g");function ib(n,e,t,r){return new rx(n).build(e,t,r)}class rx{constructor(e){this._driver=e}build(e,t,r){const i=new ob(t);this._resetContextStyleTimingState(i);const s=Pi(this,Lo(e),i);return i.unsupportedCSSPropertiesFound.size&&i.unsupportedCSSPropertiesFound.keys(),s}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const s=[],l=[];return"@"==e.name.charAt(0)&&t.errors.push(function FE(){return new u.vHH(3006,jt)}()),e.definitions.forEach(d=>{if(this._resetContextStyleTimingState(t),0==d.type){const p=d,y=p.name;y.toString().split(/\s*,\s*/).forEach(C=>{p.name=C,s.push(this.visitState(p,t))}),p.name=y}else if(1==d.type){const p=this.visitTransition(d,t);r+=p.queryCount,i+=p.depCount,l.push(p)}else t.errors.push(function LE(){return new u.vHH(3007,jt)}())}),{type:7,name:e.name,states:s,transitions:l,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const s=new Set,l=i||{};r.styles.forEach(d=>{if(ff(d)){const p=d;Object.keys(p).forEach(y=>{JE(p[y]).forEach(C=>{l.hasOwnProperty(C)||s.add(C)})})}}),s.size&&(Xg(s.values()),t.errors.push(function Uv(n,e){return new u.vHH(3008,jt)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=Pi(this,Lo(e.animation),t);return{type:1,matchers:XM(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Tc(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>Pi(this,r,t)),options:Tc(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const s=e.steps.map(l=>{t.currentTime=r;const d=Pi(this,l,t);return i=Math.max(i,t.currentTime),d});return t.currentTime=i,{type:3,steps:s,options:Tc(e.options)}}visitAnimate(e,t){const r=function lb(n,e){let t=null;if(n.hasOwnProperty("duration"))t=n;else if("number"==typeof n)return cb(bl(n,e).duration,0,"");const r=n;if(r.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=cb(0,0,"");return s.dynamic=!0,s.strValue=r,s}return t=t||bl(r,e),cb(t.duration,t.delay,t.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,s=e.styles?e.styles:yl({});if(5==s.type)i=this.visitKeyframes(s,t);else{let l=e.styles,d=!1;if(!l){d=!0;const y={};r.easing&&(y.easing=r.easing),l=yl(y)}t.currentTime+=r.duration+r.delay;const p=this.visitStyle(l,t);p.isEmptyStep=d,i=p}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[];Array.isArray(e.styles)?e.styles.forEach(l=>{"string"==typeof l?l==Po?r.push(l):t.errors.push(function jv(n){return new u.vHH(3002,jt)}()):r.push(l)}):r.push(e.styles);let i=!1,s=null;return r.forEach(l=>{if(ff(l)){const d=l,p=d.easing;if(p&&(s=p,delete d.easing),!i)for(let y in d)if(d[y].toString().indexOf("{{")>=0){i=!0;break}}}),{type:6,styles:r,easing:s,offset:e.offset,containsDynamicStyles:i,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,s=t.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach(l=>{"string"!=typeof l&&Object.keys(l).forEach(d=>{if(!this._driver.validateStyleProperty(d))return delete l[d],void t.unsupportedCSSPropertiesFound.add(d);const p=t.collectedStyles[t.currentQuerySelector],y=p[d];let C=!0;y&&(s!=i&&s>=y.startTime&&i<=y.endTime&&(t.errors.push(function LM(n,e,t,r,i){return new u.vHH(3010,jt)}()),C=!1),s=y.startTime),C&&(p[d]={startTime:s,endTime:i}),t.options&&function YM(n,e,t){const r=e.params||{},i=JE(n);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||t.push(function kE(n){return new u.vHH(3001,jt)}())})}(l[d],t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function VM(){return new u.vHH(3011,jt)}()),r;let s=0;const l=[];let d=!1,p=!1,y=0;const C=e.steps.map(Te=>{const be=this._makeStyleAst(Te,t);let He=null!=be.offset?be.offset:function ab(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(ff(t)&&t.hasOwnProperty("offset")){const r=t;e=parseFloat(r.offset),delete r.offset}});else if(ff(n)&&n.hasOwnProperty("offset")){const t=n;e=parseFloat(t.offset),delete t.offset}return e}(be.styles),Ne=0;return null!=He&&(s++,Ne=be.offset=He),p=p||Ne<0||Ne>1,d=d||Ne<y,y=Ne,l.push(Ne),be});p&&t.errors.push(function qu(){return new u.vHH(3012,jt)}()),d&&t.errors.push(function JV(){return new u.vHH(3200,jt)}());const D=e.steps.length;let M=0;s>0&&s<D?t.errors.push(function Hv(){return new u.vHH(3202,jt)}()):0==s&&(M=1/(D-1));const R=D-1,N=t.currentTime,j=t.currentAnimateTimings,Q=j.duration;return C.forEach((Te,be)=>{const He=M>0?be==R?1:M*be:l[be],Ne=He*Q;t.currentTime=N+j.delay+Ne,j.duration=Ne,this._validateStyleAst(Te,t),Te.offset=He,r.styles.push(Te)}),r}visitReference(e,t){return{type:8,animation:Pi(this,Lo(e.animation),t),options:Tc(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Tc(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Tc(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[s,l]=function ix(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(nx,"")),n=n.replace(/@\*/g,uf).replace(/@\w+/g,t=>uf+"-"+t.substr(1)).replace(/:animating/g,Qv),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+s:s,Ki(t.collectedStyles,t.currentQuerySelector,{});const d=Pi(this,Lo(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:l,animation:d,originalSelector:e.selector,options:Tc(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function XV(){return new u.vHH(3013,jt)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:bl(e.timings,t.errors,!0);return{type:12,animation:Pi(this,Lo(e.animation),t),timings:r,options:null}}}class ob{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function ff(n){return!Array.isArray(n)&&"object"==typeof n}function Tc(n){return n?(n=Zu(n)).params&&(n.params=function sx(n){return n?Zu(n):null}(n.params)):n={},n}function cb(n,e,t){return{duration:n,delay:e,easing:t}}function pf(n,e,t,r,i,s,l=null,d=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:l,subTimeline:d}}class sm{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const iD=new RegExp(":enter","g"),sD=new RegExp(":leave","g");function oD(n,e,t,r,i,s={},l={},d,p,y=[]){return(new lx).buildKeyframes(n,e,t,r,i,s,l,d,p,y)}class lx{buildKeyframes(e,t,r,i,s,l,d,p,y,C=[]){y=y||new sm;const D=new ub(e,t,y,i,s,C,[]);D.options=p,D.currentTimeline.setStyles([l],null,D.errors,p),Pi(this,r,D);const M=D.timelines.filter(R=>R.containsAnimation());if(Object.keys(d).length){let R;for(let N=M.length-1;N>=0;N--){const j=M[N];if(j.element===t){R=j;break}}R&&!R.allowOnlyTimelineStyles()&&R.setStyles([d],null,D.errors,p)}return M.length?M.map(R=>R.buildKeyframes()):[pf(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),s=t.currentTimeline.currentTime,l=this._visitSubInstructions(r,i,i.options);s!=l&&t.transformIntoNewTimeline(l)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,r){let s=t.currentTimeline.currentTime;const l=null!=r.duration?Ec(r.duration):null,d=null!=r.delay?Ec(r.delay):null;return 0!==l&&e.forEach(p=>{const y=t.appendInstructionToTimeline(p,l,d);s=Math.max(s,y.duration+y.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),Pi(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const s=e.options;if(s&&(s.params||s.delay)&&(i=t.createSubContext(s),i.transformIntoNewTimeline(),null!=s.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=Ic);const l=Ec(s.delay);i.delayNextStep(l)}e.steps.length&&(e.steps.forEach(l=>Pi(this,l,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?Ec(e.options.delay):0;e.steps.forEach(l=>{const d=t.createSubContext(e.options);s&&d.delayNextStep(s),Pi(this,l,d),i=Math.max(i,d.currentTimeline.currentTime),r.push(d.currentTimeline)}),r.forEach(l=>t.currentTimeline.mergeTimelineCollectedStyles(l)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return bl(t.params?hf(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(r.duration),this.visitStyle(s,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.getCurrentStyleProperties().length&&r.forwardFrame();const s=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(s):r.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,s=r.duration,d=t.createSubContext().currentTimeline;d.easing=r.easing,e.styles.forEach(p=>{d.forwardTime((p.offset||0)*s),d.setStyles(p.styles,p.easing,t.errors,t.options),d.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(d),t.transformIntoNewTimeline(i+s),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},s=i.delay?Ec(i.delay):0;s&&(6===t.previousNode.type||0==r&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=Ic);let l=r;const d=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=d.length;let p=null;d.forEach((y,C)=>{t.currentQueryIndex=C;const D=t.createSubContext(e.options,y);s&&D.delayNextStep(s),y===t.element&&(p=D.currentTimeline),Pi(this,e.animation,D),D.currentTimeline.applyStylesToKeyframe(),l=Math.max(l,D.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(l),p&&(t.currentTimeline.mergeTimelineCollectedStyles(p),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,s=e.timings,l=Math.abs(s.duration),d=l*(t.currentQueryTotal-1);let p=l*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":p=d-p;break;case"full":p=r.currentStaggerTime}const C=t.currentTimeline;p&&C.delayNextStep(p);const D=C.currentTime;Pi(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-D+(i.startTime-r.currentTimeline.startTime)}}const Ic={};class ub{constructor(e,t,r,i,s,l,d,p){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=l,this.timelines=d,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Ic,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=p||new Sa(this._driver,t,0),d.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=Ec(r.duration)),null!=r.delay&&(i.delay=Ec(r.delay));const s=r.params;if(s){let l=i.params;l||(l=this.options.params={}),Object.keys(s).forEach(d=>{(!t||!l.hasOwnProperty(d))&&(l[d]=hf(s[d],l,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,s=new ub(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=Ic,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=r?r:0)+e.delay,easing:""},s=new gf(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,s,l){let d=[];if(i&&d.push(this.element),e.length>0){e=(e=e.replace(iD,"."+this._enterClassName)).replace(sD,"."+this._leaveClassName);let y=this._driver.query(this.element,e,1!=r);0!==r&&(y=r<0?y.slice(y.length+r,y.length):y.slice(0,r)),d.push(...y)}return!s&&0==d.length&&l.push(function VE(n){return new u.vHH(3014,jt)}()),d}}class Sa{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new Sa(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||Po,this._currentKeyframe[t]=Po}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&(this._previousKeyframe.easing=t);const s=i&&i.params||{},l=function oB(n,e){const t={};let r;return n.forEach(i=>{"*"===i?(r=r||Object.keys(e),r.forEach(s=>{t[s]=Po})):wl(i,!1,t)}),t}(e,this._globalTimelineStyles);Object.keys(l).forEach(d=>{const p=hf(l[d],s,r);this._pendingStyles[d]=p,this._localTimelineStyles.hasOwnProperty(d)||(this._backFill[d]=this._globalTimelineStyles.hasOwnProperty(d)?this._globalTimelineStyles[d]:Po),this._updateStyle(d,p)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(r=>{this._currentKeyframe[r]=e[r]}),Object.keys(this._localTimelineStyles).forEach(r=>{this._currentKeyframe.hasOwnProperty(r)||(this._currentKeyframe[r]=this._localTimelineStyles[r])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const r=this._styleSummary[t],i=e._styleSummary[t];(!r||i.time>r.time)&&this._updateStyle(t,i.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((d,p)=>{const y=wl(d,!0);Object.keys(y).forEach(C=>{const D=y[C];"!"==D?e.add(C):D==Po&&t.add(C)}),r||(y.offset=p/this.duration),i.push(y)});const s=e.size?Xg(e.values()):[],l=t.size?Xg(t.values()):[];if(r){const d=i[0],p=Zu(d);d.offset=0,p.offset=1,i=[d,p]}return pf(this.element,i,s,l,this.duration,this.startTime,this.easing,!1)}}class gf extends Sa{constructor(e,t,r,i,s,l,d=!1){super(e,t,l.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=d,this.timings={duration:l.duration,delay:l.delay,easing:l.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],l=r+t,d=t/l,p=wl(e[0],!1);p.offset=0,s.push(p);const y=wl(e[0],!1);y.offset=aD(d),s.push(y);const C=e.length-1;for(let D=1;D<=C;D++){let M=wl(e[D],!1);M.offset=aD((t+M.offset*r)/l),s.push(M)}r=l,t=0,i="",e=s}return pf(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function aD(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class db{}class ux extends db{normalizePropertyName(e,t){return Xv(e)}normalizeStyleValue(e,t,r,i){let s="";const l=r.toString().trim();if(dx[t]&&0!==r&&"0"!==r)if("number"==typeof r)s="px";else{const d=r.match(/^[+-]?[\d\.]+([a-z]*)$/);d&&0==d[1].length&&i.push(function PE(n,e){return new u.vHH(3005,jt)}())}return l+s}}const dx=(()=>function lD(n){const e={};return n.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function cD(n,e,t,r,i,s,l,d,p,y,C,D,M){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:s,toState:r,toStyles:l,timelines:d,queriedElements:p,preStyleProps:y,postStyleProps:C,totalTime:D,errors:M}}const mf={};class _f{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function yf(n,e,t,r,i){return n.some(s=>s(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){const i=this._stateStyles["*"],s=this._stateStyles[e],l=i?i.buildStyles(t,r):{};return s?s.buildStyles(t,r):l}build(e,t,r,i,s,l,d,p,y,C){const D=[],M=this.ast.options&&this.ast.options.params||mf,N=this.buildStyles(r,d&&d.params||mf,D),j=p&&p.params||mf,Q=this.buildStyles(i,j,D),Te=new Set,be=new Map,He=new Map,Ne="void"===i,mt={params:Object.assign(Object.assign({},M),j)},ot=C?[]:oD(e,t,this.ast.animation,s,l,N,Q,mt,y,D);let fn=0;if(ot.forEach(lr=>{fn=Math.max(lr.duration+lr.delay,fn)}),D.length)return cD(t,this._triggerName,r,i,Ne,N,Q,[],[],be,He,fn,D);ot.forEach(lr=>{const _n=lr.element,kn=Ki(be,_n,{});lr.preStyleProps.forEach(Ep=>kn[Ep]=!0);const Ko=Ki(He,_n,{});lr.postStyleProps.forEach(Ep=>Ko[Ep]=!0),_n!==t&&Te.add(_n)});const mn=Xg(Te.values());return cD(t,this._triggerName,r,i,Ne,N,Q,ot,mn,be,He,fn)}}class hx{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r={},i=Zu(this.defaultParams);return Object.keys(e).forEach(s=>{const l=e[s];null!=l&&(i[s]=l)}),this.styles.styles.forEach(s=>{if("string"!=typeof s){const l=s;Object.keys(l).forEach(d=>{let p=l[d];p.length>1&&(p=hf(p,i,t));const y=this.normalizer.normalizePropertyName(d,t);p=this.normalizer.normalizeStyleValue(d,y,p,t),r[y]=p})}}),r}}class dD{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states={},t.states.forEach(i=>{this.states[i.name]=new hx(i.style,i.options&&i.options.params||{},r)}),hD(this.states,"true","1"),hD(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new _f(e,i,this.states))}),this.fallbackTransition=function fx(n,e,t){return new _f(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(l,d)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(l=>l.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function hD(n,e,t){n.hasOwnProperty(e)?n.hasOwnProperty(t)||(n[t]=n[e]):n.hasOwnProperty(t)&&(n[e]=n[t])}const hb=new sm;class px{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations={},this._playersById={},this.players=[]}register(e,t){const r=[],s=ib(this._driver,t,r,[]);if(r.length)throw function zg(n){return new u.vHH(3503,jt)}();this._animations[e]=s}_buildPlayer(e,t,r){const i=e.element,s=GE(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],s=this._animations[e];let l;const d=new Map;if(s?(l=oD(this._driver,t,s,KE,Kv,{},{},r,hb,i),l.forEach(C=>{const D=Ki(d,C.element,{});C.postStyleProps.forEach(M=>D[M]=null)})):(i.push(function HM(){return new u.vHH(3300,jt)}()),l=[]),i.length)throw function qg(n){return new u.vHH(3504,jt)}();d.forEach((C,D)=>{Object.keys(C).forEach(M=>{C[M]=this._driver.computeStyle(D,M,Po)})});const y=vl(l.map(C=>{const D=d.get(C.element);return this._buildPlayer(C,{},D)}));return this._playersById[e]=y,y.onDestroy(()=>this.destroy(e)),this.players.push(y),y}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw function Wg(n){return new u.vHH(3301,jt)}();return t}listen(e,t,r,i){const s=$v(t,"","","");return Gv(this._getPlayer(e),r,s,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const s=this._getPlayer(e);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const gx="ng-animate-queued",fb="ng-animate-disabled",lB=[],pb={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},_x={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Js="__ng_removed";class om{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function bx(n){return null!=n?n:null}(r?e.value:e),r){const s=Zu(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const am="void",lm=new om(am);class gb{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,ys(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.hasOwnProperty(t))throw function Un(n,e){return new u.vHH(3302,jt)}();if(null==r||0==r.length)throw function tB(n){return new u.vHH(3303,jt)}();if(!function wx(n){return"start"==n||"done"==n}(r))throw function UE(n,e){return new u.vHH(3400,jt)}();const s=Ki(this._elementListeners,e,[]),l={name:t,phase:r,callback:i};s.push(l);const d=Ki(this._engine.statesByElement,e,{});return d.hasOwnProperty(t)||(ys(e,Yv),ys(e,Yv+"-"+t),d[t]=lm),()=>{this._engine.afterFlush(()=>{const p=s.indexOf(l);p>=0&&s.splice(p,1),this._triggers[t]||delete d[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw function GM(n){return new u.vHH(3401,jt)}();return t}trigger(e,t,r,i=!0){const s=this._getTrigger(t),l=new mb(this.id,t,e);let d=this._engine.statesByElement.get(e);d||(ys(e,Yv),ys(e,Yv+"-"+t),this._engine.statesByElement.set(e,d={}));let p=d[t];const y=new om(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&p&&y.absorbOptions(p.options),d[t]=y,p||(p=lm),y.value!==am&&p.value===y.value){if(!function vD(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const s=t[i];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(p.params,y.params)){const j=[],Q=s.matchStyles(p.value,p.params,j),Te=s.matchStyles(y.value,y.params,j);j.length?this._engine.reportError(j):this._engine.afterFlush(()=>{Dc(e,Q),Fo(e,Te)})}return}const M=Ki(this._engine.playersByElement,e,[]);M.forEach(j=>{j.namespaceId==this.id&&j.triggerName==t&&j.queued&&j.destroy()});let R=s.matchTransition(p.value,y.value,e,y.params),N=!1;if(!R){if(!i)return;R=s.fallbackTransition,N=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:R,fromState:p,toState:y,player:l,isFallbackTransition:N}),N||(ys(e,gx),l.onStart(()=>{Vo(e,gx)})),l.onDone(()=>{let j=this.players.indexOf(l);j>=0&&this.players.splice(j,1);const Q=this._engine.playersByElement.get(e);if(Q){let Te=Q.indexOf(l);Te>=0&&Q.splice(Te,1)}}),this.players.push(l),M.push(l),l}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,r)=>{delete t[e]}),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,uf,!0);r.forEach(i=>{if(i[Js])return;const s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(l=>l.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const s=this._engine.statesByElement.get(e),l=new Map;if(s){const d=[];if(Object.keys(s).forEach(p=>{if(l.set(p,s[p].value),this._triggers[p]){const y=this.trigger(e,p,am,i);y&&d.push(y)}}),d.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,l),r&&vl(d).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(s=>{const l=s.name;if(i.has(l))return;i.add(l);const p=this._triggers[l].fallbackTransition,y=r[l]||lm,C=new om(am),D=new mb(this.id,l,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:l,transition:p,fromState:y,toState:C,player:D,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let l=e;for(;l=l.parentNode;)if(r.statesByElement.get(l)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const s=e[Js];(!s||s===pb)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){ys(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const s=r.element,l=this._elementListeners.get(s);l&&l.forEach(d=>{if(d.name==r.triggerName){const p=$v(s,r.triggerName,r.fromState.value,r.toState.value);p._data=e,Gv(r.player,d.phase,p,d.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const s=r.transition.ast.depCount,l=i.transition.ast.depCount;return 0==s||0==l?s-l:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class yx{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,s)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new gb(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement,s=r.length-1;if(s>=0){let l=!1;if(void 0!==this.driver.getParentElement){let d=this.driver.getParentElement(t);for(;d;){const p=i.get(d);if(p){const y=r.indexOf(p);r.splice(y+1,0,e),l=!0;break}d=this.driver.getParentElement(d)}}else for(let d=s;d>=0;d--)if(this.driver.containsElement(r[d].hostElement,t)){r.splice(d+1,0,e),l=!0;break}l||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r){const i=Object.keys(r);for(let s=0;s<i.length;s++){const l=r[i[s]].namespaceId;if(l){const d=this._fetchNamespace(l);d&&t.add(d)}}}return t}trigger(e,t,r,i){if(cm(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!cm(t))return;const s=t[Js];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const l=this.collectedLeaveElements.indexOf(t);l>=0&&this.collectedLeaveElements.splice(l,1)}if(e){const l=this._fetchNamespace(e);l&&l.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),ys(e,fb)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Vo(e,fb))}removeNode(e,t,r,i){if(cm(t)){const s=e?this._fetchNamespace(e):null;if(s?s.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const l=this.namespacesByHostElement.get(t);l&&l.id!==e&&l.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,s){this.collectedLeaveElements.push(t),t[Js]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,r,i,s){return cm(t)?this._fetchNamespace(e).listen(t,r,i,s):()=>{}}_buildInstruction(e,t,r,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,uf,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,Qv,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return vl(this.players).onDone(()=>e());e()})}processLeaveNode(e){var t;const r=e[Js];if(r&&r.setForRemoval){if(e[Js]=pb,r.namespaceId){this.destroyInnerAnimations(e);const i=this._fetchNamespace(r.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,r.setForRemoval)}(null===(t=e.classList)||void 0===t?void 0:t.contains(fb))&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)ys(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?vl(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function $M(n){return new u.vHH(3402,jt)}()}_flushAnimations(e,t){const r=new sm,i=[],s=new Map,l=[],d=new Map,p=new Map,y=new Map,C=new Set;this.disabledNodes.forEach(tt=>{C.add(tt);const _t=this.driver.query(tt,".ng-animate-queued",!0);for(let wt=0;wt<_t.length;wt++)C.add(_t[wt])});const D=this.bodyNode,M=Array.from(this.statesByElement.keys()),R=mD(M,this.collectedEnterElements),N=new Map;let j=0;R.forEach((tt,_t)=>{const wt=KE+j++;N.set(_t,wt),tt.forEach(nn=>ys(nn,wt))});const Q=[],Te=new Set,be=new Set;for(let tt=0;tt<this.collectedLeaveElements.length;tt++){const _t=this.collectedLeaveElements[tt],wt=_t[Js];wt&&wt.setForRemoval&&(Q.push(_t),Te.add(_t),wt.hasAnimation?this.driver.query(_t,".ng-star-inserted",!0).forEach(nn=>Te.add(nn)):be.add(_t))}const He=new Map,Ne=mD(M,Array.from(Te));Ne.forEach((tt,_t)=>{const wt=Kv+j++;He.set(_t,wt),tt.forEach(nn=>ys(nn,wt))}),e.push(()=>{R.forEach((tt,_t)=>{const wt=N.get(_t);tt.forEach(nn=>Vo(nn,wt))}),Ne.forEach((tt,_t)=>{const wt=He.get(_t);tt.forEach(nn=>Vo(nn,wt))}),Q.forEach(tt=>{this.processLeaveNode(tt)})});const mt=[],ot=[];for(let tt=this._namespaceList.length-1;tt>=0;tt--)this._namespaceList[tt].drainQueuedTransitions(t).forEach(wt=>{const nn=wt.player,ii=wt.element;if(mt.push(nn),this.collectedEnterElements.length){const ls=ii[Js];if(ls&&ls.setForMove){if(ls.previousTriggersValues&&ls.previousTriggersValues.has(wt.triggerName)){const Dp=ls.previousTriggersValues.get(wt.triggerName),Sd=this.statesByElement.get(wt.element);Sd&&Sd[wt.triggerName]&&(Sd[wt.triggerName].value=Dp)}return void nn.destroy()}}const Ll=!D||!this.driver.containsElement(D,ii),oo=He.get(ii),Id=N.get(ii),Yn=this._buildInstruction(wt,r,Id,oo,Ll);if(Yn.errors&&Yn.errors.length)return void ot.push(Yn);if(Ll)return nn.onStart(()=>Dc(ii,Yn.fromStyles)),nn.onDestroy(()=>Fo(ii,Yn.toStyles)),void i.push(nn);if(wt.isFallbackTransition)return nn.onStart(()=>Dc(ii,Yn.fromStyles)),nn.onDestroy(()=>Fo(ii,Yn.toStyles)),void i.push(nn);const zW=[];Yn.timelines.forEach(ls=>{ls.stretchStartingKeyframe=!0,this.disabledNodes.has(ls.element)||zW.push(ls)}),Yn.timelines=zW,r.append(ii,Yn.timelines),l.push({instruction:Yn,player:nn,element:ii}),Yn.queriedElements.forEach(ls=>Ki(d,ls,[]).push(nn)),Yn.preStyleProps.forEach((ls,Dp)=>{const Sd=Object.keys(ls);if(Sd.length){let Tp=p.get(Dp);Tp||p.set(Dp,Tp=new Set),Sd.forEach(ML=>Tp.add(ML))}}),Yn.postStyleProps.forEach((ls,Dp)=>{const Sd=Object.keys(ls);let Tp=y.get(Dp);Tp||y.set(Dp,Tp=new Set),Sd.forEach(ML=>Tp.add(ML))})});if(ot.length){const tt=[];ot.forEach(_t=>{tt.push(function jE(n,e){return new u.vHH(3505,jt)}())}),mt.forEach(_t=>_t.destroy()),this.reportError(tt)}const fn=new Map,mn=new Map;l.forEach(tt=>{const _t=tt.element;r.has(_t)&&(mn.set(_t,_t),this._beforeAnimationBuild(tt.player.namespaceId,tt.instruction,fn))}),i.forEach(tt=>{const _t=tt.element;this._getPreviousPlayers(_t,!1,tt.namespaceId,tt.triggerName,null).forEach(nn=>{Ki(fn,_t,[]).push(nn),nn.destroy()})});const lr=Q.filter(tt=>yb(tt,p,y)),_n=new Map;gD(_n,this.driver,be,y,Po).forEach(tt=>{yb(tt,p,y)&&lr.push(tt)});const Ko=new Map;R.forEach((tt,_t)=>{gD(Ko,this.driver,new Set(tt),p,"!")}),lr.forEach(tt=>{const _t=_n.get(tt),wt=Ko.get(tt);_n.set(tt,Object.assign(Object.assign({},_t),wt))});const Ep=[],GW=[],$W={};l.forEach(tt=>{const{element:_t,player:wt,instruction:nn}=tt;if(r.has(_t)){if(C.has(_t))return wt.onDestroy(()=>Fo(_t,nn.toStyles)),wt.disabled=!0,wt.overrideTotalTime(nn.totalTime),void i.push(wt);let ii=$W;if(mn.size>1){let oo=_t;const Id=[];for(;oo=oo.parentNode;){const Yn=mn.get(oo);if(Yn){ii=Yn;break}Id.push(oo)}Id.forEach(Yn=>mn.set(Yn,ii))}const Ll=this._buildAnimation(wt.namespaceId,nn,fn,s,Ko,_n);if(wt.setRealPlayer(Ll),ii===$W)Ep.push(wt);else{const oo=this.playersByElement.get(ii);oo&&oo.length&&(wt.parentPlayer=vl(oo)),i.push(wt)}}else Dc(_t,nn.fromStyles),wt.onDestroy(()=>Fo(_t,nn.toStyles)),GW.push(wt),C.has(_t)&&i.push(wt)}),GW.forEach(tt=>{const _t=s.get(tt.element);if(_t&&_t.length){const wt=vl(_t);tt.setRealPlayer(wt)}}),i.forEach(tt=>{tt.parentPlayer?tt.syncPlayerEvents(tt.parentPlayer):tt.destroy()});for(let tt=0;tt<Q.length;tt++){const _t=Q[tt],wt=_t[Js];if(Vo(_t,Kv),wt&&wt.hasAnimation)continue;let nn=[];if(d.size){let Ll=d.get(_t);Ll&&Ll.length&&nn.push(...Ll);let oo=this.driver.query(_t,Qv,!0);for(let Id=0;Id<oo.length;Id++){let Yn=d.get(oo[Id]);Yn&&Yn.length&&nn.push(...Yn)}}const ii=nn.filter(Ll=>!Ll.destroyed);ii.length?_D(this,_t,ii):this.processLeaveNode(_t)}return Q.length=0,Ep.forEach(tt=>{this.players.push(tt),tt.onDone(()=>{tt.destroy();const _t=this.players.indexOf(tt);this.players.splice(_t,1)}),tt.play()}),Ep}elementContainsData(e,t){let r=!1;const i=t[Js];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,s){let l=[];if(t){const d=this.playersByQueriedElement.get(e);d&&(l=d)}else{const d=this.playersByElement.get(e);if(d){const p=!s||s==am;d.forEach(y=>{y.queued||!p&&y.triggerName!=i||l.push(y)})}}return(r||i)&&(l=l.filter(d=>!(r&&r!=d.namespaceId||i&&i!=d.triggerName))),l}_beforeAnimationBuild(e,t,r){const s=t.element,l=t.isRemovalTransition?void 0:e,d=t.isRemovalTransition?void 0:t.triggerName;for(const p of t.timelines){const y=p.element,C=y!==s,D=Ki(r,y,[]);this._getPreviousPlayers(y,C,l,d,t.toState).forEach(R=>{const N=R.getRealPlayer();N.beforeDestroy&&N.beforeDestroy(),R.destroy(),D.push(R)})}Dc(s,t.fromStyles)}_buildAnimation(e,t,r,i,s,l){const d=t.triggerName,p=t.element,y=[],C=new Set,D=new Set,M=t.timelines.map(N=>{const j=N.element;C.add(j);const Q=j[Js];if(Q&&Q.removedBeforeQueried)return new lf(N.duration,N.delay);const Te=j!==p,be=function yD(n){const e=[];return _b(n,e),e}((r.get(j)||lB).map(fn=>fn.getRealPlayer())).filter(fn=>!!fn.element&&fn.element===j),He=s.get(j),Ne=l.get(j),mt=GE(0,this._normalizer,0,N.keyframes,He,Ne),ot=this._buildPlayer(N,mt,be);if(N.subTimeline&&i&&D.add(j),Te){const fn=new mb(e,d,j);fn.setRealPlayer(ot),y.push(fn)}return ot});y.forEach(N=>{Ki(this.playersByQueriedElement,N.element,[]).push(N),N.onDone(()=>function vx(n,e,t){let r;if(n instanceof Map){if(r=n.get(e),r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}}else if(r=n[e],r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&delete n[e]}return r}(this.playersByQueriedElement,N.element,N))}),C.forEach(N=>ys(N,df));const R=vl(M);return R.onDestroy(()=>{C.forEach(N=>Vo(N,df)),Fo(p,t.toStyles)}),D.forEach(N=>{Ki(i,N,[]).push(R)}),R}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new lf(e.duration,e.delay)}}class mb{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new lf,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(r=>Gv(e,t,void 0,r))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Ki(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function cm(n){return n&&1===n.nodeType}function pD(n,e){const t=n.style.display;return n.style.display=null!=e?e:"none",t}function gD(n,e,t,r,i){const s=[];t.forEach(p=>s.push(pD(p)));const l=[];r.forEach((p,y)=>{const C={};p.forEach(D=>{const M=C[D]=e.computeStyle(y,D,i);(!M||0==M.length)&&(y[Js]=_x,l.push(y))}),n.set(y,C)});let d=0;return t.forEach(p=>pD(p,s[d++])),l}function mD(n,e){const t=new Map;if(n.forEach(d=>t.set(d,[])),0==e.length)return t;const i=new Set(e),s=new Map;function l(d){if(!d)return 1;let p=s.get(d);if(p)return p;const y=d.parentNode;return p=t.has(y)?y:i.has(y)?1:l(y),s.set(d,p),p}return e.forEach(d=>{const p=l(d);1!==p&&t.get(p).push(d)}),t}function ys(n,e){var t;null===(t=n.classList)||void 0===t||t.add(e)}function Vo(n,e){var t;null===(t=n.classList)||void 0===t||t.remove(e)}function _D(n,e,t){vl(t).onDone(()=>n.processLeaveNode(e))}function _b(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof ME?_b(r.players,e):e.push(r)}}function yb(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(s=>i.add(s)):e.set(n,r),t.delete(n),!0}class um{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,s)=>{},this._transitionEngine=new yx(e,t,r),this._timelineEngine=new px(e,t,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(e,t,r,i,s){const l=e+"-"+i;let d=this._triggerCache[l];if(!d){const p=[],C=ib(this._driver,s,p,[]);if(p.length)throw function UM(n,e){return new u.vHH(3404,jt)}();d=function uD(n,e,t){return new dD(n,e,t)}(i,C,this._normalizer),this._triggerCache[l]=d}this._transitionEngine.registerTrigger(t,i,d)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[s,l]=$E(r);this._timelineEngine.command(s,t,l,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,s){if("@"==r.charAt(0)){const[l,d]=$E(r);return this._timelineEngine.listen(l,t,d,s)}return this._transitionEngine.listen(e,t,r,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let Ex=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s={}),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&Fo(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Fo(this._element,this._initialStyles),this._endStyles&&(Fo(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Dc(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Dc(this._element,this._endStyles),this._endStyles=null),Fo(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function vb(n){let e=null;const t=Object.keys(n);for(let r=0;r<t.length;r++){const i=t[r];Dx(i)&&(e=e||{},e[i]=n[i])}return e}function Dx(n){return"display"===n||"position"===n}class bD{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,r){return e.animate(t,r)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};if(this.hasStarted()){const t=this._finalKeyframe;Object.keys(t).forEach(r=>{"offset"!=r&&(e[r]=this._finished?t[r]:tD(this.element,r))})}this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class Tx{validateStyleProperty(e){return qE(e)}matchesElement(e,t){return!1}containsElement(e,t){return Wv(e,t)}getParentElement(e){return Kg(e)}query(e,t,r){return Zv(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,s,l=[]){const p={duration:r,delay:i,fill:0==i?"both":"forwards"};s&&(p.easing=s);const y={},C=l.filter(M=>M instanceof bD);(function QM(n,e){return 0===n||0===e})(r,i)&&C.forEach(M=>{let R=M.currentSnapshot;Object.keys(R).forEach(N=>y[N]=R[N])}),t=function eD(n,e,t){const r=Object.keys(t);if(r.length&&e.length){let s=e[0],l=[];if(r.forEach(d=>{s.hasOwnProperty(d)||l.push(d),s[d]=t[d]}),l.length)for(var i=1;i<e.length;i++){let d=e[i];l.forEach(function(p){d[p]=tD(n,p)})}}return e}(e,t=t.map(M=>wl(M,!1)),y);const D=function Cx(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=vb(e[0]),e.length>1&&(r=vb(e[e.length-1]))):e&&(t=vb(e)),t||r?new Ex(n,t,r):null}(e,t);return new bD(e,t,p,D)}}let vf=(()=>{class n extends Ov{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:u.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?TE(t):t;return Xs(this._renderer,null,r,"register",[i]),new Ix(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.FYo),u.LFG(ue))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class Ix extends class EE{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new bb(this._id,e,t||{},this._renderer)}}class bb{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return Xs(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0}}function Xs(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const hm="@.disabled";let bf=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(s,l)=>{const d=null==l?void 0:l.parentNode(s);d&&l.removeChild(d,s)}}createRenderer(t,r){const s=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let C=this._rendererCache.get(s);return C||(C=new wD("",s,this.engine),this._rendererCache.set(s,C)),C}const l=r.id,d=r.id+"-"+this._currentId;this._currentId++,this.engine.register(d,t);const p=C=>{Array.isArray(C)?C.forEach(p):this.engine.registerTrigger(l,d,t,C.name,C)};return r.data.animation.forEach(p),new Sx(this,d,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[l,d]=s;l(d)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.FYo),u.LFG(um),u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class wD{constructor(e,t,r){this.namespaceId=e,this.delegate=t,this.engine=r,this.destroyNode=this.delegate.destroyNode?i=>t.destroyNode(i):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==hm?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class Sx extends wD{constructor(e,t,r,i){super(t,r,i),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==hm?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.substr(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function Ax(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.substr(1),l="";return"@"!=s.charAt(0)&&([s,l]=function fm(n){const e=n.indexOf(".");return[n.substring(0,e),n.substr(e+1)]}(s)),this.engine.listen(this.namespaceId,i,s,l,d=>{this.factory.scheduleListenerCallback(d._data||-1,r,d)})}return this.delegate.listen(e,t,r)}}let pm=(()=>{class n extends um{constructor(t,r,i){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ue),u.LFG(Yg),u.LFG(db))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const Sc=new u.OlP("AnimationModuleType"),wb=[{provide:Ov,useClass:vf},{provide:db,useFactory:function Mx(){return new ux}},{provide:um,useClass:pm},{provide:u.FYo,useFactory:function xx(n,e,t){return new bf(n,e,t)},deps:[Dn,um,u.R0b]}],gm=[{provide:Yg,useFactory:()=>new Tx},{provide:Sc,useValue:"BrowserAnimations"},...wb],CD=[{provide:Yg,useClass:WE},{provide:Sc,useValue:"NoopAnimations"},...wb];let Rx=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?CD:gm}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:gm,imports:[lu]}),n})();const Nx=new u.OlP("mat-sanity-checks",{providedIn:"root",factory:function Ox(){return!0}});let mr=(()=>{class n{constructor(t,r,i){this._sanityChecks=r,this._document=i,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!ev()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(CE),u.LFG(Nx,8),u.LFG(ue))},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[Ni],Ni]}),n})();function SD(n){return class extends n{constructor(...e){super(...e),this._disabled=!1}get disabled(){return this._disabled}set disabled(e){this._disabled=Or(e)}}}function Cb(n,e){return class extends n{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const r=t||this.defaultColor;r!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),r&&this._elementRef.nativeElement.classList.add(`mat-${r}`),this._color=r)}}}function AD(n){return class extends n{constructor(...e){super(...e),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=Or(e)}}}function MD(n){return class extends n{constructor(...e){super(...e),this.stateChanges=new St.x,this.errorState=!1}updateErrorState(){const e=this.errorState,s=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);s!==e&&(this.errorState=s,this.stateChanges.next())}}}let Eb=(()=>{class n{isErrorState(t,r){return!!(t&&t.invalid&&(t.touched||r&&r.submitted))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class RD{constructor(e,t,r){this._renderer=e,this.element=t,this.config=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const Cf={enterDuration:225,exitDuration:150},kD=Jy({passive:!0}),Tb=["mousedown","touchstart"],OD=["mouseup","mouseleave","touchend","touchcancel"];class ND{constructor(e,t,r,i){this._target=e,this._ngZone=t,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=fl(r))}fadeInRipple(e,t,r={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=Object.assign(Object.assign({},Cf),r.animation);r.centered&&(e=i.left+i.width/2,t=i.top+i.height/2);const l=r.radius||function PD(n,e,t){const r=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),i=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(r*r+i*i)}(e,t,i),d=e-i.left,p=t-i.top,y=s.enterDuration,C=document.createElement("div");C.classList.add("mat-ripple-element"),C.style.left=d-l+"px",C.style.top=p-l+"px",C.style.height=2*l+"px",C.style.width=2*l+"px",null!=r.color&&(C.style.backgroundColor=r.color),C.style.transitionDuration=`${y}ms`,this._containerElement.appendChild(C),function ym(n){window.getComputedStyle(n).getPropertyValue("opacity")}(C),C.style.transform="scale(1)";const D=new RD(this,C,r);return D.state=0,this._activeRipples.add(D),r.persistent||(this._mostRecentTransientRipple=D),this._runTimeoutOutsideZone(()=>{const M=D===this._mostRecentTransientRipple;D.state=1,!r.persistent&&(!M||!this._isPointerDown)&&D.fadeOut()},y),D}fadeOutRipple(e){const t=this._activeRipples.delete(e);if(e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!t)return;const r=e.element,i=Object.assign(Object.assign({},Cf),e.config.animation);r.style.transitionDuration=`${i.exitDuration}ms`,r.style.opacity="0",e.state=2,this._runTimeoutOutsideZone(()=>{e.state=3,r.remove()},i.exitDuration)}fadeOutAll(){this._activeRipples.forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=fl(e);!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,this._registerEvents(Tb))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(OD),this._pointerUpEventsRegistered=!0)}_onMousedown(e){const t=vE(e),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!r&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!bE(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let r=0;r<t.length;r++)this.fadeInRipple(t[r].clientX,t[r].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_runTimeoutOutsideZone(e,t=0){this._ngZone.runOutsideAngular(()=>setTimeout(e,t))}_registerEvents(e){this._ngZone.runOutsideAngular(()=>{e.forEach(t=>{this._triggerElement.addEventListener(t,this,kD)})})}_removeTriggerEvents(){this._triggerElement&&(Tb.forEach(e=>{this._triggerElement.removeEventListener(e,this,kD)}),this._pointerUpEventsRegistered&&OD.forEach(e=>{this._triggerElement.removeEventListener(e,this,kD)}))}}const jx=new u.OlP("mat-ripple-global-options");let Ef=(()=>{class n{constructor(t,r,i,s,l){this._elementRef=t,this._animationMode=l,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new ND(this,r,t,i)}get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,r=0,i){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,r,Object.assign(Object.assign({},this.rippleConfig),i)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),t))}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(u.R0b),u.Y36(pi),u.Y36(jx,8),u.Y36(Sc,8))},n.\u0275dir=u.lG2({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,r){2&t&&u.ekj("mat-ripple-unbounded",r.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),vm=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[mr],mr]}),n})();function FD(n,e){}class Ib{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}}const Yx={dialogContainer:Nv("dialogContainer",[Fv("void, exit",yl({opacity:0,transform:"scale(0.7)"})),Fv("enter",yl({transform:"none"})),Lv("* => enter",DE([Pv("150ms cubic-bezier(0, 0, 0.2, 1)",yl({transform:"none",opacity:1})),SE("@*",IE(),{optional:!0})])),Lv("* => void, * => exit",DE([Pv("75ms cubic-bezier(0.4, 0.0, 0.2, 1)",yl({opacity:0})),SE("@*",IE(),{optional:!0})]))])};let LD=(()=>{class n extends ju{constructor(t,r,i,s,l,d,p,y){super(),this._elementRef=t,this._focusTrapFactory=r,this._changeDetectorRef=i,this._config=l,this._interactivityChecker=d,this._ngZone=p,this._focusMonitor=y,this._animationStateChanged=new u.vpe,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=C=>(this._portalOutlet.hasAttached(),this._portalOutlet.attachDomPortal(C)),this._ariaLabelledBy=l.ariaLabelledBy||null,this._document=s}_initializeWithAttachedContent(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=Xy())}attachComponentPortal(t){return this._portalOutlet.hasAttached(),this._portalOutlet.attachComponentPortal(t)}attachTemplatePortal(t){return this._portalOutlet.hasAttached(),this._portalOutlet.attachTemplatePortal(t)}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(t,r){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const i=()=>{t.removeEventListener("blur",i),t.removeEventListener("mousedown",i),t.removeAttribute("tabindex")};t.addEventListener("blur",i),t.addEventListener("mousedown",i)})),t.focus(r)}_focusByCssSelector(t,r){let i=this._elementRef.nativeElement.querySelector(t);i&&this._forceFocus(i,r)}_trapFocus(){const t=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||t.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(r=>{r||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const t=this._elementFocusedBeforeDialogWasOpened;if(this._config.restoreFocus&&t&&"function"==typeof t.focus){const r=Xy(),i=this._elementRef.nativeElement;(!r||r===this._document.body||r===i||i.contains(r))&&(this._focusMonitor?(this._focusMonitor.focusVia(t,this._closeInteractionType),this._closeInteractionType=null):t.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const t=this._elementRef.nativeElement,r=Xy();return t===r||t.contains(r)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(TM),u.Y36(u.sBO),u.Y36(ue,8),u.Y36(Ib),u.Y36(Sv),u.Y36(u.R0b),u.Y36(Hg))},n.\u0275dir=u.lG2({type:n,viewQuery:function(t,r){if(1&t&&u.Gf(Ng,7),2&t){let i;u.iGM(i=u.CRH())&&(r._portalOutlet=i.first)}},features:[u.qOj]}),n})(),TB=(()=>{class n extends LD{constructor(){super(...arguments),this._state="enter"}_onAnimationDone({toState:t,totalTime:r}){"enter"===t?(this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:r})):"exit"===t&&(this._restoreFocus(),this._animationStateChanged.next({state:"closed",totalTime:r}))}_onAnimationStart({toState:t,totalTime:r}){"enter"===t?this._animationStateChanged.next({state:"opening",totalTime:r}):("exit"===t||"void"===t)&&this._animationStateChanged.next({state:"closing",totalTime:r})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}_initializeWithAttachedContent(){super._initializeWithAttachedContent(),this._config.delayFocusTrap||this._trapFocus()}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275cmp=u.Xpm({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1","aria-modal","true",1,"mat-dialog-container"],hostVars:6,hostBindings:function(t,r){1&t&&u.WFA("@dialogContainer.start",function(s){return r._onAnimationStart(s)})("@dialogContainer.done",function(s){return r._onAnimationDone(s)}),2&t&&(u.Ikx("id",r._id),u.uIk("role",r._config.role)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledBy)("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null),u.d8E("@dialogContainer",r._state))},features:[u.qOj],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,r){1&t&&u.YNc(0,FD,0,0,"ng-template",0)},directives:[Ng],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[Yx.dialogContainer]}}),n})(),IB=0;class Qx{constructor(e,t,r="mat-dialog-"+IB++){this._overlayRef=e,this._containerInstance=t,this.id=r,this.disableClose=this._containerInstance._config.disableClose,this._afterOpened=new St.x,this._afterClosed=new St.x,this._beforeClosed=new St.x,this._state=0,t._id=r,t._animationStateChanged.pipe(tr(i=>"opened"===i.state),(0,$r.q)(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),t._animationStateChanged.pipe(tr(i=>"closed"===i.state),(0,$r.q)(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._afterClosed.next(this._result),this._afterClosed.complete(),this.componentInstance=null,this._overlayRef.dispose()}),e.keydownEvents().pipe(tr(i=>27===i.keyCode&&!this.disableClose&&!function hE(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}(i))).subscribe(i=>{i.preventDefault(),VD(this,"keyboard")}),e.backdropClick().subscribe(()=>{this.disableClose?this._containerInstance._recaptureFocus():VD(this,"mouse")})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(tr(t=>"closing"===t.state),(0,$r.q)(1)).subscribe(t=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),t.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._afterClosed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._overlayRef.backdropClick()}keydownEvents(){return this._overlayRef.keydownEvents()}updatePosition(e){let t=this._getPositionStrategy();return e&&(e.left||e.right)?e.left?t.left(e.left):t.right(e.right):t.centerHorizontally(),e&&(e.top||e.bottom)?e.top?t.top(e.top):t.bottom(e.bottom):t.centerVertically(),this._overlayRef.updatePosition(),this}updateSize(e="",t=""){return this._overlayRef.updateSize({width:e,height:t}),this._overlayRef.updatePosition(),this}addPanelClass(e){return this._overlayRef.addPanelClass(e),this}removePanelClass(e){return this._overlayRef.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._overlayRef.dispose()}_getPositionStrategy(){return this._overlayRef.getConfig().positionStrategy}}function VD(n,e,t){return void 0!==n._containerInstance&&(n._containerInstance._closeInteractionType=e),n.close(t)}const Jx=new u.OlP("MatDialogData"),SB=new u.OlP("mat-dialog-default-options"),Xx=new u.OlP("mat-dialog-scroll-strategy"),AB={provide:Xx,deps:[fv],useFactory:function bm(n){return()=>n.scrollStrategies.block()}};let BD=(()=>{class n{constructor(t,r,i,s,l,d,p,y,C,D){this._overlay=t,this._injector=r,this._defaultOptions=i,this._parentDialog=s,this._overlayContainer=l,this._dialogRefConstructor=p,this._dialogContainerType=y,this._dialogDataToken=C,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new St.x,this._afterOpenedAtThisLevel=new St.x,this._ariaHiddenElements=new Map,this.afterAllClosed=xi(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(ci(void 0))),this._scrollStrategy=d}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(t,r){r=function UD(n,e){return Object.assign(Object.assign({},e),n)}(r,this._defaultOptions||new Ib),r.id&&this.getDialogById(r.id);const i=this._createOverlay(r),s=this._attachDialogContainer(i,r),l=this._attachDialogContent(t,s,i,r);return this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(l),l.afterClosed().subscribe(()=>this._removeOpenDialog(l)),this.afterOpened.next(l),s._initializeWithAttachedContent(),l}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(r=>r.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_createOverlay(t){const r=this._getOverlayConfig(t);return this._overlay.create(r)}_getOverlayConfig(t){const r=new bc({positionStrategy:this._overlay.position().global(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(r.backdropClass=t.backdropClass),r}_attachDialogContainer(t,r){const s=u.zs3.create({parent:r&&r.viewContainerRef&&r.viewContainerRef.injector||this._injector,providers:[{provide:Ib,useValue:r}]}),l=new Og(this._dialogContainerType,r.viewContainerRef,s,r.componentFactoryResolver);return t.attach(l).instance}_attachDialogContent(t,r,i,s){const l=new this._dialogRefConstructor(i,r,s.id);if(t instanceof u.Rgc)r.attachTemplatePortal(new sv(t,null,{$implicit:s.data,dialogRef:l}));else{const d=this._createInjector(s,l,r),p=r.attachComponentPortal(new Og(t,s.viewContainerRef,d,s.componentFactoryResolver));l.componentInstance=p.instance}return l.updateSize(s.width,s.height).updatePosition(s.position),l}_createInjector(t,r,i){const s=t&&t.viewContainerRef&&t.viewContainerRef.injector,l=[{provide:this._dialogContainerType,useValue:i},{provide:this._dialogDataToken,useValue:t.data},{provide:this._dialogRefConstructor,useValue:r}];return t.direction&&(!s||!s.get(Uu,null,u.XFs.Optional))&&l.push({provide:Uu,useValue:{value:t.direction,change:Ke()}}),u.zs3.create({parent:s||this._injector,providers:l})}_removeOpenDialog(t){const r=this.openDialogs.indexOf(t);r>-1&&(this.openDialogs.splice(r,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((i,s)=>{i?s.setAttribute("aria-hidden",i):s.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const t=this._overlayContainer.getContainerElement();if(t.parentElement){const r=t.parentElement.children;for(let i=r.length-1;i>-1;i--){let s=r[i];s!==t&&"SCRIPT"!==s.nodeName&&"STYLE"!==s.nodeName&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_closeDialogs(t){let r=t.length;for(;r--;)t[r].close()}}return n.\u0275fac=function(t){u.$Z()},n.\u0275dir=u.lG2({type:n}),n})(),Mc=(()=>{class n extends BD{constructor(t,r,i,s,l,d,p,y){super(t,r,s,d,p,l,Qx,TB,Jx,y)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(fv),u.LFG(u.zs3),u.LFG(he,8),u.LFG(SB,8),u.LFG(Xx),u.LFG(n,12),u.LFG(Fg),u.LFG(Sc,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),MB=(()=>{class n{constructor(t,r,i){this.dialogRef=t,this._elementRef=r,this._dialog=i,this.type="button"}ngOnInit(){this.dialogRef||(this.dialogRef=function HD(n,e){let t=n.nativeElement.parentElement;for(;t&&!t.classList.contains("mat-dialog-container");)t=t.parentElement;return t?e.find(r=>r.id===t.id):null}(this._elementRef,this._dialog.openDialogs))}ngOnChanges(t){const r=t._matDialogClose||t._matDialogCloseResult;r&&(this.dialogResult=r.currentValue)}_onButtonClick(t){VD(this.dialogRef,0===t.screenX&&0===t.screenY?"keyboard":"mouse",this.dialogResult)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Qx,8),u.Y36(u.SBq),u.Y36(Mc))},n.\u0275dir=u.lG2({type:n,selectors:[["","mat-dialog-close",""],["","matDialogClose",""]],hostVars:2,hostBindings:function(t,r){1&t&&u.NdJ("click",function(s){return r._onButtonClick(s)}),2&t&&u.uIk("aria-label",r.ariaLabel||null)("type",r.type)},inputs:{ariaLabel:["aria-label","ariaLabel"],type:"type",dialogResult:["mat-dialog-close","dialogResult"],_matDialogClose:["matDialogClose","_matDialogClose"]},exportAs:["matDialogClose"],features:[u.TTD]}),n})(),xB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[Mc,AB],imports:[[oV,j0,mr],mr]}),n})();class Sb{constructor(e,t,r,i,s,l,d,p,y,C,D,M,R,N,j,Q){this.id=e,this.VinCode=t,this.image=r,this.manufacturer=i,this.model=s,this.mile=l,this.year=d,this.price=p,this.phoneNumber=y,this.ariivesIn=C,this.driveTrainGeo=D,this.driveTrainEng=M,this.fuelTypeGeo=R,this.fuelTypeEng=N,this.transmissionGeo=j,this.transmissionEng=Q}}class Ab{}let xc=(()=>{class n{constructor(t){this.proxy=t,this.updateEmitter=new u.vpe}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Hy))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function GD(n,e=vc){return(0,Bn.e)((t,r)=>{let i=null,s=null,l=null;const d=()=>{if(i){i.unsubscribe(),i=null;const y=s;s=null,r.next(y)}};function p(){const y=l+n,C=e.now();if(C<y)return i=this.schedule(void 0,y-C),void r.add(i);d()}t.subscribe((0,an.x)(r,y=>{s=y,l=e.now(),i||(i=e.schedule(p,n),r.add(i))},()=>{d(),r.complete()},void 0,()=>{s=i=null}))})}let rR=(()=>{class n{create(t){return"undefined"==typeof MutationObserver?null:new MutationObserver(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),RB=(()=>{class n{constructor(t){this._mutationObserverFactory=t,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((t,r)=>this._cleanupObserver(r))}observe(t){const r=fl(t);return new Vn.y(i=>{const l=this._observeElement(r).subscribe(i);return()=>{l.unsubscribe(),this._unobserveElement(r)}})}_observeElement(t){if(this._observedElements.has(t))this._observedElements.get(t).count++;else{const r=new St.x,i=this._mutationObserverFactory.create(s=>r.next(s));i&&i.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:i,stream:r,count:1})}return this._observedElements.get(t).stream}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){const{observer:r,stream:i}=this._observedElements.get(t);r&&r.disconnect(),i.complete(),this._observedElements.delete(t)}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(rR))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),kB=(()=>{class n{constructor(t,r,i){this._contentObserver=t,this._elementRef=r,this._ngZone=i,this.event=new u.vpe,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(t){this._disabled=Or(t),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(t){this._debounce=function D0(n,e=0){return function oA(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}(t),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?t.pipe(GD(this.debounce)):t).subscribe(this.event)})}_unsubscribe(){var t;null===(t=this._currentSubscription)||void 0===t||t.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(RB),u.Y36(u.SBq),u.Y36(u.R0b))},n.\u0275dir=u.lG2({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),n})(),iR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[rR]}),n})();const sR=["connectionContainer"],oR=["inputContainer"],OB=["label"];function aR(n,e){1&n&&(u.ynx(0),u.TgZ(1,"div",14),u._UZ(2,"div",15)(3,"div",16)(4,"div",17),u.qZA(),u.TgZ(5,"div",18),u._UZ(6,"div",15)(7,"div",16)(8,"div",17),u.qZA(),u.BQk())}function Mb(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",19),u.NdJ("cdkObserveContent",function(){return u.CHM(t),u.oxw().updateOutlineGap()}),u.Hsn(1,1),u.qZA()}if(2&n){const t=u.oxw();u.Q6J("cdkObserveContentDisabled","outline"!=t.appearance)}}function lR(n,e){if(1&n&&(u.ynx(0),u.Hsn(1,2),u.TgZ(2,"span"),u._uU(3),u.qZA(),u.BQk()),2&n){const t=u.oxw(2);u.xp6(3),u.Oqu(t._control.placeholder)}}function eo(n,e){1&n&&u.Hsn(0,3,["*ngSwitchCase","true"])}function cR(n,e){1&n&&(u.TgZ(0,"span",23),u._uU(1," *"),u.qZA())}function xb(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"label",20,21),u.NdJ("cdkObserveContent",function(){return u.CHM(t),u.oxw().updateOutlineGap()}),u.YNc(2,lR,4,1,"ng-container",12),u.YNc(3,eo,1,0,"ng-content",12),u.YNc(4,cR,2,0,"span",22),u.qZA()}if(2&n){const t=u.oxw();u.ekj("mat-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-form-field-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-accent","accent"==t.color)("mat-warn","warn"==t.color),u.Q6J("cdkObserveContentDisabled","outline"!=t.appearance)("id",t._labelId)("ngSwitch",t._hasLabel()),u.uIk("for",t._control.id)("aria-owns",t._control.id),u.xp6(2),u.Q6J("ngSwitchCase",!1),u.xp6(1),u.Q6J("ngSwitchCase",!0),u.xp6(1),u.Q6J("ngIf",!t.hideRequiredMarker&&t._control.required&&!t._control.disabled)}}function uR(n,e){1&n&&(u.TgZ(0,"div",24),u.Hsn(1,4),u.qZA())}function dR(n,e){if(1&n&&(u.TgZ(0,"div",25),u._UZ(1,"span",26),u.qZA()),2&n){const t=u.oxw();u.xp6(1),u.ekj("mat-accent","accent"==t.color)("mat-warn","warn"==t.color)}}function Rb(n,e){if(1&n&&(u.TgZ(0,"div"),u.Hsn(1,5),u.qZA()),2&n){const t=u.oxw();u.Q6J("@transitionMessages",t._subscriptAnimationState)}}function $D(n,e){if(1&n&&(u.TgZ(0,"div",30),u._uU(1),u.qZA()),2&n){const t=u.oxw(2);u.Q6J("id",t._hintLabelId),u.xp6(1),u.Oqu(t.hintLabel)}}function zD(n,e){if(1&n&&(u.TgZ(0,"div",27),u.YNc(1,$D,2,2,"div",28),u.Hsn(2,6),u._UZ(3,"div",29),u.Hsn(4,7),u.qZA()),2&n){const t=u.oxw();u.Q6J("@transitionMessages",t._subscriptAnimationState),u.xp6(1),u.Q6J("ngIf",t.hintLabel)}}const hR=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],qD=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],pR=new u.OlP("MatError"),kb={transitionMessages:Nv("transitionMessages",[Fv("enter",yl({opacity:1,transform:"translateY(0%)"})),Lv("void => enter",[yl({opacity:0,transform:"translateY(-5px)"}),Pv("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let Yi=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n}),n})();const mR=new u.OlP("MatHint");let wm=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["mat-label"]]}),n})(),_R=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["mat-placeholder"]]}),n})();const VB=new u.OlP("MatPrefix"),WD=new u.OlP("MatSuffix");let ZD=0;const Ob=Cb(class{constructor(n){this._elementRef=n}},"primary"),YD=new u.OlP("MAT_FORM_FIELD_DEFAULT_OPTIONS"),QD=new u.OlP("MatFormField");let JD=(()=>{class n extends Ob{constructor(t,r,i,s,l,d,p){super(t),this._changeDetectorRef=r,this._dir=i,this._defaults=s,this._platform=l,this._ngZone=d,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new St.x,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+ZD++,this._labelId="mat-form-field-label-"+ZD++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==p,this.appearance=s&&s.appearance?s.appearance:"legacy",this._hideRequiredMarker=!(!s||null==s.hideRequiredMarker)&&s.hideRequiredMarker}get appearance(){return this._appearance}set appearance(t){const r=this._appearance;this._appearance=t||this._defaults&&this._defaults.appearance||"legacy","outline"===this._appearance&&r!==t&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(t){this._hideRequiredMarker=Or(t)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(t){this._hintLabel=t,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(t){t!==this._floatLabel&&(this._floatLabel=t||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(t){this._explicitFormFieldControl=t}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const t=this._control;t.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${t.controlType}`),t.stateChanges.pipe(ci(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),t.ngControl&&t.ngControl.valueChanges&&t.ngControl.valueChanges.pipe(Zs(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(Zs(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),(0,Hu.T)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(ci(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(ci(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(Zs(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(t){const r=this._control?this._control.ngControl:null;return r&&r[t]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,Gy(this._label.nativeElement,"transitionend").pipe((0,$r.q)(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let t=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&t.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const r=this._hintChildren?this._hintChildren.find(s=>"start"===s.align):null,i=this._hintChildren?this._hintChildren.find(s=>"end"===s.align):null;r?t.push(r.id):this._hintLabel&&t.push(this._hintLabelId),i&&t.push(i.id)}else this._errorChildren&&t.push(...this._errorChildren.map(r=>r.id));this._control.setDescribedByIds(t)}}_validateControlChild(){}updateOutlineGap(){const t=this._label?this._label.nativeElement:null,r=this._connectionContainerRef.nativeElement,i=".mat-form-field-outline-start",s=".mat-form-field-outline-gap";if("outline"!==this.appearance||!this._platform.isBrowser)return;if(!t||!t.children.length||!t.textContent.trim()){const C=r.querySelectorAll(`${i}, ${s}`);for(let D=0;D<C.length;D++)C[D].style.width="0";return}if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let l=0,d=0;const p=r.querySelectorAll(i),y=r.querySelectorAll(s);if(this._label&&this._label.nativeElement.children.length){const C=r.getBoundingClientRect();if(0===C.width&&0===C.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const D=this._getStartEnd(C),M=t.children,R=this._getStartEnd(M[0].getBoundingClientRect());let N=0;for(let j=0;j<M.length;j++)N+=M[j].offsetWidth;l=Math.abs(R-D)-5,d=N>0?.75*N+10:0}for(let C=0;C<p.length;C++)p[C].style.width=`${l}px`;for(let C=0;C<y.length;C++)y[C].style.width=`${d}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(t){return this._dir&&"rtl"===this._dir.value?t.right:t.left}_isAttachedToDOM(){const t=this._elementRef.nativeElement;if(t.getRootNode){const r=t.getRootNode();return r&&r!==t}return document.documentElement.contains(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(u.sBO),u.Y36(Uu,8),u.Y36(YD,8),u.Y36(pi),u.Y36(u.R0b),u.Y36(Sc,8))},n.\u0275cmp=u.Xpm({type:n,selectors:[["mat-form-field"]],contentQueries:function(t,r,i){if(1&t&&(u.Suo(i,Yi,5),u.Suo(i,Yi,7),u.Suo(i,wm,5),u.Suo(i,wm,7),u.Suo(i,_R,5),u.Suo(i,pR,5),u.Suo(i,mR,5),u.Suo(i,VB,5),u.Suo(i,WD,5)),2&t){let s;u.iGM(s=u.CRH())&&(r._controlNonStatic=s.first),u.iGM(s=u.CRH())&&(r._controlStatic=s.first),u.iGM(s=u.CRH())&&(r._labelChildNonStatic=s.first),u.iGM(s=u.CRH())&&(r._labelChildStatic=s.first),u.iGM(s=u.CRH())&&(r._placeholderChild=s.first),u.iGM(s=u.CRH())&&(r._errorChildren=s),u.iGM(s=u.CRH())&&(r._hintChildren=s),u.iGM(s=u.CRH())&&(r._prefixChildren=s),u.iGM(s=u.CRH())&&(r._suffixChildren=s)}},viewQuery:function(t,r){if(1&t&&(u.Gf(sR,7),u.Gf(oR,5),u.Gf(OB,5)),2&t){let i;u.iGM(i=u.CRH())&&(r._connectionContainerRef=i.first),u.iGM(i=u.CRH())&&(r._inputContainerRef=i.first),u.iGM(i=u.CRH())&&(r._label=i.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(t,r){2&t&&u.ekj("mat-form-field-appearance-standard","standard"==r.appearance)("mat-form-field-appearance-fill","fill"==r.appearance)("mat-form-field-appearance-outline","outline"==r.appearance)("mat-form-field-appearance-legacy","legacy"==r.appearance)("mat-form-field-invalid",r._control.errorState)("mat-form-field-can-float",r._canLabelFloat())("mat-form-field-should-float",r._shouldLabelFloat())("mat-form-field-has-label",r._hasFloatingLabel())("mat-form-field-hide-placeholder",r._hideControlPlaceholder())("mat-form-field-disabled",r._control.disabled)("mat-form-field-autofilled",r._control.autofilled)("mat-focused",r._control.focused)("ng-untouched",r._shouldForward("untouched"))("ng-touched",r._shouldForward("touched"))("ng-pristine",r._shouldForward("pristine"))("ng-dirty",r._shouldForward("dirty"))("ng-valid",r._shouldForward("valid"))("ng-invalid",r._shouldForward("invalid"))("ng-pending",r._shouldForward("pending"))("_mat-animation-noopable",!r._animationsEnabled)},inputs:{color:"color",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel",floatLabel:"floatLabel"},exportAs:["matFormField"],features:[u._Bn([{provide:QD,useExisting:n}]),u.qOj],ngContentSelectors:qD,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(t,r){1&t&&(u.F$t(hR),u.TgZ(0,"div",0)(1,"div",1,2),u.NdJ("click",function(s){return r._control.onContainerClick&&r._control.onContainerClick(s)}),u.YNc(3,aR,9,0,"ng-container",3),u.YNc(4,Mb,2,1,"div",4),u.TgZ(5,"div",5,6),u.Hsn(7),u.TgZ(8,"span",7),u.YNc(9,xb,5,16,"label",8),u.qZA()(),u.YNc(10,uR,2,0,"div",9),u.qZA(),u.YNc(11,dR,2,4,"div",10),u.TgZ(12,"div",11),u.YNc(13,Rb,2,1,"div",12),u.YNc(14,zD,5,2,"div",13),u.qZA()()),2&t&&(u.xp6(3),u.Q6J("ngIf","outline"==r.appearance),u.xp6(1),u.Q6J("ngIf",r._prefixChildren.length),u.xp6(5),u.Q6J("ngIf",r._hasFloatingLabel()),u.xp6(1),u.Q6J("ngIf",r._suffixChildren.length),u.xp6(1),u.Q6J("ngIf","outline"!=r.appearance),u.xp6(1),u.Q6J("ngSwitch",r._getDisplayedMessages()),u.xp6(1),u.Q6J("ngSwitchCase","error"),u.xp6(1),u.Q6J("ngSwitchCase","hint"))},directives:[Ur,kB,oi,jr],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.cdk-high-contrast-active .mat-form-field-disabled .mat-form-field-label{color:GrayText}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}\n",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-form-field-flex{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}\n','.mat-input-element{font:inherit;background:transparent;color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:transparent;display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}\n',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px)}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px;border-top-color:GrayText}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}\n",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-form-field-disabled .mat-form-field-outline{color:GrayText}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}\n",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}\n"],encapsulation:2,data:{animation:[kb.transitionMessages]},changeDetection:0}),n})(),Em=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[fo,mr,iR],mr]}),n})();let eT=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Qsj),u.Y36(u.SBq))},n.\u0275dir=u.lG2({type:n}),n})(),Qu=(()=>{class n extends eT{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,features:[u.qOj]}),n})();const Bo=new u.OlP("NgValueAccessor"),vR={provide:Bo,useExisting:(0,u.Gpc)(()=>Nb),multi:!0},UB=new u.OlP("CompositionEventMode");let Nb=(()=>{class n extends eT{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function bR(){const n=V()?V().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Qsj),u.Y36(u.SBq),u.Y36(UB,8))},n.\u0275dir=u.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&u.NdJ("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},features:[u._Bn([vR]),u.qOj]}),n})();function Rc(n){return null==n||0===n.length}function wR(n){return null!=n&&"number"==typeof n.length}const mi=new u.OlP("NgValidators"),Cl=new u.OlP("NgAsyncValidators"),Dm=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class CR{static min(e){return function rT(n){return e=>{if(Rc(e.value)||Rc(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function Pb(n){return e=>{if(Rc(e.value)||Rc(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function El(n){return Rc(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function Fb(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function Tm(n){return Rc(n.value)||Dm.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function Im(n){return e=>Rc(e.value)||!wR(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function iT(n){return e=>wR(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function Sm(n){if(!n)return Ju;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Rc(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return sT(e)}static composeAsync(e){return oT(e)}}function Ju(n){return null}function Df(n){return null!=n}function ER(n){const e=(0,u.QGY)(n)?(0,gn.D)(n):n;return(0,u.CqO)(e),e}function DR(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function TR(n,e){return e.map(t=>t(n))}function Lb(n){return n.map(e=>function jB(n){return!n.validate}(e)?e:t=>e.validate(t))}function sT(n){if(!n)return null;const e=n.filter(Df);return 0==e.length?null:function(t){return DR(TR(t,e))}}function Vb(n){return null!=n?sT(Lb(n)):null}function oT(n){if(!n)return null;const e=n.filter(Df);return 0==e.length?null:function(t){return function XD(...n){const e=(0,Ps.jO)(n),{args:t,keys:r}=Fs(n),i=new Vn.y(s=>{const{length:l}=t;if(!l)return void s.complete();const d=new Array(l);let p=l,y=l;for(let C=0;C<l;C++){let D=!1;(0,fs.Xf)(t[C]).subscribe((0,an.x)(s,M=>{D||(D=!0,y--),d[C]=M},()=>p--,void 0,()=>{(!p||!D)&&(y||s.next(r?Xl(r,d):d),s.complete())}))}});return e?i.pipe(Kd(e)):i}(TR(t,e).map(ER)).pipe((0,st.U)(DR))}}function Bb(n){return null!=n?oT(Lb(n)):null}function Ub(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function jb(n){return n._rawValidators}function Hb(n){return n._rawAsyncValidators}function Gb(n){return n?Array.isArray(n)?n:[n]:[]}function Am(n,e){return Array.isArray(n)?n.includes(e):n===e}function $b(n,e){const t=Gb(e);return Gb(n).forEach(i=>{Am(t,i)||t.push(i)}),t}function Mm(n,e){return Gb(e).filter(t=>!Am(n,t))}class IR{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Vb(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Bb(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Uo extends IR{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Nr extends IR{get formDirective(){return null}get path(){return null}}let SR=(()=>{class n extends class aT{constructor(e){this._cd=e}is(e){var t,r,i;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(i=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===i?void 0:i[e])}}{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Uo,2))},n.\u0275dir=u.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&u.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[u.qOj]}),n})();function m(n,e){I(n,e),e.valueAccessor.writeValue(n.value),function P(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&W(n,e)})}(n,e),function de(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function B(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&W(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function T(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function b(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),x(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function E(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function I(n,e){const t=jb(n);null!==e.validator?n.setValidators(Ub(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=Hb(n);null!==e.asyncValidator?n.setAsyncValidators(Ub(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();E(e._rawValidators,i),E(e._rawAsyncValidators,i)}function x(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=jb(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(l=>l!==e.validator);s.length!==i.length&&(t=!0,n.setValidators(s))}}if(null!==e.asyncValidator){const i=Hb(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(l=>l!==e.asyncValidator);s.length!==i.length&&(t=!0,n.setAsyncValidators(s))}}}const r=()=>{};return E(e._rawValidators,r),E(e._rawAsyncValidators,r),t}function W(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Me(n,e){I(n,e)}function Dl(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function If(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const kc="VALID",Xu="INVALID",Tl="PENDING",Oc="DISABLED";function AR(n){return(uT(n)?n.validators:n)||null}function ZB(n){return Array.isArray(n)?Vb(n):n||null}function MR(n,e){return(uT(e)?e.asyncValidators:n)||null}function KB(n){return Array.isArray(n)?Bb(n):n||null}function uT(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const YB=n=>n instanceof eU,xR=n=>n instanceof kR;function QB(n){return YB(n)?n.value:n.getRawValue()}function JB(n,e){const t=xR(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new u.vHH(1e3,"");if(!r[e])throw new u.vHH(1001,"")}function XB(n,e){xR(n),n._forEachChild((r,i)=>{if(void 0===e[i])throw new u.vHH(1002,"")})}class RR{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=ZB(this._rawValidators),this._composedAsyncValidatorFn=KB(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===kc}get invalid(){return this.status===Xu}get pending(){return this.status==Tl}get disabled(){return this.status===Oc}get enabled(){return this.status!==Oc}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=ZB(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=KB(e)}addValidators(e){this.setValidators($b(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators($b(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Mm(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Mm(e,this._rawAsyncValidators))}hasValidator(e){return Am(this._rawValidators,e)}hasAsyncValidator(e){return Am(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Tl,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Oc,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=kc,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===kc||this.status===Tl)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Oc:kc}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Tl,this._hasOwnPendingAsyncValidator=!0;const t=ER(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function qb(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(i=>{r=xR(r)?r.controls.hasOwnProperty(i)?r.controls[i]:null:(n=>n instanceof w6)(r)&&r.at(i)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new u.vpe,this.statusChanges=new u.vpe}_calculateStatus(){return this._allControlsDisabled()?Oc:this.errors?Xu:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Tl)?Tl:this._anyControlsHaveStatus(Xu)?Xu:kc}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){uT(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class eU extends RR{constructor(e=null,t,r){super(AR(t),MR(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),uT(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){If(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){If(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class kR extends RR{constructor(e,t,r){super(AR(t),MR(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){XB(this,e),Object.keys(e).forEach(r=>{JB(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=QB(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class w6 extends RR{constructor(e,t,r){super(AR(t),MR(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){XB(this,e),e.forEach((r,i)=>{JB(this,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>QB(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const C6={provide:Nr,useExisting:(0,u.Gpc)(()=>dT)},Wb=(()=>Promise.resolve(null))();let dT=(()=>{class n extends Nr{constructor(t,r){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new u.vpe,this.form=new kR({},Vb(t),Bb(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Wb.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),m(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Wb.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Wb.then(()=>{const r=this._findContainer(t.path),i=new kR({});Me(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Wb.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Wb.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,Dl(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(mi,10),u.Y36(Cl,10))},n.\u0275dir=u.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&u.NdJ("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[u._Bn([C6]),u.qOj]}),n})();const D6={provide:Uo,useExisting:(0,u.Gpc)(()=>OR)},rU=(()=>Promise.resolve(null))();let OR=(()=>{class n extends Uo{constructor(t,r,i,s,l){super(),this._changeDetectorRef=l,this.control=new eU,this._registered=!1,this.update=new u.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function Tf(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===Nb?t=s:function Qi(n){return Object.getPrototypeOf(n.constructor)===Qu}(s)?r=s:i=s}),i||r||t||null}(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function Qt(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){m(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){rU.then(()=>{var r;this.control.setValue(t,{emitViewToModelChange:!1}),null===(r=this._changeDetectorRef)||void 0===r||r.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=""===r||r&&"false"!==r;rU.then(()=>{var s;i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),null===(s=this._changeDetectorRef)||void 0===s||s.markForCheck()})}_getPath(t){return this._parent?function f(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Nr,9),u.Y36(mi,10),u.Y36(Cl,10),u.Y36(Bo,10),u.Y36(u.sBO,8))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[u._Bn([D6]),u.qOj,u.TTD]}),n})(),sU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();const R6={provide:Nr,useExisting:(0,u.Gpc)(()=>hT)};let hT=(()=>{class n extends Nr{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new u.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(x(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return m(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){b(t.control||null,t,!1),If(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,Dl(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(b(r||null,t),YB(i)&&(m(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);Me(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function Le(n,e){return x(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){I(this.form,this),this._oldForm&&x(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(mi,10),u.Y36(Cl,10))},n.\u0275dir=u.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&u.NdJ("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[u._Bn([R6]),u.qOj,u.TTD]}),n})(),Y6=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[sU]]}),n})(),Q6=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[Y6]}),n})();const EU=Jy({passive:!0});let J6=(()=>{class n{constructor(t,r){this._platform=t,this._ngZone=r,this._monitoredElements=new Map}monitor(t){if(!this._platform.isBrowser)return la.E;const r=fl(t),i=this._monitoredElements.get(r);if(i)return i.subject;const s=new St.x,l="cdk-text-field-autofilled",d=p=>{"cdk-text-field-autofill-start"!==p.animationName||r.classList.contains(l)?"cdk-text-field-autofill-end"===p.animationName&&r.classList.contains(l)&&(r.classList.remove(l),this._ngZone.run(()=>s.next({target:p.target,isAutofilled:!1}))):(r.classList.add(l),this._ngZone.run(()=>s.next({target:p.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{r.addEventListener("animationstart",d,EU),r.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(r,{subject:s,unlisten:()=>{r.removeEventListener("animationstart",d,EU)}}),s}stopMonitoring(t){const r=fl(t),i=this._monitoredElements.get(r);i&&(i.unlisten(),i.subject.complete(),r.classList.remove("cdk-text-field-autofill-monitored"),r.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(r))}ngOnDestroy(){this._monitoredElements.forEach((t,r)=>this.stopMonitoring(r))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(pi),u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),DU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();const X6=new u.OlP("MAT_INPUT_VALUE_ACCESSOR"),e4=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let t4=0;const n4=MD(class{constructor(n,e,t,r){this._defaultErrorStateMatcher=n,this._parentForm=e,this._parentFormGroup=t,this.ngControl=r}});let r4=(()=>{class n extends n4{constructor(t,r,i,s,l,d,p,y,C,D){super(d,s,l,i),this._elementRef=t,this._platform=r,this._autofillMonitor=y,this._formField=D,this._uid="mat-input-"+t4++,this.focused=!1,this.stateChanges=new St.x,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(N=>x0().has(N)),this._iOSKeyupListener=N=>{const j=N.target;!j.value&&0===j.selectionStart&&0===j.selectionEnd&&(j.setSelectionRange(1,1),j.setSelectionRange(0,0))};const M=this._elementRef.nativeElement,R=M.nodeName.toLowerCase();this._inputValueAccessor=p||M,this._previousNativeValue=this.value,this.id=this.id,r.IOS&&C.runOutsideAngular(()=>{t.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===R,this._isTextarea="textarea"===R,this._isInFormField=!!D,this._isNativeSelect&&(this.controlType=M.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(t){this._disabled=Or(t),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(t){this._id=t||this._uid}get required(){var t,r,i,s;return null!==(s=null!==(t=this._required)&&void 0!==t?t:null===(i=null===(r=this.ngControl)||void 0===r?void 0:r.control)||void 0===i?void 0:i.hasValidator(CR.required))&&void 0!==s&&s}set required(t){this._required=Or(t)}get type(){return this._type}set type(t){this._type=t||"text",this._validateType(),!this._isTextarea&&x0().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(t){t!==this.value&&(this._inputValueAccessor.value=t,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(t){this._readonly=Or(t)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(t=>{this.autofilled=t.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(t){this._elementRef.nativeElement.focus(t)}_focusChanged(t){t!==this.focused&&(this.focused=t,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){var t,r;const i=(null===(r=null===(t=this._formField)||void 0===t?void 0:t._hideControlPlaceholder)||void 0===r?void 0:r.call(t))?null:this.placeholder;if(i!==this._previousPlaceholder){const s=this._elementRef.nativeElement;this._previousPlaceholder=i,i?s.setAttribute("placeholder",i):s.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const t=this._elementRef.nativeElement.value;this._previousNativeValue!==t&&(this._previousNativeValue=t,this.stateChanges.next())}_validateType(){e4.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let t=this._elementRef.nativeElement.validity;return t&&t.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const t=this._elementRef.nativeElement,r=t.options[0];return this.focused||t.multiple||!this.empty||!!(t.selectedIndex>-1&&r&&r.label)}return this.focused||!this.empty}setDescribedByIds(t){t.length?this._elementRef.nativeElement.setAttribute("aria-describedby",t.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const t=this._elementRef.nativeElement;return this._isNativeSelect&&(t.multiple||t.size>1)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(pi),u.Y36(Uo,10),u.Y36(dT,8),u.Y36(hT,8),u.Y36(Eb),u.Y36(X6,10),u.Y36(J6),u.Y36(u.R0b),u.Y36(QD,8))},n.\u0275dir=u.lG2({type:n,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:12,hostBindings:function(t,r){1&t&&u.NdJ("focus",function(){return r._focusChanged(!0)})("blur",function(){return r._focusChanged(!1)})("input",function(){return r._onInput()}),2&t&&(u.Ikx("disabled",r.disabled)("required",r.required),u.uIk("id",r.id)("data-placeholder",r.placeholder)("name",r.name||null)("readonly",r.readonly&&!r._isNativeSelect||null)("aria-invalid",r.empty&&r.required?null:r.errorState)("aria-required",r.required),u.ekj("mat-input-server",r._isServer)("mat-native-select-inline",r._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[u._Bn([{provide:Yi,useExisting:n}]),u.qOj,u.TTD]}),n})(),i4=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[Eb],imports:[[DU,Em,mr],DU,Em]}),n})();const s4=["mat-button",""],o4=["*"],l4=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],c4=Cb(SD(AD(class{constructor(n){this._elementRef=n}})));let TU=(()=>{class n extends c4{constructor(t,r,i){super(t),this._focusMonitor=r,this._animationMode=i,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const s of l4)this._hasHostAttributes(s)&&this._getHostElement().classList.add(s);t.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t,r){t?this._focusMonitor.focusVia(this._getHostElement(),t,r):this._getHostElement().focus(r)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...t){return t.some(r=>this._getHostElement().hasAttribute(r))}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(Hg),u.Y36(Sc,8))},n.\u0275cmp=u.Xpm({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(t,r){if(1&t&&u.Gf(Ef,5),2&t){let i;u.iGM(i=u.CRH())&&(r.ripple=i.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(t,r){2&t&&(u.uIk("disabled",r.disabled||null),u.ekj("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-button-disabled",r.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[u.qOj],attrs:s4,ngContentSelectors:o4,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,r){1&t&&(u.F$t(),u.TgZ(0,"span",0),u.Hsn(1),u.qZA(),u._UZ(2,"span",1)(3,"span",2)),2&t&&(u.xp6(2),u.ekj("mat-button-ripple-round",r.isRoundButton||r.isIconButton),u.Q6J("matRippleDisabled",r._isRippleDisabled())("matRippleCentered",r.isIconButton)("matRippleTrigger",r._getHostElement()))},directives:[Ef],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),n})(),u4=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[vm,mr],mr]}),n})();function d4(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div")(1,"h3"),u._uU(2,"Update Car Information"),u.qZA(),u.TgZ(3,"div",1)(4,"mat-form-field",2)(5,"mat-label"),u._uU(6,"Manufacturer "),u.qZA(),u.TgZ(7,"input",3),u.NdJ("ngModelChange",function(i){return u.CHM(t),u.oxw().formData.manufacturer=i}),u.qZA()(),u.TgZ(8,"mat-form-field",2)(9,"mat-label"),u._uU(10,"Model"),u.qZA(),u.TgZ(11,"input",3),u.NdJ("ngModelChange",function(i){return u.CHM(t),u.oxw().formData.model=i}),u.qZA()()(),u.TgZ(12,"div",1)(13,"mat-form-field",2)(14,"mat-label"),u._uU(15," Year"),u.qZA(),u.TgZ(16,"input",3),u.NdJ("ngModelChange",function(i){return u.CHM(t),u.oxw().formData.year=i}),u.qZA()(),u.TgZ(17,"mat-form-field",2)(18,"mat-label"),u._uU(19,"VinCode"),u.qZA(),u.TgZ(20,"input",3),u.NdJ("ngModelChange",function(i){return u.CHM(t),u.oxw().formData.VinCode=i}),u.qZA()()(),u.TgZ(21,"div",1)(22,"mat-form-field",2)(23,"mat-label"),u._uU(24," Price "),u.qZA(),u.TgZ(25,"input",3),u.NdJ("ngModelChange",function(i){return u.CHM(t),u.oxw().formData.price=i}),u.qZA()(),u.TgZ(26,"mat-form-field",2)(27,"mat-label"),u._uU(28,"Mile"),u.qZA(),u.TgZ(29,"input",3),u.NdJ("ngModelChange",function(i){return u.CHM(t),u.oxw().formData.mile=i}),u.qZA()()(),u.TgZ(30,"div",1)(31,"mat-form-field",2)(32,"mat-label"),u._uU(33,"Seller Phone Number"),u.qZA(),u.TgZ(34,"input",3),u.NdJ("ngModelChange",function(i){return u.CHM(t),u.oxw().formData.phoneNumber=i}),u.qZA()(),u.TgZ(35,"mat-form-field",2)(36,"mat-label"),u._uU(37,"Image Url"),u.qZA(),u.TgZ(38,"input",3),u.NdJ("ngModelChange",function(i){return u.CHM(t),u.oxw().formData.image=i}),u.qZA()()(),u.TgZ(39,"div",1)(40,"mat-form-field",2)(41,"mat-label"),u._uU(42,"Drive Train Geo"),u.qZA(),u.TgZ(43,"input",3),u.NdJ("ngModelChange",function(i){return u.CHM(t),u.oxw().formData.driveTrainGeo=i}),u.qZA()(),u.TgZ(44,"mat-form-field",2)(45,"mat-label"),u._uU(46,"Drive Train Eng"),u.qZA(),u.TgZ(47,"input",3),u.NdJ("ngModelChange",function(i){return u.CHM(t),u.oxw().formData.driveTrainEng=i}),u.qZA()()(),u.TgZ(48,"div",1)(49,"mat-form-field",2)(50,"mat-label"),u._uU(51," Fuel Type Geo"),u.qZA(),u.TgZ(52,"input",3),u.NdJ("ngModelChange",function(i){return u.CHM(t),u.oxw().formData.fuelTypeGeo=i}),u.qZA()(),u.TgZ(53,"mat-form-field",2)(54,"mat-label"),u._uU(55," Fuel Type Eng"),u.qZA(),u.TgZ(56,"input",3),u.NdJ("ngModelChange",function(i){return u.CHM(t),u.oxw().formData.fuelTypeEng=i}),u.qZA()()(),u.TgZ(57,"div",1)(58,"mat-form-field",2)(59,"mat-label"),u._uU(60," Transmission Geo"),u.qZA(),u.TgZ(61,"input",3),u.NdJ("ngModelChange",function(i){return u.CHM(t),u.oxw().formData.transmissionGeo=i}),u.qZA()(),u.TgZ(62,"mat-form-field",2)(63,"mat-label"),u._uU(64,"Transmission Eng"),u.qZA(),u.TgZ(65,"input",3),u.NdJ("ngModelChange",function(i){return u.CHM(t),u.oxw().formData.transmissionEng=i}),u.qZA()()(),u.TgZ(66,"div",4)(67,"button",5),u.NdJ("click",function(){return u.CHM(t),u.oxw().updateCompanyService()}),u._uU(68,"Save"),u.qZA(),u.TgZ(69,"button",6),u._uU(70,"Cancel"),u.qZA()()()}if(2&n){const t=u.oxw();u.xp6(7),u.Q6J("ngModel",t.formData.manufacturer),u.xp6(4),u.Q6J("ngModel",t.formData.model),u.xp6(5),u.Q6J("ngModel",t.formData.year),u.xp6(4),u.Q6J("ngModel",t.formData.VinCode),u.xp6(5),u.Q6J("ngModel",t.formData.price),u.xp6(4),u.Q6J("ngModel",t.formData.mile),u.xp6(5),u.Q6J("ngModel",t.formData.phoneNumber),u.xp6(4),u.Q6J("ngModel",t.formData.image),u.xp6(5),u.Q6J("ngModel",t.formData.driveTrainGeo),u.xp6(4),u.Q6J("ngModel",t.formData.driveTrainEng),u.xp6(5),u.Q6J("ngModel",t.formData.fuelTypeGeo),u.xp6(4),u.Q6J("ngModel",t.formData.fuelTypeEng),u.xp6(5),u.Q6J("ngModel",t.formData.transmissionGeo),u.xp6(4),u.Q6J("ngModel",t.formData.transmissionEng)}}function h4(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div")(1,"h1"),u._uU(2,"All New Car"),u.qZA(),u.TgZ(3,"div",1)(4,"mat-form-field",2)(5,"mat-label"),u._uU(6,"Manufacturer "),u.qZA(),u.TgZ(7,"input",3),u.NdJ("ngModelChange",function(i){return u.CHM(t),u.oxw().cars.manufacturer=i}),u.qZA()(),u.TgZ(8,"mat-form-field",2)(9,"mat-label"),u._uU(10,"Model"),u.qZA(),u.TgZ(11,"input",3),u.NdJ("ngModelChange",function(i){return u.CHM(t),u.oxw().cars.model=i}),u.qZA()()(),u.TgZ(12,"div",1)(13,"mat-form-field",2)(14,"mat-label"),u._uU(15," Year"),u.qZA(),u.TgZ(16,"input",3),u.NdJ("ngModelChange",function(i){return u.CHM(t),u.oxw().cars.year=i}),u.qZA()(),u.TgZ(17,"mat-form-field",2)(18,"mat-label"),u._uU(19,"VinCode"),u.qZA(),u.TgZ(20,"input",3),u.NdJ("ngModelChange",function(i){return u.CHM(t),u.oxw().cars.VinCode=i}),u.qZA()()(),u.TgZ(21,"div",1)(22,"mat-form-field",2)(23,"mat-label"),u._uU(24," Price "),u.qZA(),u.TgZ(25,"input",3),u.NdJ("ngModelChange",function(i){return u.CHM(t),u.oxw().cars.price=i}),u.qZA()(),u.TgZ(26,"mat-form-field",2)(27,"mat-label"),u._uU(28,"Mile"),u.qZA(),u.TgZ(29,"input",3),u.NdJ("ngModelChange",function(i){return u.CHM(t),u.oxw().cars.mile=i}),u.qZA()()(),u.TgZ(30,"div",1)(31,"mat-form-field",2)(32,"mat-label"),u._uU(33,"Seller Phone Number"),u.qZA(),u.TgZ(34,"input",3),u.NdJ("ngModelChange",function(i){return u.CHM(t),u.oxw().cars.phoneNumber=i}),u.qZA()(),u.TgZ(35,"mat-form-field",2)(36,"mat-label"),u._uU(37,"Image Url"),u.qZA(),u.TgZ(38,"input",3),u.NdJ("ngModelChange",function(i){return u.CHM(t),u.oxw().cars.image=i}),u.qZA()()(),u.TgZ(39,"div",1)(40,"mat-form-field",2)(41,"mat-label"),u._uU(42,"Drive Train Geo"),u.qZA(),u.TgZ(43,"input",3),u.NdJ("ngModelChange",function(i){return u.CHM(t),u.oxw().cars.driveTrainGeo=i}),u.qZA()(),u.TgZ(44,"mat-form-field",2)(45,"mat-label"),u._uU(46,"Drive Train Eng"),u.qZA(),u.TgZ(47,"input",3),u.NdJ("ngModelChange",function(i){return u.CHM(t),u.oxw().cars.driveTrainEng=i}),u.qZA()()(),u.TgZ(48,"div",1)(49,"mat-form-field",2)(50,"mat-label"),u._uU(51," Fuel Type Geo"),u.qZA(),u.TgZ(52,"input",3),u.NdJ("ngModelChange",function(i){return u.CHM(t),u.oxw().cars.fuelTypeGeo=i}),u.qZA()(),u.TgZ(53,"mat-form-field",2)(54,"mat-label"),u._uU(55," Fuel Type Eng"),u.qZA(),u.TgZ(56,"input",3),u.NdJ("ngModelChange",function(i){return u.CHM(t),u.oxw().cars.fuelTypeEng=i}),u.qZA()()(),u.TgZ(57,"div",1)(58,"mat-form-field",2)(59,"mat-label"),u._uU(60," Transmission Geo"),u.qZA(),u.TgZ(61,"input",3),u.NdJ("ngModelChange",function(i){return u.CHM(t),u.oxw().cars.transmissionGeo=i}),u.qZA()(),u.TgZ(62,"mat-form-field",2)(63,"mat-label"),u._uU(64,"Transmission Eng"),u.qZA(),u.TgZ(65,"input",3),u.NdJ("ngModelChange",function(i){return u.CHM(t),u.oxw().cars.transmissionEng=i}),u.qZA()()(),u.TgZ(66,"div",4)(67,"button",5),u.NdJ("click",function(){return u.CHM(t),u.oxw().onCreateBtnClick()}),u._uU(68,"Add"),u.qZA(),u.TgZ(69,"button",6),u._uU(70,"Cancel"),u.qZA()()()}if(2&n){const t=u.oxw();u.xp6(7),u.Q6J("ngModel",t.cars.manufacturer),u.xp6(4),u.Q6J("ngModel",t.cars.model),u.xp6(5),u.Q6J("ngModel",t.cars.year),u.xp6(4),u.Q6J("ngModel",t.cars.VinCode),u.xp6(5),u.Q6J("ngModel",t.cars.price),u.xp6(4),u.Q6J("ngModel",t.cars.mile),u.xp6(5),u.Q6J("ngModel",t.cars.phoneNumber),u.xp6(4),u.Q6J("ngModel",t.cars.image),u.xp6(5),u.Q6J("ngModel",t.cars.driveTrainGeo),u.xp6(4),u.Q6J("ngModel",t.cars.driveTrainEng),u.xp6(5),u.Q6J("ngModel",t.cars.fuelTypeGeo),u.xp6(4),u.Q6J("ngModel",t.cars.fuelTypeEng),u.xp6(5),u.Q6J("ngModel",t.cars.transmissionGeo),u.xp6(4),u.Q6J("ngModel",t.cars.transmissionEng)}}let IU=(()=>{class n{constructor(t,r,i,s){this._data=t,this.dialog=r,this.emitter=i,this.proxy=s,this.cars=new Ab,this.currentCarData=xc.carEmitter}ngOnInit(){let t=xc.carEmitter;this.formData=new Sb(t.id,t.VinCode,t.image,t.manufacturer,t.model,t.year,t.mile,t.price,t.phoneNumber,t.ariivesIn,t.driveTrainGeo,t.driveTrainEng,t.fuelTypeGeo,t.fuelTypeEng,t.transmissionGeo,t.transmissionEng)}onCreateBtnClick(){this.proxy.createCar(this.cars).subscribe(t=>{console.log(t),localStorage.jwt=JSON.stringify(t),this.cars=new Ab})}updateCompanyService(){var t=new Sb(this.formData.id,this.formData.VinCode,this.formData.image,this.formData.manufacturer,this.formData.model,this.formData.mile,this.formData.year,this.formData.price,this.formData.phoneNumber,this.formData.ariivesIn,this.formData.driveTrainGeo,this.formData.driveTrainEng,this.formData.fuelTypeGeo,this.formData.fuelTypeEng,this.formData.transmissionGeo,this.formData.transmissionEng);this.emitter.updateEmitter.emit(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Jx),u.Y36(Mc),u.Y36(xc),u.Y36(Hy))},n.\u0275cmp=u.Xpm({type:n,selectors:[["dialog-elements-example-dialog"]],decls:3,vars:2,consts:[[4,"ngIf"],[1,"inline-groups"],["appearance","fill"],["matInput","",3,"ngModel","ngModelChange"],[2,"display","flex!important","flex-direction","row!important","justify-content","space-around!important"],["mat-raised-button","","color","primary",1,"col-md-5",3,"click"],["mat-raised-button","","color","warn","mat-dialog-close","",1,"col-md-5",2,"height","35px!important"]],template:function(t,r){1&t&&(u.TgZ(0,"article"),u.YNc(1,d4,71,14,"div",0),u.YNc(2,h4,71,14,"div",0),u.qZA()),2&t&&(u.xp6(1),u.Q6J("ngIf","update"==r._data.message),u.xp6(1),u.Q6J("ngIf","create"==r._data.message))},directives:[Ur,JD,wm,r4,Nb,SR,OR,TU,MB],encapsulation:2}),n})(),f4=(()=>{class n{constructor(t){this.dialog=t}openService(t){this.dialog.open(IU,{data:{message:t}})}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Mc))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function BR(n){return n&&"function"==typeof n.connect}class SU{applyChanges(e,t,r,i,s){e.forEachOperation((l,d,p)=>{let y,C;if(null==l.previousIndex){const D=r(l,d,p);y=t.createEmbeddedView(D.templateRef,D.context,D.index),C=1}else null==p?(t.remove(d),C=3):(y=t.get(d),t.move(y,p),C=2);s&&s({context:null==y?void 0:y.context,operation:C,record:l})})}detach(){}}const Zb=new u.OlP("_ViewRepeater"),m4=[[["caption"]],[["colgroup"],["col"]]],_4=["caption","colgroup, col"];function UR(n){return class extends n{constructor(...e){super(...e),this._sticky=!1,this._hasStickyChanged=!1}get sticky(){return this._sticky}set sticky(e){const t=this._sticky;this._sticky=Or(e),this._hasStickyChanged=t!==this._sticky}hasStickyChanged(){const e=this._hasStickyChanged;return this._hasStickyChanged=!1,e}resetStickyChanged(){this._hasStickyChanged=!1}}}const Rm=new u.OlP("CDK_TABLE");let km=(()=>{class n{constructor(t){this.template=t}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Rgc))},n.\u0275dir=u.lG2({type:n,selectors:[["","cdkCellDef",""]]}),n})(),Om=(()=>{class n{constructor(t){this.template=t}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Rgc))},n.\u0275dir=u.lG2({type:n,selectors:[["","cdkHeaderCellDef",""]]}),n})(),fT=(()=>{class n{constructor(t){this.template=t}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Rgc))},n.\u0275dir=u.lG2({type:n,selectors:[["","cdkFooterCellDef",""]]}),n})();class w4{}const C4=UR(w4);let Nc=(()=>{class n extends C4{constructor(t){super(),this._table=t,this._stickyEnd=!1}get name(){return this._name}set name(t){this._setNameInput(t)}get stickyEnd(){return this._stickyEnd}set stickyEnd(t){const r=this._stickyEnd;this._stickyEnd=Or(t),this._hasStickyChanged=r!==this._stickyEnd}_updateColumnCssClassName(){this._columnCssClassName=[`cdk-column-${this.cssClassFriendlyName}`]}_setNameInput(t){t&&(this._name=t,this.cssClassFriendlyName=t.replace(/[^a-z0-9_-]/gi,"-"),this._updateColumnCssClassName())}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Rm,8))},n.\u0275dir=u.lG2({type:n,selectors:[["","cdkColumnDef",""]],contentQueries:function(t,r,i){if(1&t&&(u.Suo(i,km,5),u.Suo(i,Om,5),u.Suo(i,fT,5)),2&t){let s;u.iGM(s=u.CRH())&&(r.cell=s.first),u.iGM(s=u.CRH())&&(r.headerCell=s.first),u.iGM(s=u.CRH())&&(r.footerCell=s.first)}},inputs:{sticky:"sticky",name:["cdkColumnDef","name"],stickyEnd:"stickyEnd"},features:[u._Bn([{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:n}]),u.qOj]}),n})();class jR{constructor(e,t){t.nativeElement.classList.add(...e._columnCssClassName)}}let HR=(()=>{class n extends jR{constructor(t,r){super(t,r)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Nc),u.Y36(u.SBq))},n.\u0275dir=u.lG2({type:n,selectors:[["cdk-header-cell"],["th","cdk-header-cell",""]],hostAttrs:["role","columnheader",1,"cdk-header-cell"],features:[u.qOj]}),n})(),GR=(()=>{class n extends jR{constructor(t,r){var i;if(super(t,r),1===(null===(i=t._table)||void 0===i?void 0:i._elementRef.nativeElement.nodeType)){const s=t._table._elementRef.nativeElement.getAttribute("role");r.nativeElement.setAttribute("role","grid"===s||"treegrid"===s?"gridcell":"cell")}}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Nc),u.Y36(u.SBq))},n.\u0275dir=u.lG2({type:n,selectors:[["cdk-cell"],["td","cdk-cell",""]],hostAttrs:[1,"cdk-cell"],features:[u.qOj]}),n})();class xU{constructor(){this.tasks=[],this.endTasks=[]}}const $R=new u.OlP("_COALESCED_STYLE_SCHEDULER");let RU=(()=>{class n{constructor(t){this._ngZone=t,this._currentSchedule=null,this._destroyed=new St.x}schedule(t){this._createScheduleIfNeeded(),this._currentSchedule.tasks.push(t)}scheduleEnd(t){this._createScheduleIfNeeded(),this._currentSchedule.endTasks.push(t)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_createScheduleIfNeeded(){this._currentSchedule||(this._currentSchedule=new xU,this._getScheduleObservable().pipe(Zs(this._destroyed)).subscribe(()=>{for(;this._currentSchedule.tasks.length||this._currentSchedule.endTasks.length;){const t=this._currentSchedule;this._currentSchedule=new xU;for(const r of t.tasks)r();for(const r of t.endTasks)r()}this._currentSchedule=null}))}_getScheduleObservable(){return this._ngZone.isStable?(0,gn.D)(Promise.resolve(void 0)):this._ngZone.onStable.pipe((0,$r.q)(1))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),zR=(()=>{class n{constructor(t,r){this.template=t,this._differs=r}ngOnChanges(t){if(!this._columnsDiffer){const r=t.columns&&t.columns.currentValue||[];this._columnsDiffer=this._differs.find(r).create(),this._columnsDiffer.diff(r)}}getColumnsDiff(){return this._columnsDiffer.diff(this.columns)}extractCellTemplate(t){return this instanceof Kb?t.headerCell.template:this instanceof Yb?t.footerCell.template:t.cell.template}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Rgc),u.Y36(u.ZZ4))},n.\u0275dir=u.lG2({type:n,features:[u.TTD]}),n})();class E4 extends zR{}const D4=UR(E4);let Kb=(()=>{class n extends D4{constructor(t,r,i){super(t,r),this._table=i}ngOnChanges(t){super.ngOnChanges(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Rgc),u.Y36(u.ZZ4),u.Y36(Rm,8))},n.\u0275dir=u.lG2({type:n,selectors:[["","cdkHeaderRowDef",""]],inputs:{columns:["cdkHeaderRowDef","columns"],sticky:["cdkHeaderRowDefSticky","sticky"]},features:[u.qOj,u.TTD]}),n})();class T4 extends zR{}const I4=UR(T4);let Yb=(()=>{class n extends I4{constructor(t,r,i){super(t,r),this._table=i}ngOnChanges(t){super.ngOnChanges(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Rgc),u.Y36(u.ZZ4),u.Y36(Rm,8))},n.\u0275dir=u.lG2({type:n,selectors:[["","cdkFooterRowDef",""]],inputs:{columns:["cdkFooterRowDef","columns"],sticky:["cdkFooterRowDefSticky","sticky"]},features:[u.qOj,u.TTD]}),n})(),pT=(()=>{class n extends zR{constructor(t,r,i){super(t,r),this._table=i}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Rgc),u.Y36(u.ZZ4),u.Y36(Rm,8))},n.\u0275dir=u.lG2({type:n,selectors:[["","cdkRowDef",""]],inputs:{columns:["cdkRowDefColumns","columns"],when:["cdkRowDefWhen","when"]},features:[u.qOj]}),n})(),Pc=(()=>{class n{constructor(t){this._viewContainer=t,n.mostRecentCellOutlet=this}ngOnDestroy(){n.mostRecentCellOutlet===this&&(n.mostRecentCellOutlet=null)}}return n.mostRecentCellOutlet=null,n.\u0275fac=function(t){return new(t||n)(u.Y36(u.s_b))},n.\u0275dir=u.lG2({type:n,selectors:[["","cdkCellOutlet",""]]}),n})(),qR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["cdk-header-row"],["tr","cdk-header-row",""]],hostAttrs:["role","row",1,"cdk-header-row"],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(t,r){1&t&&u.GkF(0,0)},directives:[Pc],encapsulation:2}),n})(),ZR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["cdk-row"],["tr","cdk-row",""]],hostAttrs:["role","row",1,"cdk-row"],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(t,r){1&t&&u.GkF(0,0)},directives:[Pc],encapsulation:2}),n})(),gT=(()=>{class n{constructor(t){this.templateRef=t,this._contentClassName="cdk-no-data-row"}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Rgc))},n.\u0275dir=u.lG2({type:n,selectors:[["ng-template","cdkNoDataRow",""]]}),n})();const kU=["top","bottom","left","right"];class S4{constructor(e,t,r,i,s=!0,l=!0,d){this._isNativeHtmlTable=e,this._stickCellCss=t,this.direction=r,this._coalescedStyleScheduler=i,this._isBrowser=s,this._needsPositionStickyOnElement=l,this._positionListener=d,this._cachedCellWidths=[],this._borderCellCss={top:`${t}-border-elem-top`,bottom:`${t}-border-elem-bottom`,left:`${t}-border-elem-left`,right:`${t}-border-elem-right`}}clearStickyPositioning(e,t){const r=[];for(const i of e)if(i.nodeType===i.ELEMENT_NODE){r.push(i);for(let s=0;s<i.children.length;s++)r.push(i.children[s])}this._coalescedStyleScheduler.schedule(()=>{for(const i of r)this._removeStickyStyle(i,t)})}updateStickyColumns(e,t,r,i=!0){if(!e.length||!this._isBrowser||!t.some(M=>M)&&!r.some(M=>M))return void(this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:[]}),this._positionListener.stickyEndColumnsUpdated({sizes:[]})));const s=e[0],l=s.children.length,d=this._getCellWidths(s,i),p=this._getStickyStartColumnPositions(d,t),y=this._getStickyEndColumnPositions(d,r),C=t.lastIndexOf(!0),D=r.indexOf(!0);this._coalescedStyleScheduler.schedule(()=>{const M="rtl"===this.direction,R=M?"right":"left",N=M?"left":"right";for(const j of e)for(let Q=0;Q<l;Q++){const Te=j.children[Q];t[Q]&&this._addStickyStyle(Te,R,p[Q],Q===C),r[Q]&&this._addStickyStyle(Te,N,y[Q],Q===D)}this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:-1===C?[]:d.slice(0,C+1).map((j,Q)=>t[Q]?j:null)}),this._positionListener.stickyEndColumnsUpdated({sizes:-1===D?[]:d.slice(D).map((j,Q)=>r[Q+D]?j:null).reverse()}))})}stickRows(e,t,r){if(!this._isBrowser)return;const i="bottom"===r?e.slice().reverse():e,s="bottom"===r?t.slice().reverse():t,l=[],d=[],p=[];for(let C=0,D=0;C<i.length;C++){if(!s[C])continue;l[C]=D;const M=i[C];p[C]=this._isNativeHtmlTable?Array.from(M.children):[M];const R=M.getBoundingClientRect().height;D+=R,d[C]=R}const y=s.lastIndexOf(!0);this._coalescedStyleScheduler.schedule(()=>{var C,D;for(let M=0;M<i.length;M++){if(!s[M])continue;const R=l[M],N=M===y;for(const j of p[M])this._addStickyStyle(j,r,R,N)}"top"===r?null===(C=this._positionListener)||void 0===C||C.stickyHeaderRowsUpdated({sizes:d,offsets:l,elements:p}):null===(D=this._positionListener)||void 0===D||D.stickyFooterRowsUpdated({sizes:d,offsets:l,elements:p})})}updateStickyFooterContainer(e,t){if(!this._isNativeHtmlTable)return;const r=e.querySelector("tfoot");this._coalescedStyleScheduler.schedule(()=>{t.some(i=>!i)?this._removeStickyStyle(r,["bottom"]):this._addStickyStyle(r,"bottom",0,!1)})}_removeStickyStyle(e,t){for(const i of t)e.style[i]="",e.classList.remove(this._borderCellCss[i]);kU.some(i=>-1===t.indexOf(i)&&e.style[i])?e.style.zIndex=this._getCalculatedZIndex(e):(e.style.zIndex="",this._needsPositionStickyOnElement&&(e.style.position=""),e.classList.remove(this._stickCellCss))}_addStickyStyle(e,t,r,i){e.classList.add(this._stickCellCss),i&&e.classList.add(this._borderCellCss[t]),e.style[t]=`${r}px`,e.style.zIndex=this._getCalculatedZIndex(e),this._needsPositionStickyOnElement&&(e.style.cssText+="position: -webkit-sticky; position: sticky; ")}_getCalculatedZIndex(e){const t={top:100,bottom:10,left:1,right:1};let r=0;for(const i of kU)e.style[i]&&(r+=t[i]);return r?`${r}`:""}_getCellWidths(e,t=!0){if(!t&&this._cachedCellWidths.length)return this._cachedCellWidths;const r=[],i=e.children;for(let s=0;s<i.length;s++)r.push(i[s].getBoundingClientRect().width);return this._cachedCellWidths=r,r}_getStickyStartColumnPositions(e,t){const r=[];let i=0;for(let s=0;s<e.length;s++)t[s]&&(r[s]=i,i+=e[s]);return r}_getStickyEndColumnPositions(e,t){const r=[];let i=0;for(let s=e.length;s>0;s--)t[s]&&(r[s]=i,i+=e[s]);return r}}const KR=new u.OlP("CDK_SPL");let mT=(()=>{class n{constructor(t,r){this.viewContainer=t,this.elementRef=r}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.s_b),u.Y36(u.SBq))},n.\u0275dir=u.lG2({type:n,selectors:[["","rowOutlet",""]]}),n})(),_T=(()=>{class n{constructor(t,r){this.viewContainer=t,this.elementRef=r}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.s_b),u.Y36(u.SBq))},n.\u0275dir=u.lG2({type:n,selectors:[["","headerRowOutlet",""]]}),n})(),yT=(()=>{class n{constructor(t,r){this.viewContainer=t,this.elementRef=r}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.s_b),u.Y36(u.SBq))},n.\u0275dir=u.lG2({type:n,selectors:[["","footerRowOutlet",""]]}),n})(),vT=(()=>{class n{constructor(t,r){this.viewContainer=t,this.elementRef=r}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.s_b),u.Y36(u.SBq))},n.\u0275dir=u.lG2({type:n,selectors:[["","noDataRowOutlet",""]]}),n})(),bT=(()=>{class n{constructor(t,r,i,s,l,d,p,y,C,D,M,R){this._differs=t,this._changeDetectorRef=r,this._elementRef=i,this._dir=l,this._platform=p,this._viewRepeater=y,this._coalescedStyleScheduler=C,this._viewportRuler=D,this._stickyPositioningListener=M,this._ngZone=R,this._onDestroy=new St.x,this._columnDefsByName=new Map,this._customColumnDefs=new Set,this._customRowDefs=new Set,this._customHeaderRowDefs=new Set,this._customFooterRowDefs=new Set,this._headerRowDefChanged=!0,this._footerRowDefChanged=!0,this._stickyColumnStylesNeedReset=!0,this._forceRecalculateCellWidths=!0,this._cachedRenderRowsMap=new Map,this.stickyCssClass="cdk-table-sticky",this.needsPositionStickyOnElement=!0,this._isShowingNoDataRow=!1,this._multiTemplateDataRows=!1,this._fixedLayout=!1,this.contentChanged=new u.vpe,this.viewChange=new xr({start:0,end:Number.MAX_VALUE}),s||this._elementRef.nativeElement.setAttribute("role","table"),this._document=d,this._isNativeHtmlTable="TABLE"===this._elementRef.nativeElement.nodeName}get trackBy(){return this._trackByFn}set trackBy(t){this._trackByFn=t}get dataSource(){return this._dataSource}set dataSource(t){this._dataSource!==t&&this._switchDataSource(t)}get multiTemplateDataRows(){return this._multiTemplateDataRows}set multiTemplateDataRows(t){this._multiTemplateDataRows=Or(t),this._rowOutlet&&this._rowOutlet.viewContainer.length&&(this._forceRenderDataRows(),this.updateStickyColumnStyles())}get fixedLayout(){return this._fixedLayout}set fixedLayout(t){this._fixedLayout=Or(t),this._forceRecalculateCellWidths=!0,this._stickyColumnStylesNeedReset=!0}ngOnInit(){this._setupStickyStyler(),this._isNativeHtmlTable&&this._applyNativeTableSections(),this._dataDiffer=this._differs.find([]).create((t,r)=>this.trackBy?this.trackBy(r.dataIndex,r.data):r),this._viewportRuler.change().pipe(Zs(this._onDestroy)).subscribe(()=>{this._forceRecalculateCellWidths=!0})}ngAfterContentChecked(){this._cacheRowDefs(),this._cacheColumnDefs();const r=this._renderUpdatedColumns()||this._headerRowDefChanged||this._footerRowDefChanged;this._stickyColumnStylesNeedReset=this._stickyColumnStylesNeedReset||r,this._forceRecalculateCellWidths=r,this._headerRowDefChanged&&(this._forceRenderHeaderRows(),this._headerRowDefChanged=!1),this._footerRowDefChanged&&(this._forceRenderFooterRows(),this._footerRowDefChanged=!1),this.dataSource&&this._rowDefs.length>0&&!this._renderChangeSubscription?this._observeRenderChanges():this._stickyColumnStylesNeedReset&&this.updateStickyColumnStyles(),this._checkStickyStates()}ngOnDestroy(){[this._rowOutlet.viewContainer,this._headerRowOutlet.viewContainer,this._footerRowOutlet.viewContainer,this._cachedRenderRowsMap,this._customColumnDefs,this._customRowDefs,this._customHeaderRowDefs,this._customFooterRowDefs,this._columnDefsByName].forEach(t=>{t.clear()}),this._headerRowDefs=[],this._footerRowDefs=[],this._defaultRowDef=null,this._onDestroy.next(),this._onDestroy.complete(),BR(this.dataSource)&&this.dataSource.disconnect(this)}renderRows(){this._renderRows=this._getAllRenderRows();const t=this._dataDiffer.diff(this._renderRows);if(!t)return this._updateNoDataRow(),void this.contentChanged.next();const r=this._rowOutlet.viewContainer;this._viewRepeater.applyChanges(t,r,(i,s,l)=>this._getEmbeddedViewArgs(i.item,l),i=>i.item.data,i=>{1===i.operation&&i.context&&this._renderCellTemplateForItem(i.record.item.rowDef,i.context)}),this._updateRowIndexContext(),t.forEachIdentityChange(i=>{r.get(i.currentIndex).context.$implicit=i.item.data}),this._updateNoDataRow(),this._ngZone&&u.R0b.isInAngularZone()?this._ngZone.onStable.pipe((0,$r.q)(1),Zs(this._onDestroy)).subscribe(()=>{this.updateStickyColumnStyles()}):this.updateStickyColumnStyles(),this.contentChanged.next()}addColumnDef(t){this._customColumnDefs.add(t)}removeColumnDef(t){this._customColumnDefs.delete(t)}addRowDef(t){this._customRowDefs.add(t)}removeRowDef(t){this._customRowDefs.delete(t)}addHeaderRowDef(t){this._customHeaderRowDefs.add(t),this._headerRowDefChanged=!0}removeHeaderRowDef(t){this._customHeaderRowDefs.delete(t),this._headerRowDefChanged=!0}addFooterRowDef(t){this._customFooterRowDefs.add(t),this._footerRowDefChanged=!0}removeFooterRowDef(t){this._customFooterRowDefs.delete(t),this._footerRowDefChanged=!0}setNoDataRow(t){this._customNoDataRow=t}updateStickyHeaderRowStyles(){const t=this._getRenderedRows(this._headerRowOutlet),i=this._elementRef.nativeElement.querySelector("thead");i&&(i.style.display=t.length?"":"none");const s=this._headerRowDefs.map(l=>l.sticky);this._stickyStyler.clearStickyPositioning(t,["top"]),this._stickyStyler.stickRows(t,s,"top"),this._headerRowDefs.forEach(l=>l.resetStickyChanged())}updateStickyFooterRowStyles(){const t=this._getRenderedRows(this._footerRowOutlet),i=this._elementRef.nativeElement.querySelector("tfoot");i&&(i.style.display=t.length?"":"none");const s=this._footerRowDefs.map(l=>l.sticky);this._stickyStyler.clearStickyPositioning(t,["bottom"]),this._stickyStyler.stickRows(t,s,"bottom"),this._stickyStyler.updateStickyFooterContainer(this._elementRef.nativeElement,s),this._footerRowDefs.forEach(l=>l.resetStickyChanged())}updateStickyColumnStyles(){const t=this._getRenderedRows(this._headerRowOutlet),r=this._getRenderedRows(this._rowOutlet),i=this._getRenderedRows(this._footerRowOutlet);(this._isNativeHtmlTable&&!this._fixedLayout||this._stickyColumnStylesNeedReset)&&(this._stickyStyler.clearStickyPositioning([...t,...r,...i],["left","right"]),this._stickyColumnStylesNeedReset=!1),t.forEach((s,l)=>{this._addStickyColumnStyles([s],this._headerRowDefs[l])}),this._rowDefs.forEach(s=>{const l=[];for(let d=0;d<r.length;d++)this._renderRows[d].rowDef===s&&l.push(r[d]);this._addStickyColumnStyles(l,s)}),i.forEach((s,l)=>{this._addStickyColumnStyles([s],this._footerRowDefs[l])}),Array.from(this._columnDefsByName.values()).forEach(s=>s.resetStickyChanged())}_getAllRenderRows(){const t=[],r=this._cachedRenderRowsMap;this._cachedRenderRowsMap=new Map;for(let i=0;i<this._data.length;i++){let s=this._data[i];const l=this._getRenderRowsForData(s,i,r.get(s));this._cachedRenderRowsMap.has(s)||this._cachedRenderRowsMap.set(s,new WeakMap);for(let d=0;d<l.length;d++){let p=l[d];const y=this._cachedRenderRowsMap.get(p.data);y.has(p.rowDef)?y.get(p.rowDef).push(p):y.set(p.rowDef,[p]),t.push(p)}}return t}_getRenderRowsForData(t,r,i){return this._getRowDefs(t,r).map(l=>{const d=i&&i.has(l)?i.get(l):[];if(d.length){const p=d.shift();return p.dataIndex=r,p}return{data:t,rowDef:l,dataIndex:r}})}_cacheColumnDefs(){this._columnDefsByName.clear(),wT(this._getOwnDefs(this._contentColumnDefs),this._customColumnDefs).forEach(r=>{this._columnDefsByName.has(r.name),this._columnDefsByName.set(r.name,r)})}_cacheRowDefs(){this._headerRowDefs=wT(this._getOwnDefs(this._contentHeaderRowDefs),this._customHeaderRowDefs),this._footerRowDefs=wT(this._getOwnDefs(this._contentFooterRowDefs),this._customFooterRowDefs),this._rowDefs=wT(this._getOwnDefs(this._contentRowDefs),this._customRowDefs);const t=this._rowDefs.filter(r=>!r.when);this._defaultRowDef=t[0]}_renderUpdatedColumns(){const t=(l,d)=>l||!!d.getColumnsDiff(),r=this._rowDefs.reduce(t,!1);r&&this._forceRenderDataRows();const i=this._headerRowDefs.reduce(t,!1);i&&this._forceRenderHeaderRows();const s=this._footerRowDefs.reduce(t,!1);return s&&this._forceRenderFooterRows(),r||i||s}_switchDataSource(t){this._data=[],BR(this.dataSource)&&this.dataSource.disconnect(this),this._renderChangeSubscription&&(this._renderChangeSubscription.unsubscribe(),this._renderChangeSubscription=null),t||(this._dataDiffer&&this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear()),this._dataSource=t}_observeRenderChanges(){if(!this.dataSource)return;let t;BR(this.dataSource)?t=this.dataSource.connect(this):function g4(n){return!!n&&(n instanceof Vn.y||(0,Gr.m)(n.lift)&&(0,Gr.m)(n.subscribe))}(this.dataSource)?t=this.dataSource:Array.isArray(this.dataSource)&&(t=Ke(this.dataSource)),this._renderChangeSubscription=t.pipe(Zs(this._onDestroy)).subscribe(r=>{this._data=r||[],this.renderRows()})}_forceRenderHeaderRows(){this._headerRowOutlet.viewContainer.length>0&&this._headerRowOutlet.viewContainer.clear(),this._headerRowDefs.forEach((t,r)=>this._renderRow(this._headerRowOutlet,t,r)),this.updateStickyHeaderRowStyles()}_forceRenderFooterRows(){this._footerRowOutlet.viewContainer.length>0&&this._footerRowOutlet.viewContainer.clear(),this._footerRowDefs.forEach((t,r)=>this._renderRow(this._footerRowOutlet,t,r)),this.updateStickyFooterRowStyles()}_addStickyColumnStyles(t,r){const i=Array.from(r.columns||[]).map(d=>this._columnDefsByName.get(d)),s=i.map(d=>d.sticky),l=i.map(d=>d.stickyEnd);this._stickyStyler.updateStickyColumns(t,s,l,!this._fixedLayout||this._forceRecalculateCellWidths)}_getRenderedRows(t){const r=[];for(let i=0;i<t.viewContainer.length;i++){const s=t.viewContainer.get(i);r.push(s.rootNodes[0])}return r}_getRowDefs(t,r){if(1==this._rowDefs.length)return[this._rowDefs[0]];let i=[];if(this.multiTemplateDataRows)i=this._rowDefs.filter(s=>!s.when||s.when(r,t));else{let s=this._rowDefs.find(l=>l.when&&l.when(r,t))||this._defaultRowDef;s&&i.push(s)}return i}_getEmbeddedViewArgs(t,r){return{templateRef:t.rowDef.template,context:{$implicit:t.data},index:r}}_renderRow(t,r,i,s={}){const l=t.viewContainer.createEmbeddedView(r.template,s,i);return this._renderCellTemplateForItem(r,s),l}_renderCellTemplateForItem(t,r){for(let i of this._getCellTemplates(t))Pc.mostRecentCellOutlet&&Pc.mostRecentCellOutlet._viewContainer.createEmbeddedView(i,r);this._changeDetectorRef.markForCheck()}_updateRowIndexContext(){const t=this._rowOutlet.viewContainer;for(let r=0,i=t.length;r<i;r++){const l=t.get(r).context;l.count=i,l.first=0===r,l.last=r===i-1,l.even=r%2==0,l.odd=!l.even,this.multiTemplateDataRows?(l.dataIndex=this._renderRows[r].dataIndex,l.renderIndex=r):l.index=this._renderRows[r].dataIndex}}_getCellTemplates(t){return t&&t.columns?Array.from(t.columns,r=>{const i=this._columnDefsByName.get(r);return t.extractCellTemplate(i)}):[]}_applyNativeTableSections(){const t=this._document.createDocumentFragment(),r=[{tag:"thead",outlets:[this._headerRowOutlet]},{tag:"tbody",outlets:[this._rowOutlet,this._noDataRowOutlet]},{tag:"tfoot",outlets:[this._footerRowOutlet]}];for(const i of r){const s=this._document.createElement(i.tag);s.setAttribute("role","rowgroup");for(const l of i.outlets)s.appendChild(l.elementRef.nativeElement);t.appendChild(s)}this._elementRef.nativeElement.appendChild(t)}_forceRenderDataRows(){this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear(),this.renderRows()}_checkStickyStates(){const t=(r,i)=>r||i.hasStickyChanged();this._headerRowDefs.reduce(t,!1)&&this.updateStickyHeaderRowStyles(),this._footerRowDefs.reduce(t,!1)&&this.updateStickyFooterRowStyles(),Array.from(this._columnDefsByName.values()).reduce(t,!1)&&(this._stickyColumnStylesNeedReset=!0,this.updateStickyColumnStyles())}_setupStickyStyler(){this._stickyStyler=new S4(this._isNativeHtmlTable,this.stickyCssClass,this._dir?this._dir.value:"ltr",this._coalescedStyleScheduler,this._platform.isBrowser,this.needsPositionStickyOnElement,this._stickyPositioningListener),(this._dir?this._dir.change:Ke()).pipe(Zs(this._onDestroy)).subscribe(r=>{this._stickyStyler.direction=r,this.updateStickyColumnStyles()})}_getOwnDefs(t){return t.filter(r=>!r._table||r._table===this)}_updateNoDataRow(){const t=this._customNoDataRow||this._noDataRow;if(!t)return;const r=0===this._rowOutlet.viewContainer.length;if(r===this._isShowingNoDataRow)return;const i=this._noDataRowOutlet.viewContainer;if(r){const s=i.createEmbeddedView(t.templateRef),l=s.rootNodes[0];1===s.rootNodes.length&&(null==l?void 0:l.nodeType)===this._document.ELEMENT_NODE&&(l.setAttribute("role","row"),l.classList.add(t._contentClassName))}else i.clear();this._isShowingNoDataRow=r}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.ZZ4),u.Y36(u.sBO),u.Y36(u.SBq),u.$8M("role"),u.Y36(Uu,8),u.Y36(ue),u.Y36(pi),u.Y36(Zb),u.Y36($R),u.Y36(tv),u.Y36(KR,12),u.Y36(u.R0b,8))},n.\u0275cmp=u.Xpm({type:n,selectors:[["cdk-table"],["table","cdk-table",""]],contentQueries:function(t,r,i){if(1&t&&(u.Suo(i,gT,5),u.Suo(i,Nc,5),u.Suo(i,pT,5),u.Suo(i,Kb,5),u.Suo(i,Yb,5)),2&t){let s;u.iGM(s=u.CRH())&&(r._noDataRow=s.first),u.iGM(s=u.CRH())&&(r._contentColumnDefs=s),u.iGM(s=u.CRH())&&(r._contentRowDefs=s),u.iGM(s=u.CRH())&&(r._contentHeaderRowDefs=s),u.iGM(s=u.CRH())&&(r._contentFooterRowDefs=s)}},viewQuery:function(t,r){if(1&t&&(u.Gf(mT,7),u.Gf(_T,7),u.Gf(yT,7),u.Gf(vT,7)),2&t){let i;u.iGM(i=u.CRH())&&(r._rowOutlet=i.first),u.iGM(i=u.CRH())&&(r._headerRowOutlet=i.first),u.iGM(i=u.CRH())&&(r._footerRowOutlet=i.first),u.iGM(i=u.CRH())&&(r._noDataRowOutlet=i.first)}},hostAttrs:[1,"cdk-table"],hostVars:2,hostBindings:function(t,r){2&t&&u.ekj("cdk-table-fixed-layout",r.fixedLayout)},inputs:{trackBy:"trackBy",dataSource:"dataSource",multiTemplateDataRows:"multiTemplateDataRows",fixedLayout:"fixedLayout"},outputs:{contentChanged:"contentChanged"},exportAs:["cdkTable"],features:[u._Bn([{provide:Rm,useExisting:n},{provide:Zb,useClass:SU},{provide:$R,useClass:RU},{provide:KR,useValue:null}])],ngContentSelectors:_4,decls:6,vars:0,consts:[["headerRowOutlet",""],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(t,r){1&t&&(u.F$t(m4),u.Hsn(0),u.Hsn(1,1),u.GkF(2,0)(3,1)(4,2)(5,3))},directives:[_T,mT,vT,yT],styles:[".cdk-table-fixed-layout{table-layout:fixed}\n"],encapsulation:2}),n})();function wT(n,e){return n.concat(Array.from(e))}let M4=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[iv]]}),n})();const x4=[[["caption"]],[["colgroup"],["col"]]],R4=["caption","colgroup, col"];let NU=(()=>{class n extends bT{constructor(){super(...arguments),this.stickyCssClass="mat-table-sticky",this.needsPositionStickyOnElement=!1}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275cmp=u.Xpm({type:n,selectors:[["mat-table"],["table","mat-table",""]],hostAttrs:[1,"mat-table"],hostVars:2,hostBindings:function(t,r){2&t&&u.ekj("mat-table-fixed-layout",r.fixedLayout)},exportAs:["matTable"],features:[u._Bn([{provide:Zb,useClass:SU},{provide:bT,useExisting:n},{provide:Rm,useExisting:n},{provide:$R,useClass:RU},{provide:KR,useValue:null}]),u.qOj],ngContentSelectors:R4,decls:6,vars:0,consts:[["headerRowOutlet",""],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(t,r){1&t&&(u.F$t(x4),u.Hsn(0),u.Hsn(1,1),u.GkF(2,0)(3,1)(4,2)(5,3))},directives:[_T,mT,vT,yT],styles:["mat-table{display:block}mat-header-row{min-height:56px}mat-row,mat-footer-row{min-height:48px}mat-row,mat-header-row,mat-footer-row{display:flex;border-width:0;border-bottom-width:1px;border-style:solid;align-items:center;box-sizing:border-box}mat-cell:first-of-type,mat-header-cell:first-of-type,mat-footer-cell:first-of-type{padding-left:24px}[dir=rtl] mat-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:first-of-type:not(:only-of-type){padding-left:0;padding-right:24px}mat-cell:last-of-type,mat-header-cell:last-of-type,mat-footer-cell:last-of-type{padding-right:24px}[dir=rtl] mat-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:last-of-type:not(:only-of-type){padding-right:0;padding-left:24px}mat-cell,mat-header-cell,mat-footer-cell{flex:1;display:flex;align-items:center;overflow:hidden;word-wrap:break-word;min-height:inherit}table.mat-table{border-spacing:0}tr.mat-header-row{height:56px}tr.mat-row,tr.mat-footer-row{height:48px}th.mat-header-cell{text-align:left}[dir=rtl] th.mat-header-cell{text-align:right}th.mat-header-cell,td.mat-cell,td.mat-footer-cell{padding:0;border-bottom-width:1px;border-bottom-style:solid}th.mat-header-cell:first-of-type,td.mat-cell:first-of-type,td.mat-footer-cell:first-of-type{padding-left:24px}[dir=rtl] th.mat-header-cell:first-of-type:not(:only-of-type),[dir=rtl] td.mat-cell:first-of-type:not(:only-of-type),[dir=rtl] td.mat-footer-cell:first-of-type:not(:only-of-type){padding-left:0;padding-right:24px}th.mat-header-cell:last-of-type,td.mat-cell:last-of-type,td.mat-footer-cell:last-of-type{padding-right:24px}[dir=rtl] th.mat-header-cell:last-of-type:not(:only-of-type),[dir=rtl] td.mat-cell:last-of-type:not(:only-of-type),[dir=rtl] td.mat-footer-cell:last-of-type:not(:only-of-type){padding-right:0;padding-left:24px}.mat-table-sticky{position:sticky !important}.mat-table-fixed-layout{table-layout:fixed}\n"],encapsulation:2}),n})(),YR=(()=>{class n extends km{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["","matCellDef",""]],features:[u._Bn([{provide:km,useExisting:n}]),u.qOj]}),n})(),QR=(()=>{class n extends Om{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["","matHeaderCellDef",""]],features:[u._Bn([{provide:Om,useExisting:n}]),u.qOj]}),n})(),JR=(()=>{class n extends Nc{get name(){return this._name}set name(t){this._setNameInput(t)}_updateColumnCssClassName(){super._updateColumnCssClassName(),this._columnCssClassName.push(`mat-column-${this.cssClassFriendlyName}`)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["","matColumnDef",""]],inputs:{sticky:"sticky",name:["matColumnDef","name"]},features:[u._Bn([{provide:Nc,useExisting:n},{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:n}]),u.qOj]}),n})(),XR=(()=>{class n extends HR{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["mat-header-cell"],["th","mat-header-cell",""]],hostAttrs:["role","columnheader",1,"mat-header-cell"],features:[u.qOj]}),n})(),ek=(()=>{class n extends GR{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["mat-cell"],["td","mat-cell",""]],hostAttrs:["role","gridcell",1,"mat-cell"],features:[u.qOj]}),n})(),PU=(()=>{class n extends Kb{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["","matHeaderRowDef",""]],inputs:{columns:["matHeaderRowDef","columns"],sticky:["matHeaderRowDefSticky","sticky"]},features:[u._Bn([{provide:Kb,useExisting:n}]),u.qOj]}),n})(),FU=(()=>{class n extends pT{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["","matRowDef",""]],inputs:{columns:["matRowDefColumns","columns"],when:["matRowDefWhen","when"]},features:[u._Bn([{provide:pT,useExisting:n}]),u.qOj]}),n})(),LU=(()=>{class n extends qR{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275cmp=u.Xpm({type:n,selectors:[["mat-header-row"],["tr","mat-header-row",""]],hostAttrs:["role","row",1,"mat-header-row"],exportAs:["matHeaderRow"],features:[u._Bn([{provide:qR,useExisting:n}]),u.qOj],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(t,r){1&t&&u.GkF(0,0)},directives:[Pc],encapsulation:2}),n})(),VU=(()=>{class n extends ZR{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275cmp=u.Xpm({type:n,selectors:[["mat-row"],["tr","mat-row",""]],hostAttrs:["role","row",1,"mat-row"],exportAs:["matRow"],features:[u._Bn([{provide:ZR,useExisting:n}]),u.qOj],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(t,r){1&t&&u.GkF(0,0)},directives:[Pc],encapsulation:2}),n})(),j4=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[M4,mr],mr]}),n})(),G4=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["","mat-card-image",""],["","matCardImage",""]],hostAttrs:[1,"mat-card-image"]}),n})(),$4=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[mr],mr]}),n})();function z4(n,e){1&n&&(u.TgZ(0,"th",17),u._uU(1," Manufacturer "),u.qZA())}function q4(n,e){if(1&n&&(u.TgZ(0,"td",18),u._uU(1),u.qZA()),2&n){const t=e.$implicit;u.xp6(1),u.hij(" ",t.manufacturer," ")}}function W4(n,e){1&n&&(u.TgZ(0,"th",17),u._uU(1," Image "),u.qZA())}function Z4(n,e){if(1&n&&(u.TgZ(0,"td",18),u._UZ(1,"img",19),u.qZA()),2&n){const t=e.$implicit;u.xp6(1),u.Q6J("src",t.image,u.LSH)}}function K4(n,e){1&n&&(u.TgZ(0,"th",17),u._uU(1," Model "),u.qZA())}function Y4(n,e){if(1&n&&(u.TgZ(0,"td",18),u._uU(1),u.qZA()),2&n){const t=e.$implicit;u.xp6(1),u.hij(" ",t.model," ")}}function Q4(n,e){1&n&&(u.TgZ(0,"th",17),u._uU(1," Year "),u.qZA())}function J4(n,e){if(1&n&&(u.TgZ(0,"td",18),u._uU(1),u.qZA()),2&n){const t=e.$implicit;u.xp6(1),u.hij(" ",t.year," ")}}function X4(n,e){1&n&&(u.TgZ(0,"th",17),u._uU(1," Phone Number "),u.qZA())}function eZ(n,e){if(1&n&&(u.TgZ(0,"td",18),u._uU(1),u.qZA()),2&n){const t=e.$implicit;u.xp6(1),u.hij(" ",t.phoneNumber," ")}}function tZ(n,e){1&n&&(u.TgZ(0,"th",17),u._uU(1," Price "),u.qZA())}function nZ(n,e){if(1&n&&(u.TgZ(0,"td",18),u._uU(1),u.qZA()),2&n){const t=e.$implicit;u.xp6(1),u.hij(" ",t.price," ")}}function rZ(n,e){1&n&&(u.TgZ(0,"th",17),u._uU(1," Mile "),u.qZA())}function iZ(n,e){if(1&n&&(u.TgZ(0,"td",18),u._uU(1),u.qZA()),2&n){const t=e.$implicit;u.xp6(1),u.hij(" ",t.mile," ")}}function sZ(n,e){1&n&&(u.TgZ(0,"th",17),u._uU(1," Delete "),u.qZA())}function oZ(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"td",18)(1,"button",20),u.NdJ("click",function(){const s=u.CHM(t).$implicit;return u.oxw(2).onDeleteBtnClick(s.id)}),u._uU(2,"Delete"),u.qZA()()}}function aZ(n,e){1&n&&(u.TgZ(0,"th",17),u._uU(1," Update "),u.qZA())}function lZ(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"td",18)(1,"button",1),u.NdJ("click",function(){const s=u.CHM(t).$implicit;return u.oxw(2).openUpdateService(s.id)}),u._uU(2,"Update"),u.qZA()()}}function cZ(n,e){1&n&&u._UZ(0,"tr",21)}function uZ(n,e){1&n&&u._UZ(0,"tr",22)}function dZ(n,e){if(1&n&&(u.TgZ(0,"table",3),u.ynx(1,4),u.YNc(2,z4,2,0,"th",5),u.YNc(3,q4,2,1,"td",6),u.BQk(),u.ynx(4,7),u.YNc(5,W4,2,0,"th",5),u.YNc(6,Z4,2,1,"td",6),u.BQk(),u.ynx(7,8),u.YNc(8,K4,2,0,"th",5),u.YNc(9,Y4,2,1,"td",6),u.BQk(),u.ynx(10,9),u.YNc(11,Q4,2,0,"th",5),u.YNc(12,J4,2,1,"td",6),u.BQk(),u.ynx(13,10),u.YNc(14,X4,2,0,"th",5),u.YNc(15,eZ,2,1,"td",6),u.BQk(),u.ynx(16,11),u.YNc(17,tZ,2,0,"th",5),u.YNc(18,nZ,2,1,"td",6),u.BQk(),u.ynx(19,12),u.YNc(20,rZ,2,0,"th",5),u.YNc(21,iZ,2,1,"td",6),u.BQk(),u.ynx(22,13),u.YNc(23,sZ,2,0,"th",5),u.YNc(24,oZ,3,0,"td",6),u.BQk(),u.ynx(25,14),u.YNc(26,aZ,2,0,"th",5),u.YNc(27,lZ,3,0,"td",6),u.BQk(),u.YNc(28,cZ,1,0,"tr",15),u.YNc(29,uZ,1,0,"tr",16),u.qZA()),2&n){const t=u.oxw();u.Q6J("dataSource",t.dataSource),u.xp6(28),u.Q6J("matHeaderRowDef",t.displayedColumns),u.xp6(1),u.Q6J("matRowDefColumns",t.displayedColumns)}}let hZ=(()=>{class n{constructor(t,r,i,s){this.proxy=t,this.dialog=r,this.dialogService=i,this.emitter=s,this.cars=new Ab,this.displayedColumns=["image","manufacturer","model","year","phoneNumber","mile","price","delete","update"],this.dataSource=[]}ngOnInit(){this.getTableData(),this.emitter.updateEmitter.subscribe(t=>{this.proxy.updateCar(t,t.id).subscribe(r=>{r&&this.getTableData()})})}getTableData(){this.proxy.getAllCars().subscribe(t=>{this.dataSource=t})}onDeleteBtnClick(t){this.proxy.deleteCar(t).subscribe(r=>{console.log(r),this.getTableData()})}openDialog(){this.dialog.open(IU)}openUpdateService(t){this.proxy.getCarDataById(t).subscribe(r=>{this.dialogService.openService("update"),xc.carEmitter=r})}openCreateService(){this.dialogService.openService("create")}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Hy),u.Y36(Mc),u.Y36(f4),u.Y36(xc))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-app-table"]],decls:4,vars:1,consts:[[1,"add-Btn"],["mat-raised-button","","color","primary",3,"click"],["mat-table","","class","mat-elevation-z8",3,"dataSource",4,"ngIf"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","manufacturer"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","image"],["matColumnDef","model"],["matColumnDef","year"],["matColumnDef","phoneNumber"],["matColumnDef","price"],["matColumnDef","mile"],["matColumnDef","delete"],["matColumnDef","update"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-card-image","","alt","Photo of a Shiba Inu",3,"src"],["mat-raised-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,r){1&t&&(u.TgZ(0,"div",0)(1,"button",1),u.NdJ("click",function(){return r.openCreateService()}),u._uU(2,"Add New Car"),u.qZA()(),u.YNc(3,dZ,30,3,"table",2)),2&t&&(u.xp6(3),u.Q6J("ngIf",0!=r.dataSource.length))},directives:[TU,Ur,NU,JR,QR,XR,YR,ek,G4,PU,LU,FU,VU],styles:['@import"https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+Thai+Looped:wght@200&family=Montserrat:wght@300;500&family=Roboto+Condensed:ital@1&display=swap";*[_ngcontent-%COMP%]{font-family:IBM Plex Sans Thai Looped,sans-serif;font-family:Montserrat,sans-serif;font-family:Roboto Condensed,sans-serif}th[_ngcontent-%COMP%]{background-color:#f1f1f1;font-size:large;font-weight:900}td[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{font-size:medium}table[_ngcontent-%COMP%]{width:100%}img[_ngcontent-%COMP%]{width:200px;height:100px;object-fit:cover}.add-Btn[_ngcontent-%COMP%]{margin:20px}']}),n})(),fZ=(()=>{class n{constructor(t){this.proxy=t,this.title="angularcr"}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Hy))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&u._UZ(0,"app-app-table")},directives:[hZ],styles:[""]}),n})();var tk=F(3099);let vZ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[mr],mr]}),n})(),IZ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[mr,vm],mr]}),n})();var Nm=F(5363);class SZ extends St.x{constructor(e=1/0,t=1/0,r=Mo){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:l}=this;t||(r.push(e),!i&&r.push(s.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let l=0;l<s.length&&!e.closed;l+=r?1:2)e.next(s[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const l=t.now();let d=0;for(let p=1;p<r.length&&r[p]<=l;p+=2)d=p;d&&r.splice(0,d+1)}}}function WU(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,tk.B)({connector:()=>new SZ(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function ZU(n,e){return(0,Gr.m)(e)?Nn(()=>n,e):Nn(()=>n)}var DT=F(9468),zt=F(9681);(0,zt.registerVersion)("firebase","9.6.10","app");var q=F(5861),k=F(2090),qr=F(4859),vs=F(1877);const KU="@firebase/installations",QU="w:0.5.7",JU="FIS_v2",Fc=new k.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function XU(n){return n instanceof k.ZR&&n.code.includes("request-failed")}function ik({projectId:n}){return`https://firebaseinstallations.googleapis.com/v1/projects/${n}/installations`}function e2(n){return{token:n.token,requestStatus:2,expiresIn:PZ(n.expiresIn),creationTime:Date.now()}}function sk(n,e){return ok.apply(this,arguments)}function ok(){return(ok=(0,q.Z)(function*(n,e){const r=(yield e.json()).error;return Fc.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})).apply(this,arguments)}function t2({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function n2(n,{refreshToken:e}){const t=t2(n);return t.append("Authorization",function FZ(n){return`${JU} ${n}`}(e)),t}function ak(n){return lk.apply(this,arguments)}function lk(){return(lk=(0,q.Z)(function*(n){const e=yield n();return e.status>=500&&e.status<600?n():e})).apply(this,arguments)}function PZ(n){return Number(n.replace("s","000"))}function LZ(n,e){return ck.apply(this,arguments)}function ck(){return(ck=(0,q.Z)(function*({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=ik(n),i=t2(n),s=e.getImmediate({optional:!0});if(s){const y=yield s.getHeartbeatsHeader();y&&i.append("x-firebase-client",y)}const d={method:"POST",headers:i,body:JSON.stringify({fid:t,authVersion:JU,appId:n.appId,sdkVersion:QU})},p=yield ak(()=>fetch(r,d));if(p.ok){const y=yield p.json();return{fid:y.fid||t,registrationStatus:2,refreshToken:y.refreshToken,authToken:e2(y.authToken)}}throw yield sk("Create Installation",p)})).apply(this,arguments)}function r2(n){return new Promise(e=>{setTimeout(e,n)})}const BZ=/^[cdef][\w-]{21}$/;function UZ(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=function jZ(n){return function VZ(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}(n).substr(0,22)}(n);return BZ.test(t)?t:""}catch(n){return""}}function Pm(n){return`${n.appName}!${n.appId}`}const Fm=new Map;function s2(n,e){const t=Pm(n);o2(t,e),function $Z(n,e){const t=function a2(){return!xf&&"BroadcastChannel"in self&&(xf=new BroadcastChannel("[Firebase] FID Change"),xf.onmessage=n=>{o2(n.data.key,n.data.fid)}),xf}();t&&t.postMessage({key:n,fid:e}),function l2(){0===Fm.size&&xf&&(xf.close(),xf=null)}()}(t,e)}function o2(n,e){const t=Fm.get(n);if(t)for(const r of t)r(e)}let xf=null;const Rf="firebase-installations-store";let dk=null;function hk(){return dk||(dk=(0,k.X3)("firebase-installations-database",1,(n,e)=>{0===e&&n.createObjectStore(Rf)})),dk}function TT(n,e){return fk.apply(this,arguments)}function fk(){return(fk=(0,q.Z)(function*(n,e){const t=Pm(n),i=(yield hk()).transaction(Rf,"readwrite"),s=i.objectStore(Rf),l=yield s.get(t);return yield s.put(e,t),yield i.complete,(!l||l.fid!==e.fid)&&s2(n,e.fid),e})).apply(this,arguments)}function pk(n){return gk.apply(this,arguments)}function gk(){return(gk=(0,q.Z)(function*(n){const e=Pm(n),r=(yield hk()).transaction(Rf,"readwrite");yield r.objectStore(Rf).delete(e),yield r.complete})).apply(this,arguments)}function Jb(n,e){return mk.apply(this,arguments)}function mk(){return(mk=(0,q.Z)(function*(n,e){const t=Pm(n),i=(yield hk()).transaction(Rf,"readwrite"),s=i.objectStore(Rf),l=yield s.get(t),d=e(l);return void 0===d?yield s.delete(t):yield s.put(d,t),yield i.complete,d&&(!l||l.fid!==d.fid)&&s2(n,d.fid),d})).apply(this,arguments)}function _k(n){return yk.apply(this,arguments)}function yk(){return(yk=(0,q.Z)(function*(n){let e;const t=yield Jb(n.appConfig,r=>{const i=WZ(r),s=ZZ(n,i);return e=s.registrationPromise,s.installationEntry});return""===t.fid?{installationEntry:yield e}:{installationEntry:t,registrationPromise:e}})).apply(this,arguments)}function WZ(n){return u2(n||{fid:UZ(),registrationStatus:0})}function ZZ(n,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(Fc.create("app-offline"))};const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=function KZ(n,e){return vk.apply(this,arguments)}(n,t);return{installationEntry:t,registrationPromise:r}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:YZ(n)}:{installationEntry:e}}function vk(){return(vk=(0,q.Z)(function*(n,e){try{const t=yield LZ(n,e);return TT(n.appConfig,t)}catch(t){throw XU(t)&&409===t.customData.serverCode?yield pk(n.appConfig):yield TT(n.appConfig,{fid:e.fid,registrationStatus:0}),t}})).apply(this,arguments)}function YZ(n){return bk.apply(this,arguments)}function bk(){return(bk=(0,q.Z)(function*(n){let e=yield c2(n.appConfig);for(;1===e.registrationStatus;)yield r2(100),e=yield c2(n.appConfig);if(0===e.registrationStatus){const{installationEntry:t,registrationPromise:r}=yield _k(n);return r||t}return e})).apply(this,arguments)}function c2(n){return Jb(n,e=>{if(!e)throw Fc.create("installation-not-found");return u2(e)})}function u2(n){return function QZ(n){return 1===n.registrationStatus&&n.registrationTime+1e4<Date.now()}(n)?{fid:n.fid,registrationStatus:0}:n}function JZ(n,e){return wk.apply(this,arguments)}function wk(){return(wk=(0,q.Z)(function*({appConfig:n,heartbeatServiceProvider:e},t){const r=XZ(n,t),i=n2(n,t),s=e.getImmediate({optional:!0});if(s){const y=yield s.getHeartbeatsHeader();y&&i.append("x-firebase-client",y)}const d={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:QU,appId:n.appId}})},p=yield ak(()=>fetch(r,d));if(p.ok)return e2(yield p.json());throw yield sk("Generate Auth Token",p)})).apply(this,arguments)}function XZ(n,{fid:e}){return`${ik(n)}/${e}/authTokens:generate`}function Ck(n){return Ek.apply(this,arguments)}function Ek(){return(Ek=(0,q.Z)(function*(n,e=!1){let t;const r=yield Jb(n.appConfig,s=>{if(!h2(s))throw Fc.create("not-registered");const l=s.authToken;if(!e&&n8(l))return s;if(1===l.requestStatus)return t=e8(n,e),s;{if(!navigator.onLine)throw Fc.create("app-offline");const d=i8(s);return t=t8(n,d),d}});return t?yield t:r.authToken})).apply(this,arguments)}function e8(n,e){return Dk.apply(this,arguments)}function Dk(){return(Dk=(0,q.Z)(function*(n,e){let t=yield d2(n.appConfig);for(;1===t.authToken.requestStatus;)yield r2(100),t=yield d2(n.appConfig);const r=t.authToken;return 0===r.requestStatus?Ck(n,e):r})).apply(this,arguments)}function d2(n){return Jb(n,e=>{if(!h2(e))throw Fc.create("not-registered");return function s8(n){return 1===n.requestStatus&&n.requestTime+1e4<Date.now()}(e.authToken)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function t8(n,e){return Tk.apply(this,arguments)}function Tk(){return(Tk=(0,q.Z)(function*(n,e){try{const t=yield JZ(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return yield TT(n.appConfig,r),t}catch(t){if(!XU(t)||401!==t.customData.serverCode&&404!==t.customData.serverCode){const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield TT(n.appConfig,r)}else yield pk(n.appConfig);throw t}})).apply(this,arguments)}function h2(n){return void 0!==n&&2===n.registrationStatus}function n8(n){return 2===n.requestStatus&&!function r8(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+36e5}(n)}function i8(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function Ik(){return(Ik=(0,q.Z)(function*(n){const e=n,{installationEntry:t,registrationPromise:r}=yield _k(e);return r?r.catch(console.error):Ck(e).catch(console.error),t.fid})).apply(this,arguments)}function Sk(){return(Sk=(0,q.Z)(function*(n,e=!1){const t=n;return yield l8(t),(yield Ck(t,e)).token})).apply(this,arguments)}function l8(n){return Ak.apply(this,arguments)}function Ak(){return(Ak=(0,q.Z)(function*(n){const{registrationPromise:e}=yield _k(n);e&&(yield e)})).apply(this,arguments)}function Rk(n){return Fc.create("missing-app-config-values",{valueName:n})}const f2="installations",f8=n=>{const e=n.getProvider("app").getImmediate(),t=function d8(n){if(!n||!n.options)throw Rk("App Configuration");if(!n.name)throw Rk("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw Rk(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}(e);return{app:e,appConfig:t,heartbeatServiceProvider:(0,zt._getProvider)(e,"heartbeat"),_delete:()=>Promise.resolve()}},p8=n=>{const e=n.getProvider("app").getImmediate(),t=(0,zt._getProvider)(e,f2).getImmediate();return{getId:()=>function o8(n){return Ik.apply(this,arguments)}(t),getToken:i=>function a8(n){return Sk.apply(this,arguments)}(t,i)}};(function g8(){(0,zt._registerComponent)(new qr.wA(f2,f8,"PUBLIC")),(0,zt._registerComponent)(new qr.wA("installations-internal",p8,"PRIVATE"))})(),(0,zt.registerVersion)(KU,"0.5.7"),(0,zt.registerVersion)(KU,"0.5.7","esm2017");const kk="@firebase/remote-config",bs=new k.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class I8{constructor(e,t,r,i){this.client=e,this.storage=t,this.storageCache=r,this.logger=i}isCachedDataFresh(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const r=Date.now()-t,i=r<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${r}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${i}.`),i}fetch(e){var t=this;return(0,q.Z)(function*(){const[r,i]=yield Promise.all([t.storage.getLastSuccessfulFetchTimestampMillis(),t.storage.getLastSuccessfulFetchResponse()]);if(i&&t.isCachedDataFresh(e.cacheMaxAgeMillis,r))return i;e.eTag=i&&i.eTag;const s=yield t.client.fetch(e),l=[t.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===s.status&&l.push(t.storage.setLastSuccessfulFetchResponse(s)),yield Promise.all(l),s})()}}function S8(n=navigator){return n.languages&&n.languages[0]||n.language}class A8{constructor(e,t,r,i,s,l){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=r,this.projectId=i,this.apiKey=s,this.appId=l}fetch(e){var t=this;return(0,q.Z)(function*(){const[r,i]=yield Promise.all([t.firebaseInstallations.getId(),t.firebaseInstallations.getToken()]),l=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${t.projectId}/namespaces/${t.namespace}:fetch?key=${t.apiKey}`,d={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},p={sdk_version:t.sdkVersion,app_instance_id:r,app_instance_id_token:i,app_id:t.appId,language_code:S8()},y={method:"POST",headers:d,body:JSON.stringify(p)},C=fetch(l,y),D=new Promise((Te,be)=>{e.signal.addEventListener(()=>{const He=new Error("The operation was aborted.");He.name="AbortError",be(He)})});let M;try{yield Promise.race([C,D]),M=yield C}catch(Te){let be="fetch-client-network";throw"AbortError"===Te.name&&(be="fetch-timeout"),bs.create(be,{originalErrorMessage:Te.message})}let R=M.status;const N=M.headers.get("ETag")||void 0;let j,Q;if(200===M.status){let Te;try{Te=yield M.json()}catch(be){throw bs.create("fetch-client-parse",{originalErrorMessage:be.message})}j=Te.entries,Q=Te.state}if("INSTANCE_STATE_UNSPECIFIED"===Q?R=500:"NO_CHANGE"===Q?R=304:("NO_TEMPLATE"===Q||"EMPTY_CONFIG"===Q)&&(j={}),304!==R&&200!==R)throw bs.create("fetch-status",{httpStatus:R});return{status:R,eTag:N,config:j}})()}}class R8{constructor(e,t){this.client=e,this.storage=t}fetch(e){var t=this;return(0,q.Z)(function*(){const r=(yield t.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return t.attemptFetch(e,r)})()}attemptFetch(e,{throttleEndTimeMillis:t,backoffCount:r}){var i=this;return(0,q.Z)(function*(){yield function M8(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(s),r(bs.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(e.signal,t);try{const s=yield i.client.fetch(e);return yield i.storage.deleteThrottleMetadata(),s}catch(s){if(!function x8(n){if(!(n instanceof k.ZR&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}(s))throw s;const l={throttleEndTimeMillis:Date.now()+(0,k.$s)(r),backoffCount:r+1};return yield i.storage.setThrottleMetadata(l),i.attemptFetch(e,l)}})()}}class N8{constructor(e,t,r,i,s){this.app=e,this._client=t,this._storageCache=r,this._storage=i,this._logger=s,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function ST(n,e){const t=n.target.error||void 0;return bs.create(e,{originalErrorMessage:t&&t.message})}const kf="app_namespace_store";class V8{constructor(e,t,r,i=function L8(){return new Promise((n,e)=>{try{const t=indexedDB.open("firebase_remote_config",1);t.onerror=r=>{e(ST(r,"storage-open"))},t.onsuccess=r=>{n(r.target.result)},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(kf,{keyPath:"compositeKey"})}}catch(t){e(bs.create("storage-open",{originalErrorMessage:t}))}})}()){this.appId=e,this.appName=t,this.namespace=r,this.openDbPromise=i}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(e){var t=this;return(0,q.Z)(function*(){const r=yield t.openDbPromise;return new Promise((i,s)=>{const d=r.transaction([kf],"readonly").objectStore(kf),p=t.createCompositeKey(e);try{const y=d.get(p);y.onerror=C=>{s(ST(C,"storage-get"))},y.onsuccess=C=>{const D=C.target.result;i(D?D.value:void 0)}}catch(y){s(bs.create("storage-get",{originalErrorMessage:y&&y.message}))}})})()}set(e,t){var r=this;return(0,q.Z)(function*(){const i=yield r.openDbPromise;return new Promise((s,l)=>{const p=i.transaction([kf],"readwrite").objectStore(kf),y=r.createCompositeKey(e);try{const C=p.put({compositeKey:y,value:t});C.onerror=D=>{l(ST(D,"storage-set"))},C.onsuccess=()=>{s()}}catch(C){l(bs.create("storage-set",{originalErrorMessage:C&&C.message}))}})})()}delete(e){var t=this;return(0,q.Z)(function*(){const r=yield t.openDbPromise;return new Promise((i,s)=>{const d=r.transaction([kf],"readwrite").objectStore(kf),p=t.createCompositeKey(e);try{const y=d.delete(p);y.onerror=C=>{s(ST(C,"storage-delete"))},y.onsuccess=()=>{i()}}catch(y){s(bs.create("storage-delete",{originalErrorMessage:y&&y.message}))}})})()}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}}class B8{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var e=this;return(0,q.Z)(function*(){const t=e.storage.getLastFetchStatus(),r=e.storage.getLastSuccessfulFetchTimestampMillis(),i=e.storage.getActiveConfig(),s=yield t;s&&(e.lastFetchStatus=s);const l=yield r;l&&(e.lastSuccessfulFetchTimestampMillis=l);const d=yield i;d&&(e.activeConfig=d)})()}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}function j8(){return Lk.apply(this,arguments)}function Lk(){return(Lk=(0,q.Z)(function*(){if(!(0,k.hl)())return!1;try{return yield(0,k.eu)()}catch(n){return!1}})).apply(this,arguments)}!function U8(){(0,zt._registerComponent)(new qr.wA("remote-config",function n(e,{instanceIdentifier:t}){const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw bs.create("registration-window");if(!(0,k.hl)())throw bs.create("indexed-db-unavailable");const{projectId:s,apiKey:l,appId:d}=r.options;if(!s)throw bs.create("registration-project-id");if(!l)throw bs.create("registration-api-key");if(!d)throw bs.create("registration-app-id");const p=new V8(d,r.name,t=t||"firebase"),y=new B8(p),C=new vs.Yd(kk);C.logLevel=vs.in.ERROR;const D=new A8(i,zt.SDK_VERSION,t,s,l,d),M=new R8(D,p),R=new I8(M,p,y,C),N=new N8(r,R,y,p,C);return function E8(n){const e=(0,k.m9)(n);e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0}))}(N),N},"PUBLIC").setMultipleInstances(!0)),(0,zt.registerVersion)(kk,"0.3.6"),(0,zt.registerVersion)(kk,"0.3.6","esm2017")}();const H8="/firebase-messaging-sw.js",G8="/firebase-cloud-messaging-push-scope",_2="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",y2="google.c.a.c_id",z8="google.c.a.c_l",q8="google.c.a.ts",W8="google.c.a.e";var Lm=(()=>{return(n=Lm||(Lm={})).PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked",Lm;var n})();function Lc(n){const e=new Uint8Array(n);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Z8(n){const t=(n+"=".repeat((4-n.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(t),i=new Uint8Array(r.length);for(let s=0;s<r.length;++s)i[s]=r.charCodeAt(s);return i}const Vk="fcm_token_details_db",v2="fcm_token_object_Store";function Y8(n){return Bk.apply(this,arguments)}function Bk(){return Bk=(0,q.Z)(function*(n){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(s=>s.name).includes(Vk))return null;let e=null;return(yield(0,k.X3)(Vk,5,function(){var r=(0,q.Z)(function*(i,s,l,d){var p;if(s<2||!i.objectStoreNames.contains(v2))return;const y=d.objectStore(v2),C=yield y.index("fcmSenderId").get(n);if(yield y.clear(),C)if(2===s){const D=C;if(!D.auth||!D.p256dh||!D.endpoint)return;e={token:D.fcmToken,createTime:null!==(p=D.createTime)&&void 0!==p?p:Date.now(),subscriptionOptions:{auth:D.auth,p256dh:D.p256dh,endpoint:D.endpoint,swScope:D.swScope,vapidKey:"string"==typeof D.vapidKey?D.vapidKey:Lc(D.vapidKey)}}}else if(3===s){const D=C;e={token:D.fcmToken,createTime:D.createTime,subscriptionOptions:{auth:Lc(D.auth),p256dh:Lc(D.p256dh),endpoint:D.endpoint,swScope:D.swScope,vapidKey:Lc(D.vapidKey)}}}else if(4===s){const D=C;e={token:D.fcmToken,createTime:D.createTime,subscriptionOptions:{auth:Lc(D.auth),p256dh:Lc(D.p256dh),endpoint:D.endpoint,swScope:D.swScope,vapidKey:Lc(D.vapidKey)}}}});return function(i,s,l,d){return r.apply(this,arguments)}}())).close(),yield(0,k.Lj)(Vk),yield(0,k.Lj)("fcm_vapid_details_db"),yield(0,k.Lj)("undefined"),Q8(e)?e:null}),Bk.apply(this,arguments)}function Q8(n){if(!n||!n.subscriptionOptions)return!1;const{subscriptionOptions:e}=n;return"number"==typeof n.createTime&&n.createTime>0&&"string"==typeof n.token&&n.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}const Of="firebase-messaging-store";let Uk=null;function jk(){return Uk||(Uk=(0,k.X3)("firebase-messaging-database",1,(n,e)=>{0===e&&n.createObjectStore(Of)})),Uk}function b2(n){return Hk.apply(this,arguments)}function Hk(){return(Hk=(0,q.Z)(function*(n){const e=qk(n),r=yield(yield jk()).transaction(Of).objectStore(Of).get(e);if(r)return r;{const i=yield Y8(n.appConfig.senderId);if(i)return yield Gk(n,i),i}})).apply(this,arguments)}function Gk(n,e){return $k.apply(this,arguments)}function $k(){return($k=(0,q.Z)(function*(n,e){const t=qk(n),i=(yield jk()).transaction(Of,"readwrite");return yield i.objectStore(Of).put(e,t),yield i.complete,e})).apply(this,arguments)}function eK(n){return zk.apply(this,arguments)}function zk(){return(zk=(0,q.Z)(function*(n){const e=qk(n),r=(yield jk()).transaction(Of,"readwrite");yield r.objectStore(Of).delete(e),yield r.complete})).apply(this,arguments)}function qk({appConfig:n}){return n.appId}const _i=new k.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function nK(n,e){return Wk.apply(this,arguments)}function Wk(){return(Wk=(0,q.Z)(function*(n,e){const t=yield Qk(n),r=C2(e),i={method:"POST",headers:t,body:JSON.stringify(r)};let s;try{s=yield(yield fetch(Yk(n.appConfig),i)).json()}catch(l){throw _i.create("token-subscribe-failed",{errorInfo:l})}if(s.error)throw _i.create("token-subscribe-failed",{errorInfo:s.error.message});if(!s.token)throw _i.create("token-subscribe-no-token");return s.token})).apply(this,arguments)}function rK(n,e){return Zk.apply(this,arguments)}function Zk(){return(Zk=(0,q.Z)(function*(n,e){const t=yield Qk(n),r=C2(e.subscriptionOptions),i={method:"PATCH",headers:t,body:JSON.stringify(r)};let s;try{s=yield(yield fetch(`${Yk(n.appConfig)}/${e.token}`,i)).json()}catch(l){throw _i.create("token-update-failed",{errorInfo:l})}if(s.error)throw _i.create("token-update-failed",{errorInfo:s.error.message});if(!s.token)throw _i.create("token-update-no-token");return s.token})).apply(this,arguments)}function w2(n,e){return Kk.apply(this,arguments)}function Kk(){return(Kk=(0,q.Z)(function*(n,e){const r={method:"DELETE",headers:yield Qk(n)};try{const s=yield(yield fetch(`${Yk(n.appConfig)}/${e}`,r)).json();if(s.error)throw _i.create("token-unsubscribe-failed",{errorInfo:s.error.message})}catch(i){throw _i.create("token-unsubscribe-failed",{errorInfo:i})}})).apply(this,arguments)}function Yk({projectId:n}){return`https://fcmregistrations.googleapis.com/v1/projects/${n}/registrations`}function Qk(n){return Jk.apply(this,arguments)}function Jk(){return(Jk=(0,q.Z)(function*({appConfig:n,installations:e}){const t=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${t}`})})).apply(this,arguments)}function C2({p256dh:n,auth:e,endpoint:t,vapidKey:r}){const i={web:{endpoint:t,auth:e,p256dh:n}};return r!==_2&&(i.web.applicationPubKey=r),i}const iK=6048e5;function sK(n){return Xk.apply(this,arguments)}function Xk(){return(Xk=(0,q.Z)(function*(n){const e=yield aK(n.swRegistration,n.vapidKey),t={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:e.endpoint,auth:Lc(e.getKey("auth")),p256dh:Lc(e.getKey("p256dh"))},r=yield b2(n.firebaseDependencies);if(r){if(lK(r.subscriptionOptions,t))return Date.now()>=r.createTime+iK?oK(n,{token:r.token,createTime:Date.now(),subscriptionOptions:t}):r.token;try{yield w2(n.firebaseDependencies,r.token)}catch(i){console.warn(i)}return D2(n.firebaseDependencies,t)}return D2(n.firebaseDependencies,t)})).apply(this,arguments)}function E2(n){return eO.apply(this,arguments)}function eO(){return(eO=(0,q.Z)(function*(n){const e=yield b2(n.firebaseDependencies);e&&(yield w2(n.firebaseDependencies,e.token),yield eK(n.firebaseDependencies));const t=yield n.swRegistration.pushManager.getSubscription();return!t||t.unsubscribe()})).apply(this,arguments)}function oK(n,e){return tO.apply(this,arguments)}function tO(){return(tO=(0,q.Z)(function*(n,e){try{const t=yield rK(n.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:t,createTime:Date.now()});return yield Gk(n.firebaseDependencies,r),t}catch(t){throw yield E2(n),t}})).apply(this,arguments)}function D2(n,e){return nO.apply(this,arguments)}function nO(){return(nO=(0,q.Z)(function*(n,e){const r={token:yield nK(n,e),createTime:Date.now(),subscriptionOptions:e};return yield Gk(n,r),r.token})).apply(this,arguments)}function aK(n,e){return rO.apply(this,arguments)}function rO(){return(rO=(0,q.Z)(function*(n,e){return(yield n.pushManager.getSubscription())||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Z8(e)})})).apply(this,arguments)}function lK(n,e){return e.vapidKey===n.vapidKey&&e.endpoint===n.endpoint&&e.auth===n.auth&&e.p256dh===n.p256dh}function T2(n){const e={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return function cK(n,e){if(!e.notification)return;n.notification={};const t=e.notification.title;t&&(n.notification.title=t);const r=e.notification.body;r&&(n.notification.body=r);const i=e.notification.image;i&&(n.notification.image=i)}(e,n),function uK(n,e){!e.data||(n.data=e.data)}(e,n),function dK(n,e){if(!e.fcmOptions)return;n.fcmOptions={};const t=e.fcmOptions.link;t&&(n.fcmOptions.link=t);const r=e.fcmOptions.analytics_label;r&&(n.fcmOptions.analyticsLabel=r)}(e,n),e}function hK(n){return"object"==typeof n&&!!n&&y2 in n}function I2(n,e){const t=[];for(let r=0;r<n.length;r++)t.push(n.charAt(r)),r<e.length&&t.push(e.charAt(r));return t.join("")}function iO(n){return _i.create("missing-app-config-values",{valueName:n})}I2("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),I2("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class pK{constructor(e,t,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=function fK(n){if(!n||!n.options)throw iO("App Configuration Object");if(!n.name)throw iO("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=n;for(const r of e)if(!t[r])throw iO(r);return{appName:n.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:i,installations:t,analyticsProvider:r}}_delete(){return Promise.resolve()}}function S2(n){return sO.apply(this,arguments)}function sO(){return(sO=(0,q.Z)(function*(n){try{n.swRegistration=yield navigator.serviceWorker.register(H8,{scope:G8}),n.swRegistration.update().catch(()=>{})}catch(e){throw _i.create("failed-service-worker-registration",{browserErrorMessage:e.message})}})).apply(this,arguments)}function gK(n,e){return oO.apply(this,arguments)}function oO(){return(oO=(0,q.Z)(function*(n,e){if(!e&&!n.swRegistration&&(yield S2(n)),e||!n.swRegistration){if(!(e instanceof ServiceWorkerRegistration))throw _i.create("invalid-sw-registration");n.swRegistration=e}})).apply(this,arguments)}function mK(n,e){return aO.apply(this,arguments)}function aO(){return(aO=(0,q.Z)(function*(n,e){e?n.vapidKey=e:n.vapidKey||(n.vapidKey=_2)})).apply(this,arguments)}function lO(){return(lO=(0,q.Z)(function*(n,e){if(!navigator)throw _i.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw _i.create("permission-blocked");return yield mK(n,null==e?void 0:e.vapidKey),yield gK(n,null==e?void 0:e.serviceWorkerRegistration),sK(n)})).apply(this,arguments)}function _K(n,e,t){return cO.apply(this,arguments)}function cO(){return(cO=(0,q.Z)(function*(n,e,t){const r=yK(e);(yield n.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:t[y2],message_name:t[z8],message_time:t[q8],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function yK(n){switch(n){case Lm.NOTIFICATION_CLICKED:return"notification_open";case Lm.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function uO(){return(uO=(0,q.Z)(function*(n,e){const t=e.data;if(!t.isFirebaseMessaging)return;n.onMessageHandler&&t.messageType===Lm.PUSH_RECEIVED&&("function"==typeof n.onMessageHandler?n.onMessageHandler(T2(t)):n.onMessageHandler.next(T2(t)));const r=t.data;hK(r)&&"1"===r[W8]&&(yield _K(n,t.messageType,r))})).apply(this,arguments)}const M2="@firebase/messaging",bK=n=>{const e=new pK(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",t=>function vK(n,e){return uO.apply(this,arguments)}(e,t)),e},wK=n=>{const e=n.getProvider("messaging").getImmediate();return{getToken:r=>function A2(n,e){return lO.apply(this,arguments)}(e,r)}};function R2(){return dO.apply(this,arguments)}function dO(){return(dO=(0,q.Z)(function*(){try{yield(0,k.eu)()}catch(n){return!1}return"undefined"!=typeof window&&(0,k.hl)()&&(0,k.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function CK(){(0,zt._registerComponent)(new qr.wA("messaging",bK,"PUBLIC")),(0,zt._registerComponent)(new qr.wA("messaging-internal",wK,"PRIVATE")),(0,zt.registerVersion)(M2,"0.9.11"),(0,zt.registerVersion)(M2,"0.9.11","esm2017")}();const AT="analytics",TK="firebase_id",AK="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",k2="https://www.googletagmanager.com/gtag/js",yi=new vs.Yd("@firebase/analytics");function O2(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function MK(n,e){const t=document.createElement("script");t.src=`${k2}?l=${n}&id=${e}`,t.async=!0,document.head.appendChild(t)}function RK(n,e,t,r,i,s){return pO.apply(this,arguments)}function pO(){return(pO=(0,q.Z)(function*(n,e,t,r,i,s){const l=r[i];try{if(l)yield e[l];else{const p=(yield O2(t)).find(y=>y.measurementId===i);p&&(yield e[p.appId])}}catch(d){yi.error(d)}n("config",i,s)})).apply(this,arguments)}function kK(n,e,t,r,i){return gO.apply(this,arguments)}function gO(){return(gO=(0,q.Z)(function*(n,e,t,r,i){try{let s=[];if(i&&i.send_to){let l=i.send_to;Array.isArray(l)||(l=[l]);const d=yield O2(t);for(const p of l){const y=d.find(D=>D.measurementId===p),C=y&&e[y.appId];if(!C){s=[];break}s.push(C)}}0===s.length&&(s=Object.values(e)),yield Promise.all(s),n("event",r,i||{})}catch(s){yi.error(s)}})).apply(this,arguments)}function PK(){const n=window.document.getElementsByTagName("script");for(const e of Object.values(n))if(e.src&&e.src.includes(k2))return e;return null}const to=new k.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),N2=new class BK{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function UK(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}function jK(n){return mO.apply(this,arguments)}function mO(){return(mO=(0,q.Z)(function*(n){var e;const{appId:t,apiKey:r}=n,i={method:"GET",headers:UK(r)},s=AK.replace("{app-id}",t),l=yield fetch(s,i);if(200!==l.status&&304!==l.status){let d="";try{const p=yield l.json();(null===(e=p.error)||void 0===e?void 0:e.message)&&(d=p.error.message)}catch(p){}throw to.create("config-fetch-failed",{httpStatus:l.status,responseMessage:d})}return l.json()})).apply(this,arguments)}function HK(n){return _O.apply(this,arguments)}function _O(){return(_O=(0,q.Z)(function*(n,e=N2,t){const{appId:r,apiKey:i,measurementId:s}=n.options;if(!r)throw to.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw to.create("no-api-key")}const l=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},d=new zK;return setTimeout((0,q.Z)(function*(){d.abort()}),void 0!==t?t:6e4),P2({appId:r,apiKey:i,measurementId:s},l,d,e)})).apply(this,arguments)}function P2(n,e,t){return yO.apply(this,arguments)}function yO(){return(yO=(0,q.Z)(function*(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=N2){const{appId:s,measurementId:l}=n;try{yield GK(r,e)}catch(d){if(l)return yi.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${d.message}]`),{appId:s,measurementId:l};throw d}try{const d=yield jK(n);return i.deleteThrottleMetadata(s),d}catch(d){if(!$K(d)){if(i.deleteThrottleMetadata(s),l)return yi.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${d.message}]`),{appId:s,measurementId:l};throw d}const p=503===Number(d.customData.httpStatus)?(0,k.$s)(t,i.intervalMillis,30):(0,k.$s)(t,i.intervalMillis),y={throttleEndTimeMillis:Date.now()+p,backoffCount:t+1};return i.setThrottleMetadata(s,y),yi.debug(`Calling attemptFetch again in ${p} millis`),P2(n,y,r,i)}})).apply(this,arguments)}function GK(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(s),r(to.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function $K(n){if(!(n instanceof k.ZR&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}class zK{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}function qK(){return vO.apply(this,arguments)}function vO(){return(vO=(0,q.Z)(function*(){if(!(0,k.hl)())return yi.warn(to.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,k.eu)()}catch(n){return yi.warn(to.create("indexeddb-unavailable",{errorInfo:n}).message),!1}return!0})).apply(this,arguments)}function bO(){return(bO=(0,q.Z)(function*(n,e,t,r,i,s,l){var d;const p=HK(n);p.then(R=>{t[R.measurementId]=R.appId,n.options.measurementId&&R.measurementId!==n.options.measurementId&&yi.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${R.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(R=>yi.error(R)),e.push(p);const y=qK().then(R=>{if(R)return r.getId()}),[C,D]=yield Promise.all([p,y]);PK()||MK(s,C.measurementId),i("js",new Date);const M=null!==(d=null==l?void 0:l.config)&&void 0!==d?d:{};return M.origin="firebase",M.update=!0,null!=D&&(M[TK]=D),i("config",C.measurementId,M),C.measurementId})).apply(this,arguments)}class ZK{constructor(e){this.app=e}_delete(){return delete Vc[this.app.options.appId],Promise.resolve()}}let Vc={},F2=[];const L2={};let B2,Xb,MT="dataLayer",wO=!1;function YK(n,e,t){!function KK(){const n=[];if((0,k.ru)()&&n.push("This is a browser extension environment."),(0,k.zI)()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=to.create("invalid-analytics-context",{errorInfo:e});yi.warn(t.message)}}();const r=n.options.appId;if(!r)throw to.create("no-app-id");if(!n.options.apiKey){if(!n.options.measurementId)throw to.create("no-api-key");yi.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Vc[r])throw to.create("already-exists",{id:r});if(!wO){!function xK(n){let e=[];Array.isArray(window[n])?e=window[n]:window[n]=e}(MT);const{wrappedGtag:s,gtagCore:l}=function NK(n,e,t,r,i){let s=function(...l){window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(s=window[i]),window[i]=function OK(n,e,t,r){function s(){return(s=(0,q.Z)(function*(l,d,p){try{"event"===l?yield kK(n,e,t,d,p):"config"===l?yield RK(n,e,t,r,d,p):n("set",d)}catch(y){yi.error(y)}})).apply(this,arguments)}return function i(l,d,p){return s.apply(this,arguments)}}(s,n,e,t),{gtagCore:s,wrappedGtag:window[i]}}(Vc,F2,L2,MT,"gtag");Xb=s,B2=l,wO=!0}return Vc[r]=function WK(n,e,t,r,i,s,l){return bO.apply(this,arguments)}(n,F2,L2,e,B2,MT,t),new ZK(n)}function CO(){return(CO=(0,q.Z)(function*(n,e,t,r,i){if(i&&i.global)n("event",t,r);else{const s=yield e;n("event",t,Object.assign(Object.assign({},r),{send_to:s}))}})).apply(this,arguments)}function r5(){return SO.apply(this,arguments)}function SO(){return(SO=(0,q.Z)(function*(){if((0,k.ru)()||!(0,k.zI)()||!(0,k.hl)())return!1;try{return yield(0,k.eu)()}catch(n){return!1}})).apply(this,arguments)}const U2="@firebase/analytics";!function o5(){(0,zt._registerComponent)(new qr.wA(AT,(e,{options:t})=>YK(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t),"PUBLIC")),(0,zt._registerComponent)(new qr.wA("analytics-internal",function n(e){try{const t=e.getProvider(AT).getImmediate();return{logEvent:(r,i,s)=>function s5(n,e,t,r){n=(0,k.m9)(n),function QK(n,e,t,r,i){return CO.apply(this,arguments)}(Xb,Vc[n.app.options.appId],e,t,r).catch(i=>yi.error(i))}(t,r,i,s)}}catch(t){throw to.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),(0,zt.registerVersion)(U2,"0.7.7"),(0,zt.registerVersion)(U2,"0.7.7","esm2017")}();const c5=new class l5 extends Ag{}(class a5 extends Hh{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):e.flush(this)}}),xT=new u.GfV("7.3.0"),AO="__angularfire_symbol__analyticsIsSupportedValue",MO="__angularfire_symbol__analyticsIsSupported",xO="__angularfire_symbol__remoteConfigIsSupportedValue",RO="__angularfire_symbol__remoteConfigIsSupported",kO="__angularfire_symbol__messagingIsSupportedValue",OO="__angularfire_symbol__messagingIsSupported";function Vm(){}globalThis[MO]||(globalThis[MO]=r5().then(n=>globalThis[AO]=n).catch(()=>globalThis[AO]=!1)),globalThis[OO]||(globalThis[OO]=R2().then(n=>globalThis[kO]=n).catch(()=>globalThis[kO]=!1)),globalThis[RO]||(globalThis[RO]=j8().then(n=>globalThis[xO]=n).catch(()=>globalThis[xO]=!1));class H2{constructor(e,t=c5){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const i=this.zone;return this.delegate.schedule(function(l){i.runGuarded(()=>{e.apply(this,[l])})},t,r)}}class h5{constructor(e){this.zone=e,this.task=null}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Vm,{},Vm,Vm)),t.pipe(fr({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let RT=(()=>{class n{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new H2(Zone.current)),this.insideAngular=t.run(()=>new H2(Zone.current,vc)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Nf(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}function G2(n){return n.pipe((0,Nm.Q)(Nf().outsideAngular))}function sr(n){return Nf(),function p5(n){return function(t){return(t=t.lift(new h5(n.ngZone))).pipe((0,DT.R)(n.outsideAngular),(0,Nm.Q)(n.insideAngular))}}(Nf())(n)}var Wr=F(2011);const $2=new Map,b5={activated:!1,tokenObservers:[]},w5={initialized:!1,enabled:!1};function Zr(n){return $2.get(n)||b5}function Aa(n,e){$2.set(n,e)}function OT(){return w5}class I5{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,q.Z)(function*(){t.stop();try{t.pending=new k.BH,yield function S5(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new k.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Ji=new k.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function q2(n){if(!Zr(n).activated)throw Ji.create("use-before-activation",{appName:n.name})}function VO(n,e){return BO.apply(this,arguments)}function BO(){return(BO=(0,q.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const D=yield i.getHeartbeatsHeader();D&&(r["X-Firebase-Client"]=D)}const s={method:"POST",body:JSON.stringify(e),headers:r};let l,d;try{l=yield fetch(n,s)}catch(D){throw Ji.create("fetch-network-error",{originalErrorMessage:D.message})}if(200!==l.status)throw Ji.create("fetch-status-error",{httpStatus:l.status});try{d=yield l.json()}catch(D){throw Ji.create("fetch-parse-error",{originalErrorMessage:D.message})}const p=d.ttl.match(/^([\d.]+)(s)$/);if(!p||!p[2]||isNaN(Number(p[1])))throw Ji.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${d.ttl}`});const y=1e3*Number(p[1]),C=Date.now();return{token:d.attestationToken,expireTimeMillis:C+y,issuedAtTimeMillis:C}})).apply(this,arguments)}function k5(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const ew="firebase-app-check-store";let FT=null;function Z2(){return FT||(FT=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Ji.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(ew,{keyPath:"compositeKey"})}}catch(t){e(Ji.create("storage-open",{originalErrorMessage:t.message}))}}),FT)}function UO(){return(UO=(0,q.Z)(function*(n,e){const r=(yield Z2()).transaction(ew,"readwrite"),s=r.objectStore(ew).put({compositeKey:n,value:e});return new Promise((l,d)=>{s.onsuccess=p=>{l()},r.onerror=p=>{var y;d(Ji.create("storage-set",{originalErrorMessage:null===(y=p.target.error)||void 0===y?void 0:y.message}))}})})).apply(this,arguments)}const tw=new vs.Yd("@firebase/app-check");function J2(n,e){return(0,k.hl)()?function F5(n,e){return function K2(n,e){return UO.apply(this,arguments)}(function Q2(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{tw.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function X2(){return OT().enabled}function ej(){return $O.apply(this,arguments)}function $O(){return($O=(0,q.Z)(function*(){const n=OT();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const H5={error:"UNKNOWN_ERROR"};function G5(n){return k.US.encodeString(JSON.stringify(n),!1)}function LT(n){return zO.apply(this,arguments)}function zO(){return(zO=(0,q.Z)(function*(n,e=!1){const t=n.app;q2(t);const r=Zr(t);let s,i=r.token;if(!i){const p=yield r.cachedTokenPromise;p&&VT(p)&&(i=p)}if(!e&&i&&VT(i))return{token:i.token};let d,l=!1;if(X2()){r.exchangeTokenPromise||(r.exchangeTokenPromise=VO(k5(t,yield ej()),n.heartbeatServiceProvider).then(y=>(r.exchangeTokenPromise=void 0,y)),l=!0);const p=yield r.exchangeTokenPromise;return yield J2(t,p),Aa(t,Object.assign(Object.assign({},r),{token:p})),{token:p.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(p=>(r.exchangeTokenPromise=void 0,p)),l=!0),i=yield r.exchangeTokenPromise}catch(p){"appCheck/throttled"===p.code?tw.warn(p.message):tw.error(p),s=p}return i?(d={token:i.token},Aa(t,Object.assign(Object.assign({},r),{token:i})),yield J2(t,i)):d=z5(s),l&&nj(t,d),d})).apply(this,arguments)}function WO(n,e){const t=Zr(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Aa(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function tj(n){const{app:e}=n,t=Zr(e);let r=t.tokenRefresher;r||(r=function $5(n){const{app:e}=n;return new I5((0,q.Z)(function*(){let r;if(r=Zr(e).token?yield LT(n,!0):yield LT(n),r.error)throw r.error}),()=>!0,()=>{const t=Zr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Aa(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function nj(n,e){const t=Zr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function VT(n){return n.expireTimeMillis-Date.now()>0}function z5(n){return{token:G5(H5),error:n}}class q5{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Zr(this.app);for(const t of e)WO(this.app,t.next);return Promise.resolve()}}const uj="app-check-internal";!function oY(){(0,zt._registerComponent)(new qr.wA("app-check",n=>function W5(n,e){return new q5(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(uj).initialize()})),(0,zt._registerComponent)(new qr.wA(uj,n=>function Z5(n){return{getToken:e=>LT(n,e),addTokenListener:e=>function qO(n,e,t,r){const{app:i}=n,s=Zr(i),l={next:t,error:r,type:e};if(Aa(i,Object.assign(Object.assign({},s),{tokenObservers:[...s.tokenObservers,l]})),s.token&&VT(s.token)){const d=s.token;Promise.resolve().then(()=>{t({token:d.token}),tj(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>tj(n))}(n,"INTERNAL",e),removeTokenListener:e=>WO(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,zt.registerVersion)("@firebase/app-check","0.5.5")}();class nw{constructor(){return((n,e)=>{const t=(0,zt.getApps)(),r=[];return t.forEach(i=>{i.container.getProvider("app-check").instances.forEach(l=>{r.includes(l)||r.push(l)})}),r})()}}"undefined"!=typeof window&&window;var UT=F(127);const JO=new u.OlP("angularfire2.auth.use-emulator"),XO=new u.OlP("angularfire2.auth.settings"),eN=new u.OlP("angularfire2.auth.tenant-id"),tN=new u.OlP("angularfire2.auth.langugage-code"),nN=new u.OlP("angularfire2.auth.use-device-language"),rN=new u.OlP("angularfire.auth.persistence"),iN=(n,e,t,r,i,s,l,d)=>(0,Wr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const p=e.runOutsideAngular(()=>n.auth());if(t&&p.useEmulator(...t),r&&(p.tenantId=r),p.languageCode=i,s&&p.useDeviceLanguage(),l)for(const[y,C]of Object.entries(l))p.settings[y]=C;return d&&p.setPersistence(d),p},[t,r,i,s,l,d]);let jT=(()=>{class n{constructor(t,r,i,s,l,d,p,y,C,D,M,R){const N=new St.x,j=Ke(void 0).pipe((0,Nm.Q)(l.outsideAngular),Nn(()=>s.runOutsideAngular(()=>Promise.resolve().then(F.bind(F,4087)))),(0,st.U)(()=>(0,Wr.on)(t,s,r)),(0,st.U)(Q=>iN(Q,s,d,y,C,D,p,M)),WU({bufferSize:1,refCount:!1}));if(Ir(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Ke(null);else{j.pipe(da()).subscribe();const Te=j.pipe(Nn(Ne=>Ne.getRedirectResult().then(mt=>mt,()=>null)),sr,WU({bufferSize:1,refCount:!1})),be=j.pipe(Nn(Ne=>new Vn.y(mt=>({unsubscribe:s.runOutsideAngular(()=>Ne.onAuthStateChanged(ot=>mt.next(ot),ot=>mt.error(ot),()=>mt.complete()))})))),He=j.pipe(Nn(Ne=>new Vn.y(mt=>({unsubscribe:s.runOutsideAngular(()=>Ne.onIdTokenChanged(ot=>mt.next(ot),ot=>mt.error(ot),()=>mt.complete()))}))));this.authState=Te.pipe(ZU(be),(0,DT.R)(l.outsideAngular),(0,Nm.Q)(l.insideAngular)),this.user=Te.pipe(ZU(He),(0,DT.R)(l.outsideAngular),(0,Nm.Q)(l.insideAngular)),this.idToken=this.user.pipe(Nn(Ne=>Ne?(0,gn.D)(Ne.getIdToken()):Ke(null))),this.idTokenResult=this.user.pipe(Nn(Ne=>Ne?(0,gn.D)(Ne.getIdTokenResult()):Ke(null))),this.credential=(0,Hu.T)(Te,N,this.authState.pipe(tr(Ne=>!Ne))).pipe((0,st.U)(Ne=>(null==Ne?void 0:Ne.user)?Ne:null),(0,DT.R)(l.outsideAngular),(0,Nm.Q)(l.insideAngular))}return(0,Wr.pX)(this,j,s,{spy:{apply:(Q,Te,be)=>{(Q.startsWith("signIn")||Q.startsWith("createUser"))&&be.then(He=>N.next(He))}}})}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Wr.Dh),u.LFG(Wr.xv,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(RT),u.LFG(JO,8),u.LFG(XO,8),u.LFG(eN,8),u.LFG(tN,8),u.LFG(nN,8),u.LFG(rN,8),u.LFG(nw,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),hY=(()=>{class n{constructor(){UT.Z.registerVersion("angularfire",xT.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[jT]}),n})();var sN=F(3942);const hj="firebasestorage.googleapis.com",fj="storageBucket";class Xn extends k.ZR{constructor(e,t){super(oN(e),`Firebase Storage: ${t} (${oN(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Xn.prototype)}_codeEquals(e){return oN(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function oN(n){return"storage/"+n}function aN(){return new Xn("unknown","An unknown error occurred, please check the error payload for server response.")}function pj(){return new Xn("canceled","User canceled the upload/download.")}function gj(){return new Xn("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Bm(n){return new Xn("invalid-argument",n)}function mj(){return new Xn("app-deleted","The Firebase app was deleted.")}function _j(n){return new Xn("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function rw(n,e){return new Xn("invalid-format","String does not match format '"+n+"': "+e)}function iw(n){throw new Xn("internal-error","Internal error: "+n)}class Li{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Li.makeFromUrl(e,t)}catch(i){return new Li(e,"")}if(""===r.path)return r;throw function CY(n){return new Xn("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",d=new RegExp("^gs://"+i+"(/(.*))?$","i");function y(Ne){Ne.path_=decodeURIComponent(Ne.path)}const D=t.replace(/[.]/g,"\\."),He=[{regex:d,indices:{bucket:1,path:3},postModify:function s(Ne){"/"===Ne.path.charAt(Ne.path.length-1)&&(Ne.path_=Ne.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${D}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:y},{regex:new RegExp(`^https?://${t===hj?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:y}];for(let Ne=0;Ne<He.length;Ne++){const mt=He[Ne],ot=mt.regex.exec(e);if(ot){let mn=ot[mt.indices.path];mn||(mn=""),r=new Li(ot[mt.indices.bucket],mn),mt.postModify(r);break}}if(null==r)throw function wY(n){return new Xn("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class IY{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function HT(n){return"string"==typeof n||n instanceof String}function yj(n){return lN()&&n instanceof Blob}function lN(){return"undefined"!=typeof Blob}function cN(n,e,t,r){if(r<e)throw Bm(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Bm(`Invalid value for '${n}'. Expected ${t} or less.`)}function Bc(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function vj(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var ed=(()=>{return(n=ed||(ed={}))[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",ed;var n})();class kY{constructor(e,t,r,i,s,l,d,p,y,C,D){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=l,this.callback_=d,this.errorCallback_=p,this.timeout_=y,this.progressCallback_=C,this.connectionFactory_=D,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((M,R)=>{this.resolve_=M,this.reject_=R,this.start_()})}start_(){const t=(r,i)=>{const s=this.resolve_,l=this.reject_,d=i.connection;if(i.wasSuccessCode)try{const p=this.callback_(d,d.getResponse());!function MY(n){return void 0!==n}(p)?s():s(p)}catch(p){l(p)}else if(null!==d){const p=aN();p.serverResponse=d.getErrorText(),l(this.errorCallback_?this.errorCallback_(d,p):p)}else l(i.canceled?this.appDelete_?mj():pj():function bY(){return new Xn("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new GT(!1,null,!0)):this.backoffId_=function SY(n,e,t){let r=1,i=null,s=null,l=!1,d=0;function p(){return 2===d}let y=!1;function C(...Q){y||(y=!0,e.apply(null,Q))}function D(Q){i=setTimeout(()=>{i=null,n(R,p())},Q)}function M(){s&&clearTimeout(s)}function R(Q,...Te){if(y)return void M();if(Q)return M(),void C.call(null,Q,...Te);if(p()||l)return M(),void C.call(null,Q,...Te);let He;r<64&&(r*=2),1===d?(d=2,He=0):He=1e3*(r+Math.random()),D(He)}let N=!1;function j(Q){N||(N=!0,M(),!y&&(null!==i?(Q||(d=2),clearTimeout(i),D(0)):Q||(d=1)))}return D(0),s=setTimeout(()=>{l=!0,j(!0)},t),j}((r,i)=>{if(i)return void r(!1,new GT(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const l=d=>{null!==this.progressCallback_&&this.progressCallback_(d.loaded,d.lengthComputable?d.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(l),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(l),this.pendingConnection_=null;const d=s.getErrorCode()===ed.NO_ERROR,p=s.getStatus();if(!d||this.isRetryStatusCode_(p)){const C=s.getErrorCode()===ed.ABORT;return void r(!1,new GT(!1,null,C))}const y=-1!==this.successCodes_.indexOf(p);r(!0,new GT(y,s))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function AY(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,i=-1!==[408,429].indexOf(e),s=-1!==this.additionalRetryCodes_.indexOf(e);return t||i||s}}class GT{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function BY(...n){const e=function VY(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(lN())return new Blob(n);throw new Xn("unsupported-environment","This browser doesn't seem to support creating Blobs")}const no={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class uN{constructor(e,t){this.data=e,this.contentType=t||null}}function dN(n,e){switch(n){case no.RAW:return new uN(bj(e));case no.BASE64:case no.BASE64URL:return new uN(wj(n,e));case no.DATA_URL:return new uN(function GY(n){const e=new Cj(n);return e.base64?wj(no.BASE64,e.rest):function HY(n){let e;try{e=decodeURIComponent(n)}catch(t){throw rw(no.DATA_URL,"Malformed data URL.")}return bj(e)}(e.rest)}(e),function $Y(n){return new Cj(n).contentType}(e))}throw aN()}function bj(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function wj(n,e){switch(n){case no.BASE64:{const i=-1!==e.indexOf("-"),s=-1!==e.indexOf("_");if(i||s)throw rw(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case no.BASE64URL:{const i=-1!==e.indexOf("+"),s=-1!==e.indexOf("/");if(i||s)throw rw(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function jY(n){return atob(n)}(e)}catch(i){throw rw(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class Cj{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw rw(no.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function zY(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class Il{constructor(e,t){let r=0,i="";yj(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(yj(this.data_)){const i=function UY(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new Il(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Il(r,!0)}}static getBlob(...e){if(lN()){const t=e.map(r=>r instanceof Il?r.data_:r);return new Il(BY.apply(null,t))}{const t=e.map(l=>HT(l)?dN(no.RAW,l).data:l.data_);let r=0;t.forEach(l=>{r+=l.byteLength});const i=new Uint8Array(r);let s=0;return t.forEach(l=>{for(let d=0;d<l.length;d++)i[s++]=l[d]}),new Il(i,!0)}}uploadData(){return this.data_}}function hN(n){let e;try{e=JSON.parse(n)}catch(t){return null}return function RY(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function Ej(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function ZY(n,e){return e}class Xi{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||ZY}}let $T=null;function sw(){if($T)return $T;const n=[];n.push(new Xi("bucket")),n.push(new Xi("generation")),n.push(new Xi("metageneration")),n.push(new Xi("name","fullPath",!0));const t=new Xi("name");t.xform=function e(s,l){return function KY(n){return!HT(n)||n.length<2?n:Ej(n)}(l)},n.push(t);const i=new Xi("size");return i.xform=function r(s,l){return void 0!==l?Number(l):l},n.push(i),n.push(new Xi("timeCreated")),n.push(new Xi("updated")),n.push(new Xi("md5Hash",null,!0)),n.push(new Xi("cacheControl",null,!0)),n.push(new Xi("contentDisposition",null,!0)),n.push(new Xi("contentEncoding",null,!0)),n.push(new Xi("contentLanguage",null,!0)),n.push(new Xi("contentType",null,!0)),n.push(new Xi("metadata","customMetadata",!0)),$T=n,$T}function Dj(n,e,t){const r=hN(e);return null===r?null:function QY(n,e,t){const r={type:"file"},i=t.length;for(let s=0;s<i;s++){const l=t[s];r[l.local]=l.xform(r,e[l.server])}return function YY(n,e){Object.defineProperty(n,"ref",{get:function t(){const s=new Li(n.bucket,n.fullPath);return e._makeStorageReference(s)}})}(r,n),r}(n,r,t)}function fN(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}const Tj="prefixes";class Sl{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Al(n){if(!n)throw aN()}function zT(n,e){return function t(r,i){const s=Dj(n,i,e);return Al(null!==s),s}}function Um(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function yY(){return new Xn("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function _Y(){return new Xn("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function mY(n){return new Xn("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function vY(n){return new Xn("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.serverResponse=r.serverResponse,i}}function ow(n){const e=Um(n);return function t(r,i){let s=e(r,i);return 404===r.getStatus()&&(s=function gY(n){return new Xn("object-not-found","Object '"+n+"' does not exist.")}(n.path)),s.serverResponse=i.serverResponse,s}}function Sj(n,e,t){const i=Bc(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,d=new Sl(i,"GET",zT(n,t),l);return d.errorHandler=ow(e),d}function r7(n,e,t,r,i){const s={};s.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(s.delimiter=t),r&&(s.pageToken=r),i&&(s.maxResults=i);const d=Bc(e.bucketOnlyServerUrl(),n.host,n._protocol),y=n.maxOperationRetryTime,C=new Sl(d,"GET",function t7(n,e){return function t(r,i){const s=function e7(n,e,t){const r=hN(t);return null===r?null:function XY(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[Tj])for(const i of t[Tj]){const s=i.replace(/\/$/,""),l=n._makeStorageReference(new Li(e,s));r.prefixes.push(l)}if(t.items)for(const i of t.items){const s=n._makeStorageReference(new Li(e,i.name));r.items.push(s)}return r}(n,e,r)}(n,e,i);return Al(null!==s),s}}(n,e.bucket),y);return C.urlParams=s,C.errorHandler=Um(e),C}function Mj(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function a7(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class qT{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function pN(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch(i){Al(!1)}return Al(!!t&&-1!==(e||["active"]).indexOf(t)),t}const d7={STATE_CHANGED:"state_changed"},es={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function gN(n){switch(n){case"running":case"pausing":case"canceling":return es.RUNNING;case"paused":return es.PAUSED;case"success":return es.SUCCESS;case"canceled":return es.CANCELED;default:return es.ERROR}}class h7{constructor(e,t,r){if(function xY(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=r?r:void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}function jm(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class p7 extends class f7{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ed.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ed.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ed.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw iw("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw iw("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw iw("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw iw("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw iw("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function Ma(){return new p7}class Oj{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=sw(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=i,this._transition("error"))},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function l7(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),l=Mj(e,r,i),d={name:l.fullPath},p=Bc(s,n.host,n._protocol),C={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":l.contentType,"Content-Type":"application/json; charset=utf-8"},D=fN(l,t),N=new Sl(p,"POST",function R(j){let Q;pN(j);try{Q=j.getResponseHeader("X-Goog-Upload-URL")}catch(Te){Al(!1)}return Al(HT(Q)),Q},n.maxUploadRetryTime);return N.urlParams=d,N.headers=C,N.body=D,N.errorHandler=Um(e),N}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Ma,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function c7(n,e,t,r){const p=new Sl(t,"POST",function s(y){const C=pN(y,["active","final"]);let D=null;try{D=y.getResponseHeader("X-Goog-Upload-Size-Received")}catch(R){Al(!1)}D||Al(!1);const M=Number(D);return Al(!isNaN(M)),new qT(M,r.size(),"final"===C)},n.maxUploadRetryTime);return p.headers={"X-Goog-Upload-Command":"query"},p.errorHandler=Um(e),p}(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,Ma,t,r);this._request=s,s.getPromise().then(l=>{l=l,this._request=void 0,this._updateProgress(l.current),this._needToFetchStatus=!1,l.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new qT(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let l;try{l=function u7(n,e,t,r,i,s,l,d){const p=new qT(0,0);if(l?(p.current=l.current,p.total=l.total):(p.current=0,p.total=r.size()),r.size()!==p.total)throw function DY(){return new Xn("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const y=p.total-p.current;let C=y;i>0&&(C=Math.min(C,i));const D=p.current,N={"X-Goog-Upload-Command":C===y?"upload, finalize":"upload","X-Goog-Upload-Offset":`${p.current}`},j=r.slice(D,D+C);if(null===j)throw gj();const He=new Sl(t,"POST",function Q(Ne,mt){const ot=pN(Ne,["active","final"]),fn=p.current+C,mn=r.size();let lr;return lr="final"===ot?zT(e,s)(Ne,mt):null,new qT(fn,mn,"final"===ot,lr)},e.maxUploadRetryTime);return He.headers=N,He.body=j.uploadData(),He.progressCallback=d||null,He.errorHandler=Um(n),He}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(p){return this._error=p,void this._transition("error")}const d=this._ref.storage._makeRequest(l,Ma,i,s);this._request=d,d.getPromise().then(p=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(p.current),p.finalized?(this._metadata=p.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=Sj(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Ma,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function xj(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"},p=function d(){let He="";for(let Ne=0;Ne<2;Ne++)He+=Math.random().toString().slice(2);return He}();l["Content-Type"]="multipart/related; boundary="+p;const y=Mj(e,r,i),C=fN(y,t),R=Il.getBlob("--"+p+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+C+"\r\n--"+p+"\r\nContent-Type: "+y.contentType+"\r\n\r\n",r,"\r\n--"+p+"--");if(null===R)throw gj();const N={name:y.fullPath},j=Bc(s,n.host,n._protocol),Te=n.maxUploadRetryTime,be=new Sl(j,"POST",zT(n,t),Te);return be.urlParams=N,be.headers=l,be.body=R.uploadData(),be.errorHandler=Um(e),be}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Ma,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=pj(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=gN(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const s=new h7(t||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(gN(this._state)){case es.SUCCESS:jm(this._resolve.bind(null,this.snapshot))();break;case es.CANCELED:case es.ERROR:jm(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(gN(this._state)){case es.RUNNING:case es.PAUSED:e.next&&jm(e.next.bind(e,this.snapshot))();break;case es.SUCCESS:e.complete&&jm(e.complete.bind(e))();break;default:e.error&&jm(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Ff{constructor(e,t){this._service=e,this._location=t instanceof Li?t:Li.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Ff(e,t)}get root(){const e=new Li(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Ej(this._location.path)}get storage(){return this._service}get parent(){const e=function qY(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Li(this._location.bucket,e);return new Ff(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw _j(e)}}function Pj(n,e,t){return mN.apply(this,arguments)}function mN(){return(mN=(0,q.Z)(function*(n,e,t){const i=yield Fj(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield Pj(n,e,i.nextPageToken))})).apply(this,arguments)}function Fj(n,e){null!=e&&"number"==typeof e.maxResults&&cN("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=r7(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Ma)}function I7(n){n._throwIfRoot("getDownloadURL");const e=function i7(n,e,t){const i=Bc(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,d=new Sl(i,"GET",function n7(n,e){return function t(r,i){const s=Dj(n,i,e);return Al(null!==s),function JY(n,e,t,r){const i=hN(e);if(null===i||!HT(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const l=encodeURIComponent;return s.split(",").map(y=>{const D=n.fullPath;return Bc("/b/"+l(n.bucket)+"/o/"+l(D),t,r)+vj({alt:"media",token:y})})[0]}(s,i,n.host,n._protocol)}}(n,t),l);return d.errorHandler=ow(e),d}(n.storage,n._location,sw());return n.storage.makeRequestWithTokens(e,Ma).then(t=>{if(null===t)throw function TY(){return new Xn("no-download-url","The given file does not have any download URLs.")}();return t})}function Lj(n,e){const t=function WY(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new Li(n._location.bucket,t);return new Ff(n.storage,r)}function Vj(n,e){if(n instanceof _N){const t=n;if(null==t._bucket)throw function EY(){return new Xn("no-default-bucket","No default bucket found. Did you set the '"+fj+"' property when initializing the app?")}();const r=new Ff(t,t._bucket);return null!=e?Vj(r,e):r}return void 0!==e?Lj(n,e):n}function x7(n,e){if(e&&function A7(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof _N)return function M7(n,e){return new Ff(n,e)}(n,e);throw Bm("To use ref(service, url), the first argument must be a Storage instance.")}return Vj(n,e)}function Bj(n,e){const t=null==e?void 0:e[fj];return null==t?null:Li.makeFromBucketSpec(t,n)}class _N{constructor(e,t,r,i,s){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=hj,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Li.makeFromBucketSpec(i,this._host):Bj(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Li.makeFromBucketSpec(this._url,e):Bj(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){cN("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){cN("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,q.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,q.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ff(this,e)}_makeRequest(e,t,r,i){if(this._deleted)return new IY(mj());{const s=function LY(n,e,t,r,i,s){const l=vj(n.urlParams),d=n.url+l,p=Object.assign({},n.headers);return function PY(n,e){e&&(n["X-Firebase-GMPID"]=e)}(p,e),function OY(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(p,t),function NY(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(p,s),function FY(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(p,r),new kY(d,n.method,p,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i)}(e,this._appId,r,i,t,this._firebaseVersion);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}makeRequestWithTokens(e,t){var r=this;return(0,q.Z)(function*(){const[i,s]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,s).getPromise()})()}}const Uj="@firebase/storage";function Gj(n,e){return x7(n=(0,k.m9)(n),e)}function j7(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new _N(t,r,i,e,zt.SDK_VERSION)}!function H7(){(0,zt._registerComponent)(new qr.wA("storage",j7,"PUBLIC").setMultipleInstances(!0)),(0,zt.registerVersion)(Uj,"0.9.4",""),(0,zt.registerVersion)(Uj,"0.9.4","esm2017")}();class WT{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class $j{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new WT(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new WT(r,this,this._ref))},t)}on(e,t,r,i){let s;return t&&(s="function"==typeof t?l=>t(new WT(l,this,this._ref)):{next:t.next?l=>t.next(new WT(l,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,s,r||void 0,i||void 0)}}class zj{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new Uc(e,this._service))}get items(){return this._delegate.items.map(e=>new Uc(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Uc{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function B7(n,e){return Lj(n,e)}(this._delegate,e);return new Uc(t,this.storage)}get root(){return new Uc(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new Uc(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new $j(function k7(n,e,t){return function w7(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new Oj(n,new Il(e),t)}(n=(0,k.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=no.RAW,r){this._throwIfRoot("putString");const i=dN(t,e),s=Object.assign({},r);return null==s.contentType&&null!=i.contentType&&(s.contentType=i.contentType),new $j(new Oj(this._delegate,new Il(i.data,!0),s),this)}listAll(){return function F7(n){return function E7(n){const e={prefixes:[],items:[]};return Pj(n,e).then(()=>e)}(n=(0,k.m9)(n))}(this._delegate).then(e=>new zj(e,this.storage))}list(e){return function P7(n,e){return Fj(n=(0,k.m9)(n),e)}(this._delegate,e||void 0).then(t=>new zj(t,this.storage))}getMetadata(){return function O7(n){return function D7(n){n._throwIfRoot("getMetadata");const e=Sj(n.storage,n._location,sw());return n.storage.makeRequestWithTokens(e,Ma)}(n=(0,k.m9)(n))}(this._delegate)}updateMetadata(e){return function N7(n,e){return function T7(n,e){n._throwIfRoot("updateMetadata");const t=function s7(n,e,t,r){const s=Bc(e.fullServerUrl(),n.host,n._protocol),d=fN(t,r),y=n.maxOperationRetryTime,C=new Sl(s,"PATCH",zT(n,r),y);return C.headers={"Content-Type":"application/json; charset=utf-8"},C.body=d,C.errorHandler=ow(e),C}(n.storage,n._location,e,sw());return n.storage.makeRequestWithTokens(t,Ma)}(n=(0,k.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function L7(n){return I7(n=(0,k.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function V7(n){return function S7(n){n._throwIfRoot("deleteObject");const e=function o7(n,e){const r=Bc(e.fullServerUrl(),n.host,n._protocol),d=new Sl(r,"DELETE",function l(p,y){},n.maxOperationRetryTime);return d.successCodes=[200,204],d.errorHandler=ow(e),d}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Ma)}(n=(0,k.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw _j(e)}}class qj{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(Wj(e))throw Bm("ref() expected a child path but got a URL, use refFromURL instead.");return new Uc(Gj(this._delegate,e),this)}refFromURL(e){if(!Wj(e))throw Bm("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Li.makeFromUrl(e,this._delegate.host)}catch(t){throw Bm("refFromUrl() expected a valid full URL but got an invalid one.")}return new Uc(Gj(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function U7(n,e,t,r={}){!function R7(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,k.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function Wj(n){return/^[A-Za-z]+:\/\//.test(n)}function q7(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new qj(t,r)}function Zj(n){const e=function Z7(n){return new Vn.y(e=>{const t=l=>e.next(l);t(n.snapshot);const s=n.on("state_changed",t);return n.then(l=>{t(l),e.complete()},l=>{t(n.snapshot),(l=>{e.error(l)})(l)}),function(){s()}}).pipe(GD(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,st.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function ZT(n){return{getDownloadURL:()=>Ke(void 0).pipe(G2,Nn(()=>n.getDownloadURL()),sr),getMetadata:()=>Ke(void 0).pipe(G2,Nn(()=>n.getMetadata()),sr),delete:()=>(0,gn.D)(n.delete()),child:e=>ZT(n.child(e)),updateMetadata:e=>(0,gn.D)(n.updateMetadata(e)),put:(e,t)=>Zj(n.put(e,t)),putString:(e,t,r)=>Zj(n.putString(e,t,r)),list:e=>(0,gn.D)(n.list(e)),listAll:()=>(0,gn.D)(n.listAll())}}!function W7(n){const e={TaskState:es,TaskEvent:d7,StringFormat:no,Storage:qj,Reference:Uc};n.INTERNAL.registerComponent(new qr.wA("storage-compat",q7,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.12")}(sN.Z);const K7=new u.OlP("angularfire2.storageBucket"),Y7=new u.OlP("angularfire2.storage.maxUploadRetryTime"),Q7=new u.OlP("angularfire2.storage.maxOperationRetryTime"),J7=new u.OlP("angularfire2.storage.use-emulator");let X7=(()=>{class n{constructor(t,r,i,s,l,d,p,y,C,D){const M=(0,Wr.on)(t,l,r);this.storage=(0,Wr.cc)(`${M.name}.storage.${i}`,"AngularFireStorage",M.name,()=>{const R=l.runOutsideAngular(()=>M.storage(i||void 0)),N=C;return N&&R.useEmulator(...N),p&&R.setMaxUploadRetryTime(p),y&&R.setMaxOperationRetryTime(y),R},[p,y])}ref(t){return ZT(this.storage.ref(t))}refFromURL(t){return ZT(this.storage.refFromURL(t))}upload(t,r,i){return ZT(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Wr.Dh),u.LFG(Wr.xv,8),u.LFG(K7,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(RT),u.LFG(Y7,8),u.LFG(Q7,8),u.LFG(J7,8),u.LFG(nw,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),eQ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})(),tQ=(()=>{class n{constructor(){UT.Z.registerVersion("angularfire",xT.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[X7],imports:[eQ]}),n})();function yN(){return(0,Bn.e)((n,e)=>{let t,r=!1;n.subscribe((0,an.x)(e,i=>{const s=t;t=i,r&&e.next([s,i]),r=!0}))})}F(4087);var Qe,nQ="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},jc={},vN=vN||{},Tt=nQ||self;function KT(){}function bN(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function aw(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var wN="closure_uid_"+(1e9*Math.random()>>>0),iQ=0;function sQ(n,e,t){return n.call.apply(n.bind,arguments)}function oQ(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function vi(n,e,t){return(vi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?sQ:oQ).apply(null,arguments)}function YT(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function bi(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,s){for(var l=Array(arguments.length-2),d=2;d<arguments.length;d++)l[d-2]=arguments[d];return e.prototype[i].apply(r,l)}}function td(){this.s=this.s,this.o=this.o}var lQ={};td.prototype.s=!1,td.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function rQ(n){return Object.prototype.hasOwnProperty.call(n,wN)&&n[wN]||(n[wN]=++iQ)}(this);delete lQ[n]}},td.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Kj=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},Yj=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let s=0;s<r;s++)s in i&&e.call(t,i[s],s,n)};function Qj(n){return Array.prototype.concat.apply([],arguments)}function CN(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function QT(n){return/^[\s\xa0]*$/.test(n)}var ns,Jj=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function ts(n,e){return-1!=n.indexOf(e)}function EN(n,e){return n<e?-1:n>e?1:0}e:{var Xj=Tt.navigator;if(Xj){var eH=Xj.userAgent;if(eH){ns=eH;break e}}ns=""}function DN(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function tH(n){const e={};for(const t in n)e[t]=n[t];return e}var nH="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function rH(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let s=0;s<nH.length;s++)t=nH[s],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function TN(n){return TN[" "](n),n}TN[" "]=KT;var JT,n,dQ=ts(ns,"Opera"),Hm=ts(ns,"Trident")||ts(ns,"MSIE"),iH=ts(ns,"Edge"),IN=iH||Hm,sH=ts(ns,"Gecko")&&!(ts(ns.toLowerCase(),"webkit")&&!ts(ns,"Edge"))&&!(ts(ns,"Trident")||ts(ns,"MSIE"))&&!ts(ns,"Edge"),hQ=ts(ns.toLowerCase(),"webkit")&&!ts(ns,"Edge");function oH(){var n=Tt.document;return n?n.documentMode:void 0}e:{var SN="",AN=(n=ns,sH?/rv:([^\);]+)(\)|;)/.exec(n):iH?/Edge\/([\d\.]+)/.exec(n):Hm?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):hQ?/WebKit\/(\S+)/.exec(n):dQ?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(AN&&(SN=AN?AN[1]:""),Hm){var MN=oH();if(null!=MN&&MN>parseFloat(SN)){JT=String(MN);break e}}JT=SN}var fQ={};var gQ=Tt.document&&Hm&&(oH()||parseInt(JT,10))||void 0,mQ=function(){if(!Tt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Tt.addEventListener("test",KT,e),Tt.removeEventListener("test",KT,e)}catch(t){}return n}();function Vi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function lw(n,e){if(Vi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(sH){e:{try{TN(e.nodeName);var i=!0;break e}catch(s){}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:_Q[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&lw.Z.h.call(this)}}Vi.prototype.h=function(){this.defaultPrevented=!0},bi(lw,Vi);var _Q={2:"touch",3:"pen",4:"mouse"};lw.prototype.h=function(){lw.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var cw="closure_listenable_"+(1e6*Math.random()|0),yQ=0;function vQ(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++yQ,this.ca=this.fa=!1}function XT(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function eI(n){this.src=n,this.g={},this.h=0}function RN(n,e){var t=e.type;if(t in n.g){var s,r=n.g[t],i=Kj(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(XT(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function kN(n,e,t,r){for(var i=0;i<n.length;++i){var s=n[i];if(!s.ca&&s.listener==e&&s.capture==!!t&&s.ia==r)return i}return-1}eI.prototype.add=function(n,e,t,r,i){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var l=kN(n,e,r,i);return-1<l?(e=n[l],t||(e.fa=!1)):((e=new vQ(e,this.src,s,!!r,i)).fa=t,n.push(e)),e};var ON="closure_lm_"+(1e6*Math.random()|0),NN={};function lH(n,e,t,r,i){if(r&&r.once)return uH(n,e,t,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)lH(n,e[s],t,r,i);return null}return t=VN(t),n&&n[cw]?n.N(e,t,aw(r)?!!r.capture:!!r,i):cH(n,e,t,!1,r,i)}function cH(n,e,t,r,i,s){if(!e)throw Error("Invalid event type");var l=aw(i)?!!i.capture:!!i,d=FN(n);if(d||(n[ON]=d=new eI(n)),(t=d.add(e,t,r,l,s)).proxy)return t;if(r=function bQ(){var e=wQ;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)mQ||(i=l),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(hH(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function uH(n,e,t,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)uH(n,e[s],t,r,i);return null}return t=VN(t),n&&n[cw]?n.O(e,t,aw(r)?!!r.capture:!!r,i):cH(n,e,t,!0,r,i)}function dH(n,e,t,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)dH(n,e[s],t,r,i);else r=aw(r)?!!r.capture:!!r,t=VN(t),n&&n[cw]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=kN(s=n.g[e],t,r,i))&&(XT(s[t]),Array.prototype.splice.call(s,t,1),0==s.length&&(delete n.g[e],n.h--))):n&&(n=FN(n))&&(e=n.g[e.toString()],n=-1,e&&(n=kN(e,t,r,i)),(t=-1<n?e[n]:null)&&PN(t))}function PN(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[cw])RN(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(hH(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=FN(e))?(RN(t,n),0==t.h&&(t.src=null,e[ON]=null)):XT(n)}}}function hH(n){return n in NN?NN[n]:NN[n]="on"+n}function wQ(n,e){if(n.ca)n=!0;else{e=new lw(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&PN(n),n=t.call(r,e)}return n}function FN(n){return(n=n[ON])instanceof eI?n:null}var LN="__closure_events_fn_"+(1e9*Math.random()>>>0);function VN(n){return"function"==typeof n?n:(n[LN]||(n[LN]=function(e){return n.handleEvent(e)}),n[LN])}function Kr(){td.call(this),this.i=new eI(this),this.P=this,this.I=null}function wi(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Vi(e,n);else if(e instanceof Vi)e.target=e.target||n;else{var i=e;rH(e=new Vi(r,n),i)}if(i=!0,t)for(var s=t.length-1;0<=s;s--){var l=e.g=t[s];i=tI(l,r,!0,e)&&i}if(i=tI(l=e.g=n,r,!0,e)&&i,i=tI(l,r,!1,e)&&i,t)for(s=0;s<t.length;s++)i=tI(l=e.g=t[s],r,!1,e)&&i}function tI(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var l=e[s];if(l&&!l.ca&&l.capture==t){var d=l.listener,p=l.ia||l.src;l.fa&&RN(n.i,l),i=!1!==d.call(p,r)&&i}}return i&&!r.defaultPrevented}bi(Kr,td),Kr.prototype[cw]=!0,Kr.prototype.removeEventListener=function(n,e,t,r){dH(this,n,e,t,r)},Kr.prototype.M=function(){if(Kr.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)XT(t[r]);delete n.g[e],n.h--}}this.I=null},Kr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Kr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var BN=Tt.JSON.stringify;function CQ(){var n=pH;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var jN,fH=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new DQ,n=>n.reset());class DQ{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function TQ(n){Tt.setTimeout(()=>{throw n},0)}function UN(n,e){jN||function IQ(){var n=Tt.Promise.resolve(void 0);jN=function(){n.then(SQ)}}(),HN||(jN(),HN=!0),pH.add(n,e)}var HN=!1,pH=new class EQ{constructor(){this.h=this.g=null}add(e,t){const r=fH.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function SQ(){for(var n;n=CQ();){try{n.h.call(n.g)}catch(t){TQ(t)}var e=fH;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}HN=!1}function nI(n,e){Kr.call(this),this.h=n||1,this.g=e||Tt,this.j=vi(this.kb,this),this.l=Date.now()}function GN(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function $N(n,e,t){if("function"==typeof n)t&&(n=vi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=vi(n.handleEvent,n)}return 2147483647<Number(e)?-1:Tt.setTimeout(n,e||0)}function gH(n){n.g=$N(()=>{n.g=null,n.i&&(n.i=!1,gH(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}bi(nI,Kr),(Qe=nI.prototype).da=!1,Qe.S=null,Qe.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),wi(this,"tick"),this.da&&(GN(this),this.start()))}},Qe.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Qe.M=function(){nI.Z.M.call(this),GN(this),delete this.g};class AQ extends td{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:gH(this)}M(){super.M(),this.g&&(Tt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function uw(n){td.call(this),this.h=n,this.g={}}bi(uw,td);var mH=[];function _H(n,e,t,r){Array.isArray(t)||(t&&(mH[0]=t.toString()),t=mH);for(var i=0;i<t.length;i++){var s=lH(e,t[i],r||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function yH(n){DN(n.g,function(e,t){this.g.hasOwnProperty(t)&&PN(e)},n),n.g={}}function rI(){this.g=!0}function Gm(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function kQ(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var l=1;l<i.length;l++)i[l]=""}}}return BN(t)}catch(d){return e}}(n,t)+(r?" "+r:"")})}uw.prototype.M=function(){uw.Z.M.call(this),yH(this)},uw.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},rI.prototype.Aa=function(){this.g=!1},rI.prototype.info=function(){};var Lf={},vH=null;function iI(){return vH=vH||new Kr}function bH(n){Vi.call(this,Lf.Ma,n)}function dw(n){const e=iI();wi(e,new bH(e,n))}function wH(n,e){Vi.call(this,Lf.STAT_EVENT,n),this.stat=e}function rs(n){const e=iI();wi(e,new wH(e,n))}function CH(n,e){Vi.call(this,Lf.Na,n),this.size=e}function hw(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Tt.setTimeout(function(){n()},e)}Lf.Ma="serverreachability",bi(bH,Vi),Lf.STAT_EVENT="statevent",bi(wH,Vi),Lf.Na="timingevent",bi(CH,Vi);var sI={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},EH={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function zN(){}function TH(){}zN.prototype.h=null;var ZN,fw={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function qN(){Vi.call(this,"d")}function WN(){Vi.call(this,"c")}function oI(){}function pw(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new uw(this),this.P=OQ,this.W=new nI(n=IN?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new IH}function IH(){this.i=null,this.g="",this.h=!1}bi(qN,Vi),bi(WN,Vi),bi(oI,zN),oI.prototype.g=function(){return new XMLHttpRequest},oI.prototype.i=function(){return{}},ZN=new oI;var OQ=45e3,KN={},aI={};function YN(n,e,t){n.K=1,n.v=hI(Hc(e)),n.s=t,n.U=!0,SH(n,null)}function SH(n,e){n.F=Date.now(),gw(n),n.A=Hc(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),FH(t.h,"t",r),n.C=0,t=n.l.H,n.h=new IH,n.g=sG(n.l,t?e:null,!n.s),0<n.O&&(n.L=new AQ(vi(n.Ia,n,n.g),n.O)),_H(n.V,n.g,"readystatechange",n.gb),e=n.H?tH(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),dw(1),function MQ(n,e,t,r,i,s){n.info(function(){if(n.g)if(s)for(var l="",d=s.split("&"),p=0;p<d.length;p++){var y=d[p].split("=");if(1<y.length){var C=y[0];y=y[1];var D=C.split("_");l=2<=D.length&&"type"==D[1]?l+(C+"=")+y+"&":l+(C+"=redacted&")}}else l=null;else l=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.X,n.s)}function AH(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function MH(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=NQ(n,t),i==aI){4==e&&(n.o=4,rs(14),r=!1),Gm(n.j,n.m,null,"[Incomplete Response]");break}if(i==KN){n.o=4,rs(15),Gm(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Gm(n.j,n.m,i,null),QN(n,i)}AH(n)&&i!=aI&&i!=KN&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,rs(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),lP(e),e.L=!0,rs(11))):(Gm(n.j,n.m,t,"[Invalid Chunked Response]"),Vf(n),mw(n))}function NQ(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?aI:(t=Number(e.substring(t,r)),isNaN(t)?KN:(r+=1)+t>e.length?aI:(e=e.substr(r,t),n.C=r+t,e))}function gw(n){n.Y=Date.now()+n.P,xH(n,n.P)}function xH(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=hw(vi(n.eb,n),e)}function lI(n){n.B&&(Tt.clearTimeout(n.B),n.B=null)}function mw(n){0==n.l.G||n.I||tG(n.l,n)}function Vf(n){lI(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,GN(n.W),yH(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function QN(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||eP(t.i,n)))if(t.I=n.N,!n.J&&eP(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(y){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(t.u)t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=hw(vi(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;yI(t),mI(t)}aP(t),rs(18)}if(1>=BH(t.i)&&t.ka){try{t.ka()}catch(y){}t.ka=void 0}}else jf(t,11)}else if((n.J||t.g==n)&&yI(t),!QT(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let y=i[e];if(t.U=y[0],y=y[1],2==t.G)if("c"==y[0]){t.J=y[1],t.la=y[2];const C=y[3];null!=C&&(t.ma=C,t.h.info("VER="+t.ma));const D=y[4];null!=D&&(t.za=D,t.h.info("SVER="+t.za));const M=y[5];null!=M&&"number"==typeof M&&0<M&&(t.K=r=1.5*M,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const R=n.g;if(R){const N=R.g?R.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(N){var s=r.i;!s.g&&(ts(N,"spdy")||ts(N,"quic")||ts(N,"h2"))&&(s.j=s.l,s.g=new Set,s.h&&(tP(s,s.h),s.h=null))}if(r.D){const j=R.g?R.g.getResponseHeader("X-HTTP-Session-Id"):null;j&&(r.sa=j,jn(r.F,r.D,j))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var l=n;if((r=t).oa=iG(r,r.H?r.la:null,r.W),l.J){UH(r.i,l);var d=l,p=r.K;p&&d.setTimeout(p),d.B&&(lI(d),gw(d)),r.g=l}else XH(r);0<t.l.length&&_I(t)}else"stop"!=y[0]&&"close"!=y[0]||jf(t,7);else 3==t.G&&("stop"==y[0]||"close"==y[0]?"stop"==y[0]?jf(t,7):sP(t):"noop"!=y[0]&&t.j&&t.j.wa(y),t.A=0)}dw(4)}catch(y){}}function JN(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(bN(n)||"string"==typeof n)Yj(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(bN(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function PQ(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(bN(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var s=0;s<i;s++)e.call(void 0,r[s],t&&t[s],n)}}function $m(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof $m)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function XN(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];Bf(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)Bf(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function Bf(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(Qe=pw.prototype).setTimeout=function(n){this.P=n},Qe.gb=function(n){n=n.target;const e=this.L;e&&3==Gc(n)?e.l():this.Ia(n)},Qe.Ia=function(n){try{if(n==this.g)e:{const C=Gc(this.g);var e=this.g.Da();const D=this.g.ba();if(!(3>C)&&(3!=C||IN||this.g&&(this.h.h||this.g.ga()||ZH(this.g)))){this.I||4!=C||7==e||dw(8==e||0>=D?3:2),lI(this);var t=this.g.ba();this.N=t;t:if(AH(this)){var r=ZH(this.g);n="";var i=r.length,s=4==Gc(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Vf(this),mw(this);var l="";break t}this.h.i=new Tt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.ga();if(this.i=200==t,function xQ(n,e,t,r,i,s,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+s+" "+l})}(this.j,this.u,this.A,this.m,this.X,C,t),this.i){if(this.$&&!this.J){t:{if(this.g){var d,p=this.g;if((d=p.g?p.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!QT(d)){var y=d;break t}}y=null}if(!(t=y)){this.i=!1,this.o=3,rs(12),Vf(this),mw(this);break e}Gm(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,QN(this,t)}this.U?(MH(this,C,l),IN&&this.i&&3==C&&(_H(this.V,this.W,"tick",this.fb),this.W.start())):(Gm(this.j,this.m,l,null),QN(this,l)),4==C&&Vf(this),this.i&&!this.I&&(4==C?tG(this.l,this):(this.i=!1,gw(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,rs(12)):(this.o=0,rs(13)),Vf(this),mw(this)}}}catch(C){}},Qe.fb=function(){if(this.g){var n=Gc(this.g),e=this.g.ga();this.C<e.length&&(lI(this),MH(this,n,e),this.i&&4!=n&&gw(this))}},Qe.cancel=function(){this.I=!0,Vf(this)},Qe.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function RQ(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(dw(3),rs(17)),Vf(this),this.o=2,mw(this)):xH(this,this.Y-n)},(Qe=$m.prototype).R=function(){XN(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},Qe.T=function(){return XN(this),this.g.concat()},Qe.get=function(n,e){return Bf(this.h,n)?this.h[n]:e},Qe.set=function(n,e){Bf(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},Qe.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],s=this.get(i);n.call(e,s,i,this)}};var RH=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Uf(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Uf){this.g=void 0!==e?e:n.g,cI(this,n.j),this.s=n.s,uI(this,n.i),dI(this,n.m),this.l=n.l,e=n.h;var t=new vw;t.i=e.i,e.g&&(t.g=new $m(e.g),t.h=e.h),kH(this,t),this.o=n.o}else n&&(t=String(n).match(RH))?(this.g=!!e,cI(this,t[1]||"",!0),this.s=_w(t[2]||""),uI(this,t[3]||"",!0),dI(this,t[4]),this.l=_w(t[5]||"",!0),kH(this,t[6]||"",!0),this.o=_w(t[7]||"")):(this.g=!!e,this.h=new vw(null,this.g))}function Hc(n){return new Uf(n)}function cI(n,e,t){n.j=t?_w(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function uI(n,e,t){n.i=t?_w(e,!0):e}function dI(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function kH(n,e,t){e instanceof vw?(n.h=e,function $Q(n,e){e&&!n.j&&(nd(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(NH(this,r),FH(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=yw(e,HQ)),n.h=new vw(e,n.g))}function jn(n,e,t){n.h.set(e,t)}function hI(n){return jn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function _w(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function yw(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,BQ),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function BQ(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Uf.prototype.toString=function(){var n=[],e=this.j;e&&n.push(yw(e,OH,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(yw(e,OH,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(yw(t,"/"==t.charAt(0)?jQ:UQ,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",yw(t,GQ)),n.join("")};var OH=/[#\/\?@]/g,UQ=/[#\?:]/g,jQ=/[#\?]/g,HQ=/[#\?@]/g,GQ=/#/g;function vw(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function nd(n){n.g||(n.g=new $m,n.h=0,n.i&&function FQ(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var s=n[t].substring(0,r);i=n[t].substring(r+1)}else s=n[t];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function NH(n,e){nd(n),e=zm(n,e),Bf(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Bf((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&XN(n)))}function PH(n,e){return nd(n),e=zm(n,e),Bf(n.g.h,e)}function FH(n,e,t){NH(n,e),0<t.length&&(n.i=null,n.g.set(zm(n,e),CN(t)),n.h+=t.length)}function zm(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function LH(n){this.l=n||qQ,n=Tt.PerformanceNavigationTiming?0<(n=Tt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Tt.g&&Tt.g.Ea&&Tt.g.Ea()&&Tt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Qe=vw.prototype).add=function(n,e){nd(this),this.i=null,n=zm(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Qe.forEach=function(n,e){nd(this),this.g.forEach(function(t,r){Yj(t,function(i){n.call(e,i,r,this)},this)},this)},Qe.T=function(){nd(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],s=0;s<i.length;s++)t.push(e[r]);return t},Qe.R=function(n){nd(this);var e=[];if("string"==typeof n)PH(this,n)&&(e=Qj(e,this.g.get(zm(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=Qj(e,n[t])}return e},Qe.set=function(n,e){return nd(this),this.i=null,PH(this,n=zm(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Qe.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},Qe.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var s=0;s<r.length;s++){var l=i;""!==r[s]&&(l+="="+encodeURIComponent(String(r[s]))),n.push(l)}}return this.i=n.join("&")};var qQ=10;function VH(n){return!!n.h||!!n.g&&n.g.size>=n.j}function BH(n){return n.h?1:n.g?n.g.size:0}function eP(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function tP(n,e){n.g?n.g.add(e):n.h=e}function UH(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function jH(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return CN(n.i)}function nP(){}function WQ(){this.g=new nP}function ZQ(n,e,t){const r=t||"";try{JN(n,function(i,s){let l=i;aw(i)&&(l=BN(i)),e.push(r+s+"="+encodeURIComponent(l))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function fI(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(s){}}function bw(n){this.l=n.$b||null,this.j=n.ib||!1}function pI(n,e){Kr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=rP,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}LH.prototype.cancel=function(){if(this.i=jH(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},nP.prototype.stringify=function(n){return Tt.JSON.stringify(n,void 0)},nP.prototype.parse=function(n){return Tt.JSON.parse(n,void 0)},bi(bw,zN),bw.prototype.g=function(){return new pI(this.l,this.j)},bw.prototype.i=function(n){return function(){return n}}({}),bi(pI,Kr);var rP=0;function HH(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function ww(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Cw(n)}function Cw(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Qe=pI.prototype).open=function(n,e){if(this.readyState!=rP)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Cw(this)},Qe.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Tt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Qe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ww(this)),this.readyState=rP},Qe.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Cw(this)),this.g&&(this.readyState=3,Cw(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Tt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;HH(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},Qe.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?ww(this):Cw(this),3==this.readyState&&HH(this)}},Qe.Ua=function(n){this.g&&(this.response=this.responseText=n,ww(this))},Qe.Ta=function(n){this.g&&(this.response=n,ww(this))},Qe.ha=function(){this.g&&ww(this)},Qe.setRequestHeader=function(n,e){this.v.append(n,e)},Qe.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Qe.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(pI.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var YQ=Tt.JSON.parse;function _r(n){Kr.call(this),this.headers=new $m,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=GH,this.K=this.L=!1}bi(_r,Kr);var GH="",QQ=/^https?$/i,JQ=["POST","PUT"];function e9(n){return"content-type"==n.toLowerCase()}function $H(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,zH(n),gI(n)}function zH(n){n.D||(n.D=!0,wi(n,"complete"),wi(n,"error"))}function qH(n){if(n.h&&void 0!==vN&&(!n.C[1]||4!=Gc(n)||2!=n.ba()))if(n.v&&4==Gc(n))$N(n.Fa,0,n);else if(wi(n,"readystatechange"),4==Gc(n)){n.h=!1;try{const d=n.ba();e:switch(d){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===d){var i=String(n.H).match(RH)[1]||null;if(!i&&Tt.self&&Tt.self.location){var s=Tt.self.location.protocol;i=s.substr(0,s.length-1)}r=!QQ.test(i?i.toLowerCase():"")}t=r}if(t)wi(n,"complete"),wi(n,"success");else{n.m=6;try{var l=2<Gc(n)?n.g.statusText:""}catch(p){l=""}n.j=l+" ["+n.ba()+"]",zH(n)}}finally{gI(n)}}}function gI(n,e){if(n.g){WH(n);const t=n.g,r=n.C[0]?KT:null;n.g=null,n.C=null,e||wi(n,"ready");try{t.onreadystatechange=r}catch(i){}}}function WH(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Tt.clearTimeout(n.A),n.A=null)}function Gc(n){return n.g?n.g.readyState:0}function ZH(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case GH:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function iP(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function t9(n){let e="";return DN(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):jn(n,e,t))}function Ew(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function KH(n){this.za=0,this.l=[],this.h=new rI,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Ew("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Ew("baseRetryDelayMs",5e3,n),this.$a=Ew("retryDelaySeedMs",1e4,n),this.Ya=Ew("forwardChannelMaxRetries",2,n),this.ra=Ew("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new LH(n&&n.concurrentRequestLimit),this.Ca=new WQ,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function sP(n){if(YH(n),3==n.G){var e=n.V++,t=Hc(n.F);jn(t,"SID",n.J),jn(t,"RID",e),jn(t,"TYPE","terminate"),Dw(n,t),(e=new pw(n,n.h,e,void 0)).K=2,e.v=hI(Hc(t)),t=!1,Tt.navigator&&Tt.navigator.sendBeacon&&(t=Tt.navigator.sendBeacon(e.v.toString(),"")),!t&&Tt.Image&&((new Image).src=e.v,t=!0),t||(e.g=sG(e.l,null),e.g.ea(e.v)),e.F=Date.now(),gw(e)}rG(n)}function mI(n){n.g&&(lP(n),n.g.cancel(),n.g=null)}function YH(n){mI(n),n.u&&(Tt.clearTimeout(n.u),n.u=null),yI(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Tt.clearTimeout(n.m),n.m=null)}function oP(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&_I(n)}function _I(n){VH(n.i)||n.m||(n.m=!0,UN(n.Ha,n),n.C=0)}function QH(n,e){var t;t=e?e.m:n.V++;const r=Hc(n.F);jn(r,"SID",n.J),jn(r,"RID",t),jn(r,"AID",n.U),Dw(n,r),n.o&&n.s&&iP(r,n.o,n.s),t=new pw(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=JH(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),tP(n.i,t),YN(t,r,e)}function Dw(n,e){n.j&&JN({},function(t,r){jn(e,r,t)})}function JH(n,e,t){t=Math.min(n.l.length,t);var r=n.j?vi(n.j.Oa,n.j,n):null;e:{var i=n.l;let s=-1;for(;;){const l=["count="+t];-1==s?0<t?(s=i[0].h,l.push("ofs="+s)):s=0:l.push("ofs="+s);let d=!0;for(let p=0;p<t;p++){let y=i[p].h;const C=i[p].g;if(y-=s,0>y)s=Math.max(0,i[p].h-100),d=!1;else try{ZQ(C,l,"req"+y+"_")}catch(D){r&&r(C)}}if(d){r=l.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function XH(n){n.g||n.u||(n.Y=1,UN(n.Ga,n),n.A=0)}function aP(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=hw(vi(n.Ga,n),nG(n,n.A)),n.A++,0))}function lP(n){null!=n.B&&(Tt.clearTimeout(n.B),n.B=null)}function eG(n){n.g=new pw(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Hc(n.oa);jn(e,"RID","rpc"),jn(e,"SID",n.J),jn(e,"CI",n.N?"0":"1"),jn(e,"AID",n.U),Dw(n,e),jn(e,"TYPE","xmlhttp"),n.o&&n.s&&iP(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=hI(Hc(e)),t.s=null,t.U=!0,SH(t,n)}function yI(n){null!=n.v&&(Tt.clearTimeout(n.v),n.v=null)}function tG(n,e){var t=null;if(n.g==e){yI(n),lP(n),n.g=null;var r=2}else{if(!eP(n.i,e))return;t=e.D,UH(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;wi(r=iI(),new CH(r,t,e,i)),_I(n)}else XH(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function n9(n,e){return!(BH(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=hw(vi(n.Ha,n,e),nG(n,n.C)),n.C++,0)))}(n,e)||2==r&&aP(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:jf(n,5);break;case 4:jf(n,10);break;case 3:jf(n,6);break;default:jf(n,2)}}function nG(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function jf(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=vi(n.jb,n);t||(t=new Uf("//www.google.com/images/cleardot.gif"),Tt.location&&"http"==Tt.location.protocol||cI(t,"https"),hI(t)),function KQ(n,e){const t=new rI;if(Tt.Image){const r=new Image;r.onload=YT(fI,t,r,"TestLoadImage: loaded",!0,e),r.onerror=YT(fI,t,r,"TestLoadImage: error",!1,e),r.onabort=YT(fI,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=YT(fI,t,r,"TestLoadImage: timeout",!1,e),Tt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else rs(2);n.G=0,n.j&&n.j.va(e),rG(n),YH(n)}function rG(n){n.G=0,n.I=-1,n.j&&((0!=jH(n.i).length||0!=n.l.length)&&(n.i.i.length=0,CN(n.l),n.l.length=0),n.j.ua())}function iG(n,e,t){let r=function LQ(n){return n instanceof Uf?Hc(n):new Uf(n,void 0)}(t);if(""!=r.i)e&&uI(r,e+"."+r.i),dI(r,r.m);else{const i=Tt.location;r=function VQ(n,e,t,r){var i=new Uf(null,void 0);return n&&cI(i,n),e&&uI(i,e),t&&dI(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&DN(n.aa,function(i,s){jn(r,s,i)}),t=n.sa,(e=n.D)&&t&&jn(r,e,t),jn(r,"VER",n.ma),Dw(n,r),r}function sG(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new _r(t&&n.Ba&&!n.qa?new bw({ib:!0}):n.qa)).L=n.H,e}function oG(){}function vI(){if(Hm&&!(10<=Number(gQ)))throw Error("Environmental error: no available transport.")}function ro(n,e){Kr.call(this),this.g=new KH(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!QT(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!QT(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new qm(this)}function aG(n){qN.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function lG(){WN.call(this),this.status=1}function qm(n){this.g=n}(Qe=_r.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():ZN.g(),this.C=function DH(n){return n.h||(n.h=n.i())}(this.u?this.u:ZN),this.g.onreadystatechange=vi(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(s){return void $H(this,s)}n=t||"";const i=new $m(this.headers);r&&JN(r,function(s,l){i.set(l,s)}),r=function cQ(n){e:{var e=e9;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=Tt.FormData&&n instanceof Tt.FormData,!(0<=Kj(JQ,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(s,l){this.g.setRequestHeader(l,s)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{WH(this),0<this.B&&((this.K=function XQ(n){return Hm&&function pQ(){return function uQ(n){var e=fQ;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=Jj(String(JT)).split("."),t=Jj("9").split("."),r=Math.max(e.length,t.length);for(let l=0;0==n&&l<r;l++){var i=e[l]||"",s=t[l]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==i[0].length&&0==s[0].length)break;n=EN(0==i[1].length?0:parseInt(i[1],10),0==s[1].length?0:parseInt(s[1],10))||EN(0==i[2].length,0==s[2].length)||EN(i[2],s[2]),i=i[3],s=s[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=vi(this.pa,this)):this.A=$N(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){$H(this,s)}},Qe.pa=function(){void 0!==vN&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,wi(this,"timeout"),this.abort(8))},Qe.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,wi(this,"complete"),wi(this,"abort"),gI(this))},Qe.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),gI(this,!0)),_r.Z.M.call(this)},Qe.Fa=function(){this.s||(this.F||this.v||this.l?qH(this):this.cb())},Qe.cb=function(){qH(this)},Qe.ba=function(){try{return 2<Gc(this)?this.g.status:-1}catch(n){return-1}},Qe.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},Qe.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),YQ(e)}},Qe.Da=function(){return this.m},Qe.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Qe=KH.prototype).ma=8,Qe.G=1,Qe.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},Qe.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new pw(this,this.h,n,void 0);let s=this.s;if(this.P&&(s?(s=tH(s),rH(s,this.P)):s=this.P),null===this.o&&(i.H=s),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=JH(this,i,e),jn(t=Hc(this.F),"RID",n),jn(t,"CVER",22),this.D&&jn(t,"X-HTTP-Session-Id",this.D),Dw(this,t),this.o&&s&&iP(t,this.o,s),tP(this.i,i),this.Ra&&jn(t,"TYPE","init"),this.ja?(jn(t,"$req",e),jn(t,"SID","null"),i.$=!0,YN(i,t,null)):YN(i,t,e),this.G=2}}else 3==this.G&&(n?QH(this,n):0==this.l.length||VH(this.i)||QH(this))},Qe.Ga=function(){if(this.u=null,eG(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=hw(vi(this.bb,this),n)}},Qe.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,rs(10),mI(this),eG(this))},Qe.ab=function(){null!=this.v&&(this.v=null,mI(this),aP(this),rs(19))},Qe.jb=function(n){n?(this.h.info("Successfully pinged google.com"),rs(2)):(this.h.info("Failed to ping google.com"),rs(1))},(Qe=oG.prototype).xa=function(){},Qe.wa=function(){},Qe.va=function(){},Qe.ua=function(){},Qe.Oa=function(){},vI.prototype.g=function(n,e){return new ro(n,e)},bi(ro,Kr),ro.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),UN(vi(n.hb,n,e))),rs(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=iG(n,null,n.W),_I(n)},ro.prototype.close=function(){sP(this.g)},ro.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,oP(this.g,e)}else this.v?((e={}).__data__=BN(n),oP(this.g,e)):oP(this.g,n)},ro.prototype.M=function(){this.g.j=null,delete this.j,sP(this.g),delete this.g,ro.Z.M.call(this)},bi(aG,qN),bi(lG,WN),bi(qm,oG),qm.prototype.xa=function(){wi(this.g,"a")},qm.prototype.wa=function(n){wi(this.g,new aG(n))},qm.prototype.va=function(n){wi(this.g,new lG(n))},qm.prototype.ua=function(){wi(this.g,"b")},vI.prototype.createWebChannel=vI.prototype.g,ro.prototype.send=ro.prototype.u,ro.prototype.open=ro.prototype.m,ro.prototype.close=ro.prototype.close,sI.NO_ERROR=0,sI.TIMEOUT=8,sI.HTTP_ERROR=6,EH.COMPLETE="complete",TH.EventType=fw,fw.OPEN="a",fw.CLOSE="b",fw.ERROR="c",fw.MESSAGE="d",Kr.prototype.listen=Kr.prototype.N,_r.prototype.listenOnce=_r.prototype.O,_r.prototype.getLastError=_r.prototype.La,_r.prototype.getLastErrorCode=_r.prototype.Da,_r.prototype.getStatus=_r.prototype.ba,_r.prototype.getResponseJson=_r.prototype.Qa,_r.prototype.getResponseText=_r.prototype.ga,_r.prototype.send=_r.prototype.ea;var r9=jc.createWebChannelTransport=function(){return new vI},i9=jc.getStatEventTarget=function(){return iI()},cP=jc.ErrorCode=sI,s9=jc.EventType=EH,o9=jc.Event=Lf,cG=jc.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},a9=jc.FetchXmlHttpFactory=bw,bI=jc.WebChannel=TH,l9=jc.XhrIo=_r;const uG="@firebase/firestore";class Ci{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ci.UNAUTHENTICATED=new Ci(null),Ci.GOOGLE_CREDENTIALS=new Ci("google-credentials-uid"),Ci.FIRST_PARTY=new Ci("first-party-uid"),Ci.MOCK_USER=new Ci("mock-user");let Wm="9.6.10";const rd=new vs.Yd("@firebase/firestore");function uP(){return rd.logLevel}function Re(n,...e){if(rd.logLevel<=vs.in.DEBUG){const t=e.map(dP);rd.debug(`Firestore (${Wm}): ${n}`,...t)}}function yr(n,...e){if(rd.logLevel<=vs.in.ERROR){const t=e.map(dP);rd.error(`Firestore (${Wm}): ${n}`,...t)}}function Tw(n,...e){if(rd.logLevel<=vs.in.WARN){const t=e.map(dP);rd.warn(`Firestore (${Wm}): ${n}`,...t)}}function dP(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function Xe(n="Unexpected state"){const e=`FIRESTORE (${Wm}) INTERNAL ASSERTION FAILED: `+n;throw yr(e),new Error(e)}function Et(n,e){n||Xe()}function je(n,e){return n}const oe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ce extends k.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Yr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class dG{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class d9{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ci.UNAUTHENTICATED))}shutdown(){}}class h9{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class f9{constructor(e){this.t=e,this.currentUser=Ci.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const s=y=>this.i!==i?(i=this.i,t(y)):Promise.resolve();let l=new Yr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Yr,e.enqueueRetryable(()=>s(this.currentUser))};const d=()=>{const y=l;e.enqueueRetryable((0,q.Z)(function*(){yield y.promise,yield s(r.currentUser)}))},p=y=>{Re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.auth.addAuthTokenListener(this.o),d()};this.t.onInit(y=>p(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?p(y):(Re("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Yr)}},0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Et("string"==typeof r.accessToken),new dG(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Et(null===e||"string"==typeof e),new Ci(e)}}class p9{constructor(e,t,r){this.type="FirstParty",this.user=Ci.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class g9{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new p9(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Ci.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class hG{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class m9{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=s=>{null!=s.error&&Re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const l=s.token!==this.p;return this.p=s.token,Re("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.g.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.g.getImmediate({optional:!0});s?i(s):Re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Et("string"==typeof t.token),this.p=t.token,new hG(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class io{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function _9(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}io.A=-1;class fG{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=_9(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}}function Gt(n,e){return n<e?-1:n>e?1:0}function Zm(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function pG(n){return n+"\0"}class or{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ce(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ce(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ce(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ce(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return or.fromMillis(Date.now())}static fromDate(e){return or.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new or(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Gt(this.nanoseconds,e.nanoseconds):Gt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class vt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new vt(e)}static min(){return new vt(new or(0,0))}static max(){return new vt(new or(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function gG(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Hf(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function mG(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Iw{constructor(e,t,r){void 0===t?t=0:t>e.length&&Xe(),void 0===r?r=e.length-t:r>e.length-t&&Xe(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Iw.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Iw?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),l=t.get(i);if(s<l)return-1;if(s>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Jt extends Iw{construct(e,t,r){return new Jt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ce(oe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Jt(t)}static emptyPath(){return new Jt([])}}const y9=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qr extends Iw{construct(e,t,r){return new Qr(e,t,r)}static isValidIdentifier(e){return y9.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Qr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new Ce(oe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const d=e[i];if("\\"===d){if(i+1===e.length)throw new Ce(oe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[i+1];if("\\"!==p&&"."!==p&&"`"!==p)throw new Ce(oe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,i+=2}else"`"===d?(l=!l,i++):"."!==d||l?(r+=d,i++):(s(),i++)}if(s(),l)throw new Ce(oe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qr(t)}static emptyPath(){return new Qr([])}}class Km{constructor(e){this.fields=e,e.sort(Qr.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Zm(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Pr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Pr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new Pr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Gt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Pr.EMPTY_BYTE_STRING=new Pr("");const b9=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function id(n){if(Et(!!n),"string"==typeof n){let e=0;const t=b9.exec(n);if(Et(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:er(n.seconds),nanos:er(n.nanos)}}function er(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Gf(n){return"string"==typeof n?Pr.fromBase64String(n):Pr.fromUint8Array(n)}function hP(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function _G(n){const e=n.mapValue.fields.__previous_value__;return hP(e)?_G(e):e}function Sw(n){const e=id(n.mapValue.fields.__local_write_time__.timestampValue);return new or(e.seconds,e.nanos)}class w9{constructor(e,t,r,i,s,l,d,p){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=l,this.autoDetectLongPolling=d,this.useFetchStreams=p}}class $c{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new $c("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof $c&&e.projectId===this.projectId&&e.database===this.database}}function $f(n){return null==n}function Aw(n){return 0===n&&1/n==-1/0}function yG(n){return"number"==typeof n&&Number.isInteger(n)&&!Aw(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Ue{constructor(e){this.path=e}static fromPath(e){return new Ue(Jt.fromString(e))}static fromName(e){return new Ue(Jt.fromString(e).popFirst(5))}static empty(){return new Ue(Jt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Jt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Jt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ue(new Jt(e.slice()))}}const vG={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},bG={nullValue:"NULL_VALUE"};function zf(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?hP(n)?4:DG(n)?9:10:Xe()}function Ml(n,e){if(n===e)return!0;const t=zf(n);if(t!==zf(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Sw(n).isEqual(Sw(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const s=id(r.timestampValue),l=id(i.timestampValue);return s.seconds===l.seconds&&s.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Gf(n.bytesValue).isEqual(Gf(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return er(r.geoPointValue.latitude)===er(i.geoPointValue.latitude)&&er(r.geoPointValue.longitude)===er(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return er(r.integerValue)===er(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const s=er(r.doubleValue),l=er(i.doubleValue);return s===l?Aw(s)===Aw(l):isNaN(s)&&isNaN(l)}return!1}(n,e);case 9:return Zm(n.arrayValue.values||[],e.arrayValue.values||[],Ml);case 10:return function(r,i){const s=r.mapValue.fields||{},l=i.mapValue.fields||{};if(gG(s)!==gG(l))return!1;for(const d in s)if(s.hasOwnProperty(d)&&(void 0===l[d]||!Ml(s[d],l[d])))return!1;return!0}(n,e);default:return Xe()}var i}function Mw(n,e){return void 0!==(n.values||[]).find(t=>Ml(t,e))}function sd(n,e){if(n===e)return 0;const t=zf(n),r=zf(e);if(t!==r)return Gt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Gt(n.booleanValue,e.booleanValue);case 2:return function(i,s){const l=er(i.integerValue||i.doubleValue),d=er(s.integerValue||s.doubleValue);return l<d?-1:l>d?1:l===d?0:isNaN(l)?isNaN(d)?0:-1:1}(n,e);case 3:return wG(n.timestampValue,e.timestampValue);case 4:return wG(Sw(n),Sw(e));case 5:return Gt(n.stringValue,e.stringValue);case 6:return function(i,s){const l=Gf(i),d=Gf(s);return l.compareTo(d)}(n.bytesValue,e.bytesValue);case 7:return function(i,s){const l=i.split("/"),d=s.split("/");for(let p=0;p<l.length&&p<d.length;p++){const y=Gt(l[p],d[p]);if(0!==y)return y}return Gt(l.length,d.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,s){const l=Gt(er(i.latitude),er(s.latitude));return 0!==l?l:Gt(er(i.longitude),er(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,s){const l=i.values||[],d=s.values||[];for(let p=0;p<l.length&&p<d.length;++p){const y=sd(l[p],d[p]);if(y)return y}return Gt(l.length,d.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,s){const l=i.fields||{},d=Object.keys(l),p=s.fields||{},y=Object.keys(p);d.sort(),y.sort();for(let C=0;C<d.length&&C<y.length;++C){const D=Gt(d[C],y[C]);if(0!==D)return D;const M=sd(l[d[C]],p[y[C]]);if(0!==M)return M}return Gt(d.length,y.length)}(n.mapValue,e.mapValue);default:throw Xe()}}function wG(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Gt(n,e);const t=id(n),r=id(e),i=Gt(t.seconds,r.seconds);return 0!==i?i:Gt(t.nanos,r.nanos)}function Ym(n){return fP(n)}function fP(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=id(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Gf(n.bytesValue).toBase64():"referenceValue"in n?Ue.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",s=!0;for(const l of r.values||[])s?s=!1:i+=",",i+=fP(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",l=!0;for(const d of i)l?l=!1:s+=",",s+=`${d}:${fP(r.fields[d])}`;return s+"}"}(n.mapValue):Xe();var e}function Qm(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function pP(n){return!!n&&"integerValue"in n}function xw(n){return!!n&&"arrayValue"in n}function CG(n){return!!n&&"nullValue"in n}function EG(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function wI(n){return!!n&&"mapValue"in n}function Rw(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Hf(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Rw(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Rw(n.arrayValue.values[t]);return e}return Object.assign({},n)}function DG(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function TG(n,e){return void 0===n?e:void 0===e||sd(n,e)>0?n:e}function IG(n,e){return void 0===n?e:void 0===e||sd(n,e)<0?n:e}class Bi{constructor(e){this.value=e}static empty(){return new Bi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!wI(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Rw(t)}setAll(e){let t=Qr.emptyPath(),r={},i=[];e.forEach((l,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,r,i),r={},i=[],t=d.popLast()}l?r[d.lastSegment()]=Rw(l):i.push(d.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());wI(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ml(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];wI(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Hf(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Bi(Rw(this.value))}}function SG(n){const e=[];return Hf(n.fields,(t,r)=>{const i=new Qr([t]);if(wI(r)){const s=SG(r.mapValue).fields;if(0===s.length)e.push(i);else for(const l of s)e.push(i.child(l))}else e.push(i)}),new Km(e)}class Pn{constructor(e,t,r,i,s,l){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=s,this.documentState=l}static newInvalidDocument(e){return new Pn(e,0,vt.min(),vt.min(),Bi.empty(),0)}static newFoundDocument(e,t,r){return new Pn(e,1,t,vt.min(),r,0)}static newNoDocument(e,t){return new Pn(e,2,t,vt.min(),Bi.empty(),0)}static newUnknownDocument(e,t){return new Pn(e,3,t,vt.min(),Bi.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Bi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Bi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Pn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Pn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class CI{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function gP(n){return n.fields.find(e=>2===e.kind)}function Jm(n){return n.fields.filter(e=>2!==e.kind)}CI.UNKNOWN_ID=-1;class EI{constructor(e,t){this.fieldPath=e,this.kind=t}}class kw{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new kw(0,zc.min())}}function AG(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=vt.fromTimestamp(1e9===r?new or(t+1,0):new or(t,r));return new zc(i,Ue.empty(),e)}function C9(n){return new zc(n.readTime,n.key,-1)}class zc{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new zc(vt.min(),Ue.empty(),-1)}static max(){return new zc(vt.max(),Ue.empty(),-1)}}function E9(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ue.comparator(n.documentKey,e.documentKey),0!==t?t:Gt(n.largestBatchId,e.largestBatchId))}class D9{constructor(e,t=null,r=[],i=[],s=null,l=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=l,this.endAt=d,this.P=null}}function MG(n,e=null,t=[],r=[],i=null,s=null,l=null){return new D9(n,e,t,r,i,s,l)}function qf(n){const e=je(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+Ym(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),$f(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Ym(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Ym(r)).join(",")),e.P=t}return e.P}function Ow(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!O9(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!Ml(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!kG(n.startAt,e.startAt)&&kG(n.endAt,e.endAt)}function DI(n){return Ue.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function TI(n,e){return n.filters.filter(t=>t instanceof Ei&&t.field.isEqual(e))}class Ei extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new I9(e,t,r):"array-contains"===t?new M9(e,r):"in"===t?new x9(e,r):"not-in"===t?new R9(e,r):"array-contains-any"===t?new k9(e,r):new Ei(e,t,r)}static V(e,t,r){return"in"===t?new S9(e,r):new A9(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(sd(t,this.value)):null!==t&&zf(this.value)===zf(t)&&this.v(sd(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Xe()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class I9 extends Ei{constructor(e,t,r){super(e,t,r),this.key=Ue.fromName(r.referenceValue)}matches(e){const t=Ue.comparator(e.key,this.key);return this.v(t)}}class S9 extends Ei{constructor(e,t){super(e,"in",t),this.keys=xG(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class A9 extends Ei{constructor(e,t){super(e,"not-in",t),this.keys=xG(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function xG(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ue.fromName(r.referenceValue))}class M9 extends Ei{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return xw(t)&&Mw(t.arrayValue,this.value)}}class x9 extends Ei{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Mw(this.value.arrayValue,t)}}class R9 extends Ei{constructor(e,t){super(e,"not-in",t)}matches(e){if(Mw(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Mw(this.value.arrayValue,t)}}class k9 extends Ei{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!xw(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Mw(this.value.arrayValue,r))}}class od{constructor(e,t){this.position=e,this.inclusive=t}}class Xm{constructor(e,t="asc"){this.field=e,this.dir=t}}function O9(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function RG(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],l=n.position[i];if(r=s.field.isKeyField()?Ue.comparator(Ue.fromName(l.referenceValue),t.key):sd(l,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function kG(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ml(n.position[t],e.position[t]))return!1;return!0}class qc{constructor(e,t=null,r=[],i=[],s=null,l="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=l,this.startAt=d,this.endAt=p,this.D=null,this.C=null}}function OG(n,e,t,r,i,s,l,d){return new qc(n,e,t,r,i,s,l,d)}function e_(n){return new qc(n)}function II(n){return!$f(n.limit)&&"F"===n.limitType}function SI(n){return!$f(n.limit)&&"L"===n.limitType}function mP(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function _P(n){for(const e of n.filters)if(e.S())return e.field;return null}function yP(n){return null!==n.collectionGroup}function t_(n){const e=je(n);if(null===e.D){e.D=[];const t=_P(e),r=mP(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new Xm(t)),e.D.push(new Xm(Qr.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.D.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new Xm(Qr.keyField(),s))}}}return e.D}function jo(n){const e=je(n);if(!e.C)if("F"===e.limitType)e.C=MG(e.path,e.collectionGroup,t_(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const s of t_(e))t.push(new Xm(s.field,"desc"===s.dir?"asc":"desc"));const r=e.endAt?new od(e.endAt.position,!e.endAt.inclusive):null,i=e.startAt?new od(e.startAt.position,!e.startAt.inclusive):null;e.C=MG(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.C}function NG(n,e,t){return new qc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Nw(n,e){return Ow(jo(n),jo(e))&&n.limitType===e.limitType}function PG(n){return`${qf(jo(n))}|lt:${n.limitType}`}function vP(n){return`Query(target=${function T9(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Ym(r.value)}`;var r}).join(", ")}]`),$f(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Ym(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Ym(t)).join(",")),`Target(${e})`}(jo(n))}; limitType=${n.limitType})`}function bP(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Ue.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,s,l){const d=RG(i,s,l);return i.inclusive?d<=0:d<0}(t.startAt,t_(t),r)||t.endAt&&!function(i,s,l){const d=RG(i,s,l);return i.inclusive?d>=0:d>0}(t.endAt,t_(t),r)));var t,r}function FG(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function LG(n){return(e,t)=>{let r=!1;for(const i of t_(n)){const s=N9(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function N9(n,e,t){const r=n.field.isKeyField()?Ue.comparator(e.key,t.key):function(i,s,l){const d=s.data.field(i),p=l.data.field(i);return null!==d&&null!==p?sd(d,p):Xe()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Xe()}}function VG(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Aw(e)?"-0":e}}function BG(n){return{integerValue:""+n}}function UG(n,e){return yG(e)?BG(e):VG(n,e)}class AI{constructor(){this._=void 0}}function P9(n,e,t){return n instanceof n_?function(r,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(s.fields.__previous_value__=i),{mapValue:s}}(t,e):n instanceof Wf?HG(n,e):n instanceof Zf?GG(n,e):function(r,i){const s=jG(r,i),l=$G(s)+$G(r.k);return pP(s)&&pP(r.k)?BG(l):VG(r.M,l)}(n,e)}function F9(n,e,t){return n instanceof Wf?HG(n,e):n instanceof Zf?GG(n,e):t}function jG(n,e){return n instanceof r_?pP(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class n_ extends AI{}class Wf extends AI{constructor(e){super(),this.elements=e}}function HG(n,e){const t=zG(e);for(const r of n.elements)t.some(i=>Ml(i,r))||t.push(r);return{arrayValue:{values:t}}}class Zf extends AI{constructor(e){super(),this.elements=e}}function GG(n,e){let t=zG(e);for(const r of n.elements)t=t.filter(i=>!Ml(i,r));return{arrayValue:{values:t}}}class r_ extends AI{constructor(e,t){super(),this.M=e,this.k=t}}function $G(n){return er(n.integerValue||n.doubleValue)}function zG(n){return xw(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Pw{constructor(e,t){this.field=e,this.transform=t}}class V9{constructor(e,t){this.version=e,this.transformResults=t}}class vr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new vr}static exists(e){return new vr(void 0,e)}static updateTime(e){return new vr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function MI(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class xI{}function B9(n,e,t){n instanceof Fw?function(r,i,s){const l=r.value.clone(),d=KG(r.fieldTransforms,i,s.transformResults);l.setAll(d),i.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(n,e,t):n instanceof Kf?function(r,i,s){if(!MI(r.precondition,i))return void i.convertToUnknownDocument(s.version);const l=KG(r.fieldTransforms,i,s.transformResults),d=i.data;d.setAll(ZG(r)),d.setAll(l),i.convertToFoundDocument(s.version,d).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function wP(n,e,t){var i;n instanceof Fw?function(r,i,s){if(!MI(r.precondition,i))return;const l=r.value.clone(),d=YG(r.fieldTransforms,s,i);l.setAll(d),i.convertToFoundDocument(WG(i),l).setHasLocalMutations()}(n,e,t):n instanceof Kf?function(r,i,s){if(!MI(r.precondition,i))return;const l=YG(r.fieldTransforms,s,i),d=i.data;d.setAll(ZG(r)),d.setAll(l),i.convertToFoundDocument(WG(i),d).setHasLocalMutations()}(n,e,t):MI(n.precondition,i=e)&&i.convertToNoDocument(vt.min())}function U9(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=jG(r.transform,i||null);null!=s&&(null==t&&(t=Bi.empty()),t.set(r.field,s))}return t||null}function qG(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Zm(t,r,(i,s)=>function L9(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Wf&&r instanceof Wf||t instanceof Zf&&r instanceof Zf?Zm(t.elements,r.elements,Ml):t instanceof r_&&r instanceof r_?Ml(t.k,r.k):t instanceof n_&&r instanceof n_);var t,r}(i,s))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function WG(n){return n.isFoundDocument()?n.version:vt.min()}class Fw extends xI{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}}class Kf extends xI{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}}function ZG(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function KG(n,e,t){const r=new Map;Et(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],l=s.transform,d=e.data.field(s.field);r.set(s.field,F9(l,d,t[i]))}return r}function YG(n,e,t){const r=new Map;for(const i of n){const s=i.transform,l=t.data.field(i.field);r.set(i.field,P9(s,l,e))}return r}class Lw extends xI{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class CP extends xI{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class j9{constructor(e){this.count=e}}var br,Xt;function QG(n){switch(n){default:return Xe();case oe.CANCELLED:case oe.UNKNOWN:case oe.DEADLINE_EXCEEDED:case oe.RESOURCE_EXHAUSTED:case oe.INTERNAL:case oe.UNAVAILABLE:case oe.UNAUTHENTICATED:return!1;case oe.INVALID_ARGUMENT:case oe.NOT_FOUND:case oe.ALREADY_EXISTS:case oe.PERMISSION_DENIED:case oe.FAILED_PRECONDITION:case oe.ABORTED:case oe.OUT_OF_RANGE:case oe.UNIMPLEMENTED:case oe.DATA_LOSS:return!0}}function JG(n){if(void 0===n)return yr("GRPC error has no .code"),oe.UNKNOWN;switch(n){case br.OK:return oe.OK;case br.CANCELLED:return oe.CANCELLED;case br.UNKNOWN:return oe.UNKNOWN;case br.DEADLINE_EXCEEDED:return oe.DEADLINE_EXCEEDED;case br.RESOURCE_EXHAUSTED:return oe.RESOURCE_EXHAUSTED;case br.INTERNAL:return oe.INTERNAL;case br.UNAVAILABLE:return oe.UNAVAILABLE;case br.UNAUTHENTICATED:return oe.UNAUTHENTICATED;case br.INVALID_ARGUMENT:return oe.INVALID_ARGUMENT;case br.NOT_FOUND:return oe.NOT_FOUND;case br.ALREADY_EXISTS:return oe.ALREADY_EXISTS;case br.PERMISSION_DENIED:return oe.PERMISSION_DENIED;case br.FAILED_PRECONDITION:return oe.FAILED_PRECONDITION;case br.ABORTED:return oe.ABORTED;case br.OUT_OF_RANGE:return oe.OUT_OF_RANGE;case br.UNIMPLEMENTED:return oe.UNIMPLEMENTED;case br.DATA_LOSS:return oe.DATA_LOSS;default:return Xe()}}(Xt=br||(br={}))[Xt.OK=0]="OK",Xt[Xt.CANCELLED=1]="CANCELLED",Xt[Xt.UNKNOWN=2]="UNKNOWN",Xt[Xt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xt[Xt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xt[Xt.NOT_FOUND=5]="NOT_FOUND",Xt[Xt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xt[Xt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xt[Xt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xt[Xt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xt[Xt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xt[Xt.ABORTED=10]="ABORTED",Xt[Xt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xt[Xt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xt[Xt.INTERNAL=13]="INTERNAL",Xt[Xt.UNAVAILABLE=14]="UNAVAILABLE",Xt[Xt.DATA_LOSS=15]="DATA_LOSS";class ad{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Hf(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return mG(this.inner)}size(){return this.innerSize}}class ar{constructor(e,t){this.comparator=e,this.root=t||Di.EMPTY}insert(e,t){return new ar(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Di.BLACK,null,null))}remove(e){return new ar(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Di.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new RI(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new RI(this.root,e,this.comparator,!1)}getReverseIterator(){return new RI(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new RI(this.root,e,this.comparator,!0)}}class RI{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Di{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=null!=r?r:Di.RED,this.left=null!=i?i:Di.EMPTY,this.right=null!=s?s:Di.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new Di(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Di.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Di.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Di.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Di.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Xe();const e=this.left.check();if(e!==this.right.check())throw Xe();return e+(this.isRed()?0:1)}}Di.EMPTY=null,Di.RED=!0,Di.BLACK=!1,Di.EMPTY=new class{constructor(){this.size=0}get key(){throw Xe()}get value(){throw Xe()}get color(){throw Xe()}get left(){throw Xe()}get right(){throw Xe()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Di(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Fn{constructor(e){this.comparator=e,this.data=new ar(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new XG(this.data.getIterator())}getIteratorFrom(e){return new XG(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Fn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Fn(this.comparator);return t.data=e,t}}class XG{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function i_(n){return n.hasNext()?n.getNext():void 0}const H9=new ar(Ue.comparator);function Ho(){return H9}const G9=new ar(Ue.comparator);function EP(){return G9}function Vw(){return new ad(n=>n.toString(),(n,e)=>n.isEqual(e))}const $9=new ar(Ue.comparator),z9=new Fn(Ue.comparator);function dn(...n){let e=z9;for(const t of n)e=e.add(t);return e}const q9=new Fn(Gt);function kI(){return q9}class Bw{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,Uw.createSynthesizedTargetChangeForCurrentChange(e,t)),new Bw(vt.min(),r,kI(),Ho(),dn())}}class Uw{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Uw(Pr.EMPTY_BYTE_STRING,t,dn(),dn(),dn())}}class OI{constructor(e,t,r,i){this.O=e,this.removedTargetIds=t,this.key=r,this.F=i}}class e${constructor(e,t){this.targetId=e,this.$=t}}class t${constructor(e,t,r=Pr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class n${constructor(){this.B=0,this.L=i$(),this.U=Pr.EMPTY_BYTE_STRING,this.q=!1,this.G=!0}get current(){return this.q}get resumeToken(){return this.U}get K(){return 0!==this.B}get j(){return this.G}W(e){e.approximateByteSize()>0&&(this.G=!0,this.U=e)}H(){let e=dn(),t=dn(),r=dn();return this.L.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Xe()}}),new Uw(this.U,this.q,e,t,r)}J(){this.G=!1,this.L=i$()}Y(e,t){this.G=!0,this.L=this.L.insert(e,t)}X(e){this.G=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.G=!0,this.q=!0}}class W9{constructor(e){this.nt=e,this.st=new Map,this.it=Ho(),this.rt=r$(),this.ot=new Fn(Gt)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.K||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.K||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:Xe()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,i)=>{this.ft(i)&&t(i)})}_t(e){const t=e.targetId,r=e.$.count,i=this.wt(t);if(i){const s=i.target;if(DI(s))if(0===r){const l=new Ue(s.path);this.ct(t,l,Pn.newNoDocument(l,vt.min()))}else Et(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((s,l)=>{const d=this.wt(l);if(d){if(s.current&&DI(d.target)){const p=new Ue(d.target.path);null!==this.it.get(p)||this.It(l,p)||this.ct(l,p,Pn.newNoDocument(p,e))}s.j&&(t.set(l,s.H()),s.J())}});let r=dn();this.rt.forEach((s,l)=>{let d=!0;l.forEachWhile(p=>{const y=this.wt(p);return!y||2===y.purpose||(d=!1,!1)}),d&&(r=r.add(s))}),this.it.forEach((s,l)=>l.setReadTime(e));const i=new Bw(e,t,this.ot,this.it,r);return this.it=Ho(),this.rt=r$(),this.ot=new Fn(Gt),i}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const i=this.lt(e);this.It(e,t)?i.Y(t,1):i.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new n$,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new Fn(Gt),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Re("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.K?null:this.nt.Et(e)}dt(e){this.st.set(e,new n$),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function r$(){return new ar(Ue.comparator)}function i$(){return new ar(Ue.comparator)}const Z9={asc:"ASCENDING",desc:"DESCENDING"},K9={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Y9{constructor(e,t){this.databaseId=e,this.N=t}}function jw(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function s$(n,e){return n.N?e.toBase64():e.toUint8Array()}function Q9(n,e){return jw(n,e.toTimestamp())}function Jr(n){return Et(!!n),vt.fromTimestamp(function(e){const t=id(e);return new or(t.seconds,t.nanos)}(n))}function DP(n,e){return(t=n,new Jt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function o$(n){const e=Jt.fromString(n);return Et(g$(e)),e}function Hw(n,e){return DP(n.databaseId,e.path)}function xl(n,e){const t=o$(e);if(t.get(1)!==n.databaseId.projectId)throw new Ce(oe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ce(oe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ue(l$(t))}function TP(n,e){return DP(n.databaseId,e)}function a$(n){const e=o$(n);return 4===e.length?Jt.emptyPath():l$(e)}function Gw(n){return new Jt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function l$(n){return Et(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function c$(n,e,t){return{name:Hw(n,e),fields:t.value.mapValue.fields}}function u$(n,e,t){const r=xl(n,e.name),i=Jr(e.updateTime),s=new Bi({mapValue:{fields:e.fields}}),l=Pn.newFoundDocument(r,i,s);return t&&l.setHasCommittedMutations(),t?l.setHasCommittedMutations():l}function $w(n,e){let t;if(e instanceof Fw)t={update:c$(n,e.key,e.value)};else if(e instanceof Lw)t={delete:Hw(n,e.key)};else if(e instanceof Kf)t={update:c$(n,e.key,e.data),updateMask:oJ(e.fieldMask)};else{if(!(e instanceof CP))return Xe();t={verify:Hw(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,s){const l=s.transform;if(l instanceof n_)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Wf)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Zf)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof r_)return{fieldPath:s.field.canonicalString(),increment:l.k};throw Xe()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:Q9(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:Xe()),t;var i}function IP(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?vr.updateTime(Jr(i.updateTime)):void 0!==i.exists?vr.exists(i.exists):vr.none():vr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,l){let d=null;"setToServerValue"in l?(Et("REQUEST_TIME"===l.setToServerValue),d=new n_):"appendMissingElements"in l?d=new Wf(l.appendMissingElements.values||[]):"removeAllFromArray"in l?d=new Zf(l.removeAllFromArray.values||[]):"increment"in l?d=new r_(s,l.increment):Xe();const p=Qr.fromServerFormat(l.fieldPath);return new Pw(p,d)}(n,i)):[];var i;if(e.update){const i=xl(n,e.update.name),s=new Bi({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new Km((e.updateMask.fieldPaths||[]).map(y=>Qr.fromServerFormat(y)));return new Kf(i,s,l,t,r)}return new Fw(i,s,t,r)}if(e.delete){const i=xl(n,e.delete);return new Lw(i,t)}if(e.verify){const i=xl(n,e.verify);return new CP(i,t)}return Xe()}function d$(n,e){return{documents:[TP(n,e.path)]}}function h$(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=TP(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=TP(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(p){if(0===p.length)return;const y=p.map(C=>function(D){if("=="===D.op){if(EG(D.value))return{unaryFilter:{field:s_(D.field),op:"IS_NAN"}};if(CG(D.value))return{unaryFilter:{field:s_(D.field),op:"IS_NULL"}}}else if("!="===D.op){if(EG(D.value))return{unaryFilter:{field:s_(D.field),op:"IS_NOT_NAN"}};if(CG(D.value))return{unaryFilter:{field:s_(D.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:s_(D.field),op:rJ(D.op),value:D.value}}}(C));return 1===y.length?y[0]:{compositeFilter:{op:"AND",filters:y}}}(e.filters);i&&(t.structuredQuery.where=i);const s=function(p){if(0!==p.length)return p.map(y=>{return{field:s_((C=y).field),direction:nJ(C.dir)};var C})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const l=(y=e.limit,n.N||$f(y)?y:{value:y});var y,d,p;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(d=e.startAt).inclusive,values:d.position}),e.endAt&&(t.structuredQuery.endAt={before:!(p=e.endAt).inclusive,values:p.position}),t}function f$(n){let e=a$(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Et(1===r);const C=t.from[0];C.allDescendants?i=C.collectionId:e=e.child(C.collectionId)}let s=[];t.where&&(s=p$(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(C=>{return new Xm(o_((D=C).field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction));var D}));let d=null;t.limit&&(d=function(C){let D;return D="object"==typeof C?C.value:C,$f(D)?null:D}(t.limit));let p=null;var C;t.startAt&&(p=new od((C=t.startAt).values||[],!!C.before));let y=null;return t.endAt&&(y=function(C){return new od(C.values||[],!C.before)}(t.endAt)),OG(e,i,l,s,d,"F",p,y)}function p$(n){return n?void 0!==n.unaryFilter?[sJ(n)]:void 0!==n.fieldFilter?[iJ(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>p$(e)).reduce((e,t)=>e.concat(t)):Xe():[]}function nJ(n){return Z9[n]}function rJ(n){return K9[n]}function s_(n){return{fieldPath:n.canonicalString()}}function o_(n){return Qr.fromServerFormat(n.fieldPath)}function iJ(n){return Ei.create(o_(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Xe()}}(n.fieldFilter.op),n.fieldFilter.value)}function sJ(n){switch(n.unaryFilter.op){case"IS_NAN":const e=o_(n.unaryFilter.field);return Ei.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=o_(n.unaryFilter.field);return Ei.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=o_(n.unaryFilter.field);return Ei.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=o_(n.unaryFilter.field);return Ei.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Xe()}}function oJ(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function g$(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Xr(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=m$(e)),e=aJ(n.get(t),e);return m$(e)}function aJ(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function m$(n){return n+"\x01\x01"}function xa(n){const e=n.length;if(Et(e>=2),2===e)return Et("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Jt.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const l=n.indexOf("\x01",s);switch((l<0||l>t)&&Xe(),n.charAt(l+1)){case"\x01":const d=n.substring(s,l);let p;0===i.length?p=d:(i+=d,p=i,i=""),r.push(p);break;case"\x10":i+=n.substring(s,l),i+="\0";break;case"\x11":i+=n.substring(s,l+1);break;default:Xe()}s=l+2}return new Jt(r)}const _$=["userId","batchId"];function NI(n,e){return[n,Xr(e)]}function y$(n,e,t){return[n,Xr(e),t]}const lJ={},cJ=["prefixPath","collectionGroup","readTime","documentId"],uJ=["prefixPath","collectionGroup","documentId"],dJ=["collectionGroup","readTime","prefixPath","documentId"],hJ=["canonicalId","targetId"],fJ=["targetId","path"],pJ=["path","targetId"],gJ=["collectionId","parent"],mJ=["indexId","uid"],_J=["uid","sequenceNumber"],yJ=["indexId","uid","arrayValue","directionalValue","documentKey"],vJ=["indexId","uid","documentKey"],bJ=["userId","collectionPath","documentId"],wJ=["userId","collectionPath","largestBatchId"],CJ=["userId","collectionGroup","largestBatchId"],v$=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],EJ=[...v$,"documentOverlays"],b$=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],DJ=[...b$,"indexConfiguration","indexState","indexEntries"],w$="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class C${constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class le{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Xe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new le((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof le?t:le.resolve(t)}catch(t){return le.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):le.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):le.reject(t)}static resolve(e){return new le((t,r)=>{t(e)})}static reject(e){return new le((t,r)=>{r(e)})}static waitFor(e){return new le((t,r)=>{let i=0,s=0,l=!1;e.forEach(d=>{++i,d.next(()=>{++s,l&&s===i&&t()},p=>r(p))}),l=!0,s===i&&t()})}static or(e){let t=le.resolve(!1);for(const r of e)t=t.next(i=>i?le.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}}class PI{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new Yr,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new zw(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const i=SP(r.target.error);this.At.reject(new zw(e,i))}}static open(e,t,r,i){try{return new PI(t,e.transaction(i,r))}catch(s){throw new zw(t,s)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Re("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new IJ(t)}}class Ra{constructor(e,t,r){this.name=e,this.version=t,this.Pt=r,12.2===Ra.Vt((0,k.z$)())&&yr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Re("SimpleDb","Removing database:",e),Qf(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,k.hl)())return!1;if(Ra.St())return!0;const e=(0,k.z$)(),t=Ra.Vt(e),r=0<t&&t<10,i=Ra.Dt(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,q.Z)(function*(){return t.db||(Re("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=l=>{r(l.target.result)},s.onblocked=()=>{i(new zw(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=l=>{const d=l.target.error;i("VersionError"===d.name?new Ce(oe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===d.name?new Ce(oe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+d):new zw(e,d))},s.onupgradeneeded=l=>{Re("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.Pt.kt(l.target.result,s.transaction,l.oldVersion,t.version).next(()=>{Re("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var s=this;return(0,q.Z)(function*(){const l="readonly"===t;let d=0;for(;;){++d;try{s.db=yield s.Nt(e);const p=PI.open(s.db,e,l?"readonly":"readwrite",r),y=i(p).next(C=>(p.bt(),C)).catch(C=>(p.abort(C),le.reject(C))).toPromise();return y.catch(()=>{}),yield p.Rt,y}catch(p){const y="FirebaseError"!==p.name&&d<3;if(Re("SimpleDb","Transaction failed with error:",p.message,"Retrying:",y),s.close(),!y)return Promise.reject(p)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class TJ{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return Qf(this.Ft.delete())}}class zw extends Ce{constructor(e,t){super(oe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Yf(n){return"IndexedDbTransactionError"===n.name}class IJ{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Re("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Re("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Qf(r)}add(e){return Re("SimpleDb","ADD",this.store.name,e,e),Qf(this.store.add(e))}get(e){return Qf(this.store.get(e)).next(t=>(void 0===t&&(t=null),Re("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Re("SimpleDb","DELETE",this.store.name,e),Qf(this.store.delete(e))}count(){return Re("SimpleDb","COUNT",this.store.name),Qf(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),s=[];return this.Gt(i,(l,d)=>{s.push(d)}).next(()=>s)}{const i=this.store.getAll(r.range);return new le((s,l)=>{i.onerror=d=>{l(d.target.error)},i.onsuccess=d=>{s(d.target.result)}})}}Kt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new le((i,s)=>{r.onerror=l=>{s(l.target.error)},r.onsuccess=l=>{i(l.target.result)}})}Qt(e,t){Re("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const i=this.cursor(r);return this.Gt(i,(s,l,d)=>d.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.Gt(i,t)}zt(e){const t=this.cursor({});return new le((r,i)=>{t.onerror=s=>{const l=SP(s.target.error);i(l)},t.onsuccess=s=>{const l=s.target.result;l?e(l.primaryKey,l.value).next(d=>{d?l.continue():r()}):r()}})}Gt(e,t){const r=[];return new le((i,s)=>{e.onerror=l=>{s(l.target.error)},e.onsuccess=l=>{const d=l.target.result;if(!d)return void i();const p=new TJ(d),y=t(d.primaryKey,d.value,p);if(y instanceof le){const C=y.catch(D=>(p.done(),le.reject(D)));r.push(C)}p.isDone?i():null===p.Lt?d.continue():d.continue(p.Lt)}}).next(()=>le.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Qf(n){return new le((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=SP(r.target.error);t(i)}})}let E$=!1;function SP(n){const e=Ra.Vt((0,k.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ce("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return E$||(E$=!0,setTimeout(()=>{throw r},0)),r}}return n}class D$ extends C${constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function ei(n,e){const t=je(n);return Ra.xt(t.Ht,e)}class AP{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&B9(s,e,r[i])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&wP(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&wP(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),i=r;this.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(vt.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),dn())}isEqual(e){return this.batchId===e.batchId&&Zm(this.mutations,e.mutations,(t,r)=>qG(t,r))&&Zm(this.baseMutations,e.baseMutations,(t,r)=>qG(t,r))}}class MP{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Et(e.mutations.length===r.length);let i=$9;const s=e.mutations;for(let l=0;l<s.length;l++)i=i.insert(s[l].key,r[l].version);return new MP(e,t,r,i)}}class xP{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class ld{constructor(e,t,r,i,s=vt.min(),l=vt.min(),d=Pr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=d}withSequenceNumber(e){return new ld(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new ld(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new ld(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class T${constructor(e){this.Jt=e}}function I$(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:FI(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Hw(i=n.Jt,(s=e).key),fields:s.data.value.mapValue.fields,updateTime:jw(i,s.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Jf(e.version)};else{if(!e.isUnknownDocument())return Xe();r.unknownDocument={path:t.path.toArray(),version:Jf(e.version)}}var i,s;return r}function FI(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Jf(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Xf(n){const e=new or(n.seconds,n.nanoseconds);return vt.fromTimestamp(e)}function a_(n,e){const t=(e.baseMutations||[]).map(s=>IP(n.Jt,s));for(let s=0;s<e.mutations.length-1;++s){const l=e.mutations[s];s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(l.updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s)}const r=e.mutations.map(s=>IP(n.Jt,s)),i=or.fromMillis(e.localWriteTimeMs);return new AP(e.batchId,i,t,r)}function qw(n){const e=Xf(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Xf(n.lastLimboFreeSnapshotVersion):vt.min();let r;var i;return void 0!==n.query.documents?(Et(1===(i=n.query).documents.length),r=jo(e_(a$(i.documents[0])))):r=jo(f$(n.query)),new ld(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Pr.fromBase64String(n.resumeToken))}function S$(n,e){const t=Jf(e.snapshotVersion),r=Jf(e.lastLimboFreeSnapshotVersion);let i;i=DI(e.target)?d$(n.Jt,e.target):h$(n.Jt,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:qf(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function RP(n){const e=f$({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?NG(e,e.limit,"L"):e}function kP(n,e){return new xP(e.largestBatchId,IP(n.Jt,e.overlayMutation))}function A$(n,e){const t=e.path.lastSegment();return[n,Xr(e.path.popLast()),t]}class AJ{getBundleMetadata(e,t){return M$(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Xf(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return M$(e).put({bundleId:(r=t).id,createTime:Jf(Jr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return x$(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:RP(i.bundledQuery),readTime:Xf(i.readTime)};var i})}saveNamedQuery(e,t){return x$(e).put({name:(r=t).name,readTime:Jf(Jr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function M$(n){return ei(n,"bundles")}function x$(n){return ei(n,"namedQueries")}class OP{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new OP(e,t.uid||"")}getOverlay(e,t){return Ww(e).get(A$(this.userId,t)).next(r=>r?kP(this.M,r):null)}saveOverlays(e,t,r){const i=[];return r.forEach((s,l)=>{const d=new xP(t,l);i.push(this.Xt(e,d))}),le.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(l=>i.add(Xr(l.getCollectionPath())));const s=[];return i.forEach(l=>{const d=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);s.push(Ww(e).Qt("collectionPathOverlayIndex",d))}),le.waitFor(s)}getOverlaysForCollection(e,t,r){const i=Vw(),s=Xr(t),l=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Ww(e).qt("collectionPathOverlayIndex",l).next(d=>{for(const p of d){const y=kP(this.M,p);i.set(y.getKey(),y)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=Vw();let l;const d=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ww(e).Wt({index:"collectionGroupOverlayIndex",range:d},(p,y,C)=>{const D=kP(this.M,y);s.size()<i||D.largestBatchId===l?(s.set(D.getKey(),D),l=D.largestBatchId):C.done()}).next(()=>s)}Xt(e,t){return Ww(e).put(function(r,i,s){const[l,d,p]=A$(i,s.mutation.key);return{userId:i,collectionPath:d,documentId:p,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:$w(r.Jt,s.mutation)}}(this.M,this.userId,t))}}function Ww(n){return ei(n,"documentOverlays")}class l_{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(er(e.integerValue));else if("doubleValue"in e){const r=er(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),Aw(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(Gf(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?DG(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):Xe()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const i of Object.keys(r))this.re(i,t),this.te(r[i],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const i of r)this.te(i,t)}ae(e,t){this.ne(t,37),Ue.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function MJ(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function R$(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const s=MJ(255&t[i]);if(r+=s,8!==s)break}return r}(n);return Math.ceil(e/8)}l_.fe=new l_;class xJ{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const i=t.codePointAt(0);this._e(240|i>>>18),this._e(128|63&i>>>12),this._e(128|63&i>>>6),this._e(128|63&i)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const i=t.codePointAt(0);this.ge(240|i>>>18),this.ge(128|63&i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i)}}this.ye()}Te(e){const t=this.Ee(e),r=R$(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Re(e){const t=this.Ee(e),r=R$(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(i){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,i,!1),new Uint8Array(s.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class RJ{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class kJ{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class LI{constructor(){this.De=new xJ,this.Ce=new RJ(this.De),this.xe=new kJ(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class cd{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new cd(this.indexId,this.documentKey,this.arrayValue,r)}}function ep(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=k$(n.arrayValue,e.arrayValue),0!==t?t:(t=k$(n.directionalValue,e.directionalValue),0!==t?t:Ue.comparator(n.documentKey,e.documentKey)))}function k$(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class OJ{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=gP(e);if(void 0!==t&&!this.Be(t))return!1;const r=Jm(e);let i=0,s=0;for(;i<r.length&&this.Be(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Fe){const l=r[i];if(!this.Le(this.Fe,l)||!this.Ue(this.Me[s++],l))return!1;++i}for(;i<r.length;++i){const l=r[i];if(s>=this.Me.length||!this.Ue(this.Me[s++],l))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class NJ{constructor(){this.qe=new NP}addToCollectionParentIndex(e,t){return this.qe.add(t),le.resolve()}getCollectionParents(e,t){return le.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return le.resolve()}deleteFieldIndex(e,t){return le.resolve()}getDocumentsMatchingTarget(e,t){return le.resolve(null)}getFieldIndex(e,t){return le.resolve(null)}getFieldIndexes(e,t){return le.resolve([])}getNextCollectionGroupToUpdate(e){return le.resolve(null)}updateCollectionGroup(e,t,r){return le.resolve()}updateIndexEntries(e,t){return le.resolve()}}class NP{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Fn(Jt.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Fn(Jt.comparator)).toArray()}}const VI=new Uint8Array(0);class PJ{constructor(e){this.user=e,this.Ge=new NP,this.Ke=new ad(t=>qf(t),(t,r)=>Ow(t,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ge.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Ge.add(t)});const s={collectionId:r,parent:Xr(i)};return O$(e).put(s)}return le.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[pG(t),""],!1,!0);return O$(e).qt(i).next(s=>{for(const l of s){if(l.collectionId!==t)break;r.push(xa(l.parent))}return r})}addFieldIndex(e,t){const r=BI(e),i={indexId:(s=t).indexId,collectionGroup:s.collectionGroup,fields:s.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])};var s;return delete i.indexId,r.add(i).next()}deleteFieldIndex(e,t){const r=BI(e),i=UI(e),s=Zw(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Zw(e);let i=!0;const s=new Map;return le.forEach(this.Qe(t),l=>this.getFieldIndex(e,l).next(d=>{i&&(i=!!d),s.set(l,d)})).next(()=>{if(i){let l=dn();return le.forEach(s,(d,p)=>{var y;Re("IndexedDbIndexManager",`Using index ${y=d,`id=${y.indexId}|cg=${y.collectionGroup}|f=${y.fields.map(be=>`${be.fieldPath}:${be.kind}`).join(",")}`} to execute ${qf(t)}`);const C=function(be,He){const Ne=gP(He);if(void 0===Ne)return null;for(const mt of TI(be,Ne.fieldPath))switch(mt.op){case"array-contains-any":return mt.value.arrayValue.values||[];case"array-contains":return[mt.value]}return null}(p,d),D=function(be,He){const Ne=new Map;for(const mt of Jm(He))for(const ot of TI(be,mt.fieldPath))switch(ot.op){case"==":case"in":Ne.set(mt.fieldPath.canonicalString(),ot.value);break;case"not-in":case"!=":return Ne.set(mt.fieldPath.canonicalString(),ot.value),Array.from(Ne.values())}return null}(p,d),M=function(be,He){const Ne=[];let mt=!0;for(const fn of Jm(He)){let mn,lr=!0;for(const _n of TI(be,fn.fieldPath)){let kn,Ko=!0;switch(_n.op){case"<":case"<=":kn="nullValue"in(ot=_n.value)?bG:"booleanValue"in ot?{booleanValue:!1}:"integerValue"in ot||"doubleValue"in ot?{doubleValue:NaN}:"timestampValue"in ot?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in ot?{stringValue:""}:"bytesValue"in ot?{bytesValue:""}:"referenceValue"in ot?Qm($c.empty(),Ue.empty()):"geoPointValue"in ot?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in ot?{arrayValue:{}}:"mapValue"in ot?{mapValue:{}}:Xe();break;case"==":case"in":case">=":kn=_n.value;break;case">":kn=_n.value,Ko=!1;break;case"!=":case"not-in":kn=bG}TG(mn,kn)===kn&&(mn=kn,lr=Ko)}if(null!==be.startAt)for(let _n=0;_n<be.orderBy.length;++_n)if(be.orderBy[_n].field.isEqual(fn.fieldPath)){const kn=be.startAt.position[_n];TG(mn,kn)===kn&&(mn=kn,lr=be.startAt.inclusive);break}if(void 0===mn)return null;Ne.push(mn),mt&&(mt=lr)}var ot;return new od(Ne,mt)}(p,d),R=function(be,He){const Ne=[];let mt=!0;for(const fn of Jm(He)){let mn,lr=!0;for(const _n of TI(be,fn.fieldPath)){let kn,Ko=!0;switch(_n.op){case">=":case">":kn="nullValue"in(ot=_n.value)?{booleanValue:!1}:"booleanValue"in ot?{doubleValue:NaN}:"integerValue"in ot||"doubleValue"in ot?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in ot?{stringValue:""}:"stringValue"in ot?{bytesValue:""}:"bytesValue"in ot?Qm($c.empty(),Ue.empty()):"referenceValue"in ot?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in ot?{arrayValue:{}}:"arrayValue"in ot?{mapValue:{}}:"mapValue"in ot?vG:Xe(),Ko=!1;break;case"==":case"in":case"<=":kn=_n.value;break;case"<":kn=_n.value,Ko=!1;break;case"!=":case"not-in":kn=vG}IG(mn,kn)===kn&&(mn=kn,lr=Ko)}if(null!==be.endAt)for(let _n=0;_n<be.orderBy.length;++_n)if(be.orderBy[_n].field.isEqual(fn.fieldPath)){const kn=be.endAt.position[_n];IG(mn,kn)===kn&&(mn=kn,lr=be.endAt.inclusive);break}if(void 0===mn)return null;Ne.push(mn),mt&&(mt=lr)}var ot;return new od(Ne,mt)}(p,d),N=this.je(d,p,M),j=this.je(d,p,R),Q=this.We(d,p,D),Te=this.ze(d.indexId,C,N,!!M&&M.inclusive,j,!!R&&R.inclusive,Q);return le.forEach(Te,be=>r.Kt(be,t.limit).next(He=>{He.forEach(Ne=>{l=l.add(new Ue(xa(Ne.documentKey)))})}))}).next(()=>l)}return le.resolve(null)})}Qe(e){let t=this.Ke.get(e);return t||(t=[e],this.Ke.set(e,t),t)}ze(e,t,r,i,s,l,d){const p=(null!=t?t.length:1)*Math.max(null!=r?r.length:1,null!=s?s.length:1),y=p/(null!=t?t.length:1),C=[];for(let D=0;D<p;++D){const M=t?this.He(t[D/y]):VI,R=r?this.Je(e,M,r[D%y],i):this.Ye(e),N=s?this.Xe(e,M,s[D%y],l):this.Ye(e+1);C.push(...this.createRange(R,N,d.map(j=>this.Je(e,M,j,!0))))}return C}Je(e,t,r,i){const s=new cd(e,Ue.empty(),t,r);return i?s:s.ke()}Xe(e,t,r,i){const s=new cd(e,Ue.empty(),t,r);return i?s.ke():s}Ye(e){return new cd(e,Ue.empty(),VI,VI)}getFieldIndex(e,t){const r=new OJ(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{const l=s.filter(d=>r.$e(d));return l.sort((d,p)=>p.fields.length-d.fields.length),l.length>0?l[0]:null})}Ze(e,t){const r=new LI;for(const i of Jm(e)){const s=t.data.field(i.fieldPath);if(null==s)return null;const l=r.Ne(i.kind);l_.fe.Zt(s,l)}return r.Se()}He(e){const t=new LI;return l_.fe.Zt(e,t.Ne(0)),t.Se()}We(e,t,r){if(null===r)return[];let i=[];i.push(new LI);let s=0;for(const l of Jm(e)){const d=r[s++];for(const p of i)if(this.tn(t,l.fieldPath)&&xw(d))i=this.en(i,l,d);else{const y=p.Ne(l.kind);l_.fe.Zt(d,y)}}return this.nn(i)}je(e,t,r){return null==r?null:this.We(e,t,r.position)}nn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}en(e,t,r){const i=[...e],s=[];for(const l of r.arrayValue.values||[])for(const d of i){const p=new LI;p.seed(d.Se()),l_.fe.Zt(l,p.Ne(t.kind)),s.push(p)}return s}tn(e,t){return!!e.filters.find(r=>r instanceof Ei&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=BI(e),i=UI(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(s=>{const l=[];return le.forEach(s,d=>i.get([d.indexId,this.uid]).next(p=>{l.push(function(y,C){const D=C?new kw(C.sequenceNumber,new zc(Xf(C.readTime),new Ue(xa(C.documentKey)),C.largestBatchId)):kw.empty(),M=y.fields.map(([R,N])=>new EI(Qr.fromServerFormat(R),N));return new CI(y.indexId,y.collectionGroup,M,D)}(d,p))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:Gt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=BI(e),s=UI(e);return this.sn(e).next(l=>i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(d=>le.forEach(d,p=>{return s.put({indexId:p.indexId,uid:this.user.uid||"",sequenceNumber:l,readTime:Jf((M=r).readTime),documentKey:Xr(M.documentKey.path),largestBatchId:M.largestBatchId});var M})))}updateIndexEntries(e,t){const r=new Map;return le.forEach(t,(i,s)=>{const l=r.get(i.collectionGroup);return(l?le.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next(d=>(r.set(i.collectionGroup,d),le.forEach(d,p=>this.rn(e,i,p).next(y=>{const C=this.on(s,p);return y.isEqual(C)?le.resolve():this.un(e,s,y,C)}))))})}an(e,t,r){return Zw(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,documentKey:Xr(t.key.path)})}cn(e,t,r){return Zw(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,Xr(t.key.path)])}rn(e,t,r){const i=Zw(e);let s=new Fn(ep);return i.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,Xr(t.path)])},(l,d)=>{s=s.add(new cd(r.indexId,t,d.arrayValue,d.directionalValue))}).next(()=>s)}on(e,t){let r=new Fn(ep);const i=this.Ze(t,e);if(null==i)return r;const s=gP(t);if(null!=s){const l=e.data.field(s.fieldPath);if(xw(l))for(const d of l.arrayValue.values||[])r=r.add(new cd(t.indexId,e.key,this.He(d),i))}else r=r.add(new cd(t.indexId,e.key,VI,i));return r}un(e,t,r,i){Re("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const s=[];return function(l,d,p,y,C){const D=l.getIterator(),M=d.getIterator();let R=i_(D),N=i_(M);for(;R||N;){let j=!1,Q=!1;if(R&&N){const Te=p(R,N);Te<0?Q=!0:Te>0&&(j=!0)}else null!=R?Q=!0:j=!0;j?(y(N),N=i_(M)):Q?(C(R),R=i_(D)):(R=i_(D),N=i_(M))}}(r,i,ep,l=>{s.push(this.an(e,t,l))},l=>{s.push(this.cn(e,t,l))}),le.waitFor(s)}sn(e){let t=1;return UI(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,d)=>ep(l,d)).filter((l,d,p)=>!d||0!==ep(l,p[d-1]));const i=[];i.push(e);for(const l of r){const d=ep(l,e),p=ep(l,t);if(0===d)i[0]=e.ke();else if(d>0&&p<0)i.push(l),i.push(l.ke());else if(p>0)break}i.push(t);const s=[];for(let l=0;l<i.length;l+=2)s.push(IDBKeyRange.bound([i[l].indexId,this.uid,i[l].arrayValue,i[l].directionalValue,""],[i[l+1].indexId,this.uid,i[l+1].arrayValue,i[l+1].directionalValue,""]));return s}}function O$(n){return ei(n,"collectionParents")}function Zw(n){return ei(n,"indexEntries")}function BI(n){return ei(n,"indexConfiguration")}function UI(n){return ei(n,"indexState")}const N$={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ws{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new ws(e,ws.DEFAULT_COLLECTION_PERCENTILE,ws.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function P$(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],l=IDBKeyRange.only(t.batchId);let d=0;const p=r.Wt({range:l},(C,D,M)=>(d++,M.delete()));s.push(p.next(()=>{Et(1===d)}));const y=[];for(const C of t.mutations){const D=y$(e,C.key.path,t.batchId);s.push(i.delete(D)),y.push(C.key)}return le.waitFor(s).next(()=>y)}function jI(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Xe();e=n.noDocument}return JSON.stringify(e).length}ws.DEFAULT_COLLECTION_PERCENTILE=10,ws.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ws.DEFAULT=new ws(41943040,ws.DEFAULT_COLLECTION_PERCENTILE,ws.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ws.DISABLED=new ws(-1,0,0);class PP{constructor(e,t,r,i){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=i,this.hn={}}static Yt(e,t,r,i){Et(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new PP(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ud(e).Wt({index:"userMutationsIndex",range:r},(i,s,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=c_(e),l=ud(e);return l.add({}).next(d=>{Et("number"==typeof d);const p=new AP(d,t,r,i),y=function(M,R,N){const j=N.baseMutations.map(Te=>$w(M.Jt,Te)),Q=N.mutations.map(Te=>$w(M.Jt,Te));return{userId:R,batchId:N.batchId,localWriteTimeMs:N.localWriteTime.toMillis(),baseMutations:j,mutations:Q}}(this.M,this.userId,p),C=[];let D=new Fn((M,R)=>Gt(M.canonicalString(),R.canonicalString()));for(const M of i){const R=y$(this.userId,M.key.path,d);D=D.add(M.key.path.popLast()),C.push(l.put(y)),C.push(s.put(R,lJ))}return D.forEach(M=>{C.push(this.indexManager.addToCollectionParentIndex(e,M))}),e.addOnCommittedListener(()=>{this.hn[d]=p.keys()}),le.waitFor(C).next(()=>p)})}lookupMutationBatch(e,t){return ud(e).get(t).next(r=>r?(Et(r.userId===this.userId),a_(this.M,r)):null)}ln(e,t){return this.hn[t]?le.resolve(this.hn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.hn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return ud(e).Wt({index:"userMutationsIndex",range:i},(l,d,p)=>{d.userId===this.userId&&(Et(d.batchId>=r),s=a_(this.M,d)),p.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return ud(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(i,s,l)=>{r=s.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ud(e).qt("userMutationsIndex",t).next(r=>r.map(i=>a_(this.M,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=NI(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return c_(e).Wt({range:i},(l,d,p)=>{const[y,C,D]=l,M=xa(C);if(y===this.userId&&t.path.isEqual(M))return ud(e).get(D).next(R=>{if(!R)throw Xe();Et(R.userId===this.userId),s.push(a_(this.M,R))});p.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Fn(Gt);const i=[];return t.forEach(s=>{const l=NI(this.userId,s.path),d=IDBKeyRange.lowerBound(l),p=c_(e).Wt({range:d},(y,C,D)=>{const[M,R,N]=y,j=xa(R);M===this.userId&&s.path.isEqual(j)?r=r.add(N):D.done()});i.push(p)}),le.waitFor(i).next(()=>this.fn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=NI(this.userId,r),l=IDBKeyRange.lowerBound(s);let d=new Fn(Gt);return c_(e).Wt({range:l},(p,y,C)=>{const[D,M,R]=p,N=xa(M);D===this.userId&&r.isPrefixOf(N)?N.length===i&&(d=d.add(R)):C.done()}).next(()=>this.fn(e,d))}fn(e,t){const r=[],i=[];return t.forEach(s=>{i.push(ud(e).get(s).next(l=>{if(null===l)throw Xe();Et(l.userId===this.userId),r.push(a_(this.M,l))}))}),le.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return P$(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.dn(t.batchId)}),le.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}dn(e){delete this.hn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return le.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return c_(e).Wt({range:r},(s,l,d)=>{if(s[0]===this.userId){const p=xa(s[1]);i.push(p)}else d.done()}).next(()=>{Et(0===i.length)})})}containsKey(e,t){return F$(e,this.userId,t)}_n(e){return L$(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function F$(n,e,t){const r=NI(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let l=!1;return c_(n).Wt({range:s,jt:!0},(d,p,y)=>{const[C,D,M]=d;C===e&&D===i&&(l=!0),y.done()}).next(()=>l)}function ud(n){return ei(n,"mutations")}function c_(n){return ei(n,"documentMutations")}function L$(n){return ei(n,"mutationQueues")}class tp{constructor(e){this.wn=e}next(){return this.wn+=2,this.wn}static mn(){return new tp(0)}static gn(){return new tp(-1)}}class FJ{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.yn(e).next(t=>{const r=new tp(t.highestTargetId);return t.highestTargetId=r.next(),this.pn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.yn(e).next(t=>vt.fromTimestamp(new or(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.yn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.yn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.pn(e,i)))}addTargetData(e,t){return this.In(e,t).next(()=>this.yn(e).next(r=>(r.targetCount+=1,this.Tn(t,r),this.pn(e,r))))}updateTargetData(e,t){return this.In(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>u_(e).delete(t.targetId)).next(()=>this.yn(e)).next(r=>(Et(r.targetCount>0),r.targetCount-=1,this.pn(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return u_(e).Wt((l,d)=>{const p=qw(d);p.sequenceNumber<=t&&null===r.get(p.targetId)&&(i++,s.push(this.removeTargetData(e,p)))}).next(()=>le.waitFor(s)).next(()=>i)}forEachTarget(e,t){return u_(e).Wt((r,i)=>{const s=qw(i);t(s)})}yn(e){return V$(e).get("targetGlobalKey").next(t=>(Et(null!==t),t))}pn(e,t){return V$(e).put("targetGlobalKey",t)}In(e,t){return u_(e).put(S$(this.M,t))}Tn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.yn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=qf(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return u_(e).Wt({range:i,index:"queryTargetsIndex"},(l,d,p)=>{const y=qw(d);Ow(t,y.target)&&(s=y,p.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=dd(e);return t.forEach(l=>{const d=Xr(l.path);i.push(s.put({targetId:r,path:d})),i.push(this.referenceDelegate.addReference(e,r,l))}),le.waitFor(i)}removeMatchingKeys(e,t,r){const i=dd(e);return le.forEach(t,s=>{const l=Xr(s.path);return le.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=dd(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=dd(e);let s=dn();return i.Wt({range:r,jt:!0},(l,d,p)=>{const y=xa(l[1]),C=new Ue(y);s=s.add(C)}).next(()=>s)}containsKey(e,t){const r=Xr(t.path),i=IDBKeyRange.bound([r],[pG(r)],!1,!0);let s=0;return dd(e).Wt({index:"documentTargetsIndex",jt:!0,range:i},([l,d],p,y)=>{0!==l&&(s++,y.done())}).next(()=>s>0)}Et(e,t){return u_(e).get(t).next(r=>r?qw(r):null)}}function u_(n){return ei(n,"targets")}function V$(n){return ei(n,"targetGlobal")}function dd(n){return ei(n,"targetDocuments")}function np(n){return FP.apply(this,arguments)}function FP(){return FP=(0,q.Z)(function*(n){if(n.code!==oe.FAILED_PRECONDITION||n.message!==w$)throw n;Re("LocalStore","Unexpectedly lost primary lease")}),FP.apply(this,arguments)}function B$([n,e],[t,r]){const i=Gt(n,t);return 0===i?Gt(e,r):i}class LJ{constructor(e){this.En=e,this.buffer=new Fn(B$),this.An=0}Rn(){return++this.An}bn(e){const t=[e,this.Rn()];if(this.buffer.size<this.En)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();B$(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class VJ{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Pn=!1,this.Vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.vn(e)}stop(){this.Vn&&(this.Vn.cancel(),this.Vn=null)}get started(){return null!==this.Vn}vn(e){var t=this;const r=this.Pn?3e5:6e4;Re("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.Vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,q.Z)(function*(){t.Vn=null,t.Pn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(i){Yf(i)?Re("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield np(i)}yield t.vn(e)}))}}class BJ{constructor(e,t){this.Sn=e,this.params=t}calculateTargetCount(e,t){return this.Sn.Dn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return le.resolve(io.A);const r=new LJ(t);return this.Sn.forEachTarget(e,i=>r.bn(i.sequenceNumber)).next(()=>this.Sn.Cn(e,i=>r.bn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Sn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Sn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Re("LruGarbageCollector","Garbage collection skipped; disabled"),le.resolve(N$)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Re("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),N$):this.xn(e,t))}getCacheSize(e){return this.Sn.getCacheSize(e)}xn(e,t){let r,i,s,l,d,p,y;const C=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(D=>(D>this.params.maximumSequenceNumbersToCollect?(Re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${D}`),i=this.params.maximumSequenceNumbersToCollect):i=D,l=Date.now(),this.nthSequenceNumber(e,i))).next(D=>(r=D,d=Date.now(),this.removeTargets(e,r,t))).next(D=>(s=D,p=Date.now(),this.removeOrphanedDocuments(e,r))).next(D=>(y=Date.now(),uP()<=vs.in.DEBUG&&Re("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-C}ms\n\tDetermined least recently used ${i} in `+(d-l)+`ms\n\tRemoved ${s} targets in `+(p-d)+`ms\n\tRemoved ${D} documents in `+(y-p)+`ms\nTotal Duration: ${y-C}ms`),le.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:D})))}}class UJ{constructor(e,t){this.db=e,this.garbageCollector=new BJ(this,t)}Dn(e){const t=this.Nn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Nn(e){let t=0;return this.Cn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Cn(e,t){return this.kn(e,(r,i)=>t(i))}addReference(e,t,r){return HI(e,r)}removeReference(e,t,r){return HI(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return HI(e,t)}Mn(e,t){return function(r,i){let s=!1;return L$(r).zt(l=>F$(r,l,i).next(d=>(d&&(s=!0),le.resolve(!d)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.kn(e,(l,d)=>{if(d<=t){const p=this.Mn(e,l).next(y=>{if(!y)return s++,r.getEntry(e,l).next(()=>(r.removeEntry(l,vt.min()),dd(e).delete([0,Xr(l.path)])))});i.push(p)}}).next(()=>le.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return HI(e,t)}kn(e,t){const r=dd(e);let i,s=io.A;return r.Wt({index:"documentTargetsIndex"},([l,d],{path:p,sequenceNumber:y})=>{0===l?(s!==io.A&&t(new Ue(xa(i)),s),s=y,i=p):s=io.A}).next(()=>{s!==io.A&&t(new Ue(xa(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function HI(n,e){return dd(n).put((r=n.currentSequenceNumber,{targetId:0,path:Xr(e.path),sequenceNumber:r}));var r}class U${constructor(){this.changes=new ad(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Pn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?le.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class jJ{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return rp(e).put(r)}removeEntry(e,t,r){return rp(e).delete(function(i,s){const l=i.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],FI(s),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.On(e,r)))}getEntry(e,t){let r=Pn.newInvalidDocument(t);return rp(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Kw(t))},(i,s)=>{r=this.Fn(t,s)}).next(()=>r)}$n(e,t){let r={size:0,document:Pn.newInvalidDocument(t)};return rp(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Kw(t))},(i,s)=>{r={document:this.Fn(t,s),size:jI(s)}}).next(()=>r)}getEntries(e,t){let r=Ho();return this.Bn(e,t,(i,s)=>{const l=this.Fn(i,s);r=r.insert(i,l)}).next(()=>r)}Ln(e,t){let r=Ho(),i=new ar(Ue.comparator);return this.Bn(e,t,(s,l)=>{const d=this.Fn(s,l);r=r.insert(s,d),i=i.insert(s,jI(l))}).next(()=>({documents:r,Un:i}))}Bn(e,t,r){if(t.isEmpty())return le.resolve();let i=new Fn(G$);t.forEach(p=>i=i.add(p));const s=IDBKeyRange.bound(Kw(i.first()),Kw(i.last())),l=i.getIterator();let d=l.getNext();return rp(e).Wt({index:"documentKeyIndex",range:s},(p,y,C)=>{const D=Ue.fromSegments([...y.prefixPath,y.collectionGroup,y.documentId]);for(;d&&G$(d,D)<0;)r(d,null),d=l.getNext();d&&d.isEqual(D)&&(r(d,y),d=l.hasNext()?l.getNext():null),d?C.Ut(Kw(d)):C.done()}).next(()=>{for(;d;)r(d,null),d=l.hasNext()?l.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),FI(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],s=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return rp(e).qt(IDBKeyRange.bound(i,s,!0)).next(l=>{let d=Ho();for(const p of l){const y=this.Fn(Ue.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);d=d.insert(y.key,y)}return d})}getAllFromCollectionGroup(e,t,r,i){let s=Ho();const l=H$(t,r),d=H$(t,zc.max());return rp(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,d,!0)},(p,y,C)=>{const D=this.Fn(Ue.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);s=s.insert(D.key,D),s.size===i&&C.done()}).next(()=>s)}newChangeBuffer(e){return new HJ(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return j$(e).get("remoteDocumentGlobalKey").next(t=>(Et(!!t),t))}On(e,t){return j$(e).put("remoteDocumentGlobalKey",t)}Fn(e,t){if(t){const r=function SJ(n,e){let t;if(e.document)t=u$(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ue.fromSegments(e.noDocument.path),i=Xf(e.noDocument.readTime);t=Pn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Xe();{const r=Ue.fromSegments(e.unknownDocument.path),i=Xf(e.unknownDocument.version);t=Pn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new or(r[0],r[1]);return vt.fromTimestamp(i)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(vt.min()))return r}return Pn.newInvalidDocument(e)}}class HJ extends U${constructor(e,t){super(),this.qn=e,this.trackRemovals=t,this.Gn=new ad(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Fn((s,l)=>Gt(s.canonicalString(),l.canonicalString()));return this.changes.forEach((s,l)=>{const d=this.Gn.get(s);if(t.push(this.qn.removeEntry(e,s,d.readTime)),l.isValidDocument()){const p=I$(this.qn.M,l);i=i.add(s.path.popLast()),r+=jI(p)-d.size,t.push(this.qn.addEntry(e,s,p))}else if(r-=d.size,this.trackRemovals){const p=I$(this.qn.M,l.convertToNoDocument(vt.min()));t.push(this.qn.addEntry(e,s,p))}}),i.forEach(s=>{t.push(this.qn.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.qn.updateMetadata(e,r)),le.waitFor(t)}getFromCache(e,t){return this.qn.$n(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.qn.Ln(e,t).next(({documents:r,Un:i})=>(i.forEach((s,l)=>{this.Gn.set(s,{size:l,readTime:r.get(s).readTime})}),r))}}function j$(n){return ei(n,"remoteDocumentGlobal")}function rp(n){return ei(n,"remoteDocumentsV14")}function Kw(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function H$(n,e){const t=e.documentKey.path.toArray();return[n,FI(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function G$(n,e){const t=n.path.length-e.path.length;return 0!==t?t:Ue.comparator(n,e)}class GJ{constructor(e){this.M=e}kt(e,t,r,i){const s=new PI("createOrUpgrade",t);var d;r<1&&i>=1&&(e.createObjectStore("owner"),(d=e).createObjectStore("mutationQueues",{keyPath:"userId"}),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",_$,{unique:!0}),d.createObjectStore("documentMutations"),$$(e),function(d){d.createObjectStore("remoteDocuments")}(e));let l=le.resolve();return r<3&&i>=3&&(0!==r&&(function(d){d.deleteObjectStore("targetDocuments"),d.deleteObjectStore("targets"),d.deleteObjectStore("targetGlobal")}(e),$$(e)),l=l.next(()=>function(d){const p=d.store("targetGlobal"),y={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:vt.min().toTimestamp(),targetCount:0};return p.put("targetGlobalKey",y)}(s))),r<4&&i>=4&&(0!==r&&(l=l.next(()=>function(d,p){return p.store("mutations").qt().next(y=>{d.deleteObjectStore("mutations"),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",_$,{unique:!0});const C=p.store("mutations"),D=y.map(M=>C.put(M));return le.waitFor(D)})}(e,s))),l=l.next(()=>{!function(d){d.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(l=l.next(()=>this.Kn(s))),r<6&&i>=6&&(l=l.next(()=>(function(d){d.createObjectStore("remoteDocumentGlobal")}(e),this.Qn(s)))),r<7&&i>=7&&(l=l.next(()=>this.jn(s))),r<8&&i>=8&&(l=l.next(()=>this.Wn(e,s))),r<9&&i>=9&&(l=l.next(()=>{!function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(l=l.next(()=>this.zn(s))),r<11&&i>=11&&(l=l.next(()=>{(function(d){d.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(d){d.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(l=l.next(()=>{!function(d){const p=d.createObjectStore("documentOverlays",{keyPath:bJ});p.createIndex("collectionPathOverlayIndex",wJ,{unique:!1}),p.createIndex("collectionGroupOverlayIndex",CJ,{unique:!1})}(e)})),r<13&&i>=13&&(l=l.next(()=>function(d){const p=d.createObjectStore("remoteDocumentsV14",{keyPath:cJ});p.createIndex("documentKeyIndex",uJ),p.createIndex("collectionGroupIndex",dJ)}(e)).next(()=>this.Hn(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(l=l.next(()=>{!function(d){d.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),d.createObjectStore("indexState",{keyPath:mJ}).createIndex("sequenceNumberIndex",_J,{unique:!1}),d.createObjectStore("indexEntries",{keyPath:yJ}).createIndex("documentKeyIndex",vJ,{unique:!1})}(e)})),l}Qn(e){let t=0;return e.store("remoteDocuments").Wt((r,i)=>{t+=jI(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Kn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(i=>le.forEach(i,s=>{const l=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",l).next(d=>le.forEach(d,p=>{Et(p.userId===s.userId);const y=a_(this.M,p);return P$(e,s.userId,y).next(()=>{})}))}))}jn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.Wt((l,d)=>{const p=new Jt(l),y=[0,Xr(p)];s.push(t.get(y).next(C=>C?le.resolve():t.put({targetId:0,path:Xr(p),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>le.waitFor(s))})}Wn(e,t){e.createObjectStore("collectionParents",{keyPath:gJ});const r=t.store("collectionParents"),i=new NP,s=l=>{if(i.add(l)){const d=l.lastSegment(),p=l.popLast();return r.put({collectionId:d,parent:Xr(p)})}};return t.store("remoteDocuments").Wt({jt:!0},(l,d)=>{const p=new Jt(l);return s(p.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([l,d,p],y)=>{const C=xa(d);return s(C.popLast())}))}zn(e){const t=e.store("targets");return t.Wt((r,i)=>{const s=qw(i),l=S$(this.M,s);return t.put(l)})}Hn(e,t){const r=t.store("remoteDocuments"),i=[];return r.Wt((s,l)=>{const d=t.store("remoteDocumentsV14"),p=(y=l,y.document?new Ue(Jt.fromString(y.document.name).popFirst(5)):y.noDocument?Ue.fromSegments(y.noDocument.path):y.unknownDocument?Ue.fromSegments(y.unknownDocument.path):Xe()).path.toArray();var y;const C={prefixPath:p.slice(0,p.length-2),collectionGroup:p[p.length-2],documentId:p[p.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(d.put(C))}).next(()=>le.waitFor(i))}}function $$(n){n.createObjectStore("targetDocuments",{keyPath:fJ}).createIndex("documentTargetsIndex",pJ,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",hJ,{unique:!0}),n.createObjectStore("targetGlobal")}const LP="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class VP{constructor(e,t,r,i,s,l,d,p,y,C,D=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Jn=s,this.window=l,this.document=d,this.Yn=y,this.Xn=C,this.Zn=D,this.ts=null,this.es=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ns=null,this.inForeground=!1,this.ss=null,this.rs=null,this.os=Number.NEGATIVE_INFINITY,this.us=M=>Promise.resolve(),!VP.vt())throw new Ce(oe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new UJ(this,i),this.cs=t+"main",this.M=new T$(p),this.hs=new Ra(this.cs,this.Zn,new GJ(this.M)),this.ls=new FJ(this.referenceDelegate,this.M),this.fs=new jJ(this.M),this.ds=new AJ,this.window&&this.window.localStorage?this._s=this.window.localStorage:(this._s=null,!1===C&&yr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ws().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ce(oe.FAILED_PRECONDITION,LP);return this.gs(),this.ys(),this.ps(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.ls.getHighestSequenceNumber(e))}).then(e=>{this.ts=new io(e,this.Yn)}).then(()=>{this.es=!0}).catch(e=>(this.hs&&this.hs.close(),Promise.reject(e)))}Is(e){var t=this;return this.us=function(){var r=(0,q.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.hs.Ot(function(){var t=(0,q.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Jn.enqueueAndForget((0,q.Z)(function*(){t.started&&(yield t.ws())})))}ws(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>GI(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ts(e).next(t=>{t||(this.isPrimary=!1,this.Jn.enqueueRetryable(()=>this.us(!1)))})}).next(()=>this.Es(e)).next(t=>this.isPrimary&&!t?this.As(e).next(()=>!1):!!t&&this.Rs(e).next(()=>!0))).catch(e=>{if(Yf(e))return Re("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Re("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Jn.enqueueRetryable(()=>this.us(e)),this.isPrimary=e})}Ts(e){return Yw(e).get("owner").next(t=>le.resolve(this.bs(t)))}Ps(e){return GI(e).delete(this.clientId)}Vs(){var e=this;return(0,q.Z)(function*(){if(e.isPrimary&&!e.vs(e.os,18e5)){e.os=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=ei(r,"clientMetadata");return i.qt().next(s=>{const l=e.Ss(s,18e5),d=s.filter(p=>-1===l.indexOf(p));return le.forEach(d,p=>i.delete(p.clientId)).next(()=>d)})}).catch(()=>[]);if(e._s)for(const r of t)e._s.removeItem(e.Ds(r.clientId))}})()}ps(){this.rs=this.Jn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ws().then(()=>this.Vs()).then(()=>this.ps()))}bs(e){return!!e&&e.ownerId===this.clientId}Es(e){return this.Xn?le.resolve(!0):Yw(e).get("owner").next(t=>{if(null!==t&&this.vs(t.leaseTimestampMs,5e3)&&!this.Cs(t.ownerId)){if(this.bs(t)&&this.networkEnabled)return!0;if(!this.bs(t)){if(!t.allowTabSynchronization)throw new Ce(oe.FAILED_PRECONDITION,LP);return!1}}return!(!this.networkEnabled||!this.inForeground)||GI(e).qt().next(r=>void 0===this.Ss(r,5e3).find(i=>{if(this.clientId!==i.clientId){const l=!this.inForeground&&i.inForeground,d=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||l&&d)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Re("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,q.Z)(function*(){e.es=!1,e.xs(),e.rs&&(e.rs.cancel(),e.rs=null),e.Ns(),e.ks(),yield e.hs.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new D$(t,io.A);return e.As(r).next(()=>e.Ps(r))}),e.hs.close(),e.Ms()})()}Ss(e,t){return e.filter(r=>this.vs(r.updateTimeMs,t)&&!this.Cs(r.clientId))}Os(){return this.runTransaction("getActiveClients","readonly",e=>GI(e).qt().next(t=>this.Ss(t,18e5).map(r=>r.clientId)))}get started(){return this.es}getMutationQueue(e,t){return PP.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.ls}getRemoteDocumentCache(){return this.fs}getIndexManager(e){return new PJ(e)}getDocumentOverlayCache(e){return OP.Yt(this.M,e)}getBundleCache(){return this.ds}runTransaction(e,t,r){Re("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",s=14===(l=this.Zn)?DJ:13===l?b$:12===l?EJ:11===l?v$:void Xe();var l;let d;return this.hs.runTransaction(e,i,s,p=>(d=new D$(p,this.ts?this.ts.next():io.A),"readwrite-primary"===t?this.Ts(d).next(y=>!!y||this.Es(d)).next(y=>{if(!y)throw yr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Jn.enqueueRetryable(()=>this.us(!1)),new Ce(oe.FAILED_PRECONDITION,w$);return r(d)}).next(y=>this.Rs(d).next(()=>y)):this.Fs(d).next(()=>r(d)))).then(p=>(d.raiseOnCommittedEvent(),p))}Fs(e){return Yw(e).get("owner").next(t=>{if(null!==t&&this.vs(t.leaseTimestampMs,5e3)&&!this.Cs(t.ownerId)&&!this.bs(t)&&!(this.Xn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ce(oe.FAILED_PRECONDITION,LP)})}Rs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Yw(e).put("owner",t)}static vt(){return Ra.vt()}As(e){const t=Yw(e);return t.get("owner").next(r=>this.bs(r)?(Re("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):le.resolve())}vs(e,t){const r=Date.now();return!(e<r-t||e>r&&(yr(`Detected an update time that is in the future: ${e} > ${r}`),1))}gs(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ss=()=>{this.Jn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ws()))},this.document.addEventListener("visibilitychange",this.ss),this.inForeground="visible"===this.document.visibilityState)}Ns(){this.ss&&(this.document.removeEventListener("visibilitychange",this.ss),this.ss=null)}ys(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ns=()=>{this.xs(),(0,k.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Jn.enterRestrictedMode(!0),this.Jn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ns))}ks(){this.ns&&(this.window.removeEventListener("pagehide",this.ns),this.ns=null)}Cs(e){var t;try{const r=null!==(null===(t=this._s)||void 0===t?void 0:t.getItem(this.Ds(e)));return Re("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return yr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xs(){if(this._s)try{this._s.setItem(this.Ds(this.clientId),String(Date.now()))}catch(e){yr("Failed to set zombie client id.",e)}}Ms(){if(this._s)try{this._s.removeItem(this.Ds(this.clientId))}catch(e){}}Ds(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Yw(n){return ei(n,"owner")}function GI(n){return ei(n,"clientMetadata")}function BP(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class $J{constructor(e,t,r){this.fs=e,this.$s=t,this.indexManager=r}Bs(e,t){return this.$s.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Ls(e,t,r))}Ls(e,t,r){return this.fs.getEntry(e,t).next(i=>{for(const s of r)s.applyToLocalView(i);return i})}Us(e,t){e.forEach((r,i)=>{for(const s of t)s.applyToLocalView(i)})}qs(e,t){return this.fs.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.$s.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.Us(t,r))}Ks(e,t,r){return Ue.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.Qs(e,t.path):yP(t)?this.js(e,t,r):this.Ws(e,t,r);var i}Qs(e,t){return this.Bs(e,new Ue(t)).next(r=>{let i=EP();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}js(e,t,r){const i=t.collectionGroup;let s=EP();return this.indexManager.getCollectionParents(e,i).next(l=>le.forEach(l,d=>{const p=(y=t,C=d.child(i),new qc(C,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt));var y,C;return this.Ws(e,p,r).next(y=>{y.forEach((C,D)=>{s=s.insert(C,D)})})}).next(()=>s))}Ws(e,t,r){let i;return this.fs.getAllFromCollection(e,t.path,r).next(s=>(i=s,this.$s.getAllMutationBatchesAffectingQuery(e,t))).next(s=>{for(const l of s)for(const d of l.mutations){const p=d.key;let y=i.get(p);null==y&&(y=Pn.newInvalidDocument(p),i=i.insert(p,y)),wP(d,y,l.localWriteTime),y.isFoundDocument()||(i=i.remove(p))}}).next(()=>(i.forEach((s,l)=>{bP(t,l)||(i=i.remove(s))}),i))}}class UP{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.zs=r,this.Hs=i}static Js(e,t){let r=dn(),i=dn();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new UP(e,t.fromCache,r,i)}}class z${Ys(e){this.Xs=e}Ks(e,t,r,i){return 0===(s=t).filters.length&&null===s.limit&&null==s.startAt&&null==s.endAt&&(0===s.explicitOrderBy.length||1===s.explicitOrderBy.length&&s.explicitOrderBy[0].field.isKeyField())||r.isEqual(vt.min())?this.Zs(e,t):this.Xs.qs(e,i).next(s=>{const l=this.ti(t,s);return(II(t)||SI(t))&&this.ei(t.limitType,l,i,r)?this.Zs(e,t):(uP()<=vs.in.DEBUG&&Re("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),vP(t)),this.Xs.Ks(e,t,AG(r,-1)).next(d=>(l.forEach(p=>{d=d.insert(p.key,p)}),d)))});var s}ti(e,t){let r=new Fn(LG(e));return t.forEach((i,s)=>{bP(e,s)&&(r=r.add(s))}),r}ei(e,t,r,i){if(r.size!==t.size)return!0;const s="F"===e?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Zs(e,t){return uP()<=vs.in.DEBUG&&Re("QueryEngine","Using full collection scan to execute query:",vP(t)),this.Xs.Ks(e,t,zc.min())}}class zJ{constructor(e,t,r,i){this.persistence=e,this.ni=t,this.M=i,this.si=new ar(Gt),this.ii=new ad(s=>qf(s),Ow),this.ri=new Map,this.oi=e.getRemoteDocumentCache(),this.ls=e.getTargetCache(),this.ds=e.getBundleCache(),this.ui(r)}ui(e){this.indexManager=this.persistence.getIndexManager(e),this.$s=this.persistence.getMutationQueue(e,this.indexManager),this.ai=new $J(this.oi,this.$s,this.indexManager),this.oi.setIndexManager(this.indexManager),this.ni.Ys(this.ai)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.si))}}function q$(n,e,t,r){return new zJ(n,e,t,r)}function W$(n,e){return jP.apply(this,arguments)}function jP(){return jP=(0,q.Z)(function*(n,e){const t=je(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.$s.getAllMutationBatches(r).next(s=>(i=s,t.ui(e),t.$s.getAllMutationBatches(r))).next(s=>{const l=[],d=[];let p=dn();for(const y of i){l.push(y.batchId);for(const C of y.mutations)p=p.add(C.key)}for(const y of s){d.push(y.batchId);for(const C of y.mutations)p=p.add(C.key)}return t.ai.qs(r,p).next(y=>({ci:y,removedBatchIds:l,addedBatchIds:d}))})})}),jP.apply(this,arguments)}function qJ(n,e){const t=je(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.oi.newChangeBuffer({trackRemovals:!0});return function(l,d,p,y){const C=p.batch,D=C.keys();let M=le.resolve();return D.forEach(R=>{M=M.next(()=>y.getEntry(d,R)).next(N=>{const j=p.docVersions.get(R);Et(null!==j),N.version.compareTo(j)<0&&(C.applyToRemoteDocument(N,p),N.isValidDocument()&&(N.setReadTime(p.commitVersion),y.addEntry(N)))})}),M.next(()=>l.$s.removeMutationBatch(d,C))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.$s.performConsistencyCheck(r)).next(()=>t.ai.qs(r,i))})}function Z$(n){const e=je(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ls.getLastRemoteSnapshotVersion(t))}function WJ(n,e){const t=je(n),r=e.snapshotVersion;let i=t.si;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const l=t.oi.newChangeBuffer({trackRemovals:!0});i=t.si;const d=[];e.targetChanges.forEach((y,C)=>{const D=i.get(C);if(!D)return;d.push(t.ls.removeMatchingKeys(s,y.removedDocuments,C).next(()=>t.ls.addMatchingKeys(s,y.addedDocuments,C)));let M=D.withSequenceNumber(s.currentSequenceNumber);var R,N,j;e.targetMismatches.has(C)?M=M.withResumeToken(Pr.EMPTY_BYTE_STRING,vt.min()).withLastLimboFreeSnapshotVersion(vt.min()):y.resumeToken.approximateByteSize()>0&&(M=M.withResumeToken(y.resumeToken,r)),i=i.insert(C,M),N=M,j=y,(0===(R=D).resumeToken.approximateByteSize()||N.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=3e8||j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0)&&d.push(t.ls.updateTargetData(s,M))});let p=Ho();if(e.documentUpdates.forEach(y=>{e.resolvedLimboDocuments.has(y)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(s,y))}),d.push(K$(s,l,e.documentUpdates).next(y=>{p=y})),!r.isEqual(vt.min())){const y=t.ls.getLastRemoteSnapshotVersion(s).next(C=>t.ls.setTargetsMetadata(s,s.currentSequenceNumber,r));d.push(y)}return le.waitFor(d).next(()=>l.apply(s)).next(()=>t.ai.Gs(s,p)).next(()=>p)}).then(s=>(t.si=i,s))}function K$(n,e,t){let r=dn();return t.forEach(i=>r=r.add(i)),e.getEntries(n,r).next(i=>{let s=Ho();return t.forEach((l,d)=>{const p=i.get(l);d.isNoDocument()&&d.version.isEqual(vt.min())?(e.removeEntry(l,d.readTime),s=s.insert(l,d)):!p.isValidDocument()||d.version.compareTo(p.version)>0||0===d.version.compareTo(p.version)&&p.hasPendingWrites?(e.addEntry(d),s=s.insert(l,d)):Re("LocalStore","Ignoring outdated watch update for ",l,". Current version:",p.version," Watch version:",d.version)}),s})}function ZJ(n,e){const t=je(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.$s.getNextMutationBatchAfterBatchId(r,e)))}function d_(n,e){const t=je(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.ls.getTargetData(r,e).next(s=>s?(i=s,le.resolve(i)):t.ls.allocateTargetId(r).next(l=>(i=new ld(e,l,0,r.currentSequenceNumber),t.ls.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.si.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.si=t.si.insert(r.targetId,r),t.ii.set(e,r.targetId)),r})}function h_(n,e,t){return HP.apply(this,arguments)}function HP(){return HP=(0,q.Z)(function*(n,e,t){const r=je(n),i=r.si.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!Yf(l))throw l;Re("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.si=r.si.remove(e),r.ii.delete(i.target)}),HP.apply(this,arguments)}function $I(n,e,t){const r=je(n);let i=vt.min(),s=dn();return r.persistence.runTransaction("Execute query","readonly",l=>function(d,p,y){const C=je(d),D=C.ii.get(y);return void 0!==D?le.resolve(C.si.get(D)):C.ls.getTargetData(p,y)}(r,l,jo(e)).next(d=>{if(d)return i=d.lastLimboFreeSnapshotVersion,r.ls.getMatchingKeysForTargetId(l,d.targetId).next(p=>{s=p})}).next(()=>r.ni.Ks(l,e,t?i:vt.min(),t?s:dn())).next(d=>(J$(r,FG(e),d),{documents:d,hi:s})))}function Y$(n,e){const t=je(n),r=je(t.ls),i=t.si.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.Et(s,e).next(l=>l?l.target:null))}function Q$(n,e){const t=je(n),r=t.ri.get(e)||vt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.oi.getAllFromCollectionGroup(i,e,AG(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(J$(t,e,i),i))}function J$(n,e,t){let r=vt.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.ri.set(e,r)}function GP(){return GP=(0,q.Z)(function*(n,e,t,r){const i=je(n);let s=dn(),l=Ho();for(const y of t){const C=e.li(y.metadata.name);y.document&&(s=s.add(C));const D=e.fi(y);D.setReadTime(e.di(y.metadata.readTime)),l=l.insert(C,D)}const d=i.oi.newChangeBuffer({trackRemovals:!0}),p=yield d_(i,(y=r,jo(e_(Jt.fromString(`__bundle__/docs/${y}`)))));var y;return i.persistence.runTransaction("Apply bundle documents","readwrite",y=>K$(y,d,l).next(C=>(d.apply(y),C)).next(C=>i.ls.removeMatchingKeysForTargetId(y,p.targetId).next(()=>i.ls.addMatchingKeys(y,s,p.targetId)).next(()=>i.ai.Gs(y,C)).next(()=>C)))}),GP.apply(this,arguments)}function YJ(n,e){return $P.apply(this,arguments)}function $P(){return $P=(0,q.Z)(function*(n,e,t=dn()){const r=yield d_(n,jo(RP(e.bundledQuery))),i=je(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const l=Jr(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i.ds.saveNamedQuery(s,e);const d=r.withResumeToken(Pr.EMPTY_BYTE_STRING,l);return i.si=i.si.insert(d.targetId,d),i.ls.updateTargetData(s,d).next(()=>i.ls.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.ls.addMatchingKeys(s,t,r.targetId)).next(()=>i.ds.saveNamedQuery(s,e))})}),$P.apply(this,arguments)}class QJ{constructor(e){this.M=e,this._i=new Map,this.wi=new Map}getBundleMetadata(e,t){return le.resolve(this._i.get(t))}saveBundleMetadata(e,t){var r;return this._i.set(t.id,{id:(r=t).id,version:r.version,createTime:Jr(r.createTime)}),le.resolve()}getNamedQuery(e,t){return le.resolve(this.wi.get(t))}saveNamedQuery(e,t){return this.wi.set(t.name,{name:(r=t).name,query:RP(r.bundledQuery),readTime:Jr(r.readTime)}),le.resolve();var r}}class JJ{constructor(){this.overlays=new ar(Ue.comparator),this.mi=new Map}getOverlay(e,t){return le.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.Xt(e,t,s)}),le.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.mi.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.mi.delete(r)),le.resolve()}getOverlaysForCollection(e,t,r){const i=Vw(),s=t.length+1,l=new Ue(t.child("")),d=this.overlays.getIteratorFrom(l);for(;d.hasNext();){const p=d.getNext().value,y=p.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===s&&p.largestBatchId>r&&i.set(p.getKey(),p)}return le.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new ar((y,C)=>y-C);const l=this.overlays.getIterator();for(;l.hasNext();){const y=l.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>r){let C=s.get(y.largestBatchId);null===C&&(C=Vw(),s=s.insert(y.largestBatchId,C)),C.set(y.getKey(),y)}}const d=Vw(),p=s.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((y,C)=>d.set(y,C)),!(d.size()>=i)););return le.resolve(d)}Xt(e,t,r){if(null===r)return;const i=this.overlays.get(r.key);if(null!==i){const l=this.mi.get(i.largestBatchId).delete(r.key);this.mi.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new xP(t,r));let s=this.mi.get(t);void 0===s&&(s=dn(),this.mi.set(t,s)),this.mi.set(t,s.add(r.key))}}class zP{constructor(){this.gi=new Fn(ti.yi),this.pi=new Fn(ti.Ii)}isEmpty(){return this.gi.isEmpty()}addReference(e,t){const r=new ti(e,t);this.gi=this.gi.add(r),this.pi=this.pi.add(r)}Ti(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ei(new ti(e,t))}Ai(e,t){e.forEach(r=>this.removeReference(r,t))}Ri(e){const t=new Ue(new Jt([])),r=new ti(t,e),i=new ti(t,e+1),s=[];return this.pi.forEachInRange([r,i],l=>{this.Ei(l),s.push(l.key)}),s}bi(){this.gi.forEach(e=>this.Ei(e))}Ei(e){this.gi=this.gi.delete(e),this.pi=this.pi.delete(e)}Pi(e){const t=new Ue(new Jt([])),r=new ti(t,e),i=new ti(t,e+1);let s=dn();return this.pi.forEachInRange([r,i],l=>{s=s.add(l.key)}),s}containsKey(e){const t=new ti(e,0),r=this.gi.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class ti{constructor(e,t){this.key=e,this.Vi=t}static yi(e,t){return Ue.comparator(e.key,t.key)||Gt(e.Vi,t.Vi)}static Ii(e,t){return Gt(e.Vi,t.Vi)||Ue.comparator(e.key,t.key)}}class XJ{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.$s=[],this.vi=1,this.Si=new Fn(ti.yi)}checkEmpty(e){return le.resolve(0===this.$s.length)}addMutationBatch(e,t,r,i){const s=this.vi;this.vi++;const l=new AP(s,t,r,i);this.$s.push(l);for(const d of i)this.Si=this.Si.add(new ti(d.key,s)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return le.resolve(l)}lookupMutationBatch(e,t){return le.resolve(this.Di(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.Ci(t+1),s=i<0?0:i;return le.resolve(this.$s.length>s?this.$s[s]:null)}getHighestUnacknowledgedBatchId(){return le.resolve(0===this.$s.length?-1:this.vi-1)}getAllMutationBatches(e){return le.resolve(this.$s.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new ti(t,0),i=new ti(t,Number.POSITIVE_INFINITY),s=[];return this.Si.forEachInRange([r,i],l=>{const d=this.Di(l.Vi);s.push(d)}),le.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Fn(Gt);return t.forEach(i=>{const s=new ti(i,0),l=new ti(i,Number.POSITIVE_INFINITY);this.Si.forEachInRange([s,l],d=>{r=r.add(d.Vi)})}),le.resolve(this.xi(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;Ue.isDocumentKey(s)||(s=s.child(""));const l=new ti(new Ue(s),0);let d=new Fn(Gt);return this.Si.forEachWhile(p=>{const y=p.key.path;return!!r.isPrefixOf(y)&&(y.length===i&&(d=d.add(p.Vi)),!0)},l),le.resolve(this.xi(d))}xi(e){const t=[];return e.forEach(r=>{const i=this.Di(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Et(0===this.Ni(t.batchId,"removed")),this.$s.shift();let r=this.Si;return le.forEach(t.mutations,i=>{const s=new ti(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Si=r})}dn(e){}containsKey(e,t){const r=new ti(t,0),i=this.Si.firstAfterOrEqual(r);return le.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return le.resolve()}Ni(e,t){return this.Ci(e)}Ci(e){return 0===this.$s.length?0:e-this.$s[0].batchId}Di(e){const t=this.Ci(e);return t<0||t>=this.$s.length?null:this.$s[t]}}class eX{constructor(e){this.ki=e,this.docs=new ar(Ue.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,l=this.ki(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return le.resolve(r?r.document.mutableCopy():Pn.newInvalidDocument(t))}getEntries(e,t){let r=Ho();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Pn.newInvalidDocument(i))}),le.resolve(r)}getAllFromCollection(e,t,r){let i=Ho();const s=new Ue(t.child("")),l=this.docs.getIteratorFrom(s);for(;l.hasNext();){const{key:d,value:{document:p}}=l.getNext();if(!t.isPrefixOf(d.path))break;d.path.length>t.length+1||E9(C9(p),r)<=0||(i=i.insert(p.key,p.mutableCopy()))}return le.resolve(i)}getAllFromCollectionGroup(e,t,r,i){Xe()}Mi(e,t){return le.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new tX(this)}getSize(e){return le.resolve(this.size)}}class tX extends U${constructor(e){super(),this.qn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.qn.addEntry(e,i)):this.qn.removeEntry(r)}),le.waitFor(t)}getFromCache(e,t){return this.qn.getEntry(e,t)}getAllFromCache(e,t){return this.qn.getEntries(e,t)}}class nX{constructor(e){this.persistence=e,this.Oi=new ad(t=>qf(t),Ow),this.lastRemoteSnapshotVersion=vt.min(),this.highestTargetId=0,this.Fi=0,this.$i=new zP,this.targetCount=0,this.Bi=tp.mn()}forEachTarget(e,t){return this.Oi.forEach((r,i)=>t(i)),le.resolve()}getLastRemoteSnapshotVersion(e){return le.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return le.resolve(this.Fi)}allocateTargetId(e){return this.highestTargetId=this.Bi.next(),le.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Fi&&(this.Fi=t),le.resolve()}In(e){this.Oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Bi=new tp(t),this.highestTargetId=t),e.sequenceNumber>this.Fi&&(this.Fi=e.sequenceNumber)}addTargetData(e,t){return this.In(t),this.targetCount+=1,le.resolve()}updateTargetData(e,t){return this.In(t),le.resolve()}removeTargetData(e,t){return this.Oi.delete(t.target),this.$i.Ri(t.targetId),this.targetCount-=1,le.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Oi.forEach((l,d)=>{d.sequenceNumber<=t&&null===r.get(d.targetId)&&(this.Oi.delete(l),s.push(this.removeMatchingKeysForTargetId(e,d.targetId)),i++)}),le.waitFor(s).next(()=>i)}getTargetCount(e){return le.resolve(this.targetCount)}getTargetData(e,t){const r=this.Oi.get(t)||null;return le.resolve(r)}addMatchingKeys(e,t,r){return this.$i.Ti(t,r),le.resolve()}removeMatchingKeys(e,t,r){this.$i.Ai(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(l=>{s.push(i.markPotentiallyOrphaned(e,l))}),le.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.$i.Ri(t),le.resolve()}getMatchingKeysForTargetId(e,t){const r=this.$i.Pi(t);return le.resolve(r)}containsKey(e,t){return le.resolve(this.$i.containsKey(t))}}class rX{constructor(e,t){this.Li={},this.overlays={},this.ts=new io(0),this.es=!1,this.es=!0,this.referenceDelegate=e(this),this.ls=new nX(this),this.indexManager=new NJ,this.fs=new eX(r=>this.referenceDelegate.Ui(r)),this.M=new T$(t),this.ds=new QJ(this.M)}start(){return Promise.resolve()}shutdown(){return this.es=!1,Promise.resolve()}get started(){return this.es}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new JJ,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Li[e.toKey()];return r||(r=new XJ(t,this.referenceDelegate),this.Li[e.toKey()]=r),r}getTargetCache(){return this.ls}getRemoteDocumentCache(){return this.fs}getBundleCache(){return this.ds}runTransaction(e,t,r){Re("MemoryPersistence","Starting transaction:",e);const i=new iX(this.ts.next());return this.referenceDelegate.qi(),r(i).next(s=>this.referenceDelegate.Gi(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ki(e,t){return le.or(Object.values(this.Li).map(r=>()=>r.containsKey(e,t)))}}class iX extends C${constructor(e){super(),this.currentSequenceNumber=e}}class qP{constructor(e){this.persistence=e,this.Qi=new zP,this.ji=null}static Wi(e){return new qP(e)}get zi(){if(this.ji)return this.ji;throw Xe()}addReference(e,t,r){return this.Qi.addReference(r,t),this.zi.delete(r.toString()),le.resolve()}removeReference(e,t,r){return this.Qi.removeReference(r,t),this.zi.add(r.toString()),le.resolve()}markPotentiallyOrphaned(e,t){return this.zi.add(t.toString()),le.resolve()}removeTarget(e,t){this.Qi.Ri(t.targetId).forEach(i=>this.zi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.zi.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}qi(){this.ji=new Set}Gi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return le.forEach(this.zi,r=>{const i=Ue.fromPath(r);return this.Hi(e,i).next(s=>{s||t.removeEntry(i,vt.min())})}).next(()=>(this.ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hi(e,t).next(r=>{r?this.zi.delete(t.toString()):this.zi.add(t.toString())})}Ui(e){return 0}Hi(e,t){return le.or([()=>le.resolve(this.Qi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ki(e,t)])}}function X$(n,e){return`firestore_clients_${n}_${e}`}function e3(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function WP(n,e){return`firestore_targets_${n}_${e}`}class zI{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Ji(e,t,r){const i=JSON.parse(r);let s,l="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return l&&i.error&&(l="string"==typeof i.error.message&&"string"==typeof i.error.code,l&&(s=new Ce(i.error.code,i.error.message))),l?new zI(e,t,i.state,s):(yr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Qw{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ji(e,t){const r=JSON.parse(t);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new Ce(r.error.code,r.error.message))),s?new Qw(e,r.state,i):(yr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class qI{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ji(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=kI();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=yG(r.activeTargetIds[l]),s=s.add(r.activeTargetIds[l]);return i?new qI(e,s):(yr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class ZP{constructor(e,t){this.clientId=e,this.onlineState=t}static Ji(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new ZP(t.clientId,t.onlineState):(yr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class KP{constructor(){this.activeTargetIds=kI()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class YP{constructor(e,t,r,i,s){this.window=e,this.Jn=t,this.persistenceKey=r,this.tr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new ar(Gt),this.started=!1,this.ir=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.rr=X$(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new KP),this.ar=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.cr=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(d){return`firestore_bundle_loaded_v2_${d}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,q.Z)(function*(){const t=yield e.syncEngine.Os();for(const i of t){if(i===e.tr)continue;const s=e.getItem(X$(e.persistenceKey,i));if(s){const l=qI.Ji(i,s);l&&(e.sr=e.sr.insert(l.clientId,l))}}e._r();const r=e.storage.getItem(e.lr);if(r){const i=e.wr(r);i&&e.mr(i)}for(const i of e.ir)e.nr(i);e.ir=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let t=!1;return this.sr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,t,r){this.yr(e,t,r),this.pr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(WP(this.persistenceKey,e));if(r){const i=Qw.Ji(e,r);i&&(t=i.state)}}return this.Ir.Xi(e),this._r(),t}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(WP(this.persistenceKey,e))}updateQueryState(e,t,r){this.Tr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.pr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Re("SharedClientState","READ",e,t),t}setItem(e,t){Re("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Re("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Re("SharedClientState","EVENT",r.key,r.newValue),r.key===this.rr)return void yr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Jn.enqueueRetryable((0,q.Z)(function*(){if(t.started){if(null!==r.key)if(t.ar.test(r.key)){if(null==r.newValue){const i=t.Rr(r.key);return t.br(i,null)}{const i=t.Pr(r.key,r.newValue);if(i)return t.br(i.clientId,i)}}else if(t.cr.test(r.key)){if(null!==r.newValue){const i=t.Vr(r.key,r.newValue);if(i)return t.vr(i)}}else if(t.hr.test(r.key)){if(null!==r.newValue){const i=t.Sr(r.key,r.newValue);if(i)return t.Dr(i)}}else if(r.key===t.lr){if(null!==r.newValue){const i=t.wr(r.newValue);if(i)return t.mr(i)}}else if(r.key===t.ur){const i=function(s){let l=io.A;if(null!=s)try{const d=JSON.parse(s);Et("number"==typeof d),l=d}catch(d){yr("SharedClientState","Failed to read sequence number from WebStorage",d)}return l}(r.newValue);i!==io.A&&t.sequenceNumberHandler(i)}else if(r.key===t.dr){const i=t.Cr(r.newValue);yield Promise.all(i.map(s=>t.syncEngine.Nr(s)))}}else t.ir.push(r)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,t,r){const i=new zI(this.currentUser,e,t,r),s=e3(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Yi())}pr(e){const t=e3(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Er(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}Tr(e,t,r){const i=WP(this.persistenceKey,e),s=new Qw(e,t,r);this.setItem(i,s.Yi())}Ar(e){const t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}Rr(e){const t=this.ar.exec(e);return t?t[1]:null}Pr(e,t){const r=this.Rr(e);return qI.Ji(r,t)}Vr(e,t){const r=this.cr.exec(e),i=Number(r[1]);return zI.Ji(new Ci(void 0!==r[2]?r[2]:null),i,t)}Sr(e,t){const r=this.hr.exec(e),i=Number(r[1]);return Qw.Ji(i,t)}wr(e){return ZP.Ji(e)}Cr(e){return JSON.parse(e)}vr(e){var t=this;return(0,q.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.kr(e.batchId,e.state,e.error);Re("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Dr(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}br(e,t){const r=t?this.sr.insert(e,t):this.sr.remove(e),i=this.gr(this.sr),s=this.gr(r),l=[],d=[];return s.forEach(p=>{i.has(p)||l.push(p)}),i.forEach(p=>{s.has(p)||d.push(p)}),this.syncEngine.Or(l,d).then(()=>{this.sr=r})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let t=kI();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class t3{constructor(){this.Fr=new KP,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,r){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new KP,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class sX{Br(e){}shutdown(){}}class n3{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Gr(),this.Kr=[],this.Qr()}Br(e){this.Kr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){Re("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Kr)e(0)}Gr(){Re("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Kr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const oX={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class aX{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class lX extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,r,i,s){const l=this.oo(e,t);Re("RestConnection","Sending: ",l,r);const d={};return this.uo(d,i,s),this.ao(e,l,d,r).then(p=>(Re("RestConnection","Received: ",p),p),p=>{throw Tw("RestConnection",`${e} failed with error: `,p,"url: ",l,"request:",r),p})}co(e,t,r,i,s){return this.ro(e,t,r,i,s)}uo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Wm,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}oo(e,t){return`${this.so}/v1/${t}:${oX[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}ao(e,t,r,i){return new Promise((s,l)=>{const d=new l9;d.listenOnce(s9.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case cP.NO_ERROR:const y=d.getResponseJson();Re("Connection","XHR received:",JSON.stringify(y)),s(y);break;case cP.TIMEOUT:Re("Connection",'RPC "'+e+'" timed out'),l(new Ce(oe.DEADLINE_EXCEEDED,"Request time out"));break;case cP.HTTP_ERROR:const C=d.getStatus();if(Re("Connection",'RPC "'+e+'" failed with status:',C,"response text:",d.getResponseText()),C>0){const D=d.getResponseJson().error;if(D&&D.status&&D.message){const M=function(R){const N=R.toLowerCase().replace(/_/g,"-");return Object.values(oe).indexOf(N)>=0?N:oe.UNKNOWN}(D.status);l(new Ce(M,D.message))}else l(new Ce(oe.UNKNOWN,"Server responded with status "+d.getStatus()))}else l(new Ce(oe.UNAVAILABLE,"Connection failed."));break;default:Xe()}}finally{Re("Connection",'RPC "'+e+'" completed.')}});const p=JSON.stringify(i);d.send(t,"POST",p,r,15)})}ho(e,t,r){const i=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=r9(),l=i9(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(d.xmlHttpFactory=new a9({})),this.uo(d.initMessageHeaders,t,r),(0,k.uI)()||(0,k.b$)()||(0,k.d)()||(0,k.w1)()||(0,k.Mn)()||(0,k.ru)()||(d.httpHeadersOverwriteParam="$httpHeaders");const p=i.join("");Re("Connection","Creating WebChannel: "+p,d);const y=s.createWebChannel(p,d);let C=!1,D=!1;const M=new aX({jr:N=>{D?Re("Connection","Not sending because WebChannel is closed:",N):(C||(Re("Connection","Opening WebChannel transport."),y.open(),C=!0),Re("Connection","WebChannel sending:",N),y.send(N))},Wr:()=>y.close()}),R=(N,j,Q)=>{N.listen(j,Te=>{try{Q(Te)}catch(be){setTimeout(()=>{throw be},0)}})};return R(y,bI.EventType.OPEN,()=>{D||Re("Connection","WebChannel transport opened.")}),R(y,bI.EventType.CLOSE,()=>{D||(D=!0,Re("Connection","WebChannel transport closed"),M.eo())}),R(y,bI.EventType.ERROR,N=>{D||(D=!0,Tw("Connection","WebChannel transport errored:",N),M.eo(new Ce(oe.UNAVAILABLE,"The operation could not be completed")))}),R(y,bI.EventType.MESSAGE,N=>{var j;if(!D){const Q=N.data[0];Et(!!Q);const Te=Q,be=Te.error||(null===(j=Te[0])||void 0===j?void 0:j.error);if(be){Re("Connection","WebChannel received error:",be);const He=be.status;let Ne=function(ot){const fn=br[ot];if(void 0!==fn)return JG(fn)}(He),mt=be.message;void 0===Ne&&(Ne=oe.INTERNAL,mt="Unknown error status: "+He+" with message "+be.message),D=!0,M.eo(new Ce(Ne,mt)),y.close()}else Re("Connection","WebChannel received:",Q),M.no(Q)}}),R(l,o9.STAT_EVENT,N=>{N.stat===cG.PROXY?Re("Connection","Detected buffering proxy"):N.stat===cG.NOPROXY&&Re("Connection","Detected no buffering proxy")}),setTimeout(()=>{M.Zr()},0),M}}function r3(){return"undefined"!=typeof window?window:null}function WI(){return"undefined"!=typeof document?document:null}function Jw(n){return new Y9(n,!0)}class QP{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Jn=e,this.timerId=t,this.lo=r,this.fo=i,this._o=s,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),i=Math.max(0,t-r);i>0&&Re("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.mo=this.Jn.enqueueAfterDelay(this.timerId,i,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class s3{constructor(e,t,r,i,s,l,d,p){this.Jn=e,this.Ao=r,this.Ro=i,this.bo=s,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.Po=0,this.Vo=null,this.vo=null,this.stream=null,this.So=new QP(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return(0,q.Z)(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.Vo&&(this.Vo=this.Jn.enqueueAfterDelay(this.Ao,6e4,()=>this.Mo()))}Oo(e){this.Fo(),this.stream.send(e)}Mo(){var e=this;return(0,q.Z)(function*(){if(e.Co())return e.close(0)})()}Fo(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}close(e,t){var r=this;return(0,q.Z)(function*(){r.Fo(),r.$o(),r.So.cancel(),r.Po++,4!==e?r.So.reset():t&&t.code===oe.RESOURCE_EXHAUSTED?(yr(t.toString()),yr("Using maximum backoff delay to prevent overloading the backend."),r.So.po()):t&&t.code===oe.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Bo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Jr(t)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Po===t&&this.Uo(r,i)},r=>{e(()=>{const i=new Ce(oe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.qo(i)})})}Uo(e,t){const r=this.Lo(this.Po);this.stream=this.Go(e,t),this.stream.zr(()=>{r(()=>(this.state=2,this.vo=this.Jn.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(i=>{r(()=>this.qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}xo(){var e=this;this.state=5,this.So.Io((0,q.Z)(function*(){e.state=0,e.start()}))}qo(e){return Re("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.Jn.enqueueAndForget(()=>this.Po===e?t():(Re("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class cX extends s3{constructor(e,t,r,i,s,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.M=s}Go(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function X9(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(p=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===p?1:"REMOVE"===p?2:"CURRENT"===p?3:"RESET"===p?4:Xe(),i=e.targetChange.targetIds||[],s=function(p,y){return p.N?(Et(void 0===y||"string"==typeof y),Pr.fromBase64String(y||"")):(Et(void 0===y||y instanceof Uint8Array),Pr.fromUint8Array(y||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,d=l&&function(p){const y=void 0===p.code?oe.UNKNOWN:JG(p.code);return new Ce(y,p.message||"")}(l);t=new t$(r,i,s,d||null)}else if("documentChange"in e){const r=e.documentChange,i=xl(n,r.document.name),s=Jr(r.document.updateTime),l=new Bi({mapValue:{fields:r.document.fields}}),d=Pn.newFoundDocument(i,s,l);t=new OI(r.targetIds||[],r.removedTargetIds||[],d.key,d)}else if("documentDelete"in e){const r=e.documentDelete,i=xl(n,r.document),s=r.readTime?Jr(r.readTime):vt.min(),l=Pn.newNoDocument(i,s);t=new OI([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,i=xl(n,r.document);t=new OI([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return Xe();{const r=e.filter,s=new j9(r.count||0);t=new e$(r.targetId,s)}}var p;return t}(this.M,e),r=function(i){if(!("targetChange"in i))return vt.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?vt.min():s.readTime?Jr(s.readTime):vt.min()}(e);return this.listener.Ko(t,r)}Qo(e){const t={};t.database=Gw(this.M),t.addTarget=function(i,s){let l;const d=s.target;return l=DI(d)?{documents:d$(i,d)}:{query:h$(i,d)},l.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?l.resumeToken=s$(i,s.resumeToken):s.snapshotVersion.compareTo(vt.min())>0&&(l.readTime=jw(i,s.snapshotVersion.toTimestamp())),l}(this.M,e);const r=function tJ(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Xe()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Oo(t)}jo(e){const t={};t.database=Gw(this.M),t.removeTarget=e,this.Oo(t)}}class uX extends s3{constructor(e,t,r,i,s,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.M=s,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Go(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(Et(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function eJ(n,e){return n&&n.length>0?(Et(void 0!==e),n.map(t=>function(r,i){let s=Jr(r.updateTime?r.updateTime:i);return s.isEqual(vt.min())&&(s=Jr(i)),new V9(s,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Jr(e.commitTime);return this.listener.Jo(r,t)}return Et(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=Gw(this.M),this.Oo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>$w(this.M,r))};this.Oo(t)}}class dX extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=r,this.M=i,this.Zo=!1}tu(){if(this.Zo)throw new Ce(oe.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.bo.ro(e,t,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ce(oe.UNKNOWN,i.toString())})}co(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.bo.co(e,t,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ce(oe.UNKNOWN,i.toString())})}terminate(){this.Zo=!0}}class hX{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.au(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.au(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(yr(t),this.su=!1):Re("OnlineStateTracker",t)}au(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class fX{constructor(e,t,r,i,s){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.cu=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=s,this.du.Br(d=>{r.enqueueAndForget((0,q.Z)(function*(){var p;hd(l)&&(Re("RemoteStore","Restarting streams for network reachability change."),yield(p=(0,q.Z)(function*(y){const C=je(y);C.lu.add(4),yield f_(C),C._u.set("Unknown"),C.lu.delete(4),yield Xw(C)}),function(y){return p.apply(this,arguments)})(l))}))}),this._u=new hX(r,i)}}function Xw(n){return JP.apply(this,arguments)}function JP(){return JP=(0,q.Z)(function*(n){if(hd(n))for(const e of n.fu)yield e(!0)}),JP.apply(this,arguments)}function f_(n){return XP.apply(this,arguments)}function XP(){return XP=(0,q.Z)(function*(n){for(const e of n.fu)yield e(!1)}),XP.apply(this,arguments)}function ZI(n,e){const t=je(n);t.hu.has(e.targetId)||(t.hu.set(e.targetId,e),nF(t)?tF(t):g_(t).Co()&&eF(t,e))}function eC(n,e){const t=je(n),r=g_(t);t.hu.delete(e),r.Co()&&o3(t,e),0===t.hu.size&&(r.Co()?r.ko():hd(t)&&t._u.set("Unknown"))}function eF(n,e){n.wu.Z(e.targetId),g_(n).Qo(e)}function o3(n,e){n.wu.Z(e),g_(n).jo(e)}function tF(n){n.wu=new W9({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.hu.get(e)||null}),g_(n).start(),n._u.iu()}function nF(n){return hd(n)&&!g_(n).Do()&&n.hu.size>0}function hd(n){return 0===je(n).lu.size}function a3(n){n.wu=void 0}function pX(n){return rF.apply(this,arguments)}function rF(){return rF=(0,q.Z)(function*(n){n.hu.forEach((e,t)=>{eF(n,e)})}),rF.apply(this,arguments)}function gX(n,e){return iF.apply(this,arguments)}function iF(){return iF=(0,q.Z)(function*(n,e){a3(n),nF(n)?(n._u.uu(e),tF(n)):n._u.set("Unknown")}),iF.apply(this,arguments)}function mX(n,e,t){return sF.apply(this,arguments)}function sF(){return sF=(0,q.Z)(function*(n,e,t){if(n._u.set("Online"),e instanceof t$&&2===e.state&&e.cause)try{yield(r=(0,q.Z)(function*(i,s){const l=s.cause;for(const d of s.targetIds)i.hu.has(d)&&(yield i.remoteSyncer.rejectListen(d,l),i.hu.delete(d),i.wu.removeTarget(d))}),function(i,s){return r.apply(this,arguments)})(n,e)}catch(r){Re("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield KI(n,r)}else if(e instanceof OI?n.wu.ut(e):e instanceof e$?n.wu._t(e):n.wu.ht(e),!t.isEqual(vt.min()))try{const r=yield Z$(n.localStore);t.compareTo(r)>=0&&(yield function(i,s){const l=i.wu.yt(s);return l.targetChanges.forEach((d,p)=>{if(d.resumeToken.approximateByteSize()>0){const y=i.hu.get(p);y&&i.hu.set(p,y.withResumeToken(d.resumeToken,s))}}),l.targetMismatches.forEach(d=>{const p=i.hu.get(d);if(!p)return;i.hu.set(d,p.withResumeToken(Pr.EMPTY_BYTE_STRING,p.snapshotVersion)),o3(i,d);const y=new ld(p.target,d,1,p.sequenceNumber);eF(i,y)}),i.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){Re("RemoteStore","Failed to raise snapshot:",r),yield KI(n,r)}var r}),sF.apply(this,arguments)}function KI(n,e,t){return oF.apply(this,arguments)}function oF(){return oF=(0,q.Z)(function*(n,e,t){if(!Yf(e))throw e;n.lu.add(1),yield f_(n),n._u.set("Offline"),t||(t=()=>Z$(n.localStore)),n.asyncQueue.enqueueRetryable((0,q.Z)(function*(){Re("RemoteStore","Retrying IndexedDB access"),yield t(),n.lu.delete(1),yield Xw(n)}))}),oF.apply(this,arguments)}function l3(n,e){return e().catch(t=>KI(n,t,e))}function p_(n){return aF.apply(this,arguments)}function aF(){return aF=(0,q.Z)(function*(n){const e=je(n),t=fd(e);let r=e.cu.length>0?e.cu[e.cu.length-1].batchId:-1;for(;_X(e);)try{const i=yield ZJ(e.localStore,r);if(null===i){0===e.cu.length&&t.ko();break}r=i.batchId,yX(e,i)}catch(i){yield KI(e,i)}c3(e)&&u3(e)}),aF.apply(this,arguments)}function _X(n){return hd(n)&&n.cu.length<10}function yX(n,e){n.cu.push(e);const t=fd(n);t.Co()&&t.zo&&t.Ho(e.mutations)}function c3(n){return hd(n)&&!fd(n).Do()&&n.cu.length>0}function u3(n){fd(n).start()}function vX(n){return lF.apply(this,arguments)}function lF(){return lF=(0,q.Z)(function*(n){fd(n).Xo()}),lF.apply(this,arguments)}function bX(n){return cF.apply(this,arguments)}function cF(){return cF=(0,q.Z)(function*(n){const e=fd(n);for(const t of n.cu)e.Ho(t.mutations)}),cF.apply(this,arguments)}function wX(n,e,t){return uF.apply(this,arguments)}function uF(){return uF=(0,q.Z)(function*(n,e,t){const r=n.cu.shift(),i=MP.from(r,e,t);yield l3(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield p_(n)}),uF.apply(this,arguments)}function CX(n,e){return dF.apply(this,arguments)}function dF(){return dF=(0,q.Z)(function*(n,e){var t;e&&fd(n).zo&&(yield(t=(0,q.Z)(function*(r,i){if(QG(s=i.code)&&s!==oe.ABORTED){const l=r.cu.shift();fd(r).No(),yield l3(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,i)),yield p_(r)}var s}),function(r,i){return t.apply(this,arguments)})(n,e)),c3(n)&&u3(n)}),dF.apply(this,arguments)}function d3(n,e){return hF.apply(this,arguments)}function hF(){return hF=(0,q.Z)(function*(n,e){const t=je(n);t.asyncQueue.verifyOperationInProgress(),Re("RemoteStore","RemoteStore received new credentials");const r=hd(t);t.lu.add(3),yield f_(t),r&&t._u.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.lu.delete(3),yield Xw(t)}),hF.apply(this,arguments)}function fF(n,e){return pF.apply(this,arguments)}function pF(){return pF=(0,q.Z)(function*(n,e){const t=je(n);e?(t.lu.delete(2),yield Xw(t)):e||(t.lu.add(2),yield f_(t),t._u.set("Unknown"))}),pF.apply(this,arguments)}function g_(n){return n.mu||(n.mu=function(e,t,r){const i=je(e);return i.tu(),new cX(t,i.bo,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{zr:pX.bind(null,n),Jr:gX.bind(null,n),Ko:mX.bind(null,n)}),n.fu.push(function(){var e=(0,q.Z)(function*(t){t?(n.mu.No(),nF(n)?tF(n):n._u.set("Unknown")):(yield n.mu.stop(),a3(n))});return function(t){return e.apply(this,arguments)}}())),n.mu}function fd(n){return n.gu||(n.gu=function(e,t,r){const i=je(e);return i.tu(),new uX(t,i.bo,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{zr:vX.bind(null,n),Jr:CX.bind(null,n),Yo:bX.bind(null,n),Jo:wX.bind(null,n)}),n.fu.push(function(){var e=(0,q.Z)(function*(t){t?(n.gu.No(),yield p_(n)):(yield n.gu.stop(),n.cu.length>0&&(Re("RemoteStore",`Stopping write stream with ${n.cu.length} pending writes`),n.cu=[]))});return function(t){return e.apply(this,arguments)}}())),n.gu}class gF{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Yr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,i,s){const l=Date.now()+r,d=new gF(e,t,l,i,s);return d.start(r),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ce(oe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function m_(n,e){if(yr("AsyncQueue",`${e}: ${n}`),Yf(n))return new Ce(oe.UNAVAILABLE,`${e}: ${n}`);throw n}class __{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ue.comparator(t.key,r.key):(t,r)=>Ue.comparator(t.key,r.key),this.keyedMap=EP(),this.sortedSet=new ar(this.comparator)}static emptySet(e){return new __(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof __)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new __;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class h3{constructor(){this.yu=new ar(Ue.comparator)}track(e){const t=e.doc.key,r=this.yu.get(t);r?0!==e.type&&3===r.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==r.type?this.yu=this.yu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.yu=this.yu.remove(t):1===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):Xe():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,r)=>{e.push(r)}),e}}class y_{constructor(e,t,r,i,s,l,d,p){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=l,this.syncStateChanged=d,this.excludesMetadataChanges=p}static fromInitialDocuments(e,t,r,i){const s=[];return t.forEach(l=>{s.push({type:0,doc:l})}),new y_(e,t,__.emptySet(t),s,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Nw(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class EX{constructor(){this.Iu=void 0,this.listeners=[]}}class DX{constructor(){this.queries=new ad(e=>PG(e),Nw),this.onlineState="Unknown",this.Tu=new Set}}function mF(n,e){return _F.apply(this,arguments)}function _F(){return _F=(0,q.Z)(function*(n,e){const t=je(n),r=e.query;let i=!1,s=t.queries.get(r);if(s||(i=!0,s=new EX),i)try{s.Iu=yield t.onListen(r)}catch(l){const d=m_(l,`Initialization of query '${vP(e.query)}' failed`);return void e.onError(d)}t.queries.set(r,s),s.listeners.push(e),e.Eu(t.onlineState),s.Iu&&e.Au(s.Iu)&&bF(t)}),_F.apply(this,arguments)}function yF(n,e){return vF.apply(this,arguments)}function vF(){return vF=(0,q.Z)(function*(n,e){const t=je(n),r=e.query;let i=!1;const s=t.queries.get(r);if(s){const l=s.listeners.indexOf(e);l>=0&&(s.listeners.splice(l,1),i=0===s.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),vF.apply(this,arguments)}function TX(n,e){const t=je(n);let r=!1;for(const i of e){const l=t.queries.get(i.query);if(l){for(const d of l.listeners)d.Au(i)&&(r=!0);l.Iu=i}}r&&bF(t)}function IX(n,e,t){const r=je(n),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(t);r.queries.delete(e)}function bF(n){n.Tu.forEach(e=>{e.next()})}class wF{constructor(e,t,r){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}Au(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new y_(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.Vu(e)&&(this.Ru.next(e),t=!0):this.vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}vu(e,t){return!e.fromCache||!(this.options.Du&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=y_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class SX{constructor(e,t){this.payload=e,this.byteLength=t}Cu(){return"metadata"in this.payload}}class f3{constructor(e){this.M=e}li(e){return xl(this.M,e)}fi(e){return e.metadata.exists?u$(this.M,e.document,!1):Pn.newNoDocument(this.li(e.metadata.name),this.di(e.metadata.readTime))}di(e){return Jr(e)}}class AX{constructor(e,t,r){this.xu=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=p3(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=Jt.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ku(e){const t=new Map,r=new f3(this.M);for(const i of e)if(i.metadata.queries){const s=r.li(i.metadata.name);for(const l of i.metadata.queries){const d=(t.get(l)||dn()).add(s);t.set(l,d)}}return t}complete(){var e=this;return(0,q.Z)(function*(){const t=yield function KJ(n,e,t,r){return GP.apply(this,arguments)}(e.localStore,new f3(e.M),e.documents,e.xu.id),r=e.ku(e.documents);for(const i of e.queries)yield YJ(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Mu:e.collectionGroups,Ou:t}})()}}function p3(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class g3{constructor(e){this.key=e}}class m3{constructor(e){this.key=e}}class _3{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=dn(),this.mutatedKeys=dn(),this.Lu=LG(e),this.Uu=new __(this.Lu)}get qu(){return this.Fu}Gu(e,t){const r=t?t.Ku:new h3,i=t?t.Uu:this.Uu;let s=t?t.mutatedKeys:this.mutatedKeys,l=i,d=!1;const p=II(this.query)&&i.size===this.query.limit?i.last():null,y=SI(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((C,D)=>{const M=i.get(C),R=bP(this.query,D)?D:null,N=!!M&&this.mutatedKeys.has(M.key),j=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let Q=!1;M&&R?M.data.isEqual(R.data)?N!==j&&(r.track({type:3,doc:R}),Q=!0):this.Qu(M,R)||(r.track({type:2,doc:R}),Q=!0,(p&&this.Lu(R,p)>0||y&&this.Lu(R,y)<0)&&(d=!0)):!M&&R?(r.track({type:0,doc:R}),Q=!0):M&&!R&&(r.track({type:1,doc:M}),Q=!0,(p||y)&&(d=!0)),Q&&(R?(l=l.add(R),s=j?s.add(C):s.delete(C)):(l=l.delete(C),s=s.delete(C)))}),II(this.query)||SI(this.query))for(;l.size>this.query.limit;){const C=II(this.query)?l.last():l.first();l=l.delete(C.key),s=s.delete(C.key),r.track({type:1,doc:C})}return{Uu:l,Ku:r,ei:d,mutatedKeys:s}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const s=e.Ku.pu();s.sort((y,C)=>function(D,M){const R=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Xe()}};return R(D)-R(M)}(y.type,C.type)||this.Lu(y.doc,C.doc)),this.ju(r);const l=t?this.Wu():[],d=0===this.Bu.size&&this.current?1:0,p=d!==this.$u;return this.$u=d,0!==s.length||p?{snapshot:new y_(this.query,e.Uu,i,s,e.mutatedKeys,0===d,p,!1),zu:l}:{zu:l}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Ku:new h3,mutatedKeys:this.mutatedKeys,ei:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(t=>this.Fu=this.Fu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Fu=this.Fu.delete(t)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=dn(),this.Uu.forEach(r=>{this.Hu(r.key)&&(this.Bu=this.Bu.add(r.key))});const t=[];return e.forEach(r=>{this.Bu.has(r)||t.push(new m3(r))}),this.Bu.forEach(r=>{e.has(r)||t.push(new g3(r))}),t}Ju(e){this.Fu=e.hi,this.Bu=dn();const t=this.Gu(e.documents);return this.applyChanges(t,!0)}Yu(){return y_.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class MX{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class xX{constructor(e){this.key=e,this.Xu=!1}}class RX{constructor(e,t,r,i,s,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=l,this.Zu={},this.ta=new ad(d=>PG(d),Nw),this.ea=new Map,this.na=new Set,this.sa=new ar(Ue.comparator),this.ia=new Map,this.ra=new zP,this.oa={},this.ua=new Map,this.aa=tp.gn(),this.onlineState="Unknown",this.ca=void 0}get isPrimaryClient(){return!0===this.ca}}function kX(n,e){return CF.apply(this,arguments)}function CF(){return CF=(0,q.Z)(function*(n,e){const t=zF(n);let r,i;const s=t.ta.get(e);if(s)r=s.targetId,t.sharedClientState.addLocalQueryTarget(r),i=s.view.Yu();else{const l=yield d_(t.localStore,jo(e));t.isPrimaryClient&&ZI(t.remoteStore,l);const d=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,i=yield EF(t,e,r,"current"===d)}return i}),CF.apply(this,arguments)}function EF(n,e,t,r){return DF.apply(this,arguments)}function DF(){return DF=(0,q.Z)(function*(n,e,t,r){n.ha=(C,D,M)=>{return(R=(0,q.Z)(function*(N,j,Q,Te){let be=j.view.Gu(Q);be.ei&&(be=yield $I(N.localStore,j.query,!1).then(({documents:mt})=>j.view.Gu(mt,be)));const He=Te&&Te.targetChanges.get(j.targetId),Ne=j.view.applyChanges(be,N.isPrimaryClient,He);return NF(N,j.targetId,Ne.zu),Ne.snapshot}),function(N,j,Q,Te){return R.apply(this,arguments)})(n,C,D,M);var R};const i=yield $I(n.localStore,e,!0),s=new _3(e,i.hi),l=s.Gu(i.documents),d=Uw.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),p=s.applyChanges(l,n.isPrimaryClient,d);NF(n,t,p.zu);const y=new MX(e,t,s);return n.ta.set(e,y),n.ea.has(t)?n.ea.get(t).push(e):n.ea.set(t,[e]),p.snapshot}),DF.apply(this,arguments)}function OX(n,e){return TF.apply(this,arguments)}function TF(){return TF=(0,q.Z)(function*(n,e){const t=je(n),r=t.ta.get(e),i=t.ea.get(r.targetId);if(i.length>1)return t.ea.set(r.targetId,i.filter(s=>!Nw(s,e))),void t.ta.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield h_(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),eC(t.remoteStore,r.targetId),v_(t,r.targetId)}).catch(np))):(v_(t,r.targetId),yield h_(t.localStore,r.targetId,!0))}),TF.apply(this,arguments)}function IF(){return IF=(0,q.Z)(function*(n,e,t){const r=qF(n);try{const i=yield function(s,l){const d=je(s),p=or.now(),y=l.reduce((D,M)=>D.add(M.key),dn());let C;return d.persistence.runTransaction("Locally write mutations","readwrite",D=>d.ai.qs(D,y).next(M=>{C=M;const R=[];for(const N of l){const j=U9(N,C.get(N.key));null!=j&&R.push(new Kf(N.key,j,SG(j.value.mapValue),vr.exists(!0)))}return d.$s.addMutationBatch(D,p,R,l)})).then(D=>(D.applyToLocalDocumentSet(C),{batchId:D.batchId,changes:C}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,l,d){let p=s.oa[s.currentUser.toKey()];p||(p=new ar(Gt)),p=p.insert(l,d),s.oa[s.currentUser.toKey()]=p}(r,i.batchId,t),yield Wc(r,i.changes),yield p_(r.remoteStore)}catch(i){const s=m_(i,"Failed to persist write");t.reject(s)}}),IF.apply(this,arguments)}function y3(n,e){return SF.apply(this,arguments)}function SF(){return SF=(0,q.Z)(function*(n,e){const t=je(n);try{const r=yield WJ(t.localStore,e);e.targetChanges.forEach((i,s)=>{const l=t.ia.get(s);l&&(Et(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.Xu=!0:i.modifiedDocuments.size>0?Et(l.Xu):i.removedDocuments.size>0&&(Et(l.Xu),l.Xu=!1))}),yield Wc(t,r,e)}catch(r){yield np(r)}}),SF.apply(this,arguments)}function v3(n,e,t){const r=je(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ta.forEach((s,l)=>{const d=l.view.Eu(e);d.snapshot&&i.push(d.snapshot)}),function(s,l){const d=je(s);d.onlineState=l;let p=!1;d.queries.forEach((y,C)=>{for(const D of C.listeners)D.Eu(l)&&(p=!0)}),p&&bF(d)}(r.eventManager,e),i.length&&r.Zu.Ko(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function PX(n,e,t){return AF.apply(this,arguments)}function AF(){return AF=(0,q.Z)(function*(n,e,t){const r=je(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.ia.get(e),s=i&&i.key;if(s){let l=new ar(Ue.comparator);l=l.insert(s,Pn.newNoDocument(s,vt.min()));const d=dn().add(s),p=new Bw(vt.min(),new Map,new Fn(Gt),l,d);yield y3(r,p),r.sa=r.sa.remove(s),r.ia.delete(e),PF(r)}else yield h_(r.localStore,e,!1).then(()=>v_(r,e,t)).catch(np)}),AF.apply(this,arguments)}function FX(n,e){return MF.apply(this,arguments)}function MF(){return MF=(0,q.Z)(function*(n,e){const t=je(n),r=e.batch.batchId;try{const i=yield qJ(t.localStore,e);OF(t,r,null),kF(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Wc(t,i)}catch(i){yield np(i)}}),MF.apply(this,arguments)}function LX(n,e,t){return xF.apply(this,arguments)}function xF(){return xF=(0,q.Z)(function*(n,e,t){const r=je(n);try{const i=yield function(s,l){const d=je(s);return d.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let y;return d.$s.lookupMutationBatch(p,l).next(C=>(Et(null!==C),y=C.keys(),d.$s.removeMutationBatch(p,C))).next(()=>d.$s.performConsistencyCheck(p)).next(()=>d.ai.qs(p,y))})}(r.localStore,e);OF(r,e,t),kF(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Wc(r,i)}catch(i){yield np(i)}}),xF.apply(this,arguments)}function RF(){return RF=(0,q.Z)(function*(n,e){const t=je(n);hd(t.remoteStore)||Re("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(s){const l=je(s);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",d=>l.$s.getHighestUnacknowledgedBatchId(d))}(t.localStore);if(-1===r)return void e.resolve();const i=t.ua.get(r)||[];i.push(e),t.ua.set(r,i)}catch(r){const i=m_(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),RF.apply(this,arguments)}function kF(n,e){(n.ua.get(e)||[]).forEach(t=>{t.resolve()}),n.ua.delete(e)}function OF(n,e,t){const r=je(n);let i=r.oa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.oa[r.currentUser.toKey()]=i}}function v_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ea.get(e))n.ta.delete(r),t&&n.Zu.la(r,t);n.ea.delete(e),n.isPrimaryClient&&n.ra.Ri(e).forEach(r=>{n.ra.containsKey(r)||b3(n,r)})}function b3(n,e){n.na.delete(e.path.canonicalString());const t=n.sa.get(e);null!==t&&(eC(n.remoteStore,t),n.sa=n.sa.remove(e),n.ia.delete(t),PF(n))}function NF(n,e,t){for(const r of t)r instanceof g3?(n.ra.addReference(r.key,e),BX(n,r)):r instanceof m3?(Re("SyncEngine","Document no longer in limbo: "+r.key),n.ra.removeReference(r.key,e),n.ra.containsKey(r.key)||b3(n,r.key)):Xe()}function BX(n,e){const t=e.key,r=t.path.canonicalString();n.sa.get(t)||n.na.has(r)||(Re("SyncEngine","New document in limbo: "+t),n.na.add(r),PF(n))}function PF(n){for(;n.na.size>0&&n.sa.size<n.maxConcurrentLimboResolutions;){const e=n.na.values().next().value;n.na.delete(e);const t=new Ue(Jt.fromString(e)),r=n.aa.next();n.ia.set(r,new xX(t)),n.sa=n.sa.insert(t,r),ZI(n.remoteStore,new ld(jo(e_(t.path)),r,2,io.A))}}function Wc(n,e,t){return FF.apply(this,arguments)}function FF(){return FF=(0,q.Z)(function*(n,e,t){const r=je(n),i=[],s=[],l=[];var d;r.ta.isEmpty()||(r.ta.forEach((d,p)=>{l.push(r.ha(p,e,t).then(y=>{if(y){r.isPrimaryClient&&r.sharedClientState.updateQueryState(p.targetId,y.fromCache?"not-current":"current"),i.push(y);const C=UP.Js(p.targetId,y);s.push(C)}}))}),yield Promise.all(l),r.Zu.Ko(i),yield(d=(0,q.Z)(function*(p,y){const C=je(p);try{yield C.persistence.runTransaction("notifyLocalViewChanges","readwrite",D=>le.forEach(y,M=>le.forEach(M.zs,R=>C.persistence.referenceDelegate.addReference(D,M.targetId,R)).next(()=>le.forEach(M.Hs,R=>C.persistence.referenceDelegate.removeReference(D,M.targetId,R)))))}catch(D){if(!Yf(D))throw D;Re("LocalStore","Failed to update sequence numbers: "+D)}for(const D of y){const M=D.targetId;if(!D.fromCache){const R=C.si.get(M),j=R.withLastLimboFreeSnapshotVersion(R.snapshotVersion);C.si=C.si.insert(M,j)}}}),function(p,y){return d.apply(this,arguments)})(r.localStore,s))}),FF.apply(this,arguments)}function UX(n,e){return LF.apply(this,arguments)}function LF(){return LF=(0,q.Z)(function*(n,e){const t=je(n);if(!t.currentUser.isEqual(e)){Re("SyncEngine","User change. New user:",e.toKey());const r=yield W$(t.localStore,e);t.currentUser=e,(i=t).ua.forEach(l=>{l.forEach(d=>{d.reject(new Ce(oe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.ua.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Wc(t,r.ci)}var i}),LF.apply(this,arguments)}function jX(n,e){const t=je(n),r=t.ia.get(e);if(r&&r.Xu)return dn().add(r.key);{let i=dn();const s=t.ea.get(e);if(!s)return i;for(const l of s){const d=t.ta.get(l);i=i.unionWith(d.view.qu)}return i}}function HX(n,e){return VF.apply(this,arguments)}function VF(){return VF=(0,q.Z)(function*(n,e){const t=je(n),r=yield $I(t.localStore,e.query,!0),i=e.view.Ju(r);return t.isPrimaryClient&&NF(t,e.targetId,i.zu),i}),VF.apply(this,arguments)}function GX(n,e){return BF.apply(this,arguments)}function BF(){return BF=(0,q.Z)(function*(n,e){const t=je(n);return Q$(t.localStore,e).then(r=>Wc(t,r))}),BF.apply(this,arguments)}function $X(n,e,t,r){return UF.apply(this,arguments)}function UF(){return UF=(0,q.Z)(function*(n,e,t,r){const i=je(n),s=yield function(l,d){const p=je(l),y=je(p.$s);return p.persistence.runTransaction("Lookup mutation documents","readonly",C=>y.ln(C,d).next(D=>D?p.ai.qs(C,D):le.resolve(null)))}(i.localStore,e);var d;null!==s?("pending"===t?yield p_(i.remoteStore):"acknowledged"===t||"rejected"===t?(OF(i,e,r||null),kF(i,e),d=e,je(je(i.localStore).$s).dn(d)):Xe(),yield Wc(i,s)):Re("SyncEngine","Cannot apply mutation batch with id: "+e)}),UF.apply(this,arguments)}function jF(){return jF=(0,q.Z)(function*(n,e){const t=je(n);if(zF(t),qF(t),!0===e&&!0!==t.ca){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield w3(t,r.toArray());t.ca=!0,yield fF(t.remoteStore,!0);for(const s of i)ZI(t.remoteStore,s)}else if(!1===e&&!1!==t.ca){const r=[];let i=Promise.resolve();t.ea.forEach((s,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then(()=>(v_(t,l),h_(t.localStore,l,!0))),eC(t.remoteStore,l)}),yield i,yield w3(t,r),function(s){const l=je(s);l.ia.forEach((d,p)=>{eC(l.remoteStore,p)}),l.ra.bi(),l.ia=new Map,l.sa=new ar(Ue.comparator)}(t),t.ca=!1,yield fF(t.remoteStore,!1)}}),jF.apply(this,arguments)}function w3(n,e,t){return HF.apply(this,arguments)}function HF(){return HF=(0,q.Z)(function*(n,e,t){const r=je(n),i=[],s=[];for(const l of e){let d;const p=r.ea.get(l);if(p&&0!==p.length){d=yield d_(r.localStore,jo(p[0]));for(const y of p){const C=r.ta.get(y),D=yield HX(r,C);D.snapshot&&s.push(D.snapshot)}}else{const y=yield Y$(r.localStore,l);d=yield d_(r.localStore,y),yield EF(r,C3(y),l,!1)}i.push(d)}return r.Zu.Ko(s),i}),HF.apply(this,arguments)}function C3(n){return OG(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function qX(n){const e=je(n);return je(je(e.localStore).persistence).Os()}function WX(n,e,t,r){return GF.apply(this,arguments)}function GF(){return GF=(0,q.Z)(function*(n,e,t,r){const i=je(n);if(i.ca)return void Re("SyncEngine","Ignoring unexpected query state notification.");const s=i.ea.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const l=yield Q$(i.localStore,FG(s[0])),d=Bw.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Wc(i,l,d);break}case"rejected":yield h_(i.localStore,e,!0),v_(i,e,r);break;default:Xe()}}),GF.apply(this,arguments)}function ZX(n,e,t){return $F.apply(this,arguments)}function $F(){return $F=(0,q.Z)(function*(n,e,t){const r=zF(n);if(r.ca){for(const i of e){if(r.ea.has(i)){Re("SyncEngine","Adding an already active target "+i);continue}const s=yield Y$(r.localStore,i),l=yield d_(r.localStore,s);yield EF(r,C3(s),l.targetId,!1),ZI(r.remoteStore,l)}for(const i of t)r.ea.has(i)&&(yield h_(r.localStore,i,!1).then(()=>{eC(r.remoteStore,i),v_(r,i)}).catch(np))}}),$F.apply(this,arguments)}function zF(n){const e=je(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=y3.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=jX.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=PX.bind(null,e),e.Zu.Ko=TX.bind(null,e.eventManager),e.Zu.la=IX.bind(null,e.eventManager),e}function qF(n){const e=je(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=FX.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=LX.bind(null,e),e}class E3{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,q.Z)(function*(){t.M=Jw(e.databaseInfo.databaseId),t.sharedClientState=t.da(e),t.persistence=t._a(e),yield t.persistence.start(),t.gcScheduler=t.wa(e),t.localStore=t.ma(e)})()}wa(e){return null}ma(e){return q$(this.persistence,new z$,e.initialUser,this.M)}_a(e){return new rX(qP.Wi,this.M)}da(e){return new t3}terminate(){var e=this;return(0,q.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class D3 extends E3{constructor(e,t,r){super(),this.ga=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,q.Z)(function*(){yield t().call(r,e),yield r.ga.initialize(r,e),yield qF(r.ga.syncEngine),yield p_(r.ga.remoteStore),yield r.persistence.Is(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}ma(e){return q$(this.persistence,new z$,e.initialUser,this.M)}wa(e){return new VJ(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}_a(e){const t=BP(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?ws.withCacheSize(this.cacheSizeBytes):ws.DEFAULT;return new VP(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,r3(),WI(),this.M,this.sharedClientState,!!this.forceOwnership)}da(e){return new t3}}class YX extends D3{constructor(e,t){super(e,t,!1),this.ga=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,q.Z)(function*(){yield t().call(r,e);const i=r.ga.syncEngine;r.sharedClientState instanceof YP&&(r.sharedClientState.syncEngine={kr:$X.bind(null,i),Mr:WX.bind(null,i),Or:ZX.bind(null,i),Os:qX.bind(null,i),Nr:GX.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Is(function(){var s=(0,q.Z)(function*(l){yield function zX(n,e){return jF.apply(this,arguments)}(r.ga.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):l||r.gcScheduler.stop())});return function(l){return s.apply(this,arguments)}}())})()}da(e){const t=r3();if(!YP.vt(t))throw new Ce(oe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=BP(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new YP(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class WF{initialize(e,t){var r=this;return(0,q.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>v3(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=UX.bind(null,r.syncEngine),yield fF(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new DX}createDatastore(e){const t=Jw(e.databaseInfo.databaseId),r=new lX(e.databaseInfo);return new dX(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,s=d=>v3(this.syncEngine,d,0),l=n3.vt()?new n3:new sX,new fX(t,r,i,s,l);var t,r,i,s,l}createSyncEngine(e,t){return function(r,i,s,l,d,p,y){const C=new RX(r,i,s,l,d,p);return y&&(C.ca=!0),C}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,q.Z)(function*(t){const r=je(t);Re("RemoteStore","RemoteStore shutting down."),r.lu.add(5),yield f_(r),r.du.shutdown(),r._u.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function T3(n,e=10240){let t=0;return{read:()=>(0,q.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,q.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class YI{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.ya(this.observer.next,e)}error(e){this.observer.error?this.ya(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}pa(){this.muted=!0}ya(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class QX{constructor(e,t){this.Ia=e,this.M=t,this.metadata=new Yr,this.buffer=new Uint8Array,this.Ta=new TextDecoder("utf-8"),this.Ea().then(r=>{r&&r.Cu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ia.cancel()}getMetadata(){var e=this;return(0,q.Z)(function*(){return e.metadata.promise})()}fa(){var e=this;return(0,q.Z)(function*(){return yield e.getMetadata(),e.Ea()})()}Ea(){var e=this;return(0,q.Z)(function*(){const t=yield e.Aa();if(null===t)return null;const r=e.Ta.decode(t),i=Number(r);isNaN(i)&&e.Ra(`length string (${r}) is not valid number`);const s=yield e.ba(i);return new SX(JSON.parse(s),t.length+i)})()}Pa(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Aa(){var e=this;return(0,q.Z)(function*(){for(;e.Pa()<0&&!(yield e.Va()););if(0===e.buffer.length)return null;const t=e.Pa();t<0&&e.Ra("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}ba(e){var t=this;return(0,q.Z)(function*(){for(;t.buffer.length<e;)(yield t.Va())&&t.Ra("Reached the end of bundle when more is expected.");const r=t.Ta.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Ra(e){throw this.Ia.cancel(),new Error(`Invalid bundle format: ${e}`)}Va(){var e=this;return(0,q.Z)(function*(){const t=yield e.Ia.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class JX{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,q.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ce(oe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,q.Z)(function*(s,l){const d=je(s),p=Gw(d.M)+"/documents",y={documents:l.map(R=>Hw(d.M,R))},C=yield d.co("BatchGetDocuments",p,y),D=new Map;C.forEach(R=>{const N=function J9(n,e){return"found"in e?function(t,r){Et(!!r.found);const i=xl(t,r.found.name),s=Jr(r.found.updateTime),l=new Bi({mapValue:{fields:r.found.fields}});return Pn.newFoundDocument(i,s,l)}(n,e):"missing"in e?function(t,r){Et(!!r.missing),Et(!!r.readTime);const i=xl(t,r.missing),s=Jr(r.readTime);return Pn.newNoDocument(i,s)}(n,e):Xe()}(d.M,R);D.set(N.key.toString(),N)});const M=[];return l.forEach(R=>{const N=D.get(R.toString());Et(!!N),M.push(N)}),M}),function(s,l){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Lw(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,q.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const s=Ue.fromPath(i);e.mutations.push(new CP(s,e.precondition(s)))}),yield(r=(0,q.Z)(function*(i,s){const l=je(i),d=Gw(l.M)+"/documents",p={writes:s.map(y=>$w(l.M,y))};yield l.ro("Commit",d,p)}),function(i,s){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Xe();t=vt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ce(oe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?vr.updateTime(t):vr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(vt.min()))throw new Ce(oe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return vr.updateTime(t)}return vr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class XX{constructor(e,t,r,i){this.asyncQueue=e,this.datastore=t,this.updateFunction=r,this.deferred=i,this.va=5,this.So=new QP(this.asyncQueue,"transaction_retry")}run(){this.va-=1,this.Sa()}Sa(){var e=this;this.So.Io((0,q.Z)(function*(){const t=new JX(e.datastore),r=e.Da(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.Ca(s)}))}).catch(i=>{e.Ca(i)})}))}Da(e){try{const t=this.updateFunction(e);return!$f(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ca(e){this.va>0&&this.xa(e)?(this.va-=1,this.asyncQueue.enqueueAndForget(()=>(this.Sa(),Promise.resolve()))):this.deferred.reject(e)}xa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!QG(t)}return!1}}class eee{constructor(e,t,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Ci.UNAUTHENTICATED,this.clientId=fG.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,q.Z)(function*(d){Re("FirestoreClient","Received user=",d.uid),yield s.authCredentialListener(d),s.user=d});return function(d){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(Re("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,q.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ce(oe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Yr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,q.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=m_(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function I3(n,e){return ZF.apply(this,arguments)}function ZF(){return ZF=(0,q.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Re("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,q.Z)(function*(s){r.isEqual(s)||(yield W$(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),ZF.apply(this,arguments)}function S3(n,e){return KF.apply(this,arguments)}function KF(){return KF=(0,q.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield YF(n);Re("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>d3(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,s)=>d3(e.remoteStore,s)),n.onlineComponents=e}),KF.apply(this,arguments)}function YF(n){return QF.apply(this,arguments)}function QF(){return QF=(0,q.Z)(function*(n){return n.offlineComponents||(Re("FirestoreClient","Using default OfflineComponentProvider"),yield I3(n,new E3)),n.offlineComponents}),QF.apply(this,arguments)}function QI(n){return JF.apply(this,arguments)}function JF(){return JF=(0,q.Z)(function*(n){return n.onlineComponents||(Re("FirestoreClient","Using default OnlineComponentProvider"),yield S3(n,new WF)),n.onlineComponents}),JF.apply(this,arguments)}function A3(n){return YF(n).then(e=>e.persistence)}function XF(n){return YF(n).then(e=>e.localStore)}function M3(n){return QI(n).then(e=>e.remoteStore)}function e1(n){return QI(n).then(e=>e.syncEngine)}function b_(n){return t1.apply(this,arguments)}function t1(){return t1=(0,q.Z)(function*(n){const e=yield QI(n),t=e.eventManager;return t.onListen=kX.bind(null,e.syncEngine),t.onUnlisten=OX.bind(null,e.syncEngine),t}),t1.apply(this,arguments)}function x3(n,e,t={}){const r=new Yr;return n.asyncQueue.enqueueAndForget((0,q.Z)(function*(){return function(i,s,l,d,p){const y=new YI({next:D=>{s.enqueueAndForget(()=>yF(i,C));const M=D.docs.has(l);!M&&D.fromCache?p.reject(new Ce(oe.UNAVAILABLE,"Failed to get document because the client is offline.")):M&&D.fromCache&&d&&"server"===d.source?p.reject(new Ce(oe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(D)},error:D=>p.reject(D)}),C=new wF(e_(l.path),y,{includeMetadataChanges:!0,Du:!0});return mF(i,C)}(yield b_(n),n.asyncQueue,e,t,r)})),r.promise}function R3(n,e,t={}){const r=new Yr;return n.asyncQueue.enqueueAndForget((0,q.Z)(function*(){return function(i,s,l,d,p){const y=new YI({next:D=>{s.enqueueAndForget(()=>yF(i,C)),D.fromCache&&"server"===d.source?p.reject(new Ce(oe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(D)},error:D=>p.reject(D)}),C=new wF(l,y,{includeMetadataChanges:!0,Du:!0});return mF(i,C)}(yield b_(n),n.asyncQueue,e,t,r)})),r.promise}const k3=new Map;function n1(n,e,t){if(!t)throw new Ce(oe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function O3(n,e,t,r){if(!0===e&&!0===r)throw new Ce(oe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function N3(n){if(!Ue.isDocumentKey(n))throw new Ce(oe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function P3(n){if(Ue.isDocumentKey(n))throw new Ce(oe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function JI(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":Xe()}function Zt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ce(oe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=JI(n);throw new Ce(oe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function F3(n,e){if(e<=0)throw new Ce(oe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class L3{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ce(oe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ce(oe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,O3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class tC{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new L3({}),this._settingsFrozen=!1,e instanceof $c?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new Ce(oe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $c(i.options.projectId)}(e))}get app(){if(!this._app)throw new Ce(oe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ce(oe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new L3(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new d9;switch(t.type){case"gapi":const r=t.client;return Et(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new g9(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Ce(oe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=k3.get(e);t&&(Re("ComponentProvider","Removing Datastore"),k3.delete(e),t.terminate())}(this),Promise.resolve()}}class Ln{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Rl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ln(this.firestore,e,this._key)}}class Ui{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ui(this.firestore,e,this._query)}}class Rl extends Ui{constructor(e,t,r){super(e,t,e_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ln(this.firestore,null,new Ue(e))}withConverter(e){return new Rl(this.firestore,e,this._path)}}function V3(n,e,...t){if(n=(0,k.m9)(n),n1("collection","path",e),n instanceof tC){const r=Jt.fromString(e,...t);return P3(r),new Rl(n,null,r)}{if(!(n instanceof Ln||n instanceof Rl))throw new Ce(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Jt.fromString(e,...t));return P3(r),new Rl(n.firestore,null,r)}}function XI(n,e,...t){if(n=(0,k.m9)(n),1===arguments.length&&(e=fG.R()),n1("doc","path",e),n instanceof tC){const r=Jt.fromString(e,...t);return N3(r),new Ln(n,null,new Ue(r))}{if(!(n instanceof Ln||n instanceof Rl))throw new Ce(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Jt.fromString(e,...t));return N3(r),new Ln(n.firestore,n instanceof Rl?n.converter:null,new Ue(r))}}function B3(n,e){return n=(0,k.m9)(n),e=(0,k.m9)(e),(n instanceof Ln||n instanceof Rl)&&(e instanceof Ln||e instanceof Rl)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function U3(n,e){return n=(0,k.m9)(n),e=(0,k.m9)(e),n instanceof Ui&&e instanceof Ui&&n.firestore===e.firestore&&Nw(n._query,e._query)&&n.converter===e.converter}class dee{constructor(){this.Na=Promise.resolve(),this.ka=[],this.Ma=!1,this.Oa=[],this.Fa=null,this.$a=!1,this.Ba=!1,this.La=[],this.So=new QP(this,"async_queue_retry"),this.Ua=()=>{const t=WI();t&&Re("AsyncQueue","Visibility state changed to "+t.visibilityState),this.So.Eo()};const e=WI();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ua)}get isShuttingDown(){return this.Ma}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.qa(),this.Ga(e)}enterRestrictedMode(e){if(!this.Ma){this.Ma=!0,this.Ba=e||!1;const t=WI();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ua)}}enqueue(e){if(this.qa(),this.Ma)return new Promise(()=>{});const t=new Yr;return this.Ga(()=>this.Ma&&this.Ba?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ka.push(e),this.Ka()))}Ka(){var e=this;return(0,q.Z)(function*(){if(0!==e.ka.length){try{yield e.ka[0](),e.ka.shift(),e.So.reset()}catch(t){if(!Yf(t))throw t;Re("AsyncQueue","Operation failed with retryable error: "+t)}e.ka.length>0&&e.So.Io(()=>e.Ka())}})()}Ga(e){const t=this.Na.then(()=>(this.$a=!0,e().catch(r=>{throw this.Fa=r,this.$a=!1,yr("INTERNAL UNHANDLED ERROR: ",function(s){let l=s.message||"";return s.stack&&(l=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),l}(r)),r}).then(r=>(this.$a=!1,r))));return this.Na=t,t}enqueueAfterDelay(e,t,r){this.qa(),this.La.indexOf(e)>-1&&(t=0);const i=gF.createAndSchedule(this,e,t,r,s=>this.Qa(s));return this.Oa.push(i),i}qa(){this.Fa&&Xe()}verifyOperationInProgress(){}ja(){var e=this;return(0,q.Z)(function*(){let t;do{t=e.Na,yield t}while(t!==e.Na)})()}Wa(e){for(const t of this.Oa)if(t.timerId===e)return!0;return!1}za(e){return this.ja().then(()=>{this.Oa.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Oa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.ja()})}Ha(e){this.La.push(e)}Qa(e){const t=this.Oa.indexOf(e);this.Oa.splice(t,1)}}function r1(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class hee{constructor(){this._progressObserver={},this._taskCompletionResolver=new Yr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Hn extends tC{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new dee,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||j3(this),this._firestoreClient.terminate()}}function wr(n){return n._firestoreClient||j3(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function j3(n){var e;const t=n._freezeSettings(),r=(s=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new w9(n._databaseId,s,n._persistenceKey,(d=t).host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,d.useFetchStreams));var s,d;n._firestoreClient=new eee(n._authCredentials,n._appCheckCredentials,n._queue,r)}function H3(n,e,t){const r=new Yr;return n.asyncQueue.enqueue((0,q.Z)(function*(){try{yield I3(n,t),yield S3(n,e),r.resolve()}catch(i){if(!("FirebaseError"===(s=i).name?s.code===oe.FAILED_PRECONDITION||s.code===oe.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&s instanceof DOMException)||22===s.code||20===s.code||11===s.code))throw i;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),r.reject(i)}var s})).then(()=>r.promise)}function G3(n){if(n._initialized||n._terminated)throw new Ce(oe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Zc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ce(oe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class kl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new kl(Pr.fromBase64String(e))}catch(t){throw new Ce(oe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new kl(Pr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class ip{constructor(e){this._methodName=e}}class eS{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ce(oe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ce(oe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Gt(this._lat,e._lat)||Gt(this._long,e._long)}}const Cee=/^__.*__$/;class Eee{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Kf(e,this.data,this.fieldMask,t,this.fieldTransforms):new Fw(e,this.data,t,this.fieldTransforms)}}class $3{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Kf(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function z3(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Xe()}}class tS{constructor(e,t,r,i,s,l){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=i,void 0===s&&this.Ja(),this.fieldTransforms=s||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ya(){return this.settings.Ya}Xa(e){return new tS(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Za(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Xa({path:r,tc:!1});return i.ec(e),i}nc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Xa({path:r,tc:!1});return i.Ja(),i}sc(e){return this.Xa({path:void 0,tc:!0})}ic(e){return iS(e,this.settings.methodName,this.settings.rc||!1,this.path,this.settings.oc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ja(){if(this.path)for(let e=0;e<this.path.length;e++)this.ec(this.path.get(e))}ec(e){if(0===e.length)throw this.ic("Document fields must not be empty");if(z3(this.Ya)&&Cee.test(e))throw this.ic('Document fields cannot begin and end with "__"')}}class Dee{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||Jw(e)}uc(e,t,r,i=!1){return new tS({Ya:e,methodName:t,oc:r,path:Qr.emptyPath(),tc:!1,rc:i},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function sp(n){const e=n._freezeSettings(),t=Jw(n._databaseId);return new Dee(n._databaseId,!!e.ignoreUndefinedProperties,t)}function nS(n,e,t,r,i,s={}){const l=n.uc(s.merge||s.mergeFields?2:0,e,t,i);l1("Data must be an object, but it was:",l,r);const d=Z3(r,l);let p,y;if(s.merge)p=new Km(l.fieldMask),y=l.fieldTransforms;else if(s.mergeFields){const C=[];for(const D of s.mergeFields){const M=c1(e,D,t);if(!l.contains(M))throw new Ce(oe.INVALID_ARGUMENT,`Field '${M}' is specified in your field mask but missing from your input data.`);Y3(C,M)||C.push(M)}p=new Km(C),y=l.fieldTransforms.filter(D=>p.covers(D.field))}else p=null,y=l.fieldTransforms;return new Eee(new Bi(d),p,y)}class nC extends ip{_toFieldTransform(e){if(2!==e.Ya)throw e.ic(1===e.Ya?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof nC}}function q3(n,e,t){return new tS({Ya:3,oc:e.settings.oc,methodName:n._methodName,tc:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class s1 extends ip{_toFieldTransform(e){return new Pw(e.path,new n_)}isEqual(e){return e instanceof s1}}class Tee extends ip{constructor(e,t){super(e),this.ac=t}_toFieldTransform(e){const t=q3(this,e,!0),r=this.ac.map(s=>op(s,t)),i=new Wf(r);return new Pw(e.path,i)}isEqual(e){return this===e}}class Iee extends ip{constructor(e,t){super(e),this.ac=t}_toFieldTransform(e){const t=q3(this,e,!0),r=this.ac.map(s=>op(s,t)),i=new Zf(r);return new Pw(e.path,i)}isEqual(e){return this===e}}class See extends ip{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=new r_(e.M,UG(e.M,this.cc));return new Pw(e.path,t)}isEqual(e){return this===e}}function o1(n,e,t,r){const i=n.uc(1,e,t);l1("Data must be an object, but it was:",i,r);const s=[],l=Bi.empty();Hf(r,(p,y)=>{const C=rS(e,p,t);y=(0,k.m9)(y);const D=i.nc(C);if(y instanceof nC)s.push(C);else{const M=op(y,D);null!=M&&(s.push(C),l.set(C,M))}});const d=new Km(s);return new $3(l,d,i.fieldTransforms)}function a1(n,e,t,r,i,s){const l=n.uc(1,e,t),d=[c1(e,r,t)],p=[i];if(s.length%2!=0)throw new Ce(oe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let M=0;M<s.length;M+=2)d.push(c1(e,s[M])),p.push(s[M+1]);const y=[],C=Bi.empty();for(let M=d.length-1;M>=0;--M)if(!Y3(y,d[M])){const R=d[M];let N=p[M];N=(0,k.m9)(N);const j=l.nc(R);if(N instanceof nC)y.push(R);else{const Q=op(N,j);null!=Q&&(y.push(R),C.set(R,Q))}}const D=new Km(y);return new $3(C,D,l.fieldTransforms)}function W3(n,e,t,r=!1){return op(t,n.uc(r?4:3,e))}function op(n,e){if(K3(n=(0,k.m9)(n)))return l1("Unsupported field value:",e,n),Z3(n,e);if(n instanceof ip)return function(t,r){if(!z3(r.Ya))throw r.ic(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ic(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.tc&&4!==e.Ya)throw e.ic("Nested arrays are not supported");return function(t,r){const i=[];let s=0;for(const l of t){let d=op(l,r.sc(s));null==d&&(d={nullValue:"NULL_VALUE"}),i.push(d),s++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,k.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return UG(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=or.fromDate(t);return{timestampValue:jw(r.M,i)}}if(t instanceof or){const i=new or(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:jw(r.M,i)}}if(t instanceof eS)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof kl)return{bytesValue:s$(r.M,t._byteString)};if(t instanceof Ln){const i=r.databaseId,s=t.firestore._databaseId;if(!s.isEqual(i))throw r.ic(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:DP(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ic(`Unsupported field value: ${JI(t)}`)}(n,e)}function Z3(n,e){const t={};return mG(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Hf(n,(r,i)=>{const s=op(i,e.Za(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function K3(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof or||n instanceof eS||n instanceof kl||n instanceof Ln||n instanceof ip)}function l1(n,e,t){if(!K3(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=JI(t);throw e.ic("an object"===r?n+" a custom object":n+" "+r)}var r}function c1(n,e,t){if((e=(0,k.m9)(e))instanceof Zc)return e._internalPath;if("string"==typeof e)return rS(n,e);throw iS("Field path arguments must be of type string or ",n,!1,void 0,t)}const Aee=new RegExp("[~\\*/\\[\\]]");function rS(n,e,t){if(e.search(Aee)>=0)throw iS(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Zc(...e.split("."))._internalPath}catch(r){throw iS(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function iS(n,e,t,r,i){const s=r&&!r.isEmpty(),l=void 0!==i;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(s||l)&&(p+=" (found",s&&(p+=` in field ${r}`),l&&(p+=` in document ${i}`),p+=")"),new Ce(oe.INVALID_ARGUMENT,d+n+p)}function Y3(n,e){return n.some(t=>t.isEqual(e))}class rC{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ln(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Mee(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(sS("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Mee extends rC{data(){return super.data()}}function sS(n,e){return"string"==typeof e?rS(n,e):e instanceof Zc?e._internalPath:e._delegate._internalPath}class ap{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Kc extends rC{constructor(e,t,r,i,s,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new iC(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(sS("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class iC extends Kc{data(e={}){return super.data(e)}}class pd{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new ap(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new iC(this._firestore,this._userDataWriter,r.key,r,new ap(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ce(oe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new iC(r._firestore,r._userDataWriter,l.doc.key,l.doc,new ap(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:s++}))}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||3!==l.type).map(l=>{const d=new iC(r._firestore,r._userDataWriter,l.doc.key,l.doc,new ap(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let p=-1,y=-1;return 0!==l.type&&(p=s.indexOf(l.doc.key),s=s.delete(l.doc.key)),1!==l.type&&(s=s.add(l.doc),y=s.indexOf(l.doc.key)),{type:xee(l.type),doc:d,oldIndex:p,newIndex:y}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function xee(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Xe()}}function Q3(n,e){return n instanceof Kc&&e instanceof Kc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof pd&&e instanceof pd&&n._firestore===e._firestore&&U3(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function J3(n){if(SI(n)&&0===n.explicitOrderBy.length)throw new Ce(oe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class sC{}function gd(n,...e){for(const t of e)n=t._apply(n);return n}class Ree extends sC{constructor(e,t,r){super(),this.hc=e,this.lc=t,this.fc=r,this.type="where"}_apply(e){const t=sp(e.firestore),r=function(i,s,l,d,p,y,C){let D;if(p.isKeyField()){if("array-contains"===y||"array-contains-any"===y)throw new Ce(oe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if("in"===y||"not-in"===y){iz(C,y);const R=[];for(const N of C)R.push(rz(d,i,N));D={arrayValue:{values:R}}}else D=rz(d,i,C)}else"in"!==y&&"not-in"!==y&&"array-contains-any"!==y||iz(C,y),D=W3(l,"where",C,"in"===y||"not-in"===y);const M=Ei.create(p,y,D);return function(R,N){if(N.S()){const Q=_P(R);if(null!==Q&&!Q.isEqual(N.field))throw new Ce(oe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Q.toString()}' and '${N.field.toString()}'`);const Te=mP(R);null!==Te&&sz(0,N.field,Te)}const j=function(Q,Te){for(const be of Q.filters)if(Te.indexOf(be.op)>=0)return be.op;return null}(R,function(Q){switch(Q){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(N.op));if(null!==j)throw new Ce(oe.INVALID_ARGUMENT,j===N.op?`Invalid query. You cannot use more than one '${N.op.toString()}' filter.`:`Invalid query. You cannot use '${N.op.toString()}' filters with '${j.toString()}' filters.`)}(i,M),M}(e._query,0,t,e.firestore._databaseId,this.hc,this.lc,this.fc);return new Ui(e.firestore,e.converter,function(i,s){const l=i.filters.concat([s]);return new qc(i.path,i.collectionGroup,i.explicitOrderBy.slice(),l,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class Oee extends sC{constructor(e,t){super(),this.hc=e,this.dc=t,this.type="orderBy"}_apply(e){const t=function(r,i,s){if(null!==r.startAt)throw new Ce(oe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ce(oe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new Xm(i,s);return function(d,p){if(null===mP(d)){const y=_P(d);null!==y&&sz(0,y,p.field)}}(r,l),l}(e._query,this.hc,this.dc);return new Ui(e.firestore,e.converter,function(r,i){const s=r.explicitOrderBy.concat([i]);return new qc(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class X3 extends sC{constructor(e,t,r){super(),this.type=e,this._c=t,this.wc=r}_apply(e){return new Ui(e.firestore,e.converter,NG(e._query,this._c,this.wc))}}class ez extends sC{constructor(e,t,r){super(),this.type=e,this.mc=t,this.gc=r}_apply(e){const t=nz(e,this.type,this.mc,this.gc);return new Ui(e.firestore,e.converter,(i=t,new qc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class tz extends sC{constructor(e,t,r){super(),this.type=e,this.mc=t,this.gc=r}_apply(e){const t=nz(e,this.type,this.mc,this.gc);return new Ui(e.firestore,e.converter,(i=t,new qc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function nz(n,e,t,r){if(t[0]=(0,k.m9)(t[0]),t[0]instanceof rC)return function(i,s,l,d,p){if(!d)throw new Ce(oe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const y=[];for(const C of t_(i))if(C.field.isKeyField())y.push(Qm(s,d.key));else{const D=d.data.field(C.field);if(hP(D))throw new Ce(oe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+C.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===D){const M=C.field.canonicalString();throw new Ce(oe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${M}' (used as the orderBy) does not exist.`)}y.push(D)}return new od(y,p)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=sp(n.firestore);return function(s,l,d,p,y,C){const D=s.explicitOrderBy;if(y.length>D.length)throw new Ce(oe.INVALID_ARGUMENT,`Too many arguments provided to ${p}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const M=[];for(let R=0;R<y.length;R++){const N=y[R];if(D[R].field.isKeyField()){if("string"!=typeof N)throw new Ce(oe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${p}(), but got a ${typeof N}`);if(!yP(s)&&-1!==N.indexOf("/"))throw new Ce(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${p}() must be a plain document ID, but '${N}' contains a slash.`);const j=s.path.child(Jt.fromString(N));if(!Ue.isDocumentKey(j))throw new Ce(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${p}() must result in a valid document path, but '${j}' is not because it contains an odd number of segments.`);const Q=new Ue(j);M.push(Qm(l,Q))}else{const j=W3(d,p,N);M.push(j)}}return new od(M,C)}(n._query,n.firestore._databaseId,i,e,t,r)}}function rz(n,e,t){if("string"==typeof(t=(0,k.m9)(t))){if(""===t)throw new Ce(oe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!yP(e)&&-1!==t.indexOf("/"))throw new Ce(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Jt.fromString(t));if(!Ue.isDocumentKey(r))throw new Ce(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Qm(n,new Ue(r))}if(t instanceof Ln)return Qm(n,t._key);throw new Ce(oe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${JI(t)}.`)}function iz(n,e){if(!Array.isArray(n)||0===n.length)throw new Ce(oe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Ce(oe.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function sz(n,e,t){if(!t.isEqual(e))throw new Ce(oe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class u1{convertValue(e,t="none"){switch(zf(e)){case 0:return null;case 1:return e.booleanValue;case 2:return er(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Gf(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Xe()}}convertObject(e,t){const r={};return Hf(e.fields,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertGeoPoint(e){return new eS(er(e.latitude),er(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=_G(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Sw(e));default:return null}}convertTimestamp(e){const t=id(e);return new or(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Jt.fromString(e);Et(g$(r));const i=new $c(r.get(1),r.get(3)),s=new Ue(r.popFirst(5));return i.isEqual(t)||yr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function oS(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class jee extends u1{constructor(e){super(),this.firestore=e}convertBytes(e){return new kl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ln(this.firestore,null,t)}}class oz{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=sp(e)}set(e,t,r){this._verifyNotCommitted();const i=md(e,this._firestore),s=oS(i.converter,t,r),l=nS(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(l.toMutation(i._key,vr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=md(e,this._firestore);let l;return l="string"==typeof(t=(0,k.m9)(t))||t instanceof Zc?a1(this._dataReader,"WriteBatch.update",s._key,t,r,i):o1(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(l.toMutation(s._key,vr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=md(e,this._firestore);return this._mutations=this._mutations.concat(new Lw(t._key,vr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ce(oe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function md(n,e){if((n=(0,k.m9)(n)).firestore!==e)throw new Ce(oe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class lp extends u1{constructor(e){super(),this.firestore=e}convertBytes(e){return new kl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ln(this.firestore,null,t)}}function az(n,e,t){n=Zt(n,Ln);const r=Zt(n.firestore,Hn),i=oS(n.converter,e,t);return w_(r,[nS(sp(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,vr.none())])}function lz(n,e,t,...r){n=Zt(n,Ln);const i=Zt(n.firestore,Hn),s=sp(i);let l;return l="string"==typeof(e=(0,k.m9)(e))||e instanceof Zc?a1(s,"updateDoc",n._key,e,t,r):o1(s,"updateDoc",n._key,e),w_(i,[l.toMutation(n._key,vr.exists(!0))])}function cz(n,...e){var t,r,i;n=(0,k.m9)(n);let s={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||r1(e[l])||(s=e[l],l++);const d={includeMetadataChanges:s.includeMetadataChanges};if(r1(e[l])){const D=e[l];e[l]=null===(t=D.next)||void 0===t?void 0:t.bind(D),e[l+1]=null===(r=D.error)||void 0===r?void 0:r.bind(D),e[l+2]=null===(i=D.complete)||void 0===i?void 0:i.bind(D)}let p,y,C;if(n instanceof Ln)y=Zt(n.firestore,Hn),C=e_(n._key.path),p={next:D=>{e[l]&&e[l](d1(y,n,D))},error:e[l+1],complete:e[l+2]};else{const D=Zt(n,Ui);y=Zt(D.firestore,Hn),C=D._query;const M=new lp(y);p={next:R=>{e[l]&&e[l](new pd(y,M,D,R))},error:e[l+1],complete:e[l+2]},J3(n._query)}return function(D,M,R,N){const j=new YI(N),Q=new wF(M,j,R);return D.asyncQueue.enqueueAndForget((0,q.Z)(function*(){return mF(yield b_(D),Q)})),()=>{j.pa(),D.asyncQueue.enqueueAndForget((0,q.Z)(function*(){return yF(yield b_(D),Q)}))}}(wr(y),C,d,p)}function w_(n,e){return function(t,r){const i=new Yr;return t.asyncQueue.enqueueAndForget((0,q.Z)(function*(){return function NX(n,e,t){return IF.apply(this,arguments)}(yield e1(t),r,i)})),i.promise}(wr(n),e)}function d1(n,e,t){const r=t.docs.get(e._key),i=new lp(n);return new Kc(n,i,e._key,r,new ap(t.hasPendingWrites,t.fromCache),e.converter)}class Qee extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=sp(e)}get(e){const t=md(e,this._firestore),r=new jee(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return Xe();const s=i[0];if(s.isFoundDocument())return new rC(this._firestore,r,s.key,s,t.converter);if(s.isNoDocument())return new rC(this._firestore,r,t._key,null,t.converter);throw Xe()})}set(e,t,r){const i=md(e,this._firestore),s=oS(i.converter,t,r),l=nS(this._dataReader,"Transaction.set",i._key,s,null!==i.converter,r);return this._transaction.set(i._key,l),this}update(e,t,r,...i){const s=md(e,this._firestore);let l;return l="string"==typeof(t=(0,k.m9)(t))||t instanceof Zc?a1(this._dataReader,"Transaction.update",s._key,t,r,i):o1(this._dataReader,"Transaction.update",s._key,t),this._transaction.update(s._key,l),this}delete(e){const t=md(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=md(e,this._firestore),r=new lp(this._firestore);return super.get(e).then(i=>new Kc(this._firestore,r,t._key,i._document,new ap(!1,!1),t.converter))}}function h1(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ce("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function dz(){if("undefined"==typeof Uint8Array)throw new Ce("unimplemented","Uint8Arrays are not available in this environment.")}function hz(){if(!function v9(){return"undefined"!=typeof atob}())throw new Ce("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Wm=zt.SDK_VERSION,(0,zt._registerComponent)(new qr.wA("firestore",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),s=new Hn(i,new f9(t.getProvider("auth-internal")),new m9(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),s._setSettings(r),s},"PUBLIC")),(0,zt.registerVersion)(uG,"3.4.7",n),(0,zt.registerVersion)(uG,"3.4.7","esm2017")}();class oC{constructor(e){this._delegate=e}static fromBase64String(e){return hz(),new oC(kl.fromBase64String(e))}static fromUint8Array(e){return dz(),new oC(kl.fromUint8Array(e))}toBase64(){return hz(),this._delegate.toBase64()}toUint8Array(){return dz(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function f1(n){return function ote(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class ate{enableIndexedDbPersistence(e,t){return function pee(n,e){G3(n=Zt(n,Hn));const t=wr(n),r=n._freezeSettings(),i=new WF;return H3(t,i,new D3(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function gee(n){G3(n=Zt(n,Hn));const e=wr(n),t=n._freezeSettings(),r=new WF;return H3(e,r,new YX(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function mee(n){if(n._initialized&&!n._terminated)throw new Ce(oe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Yr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,q.Z)(function*(){try{yield(t=(0,q.Z)(function*(r){if(!Ra.vt())return Promise.resolve();const i=r+"main";yield Ra.delete(i)}),function(r){return t.apply(this,arguments)})(BP(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class fz{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof $c||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Tw("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function cee(n,e,t,r={}){var i;const s=(n=Zt(n,tC))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==e&&Tw("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},s),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,d;if("string"==typeof r.mockUserToken)l=r.mockUserToken,d=Ci.MOCK_USER;else{l=(0,k.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new Ce(oe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new Ci(p)}n._authCredentials=new h9(new dG(l,d))}}(this._delegate,e,t,r)}enableNetwork(){return function yee(n){return function tee(n){return n.asyncQueue.enqueue((0,q.Z)(function*(){const e=yield A3(n),t=yield M3(n);return e.setNetworkEnabled(!0),function(r){const i=je(r);return i.lu.delete(0),Xw(i)}(t)}))}(wr(n=Zt(n,Hn)))}(this._delegate)}disableNetwork(){return function vee(n){return function nee(n){return n.asyncQueue.enqueue((0,q.Z)(function*(){const e=yield A3(n),t=yield M3(n);return e.setNetworkEnabled(!1),(r=(0,q.Z)(function*(i){const s=je(i);s.lu.add(0),yield f_(s),s._u.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(wr(n=Zt(n,Hn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,O3("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function _ee(n){return function(e){const t=new Yr;return e.asyncQueue.enqueueAndForget((0,q.Z)(function*(){return function VX(n,e){return RF.apply(this,arguments)}(yield e1(e),t)})),t.promise}(wr(n=Zt(n,Hn)))}(this._delegate)}onSnapshotsInSync(e){return function Yee(n,e){return function see(n,e){const t=new YI(e);return n.asyncQueue.enqueueAndForget((0,q.Z)(function*(){return r=yield b_(n),i=t,je(r).Tu.add(i),void i.next();var r,i})),()=>{t.pa(),n.asyncQueue.enqueueAndForget((0,q.Z)(function*(){return r=yield b_(n),i=t,void je(r).Tu.delete(i);var r,i}))}}(wr(n=Zt(n,Hn)),r1(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ce("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new C_(this,V3(this._delegate,e))}catch(t){throw is(t,"collection()","Firestore.collection()")}}doc(e){try{return new Go(this,XI(this._delegate,e))}catch(t){throw is(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ss(this,function uee(n,e){if(n=Zt(n,tC),n1("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ce(oe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ui(n,null,(t=e,new qc(Jt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw is(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function Jee(n,e){return function oee(n,e){const t=new Yr;return n.asyncQueue.enqueueAndForget((0,q.Z)(function*(){const r=yield(i=n,QI(i).then(s=>s.datastore));var i;new XX(n.asyncQueue,r,e,t).run()})),t.promise}(wr(n=Zt(n,Hn)),t=>e(new Qee(n,t)))}(this._delegate,t=>e(new pz(this,t)))}batch(){return wr(this._delegate),new gz(new oz(this._delegate,e=>w_(this._delegate,e)))}loadBundle(e){return function bee(n,e){const t=wr(n=Zt(n,Hn)),r=new hee;return function aee(n,e,t,r){const i=function(s,l){let d;return d="string"==typeof s?(new TextEncoder).encode(s):s,p=function(p,y){if(p instanceof Uint8Array)return T3(p,y);if(p instanceof ArrayBuffer)return T3(new Uint8Array(p),y);if(p instanceof ReadableStream)return p.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(d),new QX(p,l);var p}(t,Jw(e));n.asyncQueue.enqueueAndForget((0,q.Z)(function*(){!function KX(n,e,t){const r=je(n);var i;(i=(0,q.Z)(function*(s,l,d){try{const p=yield l.getMetadata();if(yield function(M,R){const N=je(M),j=Jr(R.createTime);return N.persistence.runTransaction("hasNewerBundle","readonly",Q=>N.ds.getBundleMetadata(Q,R.id)).then(Q=>!!Q&&Q.createTime.compareTo(j)>=0)}(s.localStore,p))return yield l.close(),d._completeWith({taskState:"Success",documentsLoaded:(M=p).totalDocuments,bytesLoaded:M.totalBytes,totalDocuments:M.totalDocuments,totalBytes:M.totalBytes}),Promise.resolve(new Set);d._updateProgress(p3(p));const y=new AX(p,s.localStore,l.M);let C=yield l.fa();for(;C;){const M=yield y.Nu(C);M&&d._updateProgress(M),C=yield l.fa()}const D=yield y.complete();return yield Wc(s,D.Ou,void 0),yield function(M,R){const N=je(M);return N.persistence.runTransaction("Save bundle","readwrite",j=>N.ds.saveBundleMetadata(j,R))}(s.localStore,p),d._completeWith(D.progress),Promise.resolve(D.Mu)}catch(p){return Tw("SyncEngine",`Loading bundle failed with ${p}`),d._failWith(p),Promise.resolve(new Set)}var M}),function(s,l,d){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield e1(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function wee(n,e){return function lee(n,e){return n.asyncQueue.enqueue((0,q.Z)(function*(){return function(t,r){const i=je(t);return i.persistence.runTransaction("Get named query","readonly",s=>i.ds.getNamedQuery(s,r))}(yield XF(n),e)}))}(wr(n=Zt(n,Hn)),e).then(t=>t?new Ui(n,null,t.query):null)}(this._delegate,e).then(t=>t?new ss(this,t):null)}}class aS extends u1{constructor(e){super(),this.firestore=e}convertBytes(e){return new oC(new kl(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Go.forKey(t,this.firestore,null)}}class pz{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new aS(e)}get(e){const t=up(e);return this._delegate.get(t).then(r=>new aC(this._firestore,new Kc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=up(e);return r?(h1("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=up(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=up(e);return this._delegate.delete(t),this}}class gz{constructor(e){this._delegate=e}set(e,t,r){const i=up(e);return r?(h1("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=up(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=up(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class cp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new iC(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new lC(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=cp.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new cp(e,new aS(e),t),i.set(t,s)),s}}cp.INSTANCES=new WeakMap;class Go{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new aS(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ce("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Go(t,new Ln(t._delegate,r,new Ue(e)))}static forKey(e,t,r){return new Go(t,new Ln(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new C_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new C_(this.firestore,V3(this._delegate,e))}catch(t){throw is(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,k.m9)(e))instanceof Ln&&B3(this._delegate,e)}set(e,t){t=h1("DocumentReference.set",t);try{return t?az(this._delegate,e,t):az(this._delegate,e)}catch(r){throw is(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?lz(this._delegate,e):lz(this._delegate,e,t,...r)}catch(i){throw is(i,"updateDoc()","DocumentReference.update()")}}delete(){return function Zee(n){return w_(Zt(n.firestore,Hn),[new Lw(n._key,vr.none())])}(this._delegate)}onSnapshot(...e){const t=mz(e),r=_z(e,i=>new aC(this.firestore,new Kc(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return cz(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function Gee(n){n=Zt(n,Ln);const e=Zt(n.firestore,Hn),t=wr(e),r=new lp(e);return function ree(n,e){const t=new Yr;return n.asyncQueue.enqueueAndForget((0,q.Z)(function*(){return(r=(0,q.Z)(function*(i,s,l){try{const d=yield function(p,y){const C=je(p);return C.persistence.runTransaction("read document","readonly",D=>C.ai.Bs(D,y))}(i,s);d.isFoundDocument()?l.resolve(d):d.isNoDocument()?l.resolve(null):l.reject(new Ce(oe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(d){const p=m_(d,`Failed to get document '${s} from cache`);l.reject(p)}}),function(i,s,l){return r.apply(this,arguments)})(yield XF(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Kc(e,r,n._key,i,new ap(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function $ee(n){n=Zt(n,Ln);const e=Zt(n.firestore,Hn);return x3(wr(e),n._key,{source:"server"}).then(t=>d1(e,n,t))}(this._delegate):function Hee(n){n=Zt(n,Ln);const e=Zt(n.firestore,Hn);return x3(wr(e),n._key).then(t=>d1(e,n,t))}(this._delegate),t.then(r=>new aC(this.firestore,new Kc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Go(this.firestore,this._delegate.withConverter(e?cp.getInstance(this.firestore,e):null))}}function is(n,e,t){return n.message=n.message.replace(e,t),n}function mz(n){for(const e of n)if("object"==typeof e&&!f1(e))return e;return{}}function _z(n,e){var t,r;let i;return i=f1(n[0])?n[0]:f1(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class aC{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Go(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Q3(this._delegate,e._delegate)}}class lC extends aC{data(e){const t=this._delegate.data(e);return function u9(n,e){n||Xe()}(void 0!==t),t}}class ss{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new aS(e)}where(e,t,r){try{return new ss(this.firestore,gd(this._delegate,function kee(n,e,t){const r=e,i=sS("where",n);return new Ree(i,r,t)}(e,t,r)))}catch(i){throw is(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ss(this.firestore,gd(this._delegate,function Nee(n,e="asc"){const t=e,r=sS("orderBy",n);return new Oee(r,t)}(e,t)))}catch(r){throw is(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ss(this.firestore,gd(this._delegate,function Pee(n){return F3("limit",n),new X3("limit",n,"F")}(e)))}catch(t){throw is(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ss(this.firestore,gd(this._delegate,function Fee(n){return F3("limitToLast",n),new X3("limitToLast",n,"L")}(e)))}catch(t){throw is(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ss(this.firestore,gd(this._delegate,function Lee(...n){return new ez("startAt",n,!0)}(...e)))}catch(t){throw is(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ss(this.firestore,gd(this._delegate,function Vee(...n){return new ez("startAfter",n,!1)}(...e)))}catch(t){throw is(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ss(this.firestore,gd(this._delegate,function Bee(...n){return new tz("endBefore",n,!1)}(...e)))}catch(t){throw is(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ss(this.firestore,gd(this._delegate,function Uee(...n){return new tz("endAt",n,!0)}(...e)))}catch(t){throw is(t,"endAt()","Query.endAt()")}}isEqual(e){return U3(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function qee(n){n=Zt(n,Ui);const e=Zt(n.firestore,Hn),t=wr(e),r=new lp(e);return function iee(n,e){const t=new Yr;return n.asyncQueue.enqueueAndForget((0,q.Z)(function*(){return(r=(0,q.Z)(function*(i,s,l){try{const d=yield $I(i,s,!0),p=new _3(s,d.hi),y=p.Gu(d.documents),C=p.applyChanges(y,!1);l.resolve(C.snapshot)}catch(d){const p=m_(d,`Failed to execute query '${s} against cache`);l.reject(p)}}),function(i,s,l){return r.apply(this,arguments)})(yield XF(n),e,t);var r})),t.promise}(t,n._query).then(i=>new pd(e,r,n,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function Wee(n){n=Zt(n,Ui);const e=Zt(n.firestore,Hn),t=wr(e),r=new lp(e);return R3(t,n._query,{source:"server"}).then(i=>new pd(e,r,n,i))}(this._delegate):function zee(n){n=Zt(n,Ui);const e=Zt(n.firestore,Hn),t=wr(e),r=new lp(e);return J3(n._query),R3(t,n._query).then(i=>new pd(e,r,n,i))}(this._delegate),t.then(r=>new p1(this.firestore,new pd(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=mz(e),r=_z(e,i=>new p1(this.firestore,new pd(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return cz(this._delegate,t,r)}withConverter(e){return new ss(this.firestore,this._delegate.withConverter(e?cp.getInstance(this.firestore,e):null))}}class cte{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new lC(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class p1{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ss(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new lC(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new cte(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new lC(this._firestore,r))})}isEqual(e){return Q3(this._delegate,e._delegate)}}class C_ extends ss{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Go(this.firestore,e):null}doc(e){try{return new Go(this.firestore,void 0===e?XI(this._delegate):XI(this._delegate,e))}catch(t){throw is(t,"doc()","CollectionReference.doc()")}}add(e){return function Kee(n,e){const t=Zt(n.firestore,Hn),r=XI(n),i=oS(n.converter,e);return w_(t,[nS(sp(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,vr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Go(this.firestore,t))}isEqual(e){return B3(this._delegate,e._delegate)}withConverter(e){return new C_(this.firestore,this._delegate.withConverter(e?cp.getInstance(this.firestore,e):null))}}function up(n){return Zt(n,Ln)}class g1{constructor(...e){this._delegate=new Zc(...e)}static documentId(){return new g1(Qr.keyField().canonicalString())}isEqual(e){return(e=(0,k.m9)(e))instanceof Zc&&this._delegate._internalPath.isEqual(e._internalPath)}}class dp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function ete(){return new s1("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new dp(e)}static delete(){const e=function Xee(){return new nC("deleteField")}();return e._methodName="FieldValue.delete",new dp(e)}static arrayUnion(...e){const t=function tte(...n){return new Tee("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new dp(t)}static arrayRemove(...e){const t=function nte(...n){return new Iee("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new dp(t)}static increment(e){const t=function rte(n){return new See("increment",n)}(e);return t._methodName="FieldValue.increment",new dp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const ute={Firestore:fz,GeoPoint:eS,Timestamp:or,Blob:oC,Transaction:pz,WriteBatch:gz,DocumentReference:Go,DocumentSnapshot:aC,Query:ss,QueryDocumentSnapshot:lC,QuerySnapshot:p1,CollectionReference:C_,FieldPath:g1,FieldValue:dp,setLogLevel:function lte(n){!function c9(n){rd.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function yz(n,e){return function fte(n,e=vc){return new Vn.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function m1(n,e){return yz(n,e).pipe((0,st.U)(t=>({payload:t,type:"query"})))}function lS(n,e){return m1(n,e).pipe(ci(void 0),yN(),(0,st.U)(([t,r])=>{const i=r.payload.docChanges(),s=i.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,d)=>{const p=i.find(C=>C.doc.ref.isEqual(l.ref)),y=null==t?void 0:t.payload.docs.find(C=>C.ref.isEqual(l.ref));p&&JSON.stringify(p.doc.metadata)===JSON.stringify(l.metadata)||!p&&y&&JSON.stringify(y.metadata)===JSON.stringify(l.metadata)||s.push({type:"modified",payload:{oldIndex:d,newIndex:d,type:"modified",doc:l}})}),s}))}function vz(n,e,t){return lS(n,t).pipe(Rr((r,i)=>function gte(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function mte(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return _1(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return _1(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return _1(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(s=>s.payload),e),[]),Ug(),(0,st.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function _1(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function bz(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function hte(n){(function dte(n,e){n.INTERNAL.registerComponent(new qr.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},ute)))})(n,(e,t)=>new fz(e,t,new ate)),n.registerVersion("@firebase/firestore-compat","0.1.16")}(sN.Z);class wz{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=lS(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,st.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(ci(void 0),yN(),tr(([r,i])=>i.length>0||!r),(0,st.U)(([r,i])=>i),sr)}auditTrail(e){return this.stateChanges(e).pipe(Rr((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=bz(e);return vz(this.query,t,this.afs.schedulers.outsideAngular).pipe(sr)}valueChanges(e={}){return m1(this.query,this.afs.schedulers.outsideAngular).pipe((0,st.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),sr)}get(e){return(0,gn.D)(this.query.get(e)).pipe(sr)}add(e){return this.ref.add(e)}doc(e){return new Cz(this.ref.doc(e),this.afs)}}class Cz{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:s}=Tz(r,t);return new wz(i,s,this.afs)}snapshotChanges(){return function pte(n,e){return yz(n,e).pipe(ci(void 0),yN(),(0,st.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(sr)}valueChanges(e={}){return this.snapshotChanges().pipe((0,st.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,gn.D)(this.ref.get(e)).pipe(sr)}}class _te{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?lS(this.query,this.afs.schedulers.outsideAngular).pipe((0,st.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),tr(t=>t.length>0),sr):lS(this.query,this.afs.schedulers.outsideAngular).pipe(sr)}auditTrail(e){return this.stateChanges(e).pipe(Rr((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=bz(e);return vz(this.query,t,this.afs.schedulers.outsideAngular).pipe(sr)}valueChanges(e={}){return m1(this.query,this.afs.schedulers.outsideAngular).pipe((0,st.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),sr)}get(e){return(0,gn.D)(this.query.get(e)).pipe(sr)}}const Ez=new u.OlP("angularfire2.enableFirestorePersistence"),Dz=new u.OlP("angularfire2.firestore.persistenceSettings"),yte=new u.OlP("angularfire2.firestore.settings"),vte=new u.OlP("angularfire2.firestore.use-emulator");function Tz(n,e=(t=>t)){return{query:e(n),ref:n}}let bte=(()=>{class n{constructor(t,r,i,s,l,d,p,y,C,D,M,R,N,j,Q,Te,be){this.schedulers=p;const He=(0,Wr.on)(t,d,r),Ne=C;D&&iN(He,d,M,N,j,Q,R,Te),[this.firestore,this.persistenceEnabled$]=(0,Wr.cc)(`${He.name}.firestore`,"AngularFirestore",He.name,()=>{const mt=d.runOutsideAngular(()=>He.firestore());if(s&&mt.settings(s),Ne&&mt.useEmulator(...Ne),i&&!Ir(l)){const ot=()=>{try{return(0,gn.D)(mt.enablePersistence(y||void 0).then(()=>!0,()=>!1))}catch(fn){return"undefined"!=typeof console&&console.warn(fn),Ke(!1)}};return[mt,d.runOutsideAngular(ot)]}return[mt,Ke(!1)]},[s,Ne,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:l}=Tz(i,r),d=this.schedulers.ngZone.run(()=>s);return new wz(d,l,this)}collectionGroup(t,r){const i=r||(l=>l),s=this.firestore.collectionGroup(t);return new _te(i(s),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new Cz(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Wr.Dh),u.LFG(Wr.xv,8),u.LFG(Ez,8),u.LFG(yte,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(RT),u.LFG(Dz,8),u.LFG(vte,8),u.LFG(jT,8),u.LFG(JO,8),u.LFG(XO,8),u.LFG(eN,8),u.LFG(tN,8),u.LFG(nN,8),u.LFG(rN,8),u.LFG(nw,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),wte=(()=>{class n{constructor(){UT.Z.registerVersion("angularfire",xT.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:Ez,useValue:!0},{provide:Dz,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[bte]}),n})();const Iz="@firebase/database";let y1="";function Az(n){y1=n}class Dte{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,k.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,k.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class Tte{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,k.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const Mz=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Dte(e)}}catch(e){}return new Tte},hp=Mz("localStorage"),v1=Mz("sessionStorage"),E_=new vs.Yd("@firebase/database"),xz=function(){let n=1;return function(){return n++}}(),Rz=function(n){const e=(0,k.dS)(n),t=new k.gQ;t.update(e);const r=t.digest();return k.US.encodeByteArray(r)},cC=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=cC.apply(null,r):e+="object"==typeof r?(0,k.Pz)(r):r,e+=" "}return e};let fp=null,kz=!0;const Oz=function(n,e){(0,k.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(E_.logLevel=vs.in.VERBOSE,fp=E_.log.bind(E_),e&&v1.set("logging_enabled",!0)):"function"==typeof n?fp=n:(fp=null,v1.remove("logging_enabled"))},ni=function(...n){if(!0===kz&&(kz=!1,null===fp&&!0===v1.get("logging_enabled")&&Oz(!0)),fp){const e=cC.apply(null,n);fp(e)}},uC=function(n){return function(...e){ni(n,...e)}},b1=function(...n){const e="FIREBASE INTERNAL ERROR: "+cC(...n);E_.error(e)},Ol=function(...n){const e=`FIREBASE FATAL ERROR: ${cC(...n)}`;throw E_.error(e),new Error(e)},os=function(...n){const e="FIREBASE WARNING: "+cC(...n);E_.warn(e)},cS=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Yc="[MIN_NAME]",Nl="[MAX_NAME]",pp=function(n,e){if(n===e)return 0;if(n===Yc||e===Nl)return-1;if(e===Yc||n===Nl)return 1;{const t=uS(n),r=uS(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},Ate=function(n,e){return n===e?0:n<e?-1:1},dC=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,k.Pz)(e))},w1=function(n){if("object"!=typeof n||null===n)return(0,k.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,k.Pz)(e[r]),t+=":",t+=w1(n[e[r]]);return t+="}",t},Nz=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function ri(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const Pz=function(n){(0,k.hu)(!cS(n),"Invalid JSON number");const r=1023;let i,s,l,d,p;0===n?(s=0,l=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(d=Math.min(Math.floor(Math.log(n)/Math.LN2),r),s=d+r,l=Math.round(n*Math.pow(2,52-d)-Math.pow(2,52))):(s=0,l=Math.round(n/Math.pow(2,-1074))));const y=[];for(p=52;p;p-=1)y.push(l%2?1:0),l=Math.floor(l/2);for(p=11;p;p-=1)y.push(s%2?1:0),s=Math.floor(s/2);y.push(i?1:0),y.reverse();const C=y.join("");let D="";for(p=0;p<64;p+=8){let M=parseInt(C.substr(p,8),2).toString(16);1===M.length&&(M="0"+M),D+=M}return D.toLowerCase()},kte=new RegExp("^-?(0*)\\d{1,10}$"),Fz=-2147483648,C1=2147483647,uS=function(n){if(kte.test(n)){const e=Number(n);if(e>=Fz&&e<=C1)return e}return null},D_=function(n){try{n()}catch(e){setTimeout(()=>{throw os("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},hC=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class Nte{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){os(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Pte{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(ni("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',os(e)}}let fC=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const jz=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Gz="websocket",$z="long_polling";class D1{constructor(e,t,r,i,s=!1,l="",d=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=l,this.includeNamespaceInQueryParams=d,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=hp.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&hp.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function zz(n,e,t){let r;if((0,k.hu)("string"==typeof e,"typeof type must == string"),(0,k.hu)("object"==typeof t,"typeof params must == object"),e===Gz)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==$z)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function Lte(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return ri(t,(s,l)=>{i.push(s+"="+l)}),r+i.join("&")}class Vte{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,k.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,k.p$)(this.counters_)}}const T1={},I1={};function S1(n){const e=n.toString();return T1[e]||(T1[e]=new Vte),T1[e]}class Ute{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&D_(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class T_{constructor(e,t,r,i,s,l,d){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=l,this.lastSessionId=d,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=uC(e),this.stats_=S1(t),this.urlFn=p=>(this.appCheckToken&&(p.ac=this.appCheckToken),zz(t,$z,p))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Ute(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,k.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new A1((...s)=>{const[l,d,p,y,C]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===l)this.id=d,this.password=p;else{if("close"!==l)throw new Error("Unrecognized command received: "+l);d?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(d,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[l,d]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(l,d)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&jz.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){T_.forceAllow_=!0}static forceDisallow(){T_.forceDisallow_=!0}static isAvailable(){return!((0,k.Yr)()||!T_.forceAllow_&&(T_.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,k.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,k.h$)(t),i=Nz(r,1840);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,k.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,k.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class A1{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,k.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=xz(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=A1.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(d){ni("frame writing exception"),d.stack&&ni(d.stack),ni(d)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||ni("No IE domain setting required")}catch(t){const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const l=this.pendingSegs.shift();r=r+"&seg"+i+"="+l.seg+"&ts"+i+"="+l.ts+"&d"+i+"="+l.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,k.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{ni("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let pC=null;"undefined"!=typeof MozWebSocket?pC=MozWebSocket:"undefined"!=typeof WebSocket&&(pC=WebSocket);let gC=(()=>{class n{constructor(t,r,i,s,l,d,p){this.connId=t,this.applicationId=i,this.appCheckToken=s,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=uC(this.connId),this.stats_=S1(r),this.connURL=n.connectionURL_(r,d,p,s),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,s){const l={v:"5"};return!(0,k.Yr)()&&"undefined"!=typeof location&&location.hostname&&jz.test(location.hostname)&&(l.r="f"),r&&(l.s=r),i&&(l.ls=i),s&&(l.ac=s),zz(t,Gz,l)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,hp.set("previous_websocket_failure",!0);try{if((0,k.Yr)()){const s={headers:{"User-Agent":`Firebase/5/${y1}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(s.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(s.headers["X-Firebase-AppCheck"]=this.appCheckToken);const l=process.env,d=0===this.connURL.indexOf("wss://")?l.HTTPS_PROXY||l.https_proxy:l.HTTP_PROXY||l.http_proxy;d&&(s.proxy={origin:d}),this.mySock=new pC(this.connURL,[],s)}else this.mySock=new pC(this.connURL,[],{headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==pC&&!n.forceDisallow_}static previouslyFailed(){return hp.isInMemoryStorage||!0===hp.get("previous_websocket_failure")}markConnectionHealthy(){hp.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,k.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,k.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,k.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=Nz(r,16384);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})();class M1{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[T_,gC]}initTransports_(e){const t=gC&&gC.isAvailable();let r=t&&!gC.previouslyFailed();if(e.webSocketOnly&&(t||os("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[gC];else{const i=this.transports_=[];for(const s of M1.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}class iq{constructor(e,t,r,i,s,l,d,p,y,C){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=l,this.onReady_=d,this.onDisconnect_=p,this.onKill_=y,this.lastSessionId=C,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=uC("c:"+this.id+":"),this.transportManager_=new M1(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=hC(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=dC("t",e),r=dC("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=dC("t",e),r=dC("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=dC("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?b1("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):b1("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&os("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),hC(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):hC(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(hp.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class sq{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class oq{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,k.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===t&&(!r||r===i[s].context))return void i.splice(s,1)}validateEventType_(e){(0,k.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class hS extends oq{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,k.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new hS}getInitialEvent(e){return(0,k.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class hn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function on(){return new hn("")}function Lt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function _d(n){return n.pieces_.length-n.pieceNum_}function wn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new hn(n.pieces_,e)}function R1(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function mC(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function cq(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new hn(e,0)}function Gn(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof hn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new hn(t,0)}function Vt(n){return n.pieceNum_>=n.pieces_.length}function as(n,e){const t=Lt(n),r=Lt(e);if(null===t)return e;if(t===r)return as(wn(n),wn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function lne(n,e){const t=mC(n,0),r=mC(e,0);for(let i=0;i<t.length&&i<r.length;i++){const s=pp(t[i],r[i]);if(0!==s)return s}return t.length===r.length?0:t.length<r.length?-1:1}function k1(n,e){if(_d(n)!==_d(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function $o(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(_d(n)>_d(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class cne{constructor(e,t){this.errorPrefix_=t,this.parts_=mC(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,k.ug)(this.parts_[r]);uq(this)}}function uq(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+gp(n))}function gp(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class O1 extends oq{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new O1}getInitialEvent(e){return(0,k.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const _C=1e3;let pS,mp=(()=>{class n extends sq{constructor(t,r,i,s,l,d,p,y){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=l,this.authTokenProvider_=d,this.appCheckTokenProvider_=p,this.authOverride_=y,this.id=n.nextPersistentConnectionId_++,this.log_=uC("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=_C,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,y&&!(0,k.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");O1.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&hS.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const s=++this.requestNumber_,l={r:s,a:t,b:r};this.log_((0,k.Pz)(l)),(0,k.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[s]=i)}get(t){this.initConnection_();const r=new k.BH,i={p:t._path.toString(),q:t._queryObject},s={action:"g",request:i,onComplete:d=>{const p=d.d;"ok"===d.s?(this.onDataUpdate_(i.p,p,!1,null),r.resolve(p)):r.reject(p)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const l=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const d=this.outstandingGets_[l];void 0===d||s!==d||(delete this.outstandingGets_[l],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+l+" timed out on connection"),r.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(l),r.promise}listen(t,r,i,s){this.initConnection_();const l=t._queryIdentifier,d=t._path.toString();this.log_("Listen called for "+d+" "+l),this.listens.has(d)||this.listens.set(d,new Map),(0,k.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,k.hu)(!this.listens.get(d).has(l),"listen() called twice for same path/queryId.");const p={onComplete:s,hashFn:r,query:t,tag:i};this.listens.get(d).set(l,p),this.connected_&&this.sendListen_(p)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);const l={p:i};t.tag&&(l.q=r._queryObject,l.t=t.tag),l.h=t.hashFn(),this.sendRequest("q",l,p=>{const y=p.d,C=p.s;n.warnOnListenWarnings_(y,r),(this.listens.get(i)&&this.listens.get(i).get(s))===t&&(this.log_("listen response",p),"ok"!==C&&this.removeListen_(i,s),t.onComplete&&t.onComplete(C,y))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,k.r3)(t,"w")){const i=(0,k.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',l=r._path.toString();os(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,k.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,k.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{const l=s.s,d=s.d||"error";this.authToken_===t&&("ok"===l?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,d))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),(0,k.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,t._queryObject,r)}sendUnlisten_(t,r,i,s){this.log_("Unlisten on "+t+" for "+r);const l={p:t};s&&(l.q=i,l.t=s),this.sendRequest("n",l)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,s){const l={p:r,d:i};this.log_("onDisconnect "+t,l),this.sendRequest(t,l,d=>{s&&setTimeout(()=>{s(d.s,d.d)},Math.floor(0))})}put(t,r,i,s){this.putInternal("p",t,r,i,s)}merge(t,r,i,s){this.putInternal("m",t,r,i,s)}putInternal(t,r,i,s,l){this.initConnection_();const d={p:r,d:i};void 0!==l&&(d.h=l),this.outstandingPuts_.push({action:t,request:d,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,l=>{this.log_(r+" response",l),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(l.s,l.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,k.Pz)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):b1("Unrecognized action received from server: "+(0,k.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,k.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=_C,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=_C,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=_C),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,q.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),s=t.onRealtimeDisconnect_.bind(t),l=t.id+":"+n.nextConnectionId_++,d=t.lastSessionId;let p=!1,y=null;const C=function(){y?y.close():(p=!0,s())};t.realtime_={close:C,sendRequest:function(R){(0,k.hu)(y,"sendRequest call when we're not connected not allowed."),y.sendRequest(R)}};const M=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[R,N]=yield Promise.all([t.authTokenProvider_.getToken(M),t.appCheckTokenProvider_.getToken(M)]);p?ni("getToken() completed but was canceled"):(ni("getToken() completed. Creating connection."),t.authToken_=R&&R.accessToken,t.appCheckToken_=N&&N.token,y=new iq(l,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,s,j=>{os(j+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},d))}catch(R){t.log_("Failed to get token: "+R),p||(t.repoInfo_.nodeAdmin&&os(R),C())}}})()}interrupt(t){ni("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){ni("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,k.xb)(this.interruptReasons_)&&(this.reconnectDelay_=_C,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(l=>w1(l)).join("$"):"default";const s=this.removeListen_(t,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,r){const i=new hn(t).toString();let s;if(this.listens.has(i)){const l=this.listens.get(i);s=l.get(r),l.delete(r),0===l.size&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(t,r){ni("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){ni("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,k.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+y1.replace(/\./g,"-")]=1,(0,k.uI)()?t["framework.cordova"]=1:(0,k.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=hS.getInstance().currentlyOnline();return(0,k.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class $t{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new $t(e,t)}}class fS{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new $t(Yc,e),i=new $t(Yc,t);return 0!==this.compare(r,i)}minPost(){return $t.MIN}}class fq extends fS{static get __EMPTY_NODE(){return pS}static set __EMPTY_NODE(e){pS=e}compare(e,t){return pp(e.name,t.name)}isDefinedOn(e){throw(0,k.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return $t.MIN}maxPost(){return new $t(Nl,pS)}makePost(e,t){return(0,k.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new $t(e,pS)}toString(){return".key"}}const Pl=new fq;class gS{constructor(e,t,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(e=e,l=t?r(e.key,t):1,i&&(l*=-1),l<0)e=this.isReverse_?e.left:e.right;else{if(0===l){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let P1,ka=(()=>{class n{constructor(t,r,i,s,l){this.key=t,this.value=r,this.color=null!=i?i:n.RED,this.left=null!=s?s:Cs.EMPTY_NODE,this.right=null!=l?l:Cs.EMPTY_NODE}copy(t,r,i,s,l){return new n(null!=t?t:this.key,null!=r?r:this.value,null!=i?i:this.color,null!=s?s:this.left,null!=l?l:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let s=this;const l=i(t,s.key);return s=l<0?s.copy(null,null,null,s.left.insert(t,r,i),null):0===l?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(t,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Cs.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,s;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return Cs.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Cs{constructor(e,t=Cs.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Cs(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,ka.BLACK,null,null))}remove(e){return new Cs(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ka.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new gS(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new gS(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new gS(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new gS(this.root_,null,this.comparator_,!0,e)}}function yne(n,e){return pp(n.name,e.name)}function N1(n,e){return pp(n,e)}Cs.EMPTY_NODE=new class _ne{copy(e,t,r,i,s){return this}insert(e,t,r){return new ka(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const pq=function(n){return"number"==typeof n?"number:"+Pz(n):"string:"+n},gq=function(n){if(n.isLeafNode()){const e=n.val();(0,k.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,k.r3)(e,".sv"),"Priority must be a string or number.")}else(0,k.hu)(n===P1||n.isEmpty(),"priority of unexpected type.");(0,k.hu)(n===P1||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let mq,_q,yq,I_=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,k.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),gq(this.priorityNode_)}static set __childrenNodeConstructor(t){mq=t}static get __childrenNodeConstructor(){return mq}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Vt(t)?this:".priority"===Lt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=Lt(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,k.hu)(".priority"!==i||1===_d(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(wn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+pq(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?Pz(this.value_):this.value_,this.lazyHash_=Rz(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,k.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(r),l=n.VALUE_TYPE_ORDER.indexOf(i);return(0,k.hu)(s>=0,"Unknown leaf type: "+r),(0,k.hu)(l>=0,"Unknown leaf type: "+i),s===l?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:l-s}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const xn=new class Cne extends fS{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),s=r.compareTo(i);return 0===s?pp(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return $t.MIN}maxPost(){return new $t(Nl,new I_("[PRIORITY-POST]",yq))}makePost(e,t){const r=_q(e);return new $t(t,new I_("[PRIORITY-POST]",r))}toString(){return".priority"}},Ene=Math.log(2);class Dne{constructor(e){this.count=parseInt(Math.log(e+1)/Ene,10),this.current_=this.count-1;const i=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const mS=function(n,e,t,r){n.sort(e);const i=function(p,y){const C=y-p;let D,M;if(0===C)return null;if(1===C)return D=n[p],M=t?t(D):D,new ka(M,D.node,ka.BLACK,null,null);{const R=parseInt(C/2,10)+p,N=i(p,R),j=i(R+1,y);return D=n[R],M=t?t(D):D,new ka(M,D.node,ka.BLACK,N,j)}},d=function(p){let y=null,C=null,D=n.length;const M=function(N,j){const Q=D-N,Te=D;D-=N;const be=i(Q+1,Te),He=n[Q],Ne=t?t(He):He;R(new ka(Ne,He.node,j,null,be))},R=function(N){y?(y.left=N,y=N):(C=N,y=N)};for(let N=0;N<p.count;++N){const j=p.nextBitIsOne(),Q=Math.pow(2,p.count-(N+1));j?M(Q,ka.BLACK):(M(Q,ka.BLACK),M(Q,ka.RED))}return C}(new Dne(n.length));return new Cs(r||e,d)};let F1;const S_={};class Qc{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,k.hu)(S_&&xn,"ChildrenNode.ts has not been loaded"),F1=F1||new Qc({".priority":S_},{".priority":xn}),F1}get(e){const t=(0,k.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Cs?t:null}hasIndex(e){return(0,k.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,k.hu)(e!==Pl,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=t.getIterator($t.Wrap);let d,l=s.getNext();for(;l;)i=i||e.isDefinedOn(l.node),r.push(l),l=s.getNext();d=i?mS(r,e.getCompare()):S_;const p=e.toString(),y=Object.assign({},this.indexSet_);y[p]=e;const C=Object.assign({},this.indexes_);return C[p]=d,new Qc(C,y)}addToIndexes(e,t){const r=(0,k.UI)(this.indexes_,(i,s)=>{const l=(0,k.DV)(this.indexSet_,s);if((0,k.hu)(l,"Missing index implementation for "+s),i===S_){if(l.isDefinedOn(e.node)){const d=[],p=t.getIterator($t.Wrap);let y=p.getNext();for(;y;)y.name!==e.name&&d.push(y),y=p.getNext();return d.push(e),mS(d,l.getCompare())}return S_}{const d=t.get(e.name);let p=i;return d&&(p=p.remove(new $t(e.name,d))),p.insert(e,e.node)}});return new Qc(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,k.UI)(this.indexes_,i=>{if(i===S_)return i;{const s=t.get(e.name);return s?i.remove(new $t(e.name,s)):i}});return new Qc(r,this.indexSet_)}}let yC,At=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&gq(this.priorityNode_),this.children_.isEmpty()&&(0,k.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return yC||(yC=new n(new Cs(N1),null,Qc.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||yC}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?yC:r}}getChild(t){const r=Lt(t);return null===r?this:this.getImmediateChild(r).getChild(wn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,k.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new $t(t,r);let s,l;r.isEmpty()?(s=this.children_.remove(t),l=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(t,r),l=this.indexMap_.addToIndexes(i,this.children_));const d=s.isEmpty()?yC:this.priorityNode_;return new n(s,d,l)}}updateChild(t,r){const i=Lt(t);if(null===i)return r;{(0,k.hu)(".priority"!==Lt(t)||1===_d(t),".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild(wn(t),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,s=0,l=!0;if(this.forEachChild(xn,(d,p)=>{r[d]=p.val(t),i++,l&&n.INTEGER_REGEXP_.test(d)?s=Math.max(s,Number(d)):l=!1}),!t&&l&&s<2*i){const d=[];for(const p in r)d[p]=r[p];return d}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+pq(this.getPriority().val())+":"),this.forEachChild(xn,(r,i)=>{const s=i.hash();""!==s&&(t+=":"+r+":"+s)}),this.lazyHash_=""===t?"":Rz(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const s=this.resolveIndex_(i);if(s){const l=s.getPredecessorKey(new $t(t,r));return l?l.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new $t(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new $t(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,$t.Wrap);let l=s.peek();for(;null!=l&&r.compare(l,t)<0;)s.getNext(),l=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,$t.Wrap);let l=s.peek();for(;null!=l&&r.compare(l,t)>0;)s.getNext(),l=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===vC?-1:0}withIndex(t){if(t===Pl||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Pl||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(xn),s=r.getIterator(xn);let l=i.getNext(),d=s.getNext();for(;l&&d;){if(l.name!==d.name||!l.node.equals(d.node))return!1;l=i.getNext(),d=s.getNext()}return null===l&&null===d}return!1}return!1}}resolveIndex_(t){return t===Pl?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const vC=new class Tne extends At{constructor(){super(new Cs(N1),At.EMPTY_NODE,Qc.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return At.EMPTY_NODE}isEmpty(){return!1}};function Kn(n,e=null){if(null===n)return At.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,k.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new I_(n,Kn(e));if(n instanceof Array){let t=At.EMPTY_NODE;return ri(n,(r,i)=>{if((0,k.r3)(n,r)&&"."!==r.substring(0,1)){const s=Kn(i);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(r,s))}}),t.updatePriority(Kn(e))}{const t=[];let r=!1;if(ri(n,(l,d)=>{if("."!==l.substring(0,1)){const p=Kn(d);p.isEmpty()||(r=r||!p.getPriority().isEmpty(),t.push(new $t(l,p)))}}),0===t.length)return At.EMPTY_NODE;const s=mS(t,yne,l=>l.name,N1);if(r){const l=mS(t,xn.getCompare());return new At(s,Kn(e),new Qc({".priority":l},{".priority":xn}))}return new At(s,Kn(e),Qc.Default)}}Object.defineProperties($t,{MIN:{value:new $t(Yc,At.EMPTY_NODE)},MAX:{value:new $t(Nl,vC)}}),fq.__EMPTY_NODE=At.EMPTY_NODE,I_.__childrenNodeConstructor=At,function vne(n){P1=n}(vC),function wne(n){yq=n}(vC),function bne(n){_q=n}(Kn);class L1 extends fS{constructor(e){super(),this.indexPath_=e,(0,k.hu)(!Vt(e)&&".priority"!==Lt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),s=r.compareTo(i);return 0===s?pp(e.name,t.name):s}makePost(e,t){const r=Kn(e),i=At.EMPTY_NODE.updateChild(this.indexPath_,r);return new $t(t,i)}maxPost(){const e=At.EMPTY_NODE.updateChild(this.indexPath_,vC);return new $t(Nl,e)}toString(){return mC(this.indexPath_,0).join("/")}}const V1=new class Sne extends fS{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?pp(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return $t.MIN}maxPost(){return $t.MAX}makePost(e,t){const r=Kn(e);return new $t(t,r)}toString(){return".value"}},A_="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Ane=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const s=new Array(8);for(i=7;i>=0;i--)s[i]=A_.charAt(t%64),t=Math.floor(t/64);(0,k.hu)(0===t,"Cannot push at time == 0");let l=s.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)l+=A_.charAt(e[i]);return(0,k.hu)(20===l.length,"nextPushId: Length should be 20."),l}}(),wq=function(n){if(n===""+C1)return"-";const e=uS(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let l=0;l<t.length;l++)t[l]=n.charAt(l);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return Nl;const s=A_.charAt(A_.indexOf(t[r])+1);return t[r]=s,t.slice(0,r+1).join("")},Cq=function(n){if(n===""+Fz)return Yc;const e=uS(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+C1:(delete t[t.length-1],t.join("")):(t[t.length-1]=A_.charAt(A_.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function Eq(n){return{type:"value",snapshotNode:n}}function M_(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function bC(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function wC(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class U1{constructor(e){this.index_=e}updateChild(e,t,r,i,s,l){(0,k.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const d=e.getImmediateChild(t);return d.getChild(i).equals(r.getChild(i))&&d.isEmpty()===r.isEmpty()||(null!=l&&(r.isEmpty()?e.hasChild(t)?l.trackChildChange(bC(t,d)):(0,k.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):d.isEmpty()?l.trackChildChange(M_(t,r)):l.trackChildChange(wC(t,r,d))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(xn,(i,s)=>{t.hasChild(i)||r.trackChildChange(bC(i,s))}),t.isLeafNode()||t.forEachChild(xn,(i,s)=>{if(e.hasChild(i)){const l=e.getImmediateChild(i);l.equals(s)||r.trackChildChange(wC(i,s,l))}else r.trackChildChange(M_(i,s))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?At.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class CC{constructor(e){this.indexedFilter_=new U1(e.getIndex()),this.index_=e.getIndex(),this.startPost_=CC.getStartPost_(e),this.endPost_=CC.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,i,s,l){return this.matches(new $t(t,r))||(r=At.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,s,l)}updateFullNode(e,t,r){t.isLeafNode()&&(t=At.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(At.EMPTY_NODE);const s=this;return t.forEachChild(xn,(l,d)=>{s.matches(new $t(l,d))||(i=i.updateImmediateChild(l,At.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class xne{constructor(e){this.rangedFilter_=new CC(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,i,s,l){return this.rangedFilter_.matches(new $t(t,r))||(r=At.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,s,l):this.fullLimitUpdateChild_(e,t,r,s,l)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=At.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let s;i=At.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;s.hasNext()&&l<this.limit_;){const d=s.getNext();let p;if(p=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),d)<=0:this.index_.compare(d,this.rangedFilter_.getEndPost())<=0,!p)break;i=i.updateImmediateChild(d.name,d.node),l++}}else{let s,l,d,p;if(i=t.withIndex(this.index_),i=i.updatePriority(At.EMPTY_NODE),this.reverse_){p=i.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),l=this.rangedFilter_.getStartPost();const D=this.index_.getCompare();d=(M,R)=>D(R,M)}else p=i.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),l=this.rangedFilter_.getEndPost(),d=this.index_.getCompare();let y=0,C=!1;for(;p.hasNext();){const D=p.getNext();!C&&d(s,D)<=0&&(C=!0),C&&y<this.limit_&&d(D,l)<=0?y++:i=i.updateImmediateChild(D.name,At.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,s){let l;if(this.reverse_){const D=this.index_.getCompare();l=(M,R)=>D(R,M)}else l=this.index_.getCompare();const d=e;(0,k.hu)(d.numChildren()===this.limit_,"");const p=new $t(t,r),y=this.reverse_?d.getFirstChild(this.index_):d.getLastChild(this.index_),C=this.rangedFilter_.matches(p);if(d.hasChild(t)){const D=d.getImmediateChild(t);let M=i.getChildAfterChild(this.index_,y,this.reverse_);for(;null!=M&&(M.name===t||d.hasChild(M.name));)M=i.getChildAfterChild(this.index_,M,this.reverse_);const R=null==M?1:l(M,p);if(C&&!r.isEmpty()&&R>=0)return null!=s&&s.trackChildChange(wC(t,r,D)),d.updateImmediateChild(t,r);{null!=s&&s.trackChildChange(bC(t,D));const j=d.updateImmediateChild(t,At.EMPTY_NODE);return null!=M&&this.rangedFilter_.matches(M)?(null!=s&&s.trackChildChange(M_(M.name,M.node)),j.updateImmediateChild(M.name,M.node)):j}}return r.isEmpty()?e:C&&l(y,p)>=0?(null!=s&&(s.trackChildChange(bC(y.name,y.node)),s.trackChildChange(M_(t,r))),d.updateImmediateChild(t,r).updateImmediateChild(y.name,At.EMPTY_NODE)):e}}class _S{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=xn}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,k.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,k.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Yc}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,k.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,k.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Nl}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,k.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===xn}copy(){const e=new _S;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function j1(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function H1(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function yS(n,e){const t=n.copy();return t.index_=e,t}function Dq(n){const e={};if(n.isDefault())return e;let t;return n.index_===xn?t="$priority":n.index_===V1?t="$value":n.index_===Pl?t="$key":((0,k.hu)(n.index_ instanceof L1,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,k.Pz)(t),n.startSet_&&(e.startAt=(0,k.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,k.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,k.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,k.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function Tq(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==xn&&(e.i=n.index_.toString()),e}class vS extends sq{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=uC("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,k.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const l=vS.getListenId_(e,r),d={};this.listens_[l]=d;const p=Dq(e._queryParams);this.restRequest_(s+".json",p,(y,C)=>{let D=C;if(404===y&&(D=null,y=null),null===y&&this.onDataUpdate_(s,D,!1,r),(0,k.DV)(this.listens_,l)===d){let M;M=y?401===y?"permission_denied":"rest_error:"+y:"ok",i(M,null)}})}unlisten(e,t){const r=vS.getListenId_(e,t);delete this.listens_[r]}get(e){const t=Dq(e._queryParams),r=e._path.toString(),i=new k.BH;return this.restRequest_(r+".json",t,(s,l)=>{let d=l;404===s&&(d=null,s=null),null===s?(this.onDataUpdate_(r,d,!1,null),i.resolve(d)):i.reject(new Error(d))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,k.xO)(t);this.log_("Sending REST request for "+l);const d=new XMLHttpRequest;d.onreadystatechange=()=>{if(r&&4===d.readyState){this.log_("REST Response for "+l+" received. status:",d.status,"response:",d.responseText);let p=null;if(d.status>=200&&d.status<300){try{p=(0,k.cI)(d.responseText)}catch(y){os("Failed to parse JSON response for "+l+": "+d.responseText)}r(null,p)}else 401!==d.status&&404!==d.status&&os("Got unsuccessful REST response for "+l+" Status: "+d.status),r(d.status);r=null}},d.open("GET",l,!0),d.send()})}}class Fne{constructor(){this.rootNode_=At.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function bS(){return{value:null,children:new Map}}function x_(n,e,t){if(Vt(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=Lt(e);n.children.has(r)||n.children.set(r,bS()),x_(n.children.get(r),e=wn(e),t)}}function G1(n,e){if(Vt(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(xn,(r,i)=>{x_(n,new hn(r),i)}),G1(n,e)}}if(n.children.size>0){const t=Lt(e);return e=wn(e),n.children.has(t)&&G1(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function $1(n,e,t){null!==n.value?t(e,n.value):function Lne(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{$1(i,new hn(e.toString()+"/"+r),t)})}class Vne{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&ri(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class jne{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Vne(e);const r=1e4+2e4*Math.random();hC(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;ri(e,(i,s)=>{s>0&&(0,k.r3)(this.statsToReport_,i)&&(t[i]=s,r=!0)}),r&&this.server_.reportStats(t),hC(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var zo=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(zo||(zo={})),zo))();function W1(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class wS{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=zo.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Vt(this.path)){if(null!=this.affectedTree.value)return(0,k.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new hn(e));return new wS(on(),t,this.revert)}}return(0,k.hu)(Lt(this.path)===e,"operationForChild called for unrelated child."),new wS(wn(this.path),this.affectedTree,this.revert)}}class EC{constructor(e,t){this.source=e,this.path=t,this.type=zo.LISTEN_COMPLETE}operationForChild(e){return Vt(this.path)?new EC(this.source,on()):new EC(this.source,wn(this.path))}}class _p{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=zo.OVERWRITE}operationForChild(e){return Vt(this.path)?new _p(this.source,on(),this.snap.getImmediateChild(e)):new _p(this.source,wn(this.path),this.snap)}}class R_{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=zo.MERGE}operationForChild(e){if(Vt(this.path)){const t=this.children.subtree(new hn(e));return t.isEmpty()?null:t.value?new _p(this.source,on(),t.value):new R_(this.source,on(),t)}return(0,k.hu)(Lt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new R_(this.source,wn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class yd{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Vt(e))return this.isFullyInitialized()&&!this.filtered_;const t=Lt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class Hne{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function DC(n,e,t,r,i,s){const l=r.filter(d=>d.type===t);l.sort((d,p)=>function zne(n,e,t){if(null==e.childName||null==t.childName)throw(0,k.g5)("Should only compare child_ events.");const r=new $t(e.childName,e.snapshotNode),i=new $t(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,d,p)),l.forEach(d=>{const p=function $ne(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,d,s);i.forEach(y=>{y.respondsTo(d.type)&&e.push(y.createEvent(p,n.query_))})})}function CS(n,e){return{eventCache:n,serverCache:e}}function TC(n,e,t,r){return CS(new yd(e,t,r),n.serverCache)}function Sq(n,e,t,r){return CS(n.eventCache,new yd(e,t,r))}function ES(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function yp(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let Z1;class Rn{constructor(e,t=(()=>(Z1||(Z1=new Cs(Ate)),Z1))()){this.value=e,this.children=t}static fromObject(e){let t=new Rn(null);return ri(e,(r,i)=>{t=t.set(new hn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:on(),value:this.value};if(Vt(e))return null;{const r=Lt(e),i=this.children.get(r);if(null!==i){const s=i.findRootMostMatchingPathAndValue(wn(e),t);return null!=s?{path:Gn(new hn(r),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Vt(e))return this;{const t=Lt(e),r=this.children.get(t);return null!==r?r.subtree(wn(e)):new Rn(null)}}set(e,t){if(Vt(e))return new Rn(t,this.children);{const r=Lt(e),s=(this.children.get(r)||new Rn(null)).set(wn(e),t),l=this.children.insert(r,s);return new Rn(this.value,l)}}remove(e){if(Vt(e))return this.children.isEmpty()?new Rn(null):new Rn(null,this.children);{const t=Lt(e),r=this.children.get(t);if(r){const i=r.remove(wn(e));let s;return s=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&s.isEmpty()?new Rn(null):new Rn(this.value,s)}return this}}get(e){if(Vt(e))return this.value;{const t=Lt(e),r=this.children.get(t);return r?r.get(wn(e)):null}}setTree(e,t){if(Vt(e))return t;{const r=Lt(e),s=(this.children.get(r)||new Rn(null)).setTree(wn(e),t);let l;return l=s.isEmpty()?this.children.remove(r):this.children.insert(r,s),new Rn(this.value,l)}}fold(e){return this.fold_(on(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(Gn(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,on(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(Vt(e))return null;{const s=Lt(e),l=this.children.get(s);return l?l.findOnPath_(wn(e),Gn(t,s),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,on(),t)}foreachOnPath_(e,t,r){if(Vt(e))return this;{this.value&&r(t,this.value);const i=Lt(e),s=this.children.get(i);return s?s.foreachOnPath_(wn(e),Gn(t,i),r):new Rn(null)}}foreach(e){this.foreach_(on(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Gn(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class Oa{constructor(e){this.writeTree_=e}static empty(){return new Oa(new Rn(null))}}function IC(n,e,t){if(Vt(e))return new Oa(new Rn(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let s=r.value;const l=as(i,e);return s=s.updateChild(l,t),new Oa(n.writeTree_.set(i,s))}{const i=new Rn(t),s=n.writeTree_.setTree(e,i);return new Oa(s)}}}function K1(n,e,t){let r=n;return ri(t,(i,s)=>{r=IC(r,Gn(e,i),s)}),r}function Aq(n,e){if(Vt(e))return Oa.empty();{const t=n.writeTree_.setTree(e,new Rn(null));return new Oa(t)}}function Y1(n,e){return null!=vp(n,e)}function vp(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(as(t.path,e)):null}function Mq(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(xn,(r,i)=>{e.push(new $t(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new $t(r,i.value))}),e}function vd(n,e){if(Vt(e))return n;{const t=vp(n,e);return new Oa(null!=t?new Rn(t):n.writeTree_.subtree(e))}}function Q1(n){return n.writeTree_.isEmpty()}function k_(n,e){return xq(on(),n.writeTree_,e)}function xq(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{".priority"===i?((0,k.hu)(null!==s.value,"Priority writes must always be leaf nodes"),r=s.value):t=xq(Gn(n,i),s,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(Gn(n,".priority"),r)),t}}function DS(n,e){return Pq(e,n)}function Qne(n,e){if(n.snap)return $o(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&$o(Gn(n.path,t),e))return!0;return!1}function Xne(n){return n.visible}function Rq(n,e,t){let r=Oa.empty();for(let i=0;i<n.length;++i){const s=n[i];if(e(s)){const l=s.path;let d;if(s.snap)$o(t,l)?(d=as(t,l),r=IC(r,d,s.snap)):$o(l,t)&&(d=as(l,t),r=IC(r,on(),s.snap.getChild(d)));else{if(!s.children)throw(0,k.g5)("WriteRecord should have .snap or .children");if($o(t,l))d=as(t,l),r=K1(r,d,s.children);else if($o(l,t))if(d=as(l,t),Vt(d))r=K1(r,on(),s.children);else{const p=(0,k.DV)(s.children,Lt(d));if(p){const y=p.getChild(wn(d));r=IC(r,on(),y)}}}}}return r}function kq(n,e,t,r,i){if(r||i){const s=vd(n.visibleWrites,e);return!i&&Q1(s)?t:i||null!=t||Y1(s,on())?k_(Rq(n.allWrites,function(y){return(y.visible||i)&&(!r||!~r.indexOf(y.writeId))&&($o(y.path,e)||$o(e,y.path))},e),t||At.EMPTY_NODE):null}{const s=vp(n.visibleWrites,e);if(null!=s)return s;{const l=vd(n.visibleWrites,e);return Q1(l)?t:null!=t||Y1(l,on())?k_(l,t||At.EMPTY_NODE):null}}}function TS(n,e,t,r){return kq(n.writeTree,n.treePath,e,t,r)}function J1(n,e){return function ere(n,e,t){let r=At.EMPTY_NODE;const i=vp(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(xn,(s,l)=>{r=r.updateImmediateChild(s,l)}),r;if(t){const s=vd(n.visibleWrites,e);return t.forEachChild(xn,(l,d)=>{const p=k_(vd(s,new hn(l)),d);r=r.updateImmediateChild(l,p)}),Mq(s).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}return Mq(vd(n.visibleWrites,e)).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}(n.writeTree,n.treePath,e)}function Oq(n,e,t,r){return function tre(n,e,t,r,i){(0,k.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=Gn(e,t);if(Y1(n.visibleWrites,s))return null;{const l=vd(n.visibleWrites,s);return Q1(l)?i.getChild(t):k_(l,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function IS(n,e){return function rre(n,e){return vp(n.visibleWrites,e)}(n.writeTree,Gn(n.treePath,e))}function X1(n,e,t){return function nre(n,e,t,r){const i=Gn(e,t),s=vp(n.visibleWrites,i);return null!=s?s:r.isCompleteForChild(t)?k_(vd(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function Nq(n,e){return Pq(Gn(n.treePath,e),n.writeTree)}function Pq(n,e){return{treePath:n,writeTree:e}}class are{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,k.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,k.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if("child_added"===t&&"child_removed"===s)this.changeMap.set(r,wC(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===s)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===s)this.changeMap.set(r,bC(r,i.oldSnap));else if("child_changed"===t&&"child_added"===s)this.changeMap.set(r,M_(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==s)throw(0,k.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,wC(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const Fq=new class lre{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class eL{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new yd(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return X1(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:yp(this.viewCache_),s=function ore(n,e,t,r,i,s){return function ire(n,e,t,r,i,s,l){let d;const p=vd(n.visibleWrites,e),y=vp(p,on());if(null!=y)d=y;else{if(null==t)return[];d=k_(p,t)}if(d=d.withIndex(l),d.isEmpty()||d.isLeafNode())return[];{const C=[],D=l.getCompare(),M=s?d.getReverseIteratorFrom(r,l):d.getIteratorFrom(r,l);let R=M.getNext();for(;R&&C.length<i;)0!==D(R,r)&&C.push(R),R=M.getNext();return C}}(n.writeTree,n.treePath,e,t,r,i,s)}(this.writes_,i,t,1,r,e);return 0===s.length?null:s[0]}}function Lq(n,e,t,r,i,s){const l=e.eventCache;if(null!=IS(r,t))return e;{let d,p;if(Vt(t))if((0,k.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const y=yp(e),D=J1(r,y instanceof At?y:At.EMPTY_NODE);d=n.filter.updateFullNode(e.eventCache.getNode(),D,s)}else{const y=TS(r,yp(e));d=n.filter.updateFullNode(e.eventCache.getNode(),y,s)}else{const y=Lt(t);if(".priority"===y){(0,k.hu)(1===_d(t),"Can't have a priority with additional path components");const C=l.getNode();p=e.serverCache.getNode();const D=Oq(r,t,C,p);d=null!=D?n.filter.updatePriority(C,D):l.getNode()}else{const C=wn(t);let D;if(l.isCompleteForChild(y)){p=e.serverCache.getNode();const M=Oq(r,t,l.getNode(),p);D=null!=M?l.getNode().getImmediateChild(y).updateChild(C,M):l.getNode().getImmediateChild(y)}else D=X1(r,y,e.serverCache);d=null!=D?n.filter.updateChild(l.getNode(),y,D,C,i,s):l.getNode()}}return TC(e,d,l.isFullyInitialized()||Vt(t),n.filter.filtersNodes())}}function SS(n,e,t,r,i,s,l,d){const p=e.serverCache;let y;const C=l?n.filter:n.filter.getIndexedFilter();if(Vt(t))y=C.updateFullNode(p.getNode(),r,null);else if(C.filtersNodes()&&!p.isFiltered()){const R=p.getNode().updateChild(t,r);y=C.updateFullNode(p.getNode(),R,null)}else{const R=Lt(t);if(!p.isCompleteForPath(t)&&_d(t)>1)return e;const N=wn(t),Q=p.getNode().getImmediateChild(R).updateChild(N,r);y=".priority"===R?C.updatePriority(p.getNode(),Q):C.updateChild(p.getNode(),R,Q,N,Fq,null)}const D=Sq(e,y,p.isFullyInitialized()||Vt(t),C.filtersNodes());return Lq(n,D,t,i,new eL(i,D,s),d)}function tL(n,e,t,r,i,s,l){const d=e.eventCache;let p,y;const C=new eL(i,e,s);if(Vt(t))y=n.filter.updateFullNode(e.eventCache.getNode(),r,l),p=TC(e,y,!0,n.filter.filtersNodes());else{const D=Lt(t);if(".priority"===D)y=n.filter.updatePriority(e.eventCache.getNode(),r),p=TC(e,y,d.isFullyInitialized(),d.isFiltered());else{const M=wn(t),R=d.getNode().getImmediateChild(D);let N;if(Vt(M))N=r;else{const j=C.getCompleteChild(D);N=null!=j?".priority"===R1(M)&&j.getChild(cq(M)).isEmpty()?j:j.updateChild(M,r):At.EMPTY_NODE}p=R.equals(N)?e:TC(e,n.filter.updateChild(d.getNode(),D,N,M,C,l),d.isFullyInitialized(),n.filter.filtersNodes())}}return p}function Vq(n,e){return n.eventCache.isCompleteForChild(e)}function Bq(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function nL(n,e,t,r,i,s,l,d){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let y,p=e;y=Vt(t)?r:new Rn(null).setTree(t,r);const C=e.serverCache.getNode();return y.children.inorderTraversal((D,M)=>{if(C.hasChild(D)){const N=Bq(0,e.serverCache.getNode().getImmediateChild(D),M);p=SS(n,p,new hn(D),N,i,s,l,d)}}),y.children.inorderTraversal((D,M)=>{const R=!e.serverCache.isCompleteForChild(D)&&void 0===M.value;if(!C.hasChild(D)&&!R){const j=Bq(0,e.serverCache.getNode().getImmediateChild(D),M);p=SS(n,p,new hn(D),j,i,s,l,d)}}),p}class _re{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new U1(r.getIndex()),s=function Rne(n){return n.loadsAllData()?new U1(n.getIndex()):n.hasLimit()?new xne(n):new CC(n)}(r);this.processor_=function cre(n){return{filter:n}}(s);const l=t.serverCache,d=t.eventCache,p=i.updateFullNode(At.EMPTY_NODE,l.getNode(),null),y=s.updateFullNode(At.EMPTY_NODE,d.getNode(),null),C=new yd(p,l.isFullyInitialized(),i.filtersNodes()),D=new yd(y,d.isFullyInitialized(),s.filtersNodes());this.viewCache_=CS(D,C),this.eventGenerator_=new Hne(this.query_)}get query(){return this.query_}}function bre(n,e){const t=yp(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Vt(e)&&!t.getImmediateChild(Lt(e)).isEmpty())?t.getChild(e):null}function Uq(n){return 0===n.eventRegistrations_.length}function jq(n,e,t){const r=[];if(t){(0,k.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(s=>{const l=s.createCancelEvent(t,i);l&&r.push(l)})}if(e){let i=[];for(let s=0;s<n.eventRegistrations_.length;++s){const l=n.eventRegistrations_[s];if(l.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(s+1));break}}else i.push(l)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function Hq(n,e,t,r){e.type===zo.MERGE&&null!==e.source.queryId&&((0,k.hu)(yp(n.viewCache_),"We should always have a full cache before handling merges"),(0,k.hu)(ES(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,s=function dre(n,e,t,r,i){const s=new are;let l,d;if(t.type===zo.OVERWRITE){const y=t;y.source.fromUser?l=tL(n,e,y.path,y.snap,r,i,s):((0,k.hu)(y.source.fromServer,"Unknown source."),d=y.source.tagged||e.serverCache.isFiltered()&&!Vt(y.path),l=SS(n,e,y.path,y.snap,r,i,d,s))}else if(t.type===zo.MERGE){const y=t;y.source.fromUser?l=function fre(n,e,t,r,i,s,l){let d=e;return r.foreach((p,y)=>{const C=Gn(t,p);Vq(e,Lt(C))&&(d=tL(n,d,C,y,i,s,l))}),r.foreach((p,y)=>{const C=Gn(t,p);Vq(e,Lt(C))||(d=tL(n,d,C,y,i,s,l))}),d}(n,e,y.path,y.children,r,i,s):((0,k.hu)(y.source.fromServer,"Unknown source."),d=y.source.tagged||e.serverCache.isFiltered(),l=nL(n,e,y.path,y.children,r,i,d,s))}else if(t.type===zo.ACK_USER_WRITE){const y=t;l=y.revert?function mre(n,e,t,r,i,s){let l;if(null!=IS(r,t))return e;{const d=new eL(r,e,i),p=e.eventCache.getNode();let y;if(Vt(t)||".priority"===Lt(t)){let C;if(e.serverCache.isFullyInitialized())C=TS(r,yp(e));else{const D=e.serverCache.getNode();(0,k.hu)(D instanceof At,"serverChildren would be complete if leaf node"),C=J1(r,D)}C=C,y=n.filter.updateFullNode(p,C,s)}else{const C=Lt(t);let D=X1(r,C,e.serverCache);null==D&&e.serverCache.isCompleteForChild(C)&&(D=p.getImmediateChild(C)),y=null!=D?n.filter.updateChild(p,C,D,wn(t),d,s):e.eventCache.getNode().hasChild(C)?n.filter.updateChild(p,C,At.EMPTY_NODE,wn(t),d,s):p,y.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=TS(r,yp(e)),l.isLeafNode()&&(y=n.filter.updateFullNode(y,l,s)))}return l=e.serverCache.isFullyInitialized()||null!=IS(r,on()),TC(e,y,l,n.filter.filtersNodes())}}(n,e,y.path,r,i,s):function pre(n,e,t,r,i,s,l){if(null!=IS(i,t))return e;const d=e.serverCache.isFiltered(),p=e.serverCache;if(null!=r.value){if(Vt(t)&&p.isFullyInitialized()||p.isCompleteForPath(t))return SS(n,e,t,p.getNode().getChild(t),i,s,d,l);if(Vt(t)){let y=new Rn(null);return p.getNode().forEachChild(Pl,(C,D)=>{y=y.set(new hn(C),D)}),nL(n,e,t,y,i,s,d,l)}return e}{let y=new Rn(null);return r.foreach((C,D)=>{const M=Gn(t,C);p.isCompleteForPath(M)&&(y=y.set(C,p.getNode().getChild(M)))}),nL(n,e,t,y,i,s,d,l)}}(n,e,y.path,y.affectedTree,r,i,s)}else{if(t.type!==zo.LISTEN_COMPLETE)throw(0,k.g5)("Unknown operation type: "+t.type);l=function gre(n,e,t,r,i){const s=e.serverCache;return Lq(n,Sq(e,s.getNode(),s.isFullyInitialized()||Vt(t),s.isFiltered()),t,r,Fq,i)}(n,e,t.path,r,s)}const p=s.getChanges();return function hre(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=ES(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&t.push(Eq(ES(e)))}}(e,l,p),{viewCache:l,changes:p}}(n.processor_,i,e,t,r);return function ure(n,e){(0,k.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,k.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),(0,k.hu)(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,Gq(n,s.changes,s.viewCache.eventCache.getNode(),null)}function Gq(n,e,t,r){return function Gne(n,e,t,r){const i=[],s=[];return e.forEach(l=>{"child_changed"===l.type&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&s.push(function Mne(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(l.childName,l.snapshotNode))}),DC(n,i,"child_removed",e,r,t),DC(n,i,"child_added",e,r,t),DC(n,i,"child_moved",s,r,t),DC(n,i,"child_changed",e,r,t),DC(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let AS,xS;class $q{constructor(){this.views=new Map}}function rL(n,e,t,r){const i=e.source.queryId;if(null!==i){const s=n.views.get(i);return(0,k.hu)(null!=s,"SyncTree gave us an op for an invalid query."),Hq(s,e,t,r)}{let s=[];for(const l of n.views.values())s=s.concat(Hq(l,e,t,r));return s}}function zq(n,e,t,r,i){const l=n.views.get(e._queryIdentifier);if(!l){let d=TS(t,i?r:null),p=!1;d?p=!0:r instanceof At?(d=J1(t,r),p=!1):(d=At.EMPTY_NODE,p=!1);const y=CS(new yd(d,p,!1),new yd(r,i,!1));return new _re(e,y)}return l}function qq(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function bd(n,e){let t=null;for(const r of n.views.values())t=t||bre(r,e);return t}function Wq(n,e){return e._queryParams.loadsAllData()?MS(n):n.views.get(e._queryIdentifier)}function Zq(n,e){return null!=Wq(n,e)}function wd(n){return null!=MS(n)}function MS(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let xre=1;class Kq{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Rn(null),this.pendingWriteTree_=function sre(){return{visibleWrites:Oa.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function iL(n,e,t,r,i){return function Wne(n,e,t,r,i){(0,k.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=IC(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?O_(n,new _p({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Cd(n,e,t=!1){const r=function Kne(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function Yne(n,e){const t=n.allWrites.findIndex(d=>d.writeId===e);(0,k.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,s=!1,l=n.allWrites.length-1;for(;i&&l>=0;){const d=n.allWrites[l];d.visible&&(l>=t&&Qne(d,r.path)?i=!1:$o(r.path,d.path)&&(s=!0)),l--}return!!i&&(s?(function Jne(n){n.visibleWrites=Rq(n.allWrites,Xne,on()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=Aq(n.visibleWrites,r.path):ri(r.children,p=>{n.visibleWrites=Aq(n.visibleWrites,Gn(r.path,p))}),!0))}(n.pendingWriteTree_,e)){let s=new Rn(null);return null!=r.snap?s=s.set(on(),!0):ri(r.children,l=>{s=s.set(new hn(l),!0)}),O_(n,new wS(r.path,s,t))}return[]}function SC(n,e,t){return O_(n,new _p({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function sL(n,e,t,r){const i=e._path,s=n.syncPointTree_.get(i);let l=[];if(s&&("default"===e._queryIdentifier||Zq(s,e))){const d=function Sre(n,e,t,r){const i=e._queryIdentifier,s=[];let l=[];const d=wd(n);if("default"===i)for(const[p,y]of n.views.entries())l=l.concat(jq(y,t,r)),Uq(y)&&(n.views.delete(p),y.query._queryParams.loadsAllData()||s.push(y.query));else{const p=n.views.get(i);p&&(l=l.concat(jq(p,t,r)),Uq(p)&&(n.views.delete(i),p.query._queryParams.loadsAllData()||s.push(p.query)))}return d&&!wd(n)&&s.push(new(function Dre(){return(0,k.hu)(AS,"Reference.ts has not been loaded"),AS}())(e._repo,e._path)),{removed:s,events:l}}(s,e,t,r);(function Tre(n){return 0===n.views.size})(s)&&(n.syncPointTree_=n.syncPointTree_.remove(i));const p=d.removed;l=d.events;const y=-1!==p.findIndex(D=>D._queryParams.loadsAllData()),C=n.syncPointTree_.findOnPath(i,(D,M)=>wd(M));if(y&&!C){const D=n.syncPointTree_.subtree(i);if(!D.isEmpty()){const M=function Vre(n){return n.fold((e,t,r)=>{if(t&&wd(t))return[MS(t)];{let i=[];return t&&(i=qq(t)),ri(r,(s,l)=>{i=i.concat(l)}),i}})}(D);for(let R=0;R<M.length;++R){const N=M[R],j=N.query,Q=Xq(n,N);n.listenProvider_.startListening(AC(j),kS(n,j),Q.hashFn,Q.onComplete)}}}!C&&p.length>0&&!r&&(y?n.listenProvider_.stopListening(AC(e),null):p.forEach(D=>{const M=n.queryToTagMap.get(OS(D));n.listenProvider_.stopListening(AC(D),M)})),function Bre(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=OS(r),s=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(s)}}}(n,p)}return l}function Yq(n,e,t){const r=e._path;let i=null,s=!1;n.syncPointTree_.foreachOnPath(r,(D,M)=>{const R=as(D,r);i=i||bd(M,R),s=s||wd(M)});let d,l=n.syncPointTree_.get(r);l?(s=s||wd(l),i=i||bd(l,on())):(l=new $q,n.syncPointTree_=n.syncPointTree_.set(r,l)),null!=i?d=!0:(d=!1,i=At.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((M,R)=>{const N=bd(R,on());N&&(i=i.updateImmediateChild(M,N))}));const p=Zq(l,e);if(!p&&!e._queryParams.loadsAllData()){const D=OS(e);(0,k.hu)(!n.queryToTagMap.has(D),"View does not exist, but we have a tag");const M=function Ure(){return xre++}();n.queryToTagMap.set(D,M),n.tagToQueryMap.set(M,D)}let C=function Ire(n,e,t,r,i,s){const l=zq(n,e,r,i,s);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,l),function wre(n,e){n.eventRegistrations_.push(e)}(l,t),function Cre(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(xn,(s,l)=>{r.push(M_(s,l))}),t.isFullyInitialized()&&r.push(Eq(t.getNode())),Gq(n,r,t.getNode(),e)}(l,t)}(l,e,t,DS(n.pendingWriteTree_,r),i,d);if(!p&&!s){const D=Wq(l,e);C=C.concat(function jre(n,e,t){const r=e._path,i=kS(n,e),s=Xq(n,t),l=n.listenProvider_.startListening(AC(e),i,s.hashFn,s.onComplete),d=n.syncPointTree_.subtree(r);if(i)(0,k.hu)(!wd(d.value),"If we're adding a query, it shouldn't be shadowed");else{const p=d.fold((y,C,D)=>{if(!Vt(y)&&C&&wd(C))return[MS(C).query];{let M=[];return C&&(M=M.concat(qq(C).map(R=>R.query))),ri(D,(R,N)=>{M=M.concat(N)}),M}});for(let y=0;y<p.length;++y){const C=p[y];n.listenProvider_.stopListening(AC(C),kS(n,C))}}return l}(n,e,D))}return C}function RS(n,e,t){const i=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(l,d)=>{const y=bd(d,as(l,e));if(y)return y});return kq(i,e,s,t,!0)}function O_(n,e){return Qq(e,n.syncPointTree_,null,DS(n.pendingWriteTree_,on()))}function Qq(n,e,t,r){if(Vt(n.path))return Jq(n,e,t,r);{const i=e.get(on());null==t&&null!=i&&(t=bd(i,on()));let s=[];const l=Lt(n.path),d=n.operationForChild(l),p=e.children.get(l);if(p&&d){const y=t?t.getImmediateChild(l):null,C=Nq(r,l);s=s.concat(Qq(d,p,y,C))}return i&&(s=s.concat(rL(i,n,r,t))),s}}function Jq(n,e,t,r){const i=e.get(on());null==t&&null!=i&&(t=bd(i,on()));let s=[];return e.children.inorderTraversal((l,d)=>{const p=t?t.getImmediateChild(l):null,y=Nq(r,l),C=n.operationForChild(l);C&&(s=s.concat(Jq(C,d,p,y)))}),i&&(s=s.concat(rL(i,n,r,t))),s}function Xq(n,e){const t=e.query,r=kS(n,t);return{hashFn:()=>(function yre(n){return n.viewCache_.serverCache.getNode()}(e)||At.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function Nre(n,e,t){const r=oL(n,t);if(r){const i=aL(r),s=i.path,l=i.queryId,d=as(s,e);return lL(n,s,new EC(W1(l),d))}return[]}(n,t._path,r):function Ore(n,e){return O_(n,new EC({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const s=function Rte(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return sL(n,t,null,s)}}}}function kS(n,e){const t=OS(e);return n.queryToTagMap.get(t)}function OS(n){return n._path.toString()+"$"+n._queryIdentifier}function oL(n,e){return n.tagToQueryMap.get(e)}function aL(n){const e=n.indexOf("$");return(0,k.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new hn(n.substr(0,e))}}function lL(n,e,t){const r=n.syncPointTree_.get(e);return(0,k.hu)(r,"Missing sync point for query tag that we're tracking"),rL(r,t,DS(n.pendingWriteTree_,e),null)}function AC(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function Mre(){return(0,k.hu)(xS,"Reference.ts has not been loaded"),xS}())(n._repo,n._path):n}class cL{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new cL(t)}node(){return this.node_}}class uL{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Gn(this.path_,e);return new uL(this.syncTree_,t)}node(){return RS(this.syncTree_,this.path_)}}const eW=function(n,e,t){return n&&"object"==typeof n?((0,k.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?Gre(n[".sv"],e,t):"object"==typeof n[".sv"]?$re(n[".sv"],e):void(0,k.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},Gre=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,k.hu)(!1,"Unexpected server value: "+n)},$re=function(n,e,t){n.hasOwnProperty("increment")||(0,k.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,k.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,k.hu)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const l=i.getValue();return"number"!=typeof l?r:l+r},tW=function(n,e,t,r){return hL(e,new uL(t,n),r)},dL=function(n,e,t){return hL(n,new cL(e),t)};function hL(n,e,t){const r=n.getPriority().val(),i=eW(r,e.getImmediateChild(".priority"),t);let s;if(n.isLeafNode()){const l=n,d=eW(l.getValue(),e,t);return d!==l.getValue()||i!==l.getPriority().val()?new I_(d,Kn(i)):n}{const l=n;return s=l,i!==l.getPriority().val()&&(s=s.updatePriority(new I_(i))),l.forEachChild(xn,(d,p)=>{const y=hL(p,e.getImmediateChild(d),t);y!==p&&(s=s.updateImmediateChild(d,y))}),s}}class fL{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function NS(n,e){let t=e instanceof hn?e:new hn(e),r=n,i=Lt(t);for(;null!==i;){const s=(0,k.DV)(r.node.children,i)||{children:{},childCount:0};r=new fL(i,r,s),t=wn(t),i=Lt(t)}return r}function bp(n){return n.node.value}function pL(n,e){n.node.value=e,gL(n)}function nW(n){return n.node.childCount>0}function PS(n,e){ri(n.node.children,(t,r)=>{e(new fL(t,n,r))})}function rW(n,e,t,r){t&&!r&&e(n),PS(n,i=>{rW(i,e,!0,r)}),t&&r&&e(n)}function MC(n){return new hn(null===n.parent?n.name:MC(n.parent)+"/"+n.name)}function gL(n){null!==n.parent&&function Wre(n,e,t){const r=function zre(n){return void 0===bp(n)&&!nW(n)}(t),i=(0,k.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,gL(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,gL(n))}(n.parent,n.name,n)}const Zre=/[\[\].#$\/\u0000-\u001F\u007F]/,Kre=/[\[\].#$\u0000-\u001F\u007F]/,mL=10485760,FS=function(n){return"string"==typeof n&&0!==n.length&&!Zre.test(n)},iW=function(n){return"string"==typeof n&&0!==n.length&&!Kre.test(n)},xC=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!cS(n)||n&&"object"==typeof n&&(0,k.r3)(n,".sv")},Fl=function(n,e,t,r){r&&void 0===e||RC((0,k.gK)(n,"value"),e,t)},RC=function(n,e,t){const r=t instanceof hn?new cne(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+gp(r));if("function"==typeof e)throw new Error(n+"contains a function "+gp(r)+" with contents = "+e.toString());if(cS(e))throw new Error(n+"contains "+e.toString()+" "+gp(r));if("string"==typeof e&&e.length>mL/3&&(0,k.ug)(e)>mL)throw new Error(n+"contains a string greater than "+mL+" utf8 bytes "+gp(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,s=!1;if(ri(e,(l,d)=>{if(".value"===l)i=!0;else if(".priority"!==l&&".sv"!==l&&(s=!0,!FS(l)))throw new Error(n+" contains an invalid key ("+l+") "+gp(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function une(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,k.ug)(e),uq(n)})(r,l),RC(n,d,r),function dne(n){const e=n.parts_.pop();n.byteLength_-=(0,k.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&s)throw new Error(n+' contains ".value" child '+gp(r)+" in addition to actual children.")}},sW=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,k.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const s=[];ri(e,(l,d)=>{const p=new hn(l);if(RC(i,d,Gn(t,p)),".priority"===R1(p)&&!xC(d))throw new Error(i+"contains an invalid value for '"+p.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(p)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const s=mC(r);for(let l=0;l<s.length;l++)if((".priority"!==s[l]||l!==s.length-1)&&!FS(s[l]))throw new Error(n+"contains an invalid key ("+s[l]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(lne);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&$o(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,s)},_L=function(n,e,t){if(!t||void 0!==e){if(cS(e))throw new Error((0,k.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!xC(e))throw new Error((0,k.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},kC=function(n,e,t,r){if(!(r&&void 0===t||FS(t)))throw new Error((0,k.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},OC=function(n,e,t,r){if(!(r&&void 0===t||iW(t)))throw new Error((0,k.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},qo=function(n,e){if(".info"===Lt(e))throw new Error(n+" failed = Can't modify data under /.info/")},oW=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!FS(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),iW(n)}(t))throw new Error((0,k.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Xre{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function LS(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();null!==t&&!k1(s,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:s}),t.events.push(i)}t&&n.eventLists_.push(t)}function yL(n,e,t){LS(n,t),aW(n,r=>k1(r,e))}function Wo(n,e,t){LS(n,t),aW(n,r=>$o(r,e)||$o(e,r))}function aW(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(eie(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function eie(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();fp&&ni("event: "+t.toString()),D_(r)}}}const lW="repo_interrupt";class nie{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Xre,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=bS(),this.transactionQueueTree_=new fL,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function cW(n){const t=n.infoData_.getNode(new hn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function NC(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:cW(n)})}function uW(n,e,t,r,i){n.dataUpdateCount++;const s=new hn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(i)if(r){const p=(0,k.UI)(t,y=>Kn(y));l=function Fre(n,e,t,r){const i=oL(n,r);if(i){const s=aL(i),l=s.path,d=s.queryId,p=as(l,e),y=Rn.fromObject(t);return lL(n,l,new R_(W1(d),p,y))}return[]}(n.serverSyncTree_,s,p,i)}else{const p=Kn(t);l=function Pre(n,e,t,r){const i=oL(n,r);if(null!=i){const s=aL(i),l=s.path,d=s.queryId,p=as(l,e);return lL(n,l,new _p(W1(d),p,t))}return[]}(n.serverSyncTree_,s,p,i)}else if(r){const p=(0,k.UI)(t,y=>Kn(y));l=function kre(n,e,t){const r=Rn.fromObject(t);return O_(n,new R_({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,s,p)}else{const p=Kn(t);l=SC(n.serverSyncTree_,s,p)}let d=s;l.length>0&&(d=P_(n,s)),Wo(n.eventQueue_,d,l)}function dW(n,e){vL(n,"connected",e),!1===e&&function aie(n){N_(n,"onDisconnectEvents");const e=NC(n),t=bS();$1(n.onDisconnect_,on(),(i,s)=>{const l=tW(i,s,n.serverSyncTree_,e);x_(t,i,l)});let r=[];$1(t,on(),(i,s)=>{r=r.concat(SC(n.serverSyncTree_,i,s));const l=EL(n,i);P_(n,l)}),n.onDisconnect_=bS(),Wo(n.eventQueue_,on(),r)}(n)}function vL(n,e,t){const r=new hn("/.info/"+e),i=Kn(t);n.infoData_.updateSnapshot(r,i);const s=SC(n.infoSyncTree_,r,i);Wo(n.eventQueue_,r,s)}function VS(n){return n.nextWriteId_++}function bL(n,e,t,r,i){N_(n,"set",{path:e.toString(),value:t,priority:r});const s=NC(n),l=Kn(t,r),d=RS(n.serverSyncTree_,e),p=dL(l,d,s),y=VS(n),C=iL(n.serverSyncTree_,e,p,y,!0);LS(n.eventQueue_,C),n.server_.put(e.toString(),l.val(!0),(M,R)=>{const N="ok"===M;N||os("set at "+e+" failed: "+M);const j=Cd(n.serverSyncTree_,y,!N);Wo(n.eventQueue_,e,j),Ed(0,i,M,R)});const D=EL(n,e);P_(n,D),Wo(n.eventQueue_,D,[])}function lie(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&G1(n.onDisconnect_,e),Ed(0,t,r,i)})}function hW(n,e,t,r){const i=Kn(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(s,l)=>{"ok"===s&&x_(n.onDisconnect_,e,i),Ed(0,r,s,l)})}function wL(n,e,t){let r;r=".info"===Lt(e._path)?sL(n.infoSyncTree_,e,t):sL(n.serverSyncTree_,e,t),yL(n.eventQueue_,e._path,r)}function fW(n){n.persistentConnection_&&n.persistentConnection_.interrupt(lW)}function N_(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),ni(t,...e)}function Ed(n,e,t,r){e&&D_(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let s=i;r&&(s+=": "+r);const l=new Error(s);l.code=i,e(l)}})}function CL(n,e,t){return RS(n.serverSyncTree_,e,t)||At.EMPTY_NODE}function BS(n,e=n.transactionQueueTree_){if(e||US(n,e),bp(e)){const t=gW(n,e);(0,k.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function pie(n,e,t){const r=t.map(y=>y.currentWriteId),i=CL(n,e,r);let s=i;const l=i.hash();for(let y=0;y<t.length;y++){const C=t[y];(0,k.hu)(0===C.status,"tryToSendTransactionQueue_: items in queue should all be run."),C.status=1,C.retryCount++;const D=as(e,C.path);s=s.updateChild(D,C.currentOutputSnapshotRaw)}const d=s.val(!0),p=e;n.server_.put(p.toString(),d,y=>{N_(n,"transaction put response",{path:p.toString(),status:y});let C=[];if("ok"===y){const D=[];for(let M=0;M<t.length;M++)t[M].status=2,C=C.concat(Cd(n.serverSyncTree_,t[M].currentWriteId)),t[M].onComplete&&D.push(()=>t[M].onComplete(null,!0,t[M].currentOutputSnapshotResolved)),t[M].unwatcher();US(n,NS(n.transactionQueueTree_,e)),BS(n,n.transactionQueueTree_),Wo(n.eventQueue_,e,C);for(let M=0;M<D.length;M++)D_(D[M])}else{if("datastale"===y)for(let D=0;D<t.length;D++)t[D].status=3===t[D].status?4:0;else{os("transaction at "+p.toString()+" failed: "+y);for(let D=0;D<t.length;D++)t[D].status=4,t[D].abortReason=y}P_(n,e)}},l)}(n,MC(e),t)}else nW(e)&&PS(e,t=>{BS(n,t)})}function P_(n,e){const t=pW(n,e),r=MC(t);return function gie(n,e,t){if(0===e.length)return;const r=[];let i=[];const l=e.filter(d=>0===d.status).map(d=>d.currentWriteId);for(let d=0;d<e.length;d++){const p=e[d],y=as(t,p.path);let D,C=!1;if((0,k.hu)(null!==y,"rerunTransactionsUnderNode_: relativePath should not be null."),4===p.status)C=!0,D=p.abortReason,i=i.concat(Cd(n.serverSyncTree_,p.currentWriteId,!0));else if(0===p.status)if(p.retryCount>=25)C=!0,D="maxretry",i=i.concat(Cd(n.serverSyncTree_,p.currentWriteId,!0));else{const M=CL(n,p.path,l);p.currentInputSnapshot=M;const R=e[d].update(M.val());if(void 0!==R){RC("transaction failed: Data returned ",R,p.path);let N=Kn(R);"object"==typeof R&&null!=R&&(0,k.r3)(R,".priority")||(N=N.updatePriority(M.getPriority()));const Q=p.currentWriteId,Te=NC(n),be=dL(N,M,Te);p.currentOutputSnapshotRaw=N,p.currentOutputSnapshotResolved=be,p.currentWriteId=VS(n),l.splice(l.indexOf(Q),1),i=i.concat(iL(n.serverSyncTree_,p.path,be,p.currentWriteId,p.applyLocally)),i=i.concat(Cd(n.serverSyncTree_,Q,!0))}else C=!0,D="nodata",i=i.concat(Cd(n.serverSyncTree_,p.currentWriteId,!0))}Wo(n.eventQueue_,t,i),i=[],C&&(e[d].status=2,setTimeout(e[d].unwatcher,Math.floor(0)),e[d].onComplete&&r.push("nodata"===D?()=>e[d].onComplete(null,!1,e[d].currentInputSnapshot):()=>e[d].onComplete(new Error(D),!1,null)))}US(n,n.transactionQueueTree_);for(let d=0;d<r.length;d++)D_(r[d]);BS(n,n.transactionQueueTree_)}(n,gW(n,t),r),r}function pW(n,e){let t,r=n.transactionQueueTree_;for(t=Lt(e);null!==t&&void 0===bp(r);)r=NS(r,t),t=Lt(e=wn(e));return r}function gW(n,e){const t=[];return mW(n,e,t),t.sort((r,i)=>r.order-i.order),t}function mW(n,e,t){const r=bp(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);PS(e,i=>{mW(n,i,t)})}function US(n,e){const t=bp(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,pL(e,t.length>0?t:void 0)}PS(e,r=>{US(n,r)})}function EL(n,e){const t=MC(pW(n,e)),r=NS(n.transactionQueueTree_,e);return function qre(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{DL(n,i)}),DL(n,r),rW(r,i=>{DL(n,i)}),t}function DL(n,e){const t=bp(e);if(t){const r=[];let i=[],s=-1;for(let l=0;l<t.length;l++)3===t[l].status||(1===t[l].status?((0,k.hu)(s===l-1,"All SENT items should be at beginning of queue."),s=l,t[l].status=3,t[l].abortReason="set"):((0,k.hu)(0===t[l].status,"Unexpected transaction status in abort"),t[l].unwatcher(),i=i.concat(Cd(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&r.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));-1===s?pL(e,void 0):t.length=s+1,Wo(n.eventQueue_,MC(e),i);for(let l=0;l<r.length;l++)D_(r[l])}}const TL=function(n,e){const t=yie(n),r=t.namespace;return"firebase.com"===t.domain&&Ol(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Ol("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&os("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new D1(t.host,t.secure,r,e,"ws"===t.scheme||"wss"===t.scheme,"",r!==t.subdomain),path:new hn(t.pathString)}},yie=function(n){let e="",t="",r="",i="",s="",l=!0,d="https",p=443;if("string"==typeof n){let y=n.indexOf("//");y>=0&&(d=n.substring(0,y-1),n=n.substring(y+2));let C=n.indexOf("/");-1===C&&(C=n.length);let D=n.indexOf("?");-1===D&&(D=n.length),e=n.substring(0,Math.min(C,D)),C<D&&(i=function mie(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(s){}e+="/"+i}return e}(n.substring(C,D)));const M=function _ie(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):os(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,D)));y=e.indexOf(":"),y>=0?(l="https"===d||"wss"===d,p=parseInt(e.substring(y+1),10)):y=e.length;const R=e.slice(0,y);if("localhost"===R.toLowerCase())t="localhost";else if(R.split(".").length<=2)t=R;else{const N=e.indexOf(".");r=e.substring(0,N).toLowerCase(),t=e.substring(N+1),s=r}"ns"in M&&(s=M.ns)}return{host:e,port:p,domain:t,subdomain:r,secure:l,scheme:d,pathString:i,namespace:s}};class _W{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,k.Pz)(this.snapshot.exportVal())}}class yW{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class vW{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,k.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class bW{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new k.BH;return lie(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){qo("OnDisconnect.remove",this._path);const e=new k.BH;return hW(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){qo("OnDisconnect.set",this._path),Fl("OnDisconnect.set",e,this._path,!1);const t=new k.BH;return hW(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){qo("OnDisconnect.setWithPriority",this._path),Fl("OnDisconnect.setWithPriority",e,this._path,!1),_L("OnDisconnect.setWithPriority",t,!1);const r=new k.BH;return function cie(n,e,t,r,i){const s=Kn(t,r);n.server_.onDisconnectPut(e.toString(),s.val(!0),(l,d)=>{"ok"===l&&x_(n.onDisconnect_,e,s),Ed(0,i,l,d)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){qo("OnDisconnect.update",this._path),sW("OnDisconnect.update",e,this._path,!1);const t=new k.BH;return function uie(n,e,t,r){if((0,k.xb)(t))return ni("onDisconnect().update() called with empty data.  Don't do anything."),void Ed(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,s)=>{"ok"===i&&ri(t,(l,d)=>{const p=Kn(d);x_(n.onDisconnect_,Gn(e,l),p)}),Ed(0,r,i,s)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class Es{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return Vt(this._path)?null:R1(this._path)}get ref(){return new Zo(this._repo,this._path)}get _queryIdentifier(){const e=Tq(this._queryParams),t=w1(e);return"{}"===t?"default":t}get _queryObject(){return Tq(this._queryParams)}isEqual(e){if(!((e=(0,k.m9)(e))instanceof Es))return!1;const t=this._repo===e._repo,r=k1(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function ane(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function jS(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Dd(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Pl){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Yc)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==Nl)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===xn){if(null!=e&&!xC(e)||null!=t&&!xC(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,k.hu)(n.getIndex()instanceof L1||n.getIndex()===V1,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function HS(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Zo extends Es{constructor(e,t){super(e,t,new _S,!1)}get parent(){const e=cq(this._path);return null===e?null:new Zo(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class wp{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new hn(e),r=Cp(this.ref,e);return new wp(this._node.getChild(t),r,xn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new wp(i,Cp(this.ref,r),xn)))}hasChild(e){const t=new hn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function wW(n,e){return(n=(0,k.m9)(n))._checkNotDeleted("ref"),void 0!==e?Cp(n._root,e):n._root}function CW(n,e){(n=(0,k.m9)(n))._checkNotDeleted("refFromURL");const t=TL(e,n._repo.repoInfo_.nodeAdmin);oW("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&Ol("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),wW(n,t.path.toString())}function Cp(n,e){return null===Lt((n=(0,k.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),OC("child","path",t,!1)):OC("child","path",e,!1),new Zo(n._repo,Gn(n._path,e));var t}function IL(n,e){n=(0,k.m9)(n),qo("set",n._path),Fl("set",e,n._path,!1);const t=new k.BH;return bL(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function Eie(n,e){sW("update",e,n._path,!1);const t=new k.BH;return function oie(n,e,t,r){N_(n,"update",{path:e.toString(),value:t});let i=!0;const s=NC(n),l={};if(ri(t,(d,p)=>{i=!1,l[d]=tW(Gn(e,d),Kn(p),n.serverSyncTree_,s)}),i)ni("update() called with empty data.  Don't do anything."),Ed(0,r,"ok",void 0);else{const d=VS(n),p=function Rre(n,e,t,r){!function Zne(n,e,t,r){(0,k.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=K1(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=Rn.fromObject(t);return O_(n,new R_({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,l,d);LS(n.eventQueue_,p),n.server_.merge(e.toString(),t,(y,C)=>{const D="ok"===y;D||os("update at "+e+" failed: "+y);const M=Cd(n.serverSyncTree_,d,!D),R=M.length>0?P_(n,e):e;Wo(n.eventQueue_,R,M),Ed(0,r,y,C)}),ri(t,y=>{const C=EL(n,Gn(e,y));P_(n,C)}),Wo(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function Die(n){return function sie(n,e){const t=function Lre(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(y,C)=>{const D=as(y,t);r=r||bd(C,D)});let i=n.syncPointTree_.get(t);i?r=r||bd(i,on()):(i=new $q,n.syncPointTree_=n.syncPointTree_.set(t,i));const s=null!=r,l=s?new yd(r,!0,!1):null;return function vre(n){return ES(n.viewCache_)}(zq(i,e,DS(n.pendingWriteTree_,e._path),s?l.getNode():At.EMPTY_NODE,s))}(n.serverSyncTree_,e);return null!=t?Promise.resolve(t):n.server_.get(e).then(r=>{const i=Kn(r).withIndex(e._queryParams.getIndex()),s=SC(n.serverSyncTree_,e._path,i);return yL(n.eventQueue_,e._path,s),Promise.resolve(i)},r=>(N_(n,"get for query "+(0,k.Pz)(e)+" failed: "+r),Promise.reject(new Error(r))))}((n=(0,k.m9)(n))._repo,n).then(e=>new wp(e,new Zo(n._repo,n._path),n._queryParams.getIndex()))}class GS{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new _W("value",this,new wp(e.snapshotNode,new Zo(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new yW(this,e,t):null}matches(e){return e instanceof GS&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class $S{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new yW(this,e,t):null}createEvent(e,t){(0,k.hu)(null!=e.childName,"Child events should have a childName.");const r=Cp(new Zo(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new _W(e.type,this,new wp(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof $S&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function PC(n,e,t,r,i){let s;if("object"==typeof r&&(s=void 0,i=r),"function"==typeof r&&(s=r),i&&i.onlyOnce){const p=t,y=(C,D)=>{wL(n._repo,n,d),p(C,D)};y.userCallback=t.userCallback,y.context=t.context,t=y}const l=new vW(t,s||void 0),d="value"===e?new GS(l):new $S(e,l);return function die(n,e,t){let r;r=".info"===Lt(e._path)?Yq(n.infoSyncTree_,e,t):Yq(n.serverSyncTree_,e,t),yL(n.eventQueue_,e._path,r)}(n._repo,n,d),()=>wL(n._repo,n,d)}function SL(n,e,t,r){return PC(n,"value",e,t,r)}function EW(n,e,t,r){return PC(n,"child_added",e,t,r)}function DW(n,e,t,r){return PC(n,"child_changed",e,t,r)}function TW(n,e,t,r){return PC(n,"child_moved",e,t,r)}function IW(n,e,t,r){return PC(n,"child_removed",e,t,r)}function SW(n,e,t){let r=null;const i=t?new vW(t):null;"value"===e?r=new GS(i):e&&(r=new $S(e,i)),wL(n._repo,n,r)}class Na{}class AW extends Na{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Fl("endAt",this._value,e._path,!0);const t=H1(e._queryParams,this._value,this._key);if(HS(t),Dd(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Es(e._repo,e._path,t,e._orderByCalled)}}class Iie extends Na{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Fl("endBefore",this._value,e._path,!1);const t=function Pne(n,e,t){let r,i;return n.index_===Pl?("string"==typeof e&&(e=Cq(e)),i=H1(n,e,t)):(r=null==t?Yc:Cq(t),i=H1(n,e,r)),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(HS(t),Dd(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Es(e._repo,e._path,t,e._orderByCalled)}}class MW extends Na{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Fl("startAt",this._value,e._path,!0);const t=j1(e._queryParams,this._value,this._key);if(HS(t),Dd(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Es(e._repo,e._path,t,e._orderByCalled)}}class Mie extends Na{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Fl("startAfter",this._value,e._path,!1);const t=function Nne(n,e,t){let r;if(n.index_===Pl)"string"==typeof e&&(e=wq(e)),r=j1(n,e,t);else{let i;i=null==t?Nl:wq(t),r=j1(n,e,i)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(HS(t),Dd(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Es(e._repo,e._path,t,e._orderByCalled)}}class Rie extends Na{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Es(e._repo,e._path,function kne(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class Oie extends Na{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Es(e._repo,e._path,function One(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class Pie extends Na{constructor(e){super(),this._path=e}_apply(e){jS(e,"orderByChild");const t=new hn(this._path);if(Vt(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new L1(t),i=yS(e._queryParams,r);return Dd(i),new Es(e._repo,e._path,i,!0)}}class Lie extends Na{_apply(e){jS(e,"orderByKey");const t=yS(e._queryParams,Pl);return Dd(t),new Es(e._repo,e._path,t,!0)}}class Bie extends Na{_apply(e){jS(e,"orderByPriority");const t=yS(e._queryParams,xn);return Dd(t),new Es(e._repo,e._path,t,!0)}}class jie extends Na{_apply(e){jS(e,"orderByValue");const t=yS(e._queryParams,V1);return Dd(t),new Es(e._repo,e._path,t,!0)}}class Gie extends Na{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Fl("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new AW(this._value,this._key)._apply(new MW(this._value,this._key)._apply(e))}}function Pa(n,...e){let t=(0,k.m9)(n);for(const r of e)t=r._apply(t);return t}(function Ere(n){(0,k.hu)(!AS,"__referenceConstructor has already been defined"),AS=n})(Zo),function Are(n){(0,k.hu)(!xS,"__referenceConstructor has already been defined"),xS=n}(Zo);const AL={};function RW(n,e,t,r,i){let s=r||n.options.databaseURL;void 0===s&&(n.options.projectId||Ol("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ni("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let p,y,l=TL(s,i),d=l.repoInfo;"undefined"!=typeof process&&(y=process.env.FIREBASE_DATABASE_EMULATOR_HOST),y?(p=!0,s=`http://${y}?ns=${d.namespace}`,l=TL(s,i),d=l.repoInfo):p=!l.repoInfo.secure;const C=i&&p?new fC(fC.OWNER):new Pte(n.name,n.options,e);oW("Invalid Firebase Database URL",l),Vt(l.path)||Ol("Database URL must point to the root of a Firebase Database (not including a child path).");const D=function Zie(n,e,t,r){let i=AL[e.name];i||(i={},AL[e.name]=i);let s=i[n.toURLString()];return s&&Ol("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new nie(n,false,t,r),i[n.toURLString()]=s,s}(d,n,C,new Nte(n.name,t));return new Yie(D,n)}class Yie{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function rie(n,e,t){if(n.stats_=S1(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new vS(n.repoInfo_,(r,i,s,l)=>{uW(n,r,i,s,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>dW(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,k.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new mp(n.repoInfo_,e,(r,i,s,l)=>{uW(n,r,i,s,l)},r=>{dW(n,r)},r=>{!function iie(n,e){ri(e,(t,r)=>{vL(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function Bte(n,e){const t=n.toString();return I1[t]||(I1[t]=e()),I1[t]}(n.repoInfo_,()=>new jne(n.stats_,n.server_)),n.infoData_=new Fne,n.infoSyncTree_=new Kq({startListening:(r,i,s,l)=>{let d=[];const p=n.infoData_.getNode(r._path);return p.isEmpty()||(d=SC(n.infoSyncTree_,r._path,p),setTimeout(()=>{l("ok")},0)),d},stopListening:()=>{}}),vL(n,"connected",!1),n.serverSyncTree_=new Kq({startListening:(r,i,s,l)=>(n.server_.listen(r,s,i,(d,p)=>{const y=l(d,p);Wo(n.eventQueue_,r._path,y)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Zo(this._repo,on())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function Wie(n,e){const t=AL[e];(!t||t[n.key]!==n)&&Ol(`Database ${e}(${n.repoInfo_}) has already been deleted.`),fW(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Ol("Cannot call "+e+" on a deleted database.")}}function ese(n,e){Oz(n,e)}const nse={".sv":"timestamp"};class sse{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}mp.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},mp.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function tse(n){Az(zt.SDK_VERSION),(0,zt._registerComponent)(new qr.wA("database",(e,{instanceIdentifier:t})=>RW(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,zt.registerVersion)(Iz,"0.12.7",n),(0,zt.registerVersion)(Iz,"0.12.7","esm2017")}();const cse=new vs.Yd("@firebase/database-compat"),kW=function(n){cse.warn("FIREBASE WARNING: "+n)};class hse{constructor(e){this._delegate=e}cancel(e){(0,k.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,k.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,k.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,k.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,k.Dv)("OnDisconnect.set",1,2,arguments.length),(0,k.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,k.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,k.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),s=>r(s)),i}update(e,t){if((0,k.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,kW("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,k.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class fse{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,k.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Td{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,k.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,k.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,k.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,k.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,k.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),OC("DataSnapshot.child","path",e,!1),new Td(this._database,this._delegate.child(e))}hasChild(e){return(0,k.Dv)("DataSnapshot.hasChild",1,1,arguments.length),OC("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,k.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,k.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,k.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Td(this._database,t)))}hasChildren(){return(0,k.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,k.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,k.Dv)("DataSnapshot.ref",0,0,arguments.length),new so(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Ti{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var s;(0,k.Dv)("Query.on",2,4,arguments.length),(0,k.Wj)("Query.on","callback",t,!1);const l=Ti.getCancelAndContextArgs_("Query.on",r,i),d=(y,C)=>{t.call(l.context,new Td(this.database,y),C)};d.userCallback=t,d.context=l.context;const p=null===(s=l.cancel)||void 0===s?void 0:s.bind(l.context);switch(e){case"value":return SL(this._delegate,d,p),t;case"child_added":return EW(this._delegate,d,p),t;case"child_removed":return IW(this._delegate,d,p),t;case"child_changed":return DW(this._delegate,d,p),t;case"child_moved":return TW(this._delegate,d,p),t;default:throw new Error((0,k.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,k.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,k.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,k.Wj)("Query.off","callback",t,!0),(0,k.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,SW(this._delegate,e,i)}else SW(this._delegate,e)}get(){return Die(this._delegate).then(e=>new Td(this.database,e))}once(e,t,r,i){(0,k.Dv)("Query.once",1,4,arguments.length),(0,k.Wj)("Query.once","callback",t,!0);const s=Ti.getCancelAndContextArgs_("Query.once",r,i),l=new k.BH,d=(y,C)=>{const D=new Td(this.database,y);t&&t.call(s.context,D,C),l.resolve(D)};d.userCallback=t,d.context=s.context;const p=y=>{s.cancel&&s.cancel.call(s.context,y),l.reject(y)};switch(e){case"value":SL(this._delegate,d,p,{onlyOnce:!0});break;case"child_added":EW(this._delegate,d,p,{onlyOnce:!0});break;case"child_removed":IW(this._delegate,d,p,{onlyOnce:!0});break;case"child_changed":DW(this._delegate,d,p,{onlyOnce:!0});break;case"child_moved":TW(this._delegate,d,p,{onlyOnce:!0});break;default:throw new Error((0,k.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return l.promise}limitToFirst(e){return(0,k.Dv)("Query.limitToFirst",1,1,arguments.length),new Ti(this.database,Pa(this._delegate,function kie(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Rie(n)}(e)))}limitToLast(e){return(0,k.Dv)("Query.limitToLast",1,1,arguments.length),new Ti(this.database,Pa(this._delegate,function Nie(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Oie(n)}(e)))}orderByChild(e){return(0,k.Dv)("Query.orderByChild",1,1,arguments.length),new Ti(this.database,Pa(this._delegate,function Fie(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return OC("orderByChild","path",n,!1),new Pie(n)}(e)))}orderByKey(){return(0,k.Dv)("Query.orderByKey",0,0,arguments.length),new Ti(this.database,Pa(this._delegate,function Vie(){return new Lie}()))}orderByPriority(){return(0,k.Dv)("Query.orderByPriority",0,0,arguments.length),new Ti(this.database,Pa(this._delegate,function Uie(){return new Bie}()))}orderByValue(){return(0,k.Dv)("Query.orderByValue",0,0,arguments.length),new Ti(this.database,Pa(this._delegate,function Hie(){return new jie}()))}startAt(e=null,t){return(0,k.Dv)("Query.startAt",0,2,arguments.length),new Ti(this.database,Pa(this._delegate,function Aie(n=null,e){return kC("startAt","key",e,!0),new MW(n,e)}(e,t)))}startAfter(e=null,t){return(0,k.Dv)("Query.startAfter",0,2,arguments.length),new Ti(this.database,Pa(this._delegate,function xie(n,e){return kC("startAfter","key",e,!0),new Mie(n,e)}(e,t)))}endAt(e=null,t){return(0,k.Dv)("Query.endAt",0,2,arguments.length),new Ti(this.database,Pa(this._delegate,function Tie(n,e){return kC("endAt","key",e,!0),new AW(n,e)}(e,t)))}endBefore(e=null,t){return(0,k.Dv)("Query.endBefore",0,2,arguments.length),new Ti(this.database,Pa(this._delegate,function Sie(n,e){return kC("endBefore","key",e,!0),new Iie(n,e)}(e,t)))}equalTo(e,t){return(0,k.Dv)("Query.equalTo",1,2,arguments.length),new Ti(this.database,Pa(this._delegate,function $ie(n,e){return kC("equalTo","key",e,!0),new Gie(n,e)}(e,t)))}toString(){return(0,k.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,k.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,k.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof Ti))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,k.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,k.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,k.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new so(this.database,new Zo(this._delegate._repo,this._delegate._path))}}class so extends Ti{constructor(e,t){super(e,new Es(t._repo,t._path,new _S,!1)),this.database=e,this._delegate=t}getKey(){return(0,k.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,k.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new so(this.database,Cp(this._delegate,e))}getParent(){(0,k.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new so(this.database,e):null}getRoot(){return(0,k.Dv)("Reference.root",0,0,arguments.length),new so(this.database,this._delegate.root)}set(e,t){(0,k.Dv)("Reference.set",1,2,arguments.length),(0,k.Wj)("Reference.set","onComplete",t,!0);const r=IL(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,k.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,kW("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}qo("Reference.update",this._delegate._path),(0,k.Wj)("Reference.update","onComplete",t,!0);const r=Eie(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,k.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,k.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function Cie(n,e,t){if(qo("setWithPriority",n._path),Fl("setWithPriority",e,n._path,!1),_L("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new k.BH;return bL(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),s=>r(s)),i}remove(e){(0,k.Dv)("Reference.remove",0,1,arguments.length),(0,k.Wj)("Reference.remove","onComplete",e,!0);const t=function bie(n){return qo("remove",n._path),IL(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,k.Dv)("Reference.transaction",1,3,arguments.length),(0,k.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,k.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,k.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function ose(n,e,t){var r;if(n=(0,k.m9)(n),qo("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=null==t?void 0:t.applyLocally)||void 0===r||r,s=new k.BH,d=SL(n,()=>{});return function fie(n,e,t,r,i,s){N_(n,"transaction on "+e);const l={path:e,update:t,onComplete:r,status:null,order:xz(),applyLocally:s,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},d=CL(n,e,void 0);l.currentInputSnapshot=d;const p=l.update(d.val());if(void 0===p)l.unwatcher(),l.currentOutputSnapshotRaw=null,l.currentOutputSnapshotResolved=null,l.onComplete&&l.onComplete(null,!1,l.currentInputSnapshot);else{RC("transaction failed: Data returned ",p,l.path),l.status=0;const y=NS(n.transactionQueueTree_,e),C=bp(y)||[];let D;C.push(l),pL(y,C),"object"==typeof p&&null!==p&&(0,k.r3)(p,".priority")?(D=(0,k.DV)(p,".priority"),(0,k.hu)(xC(D),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):D=(RS(n.serverSyncTree_,e)||At.EMPTY_NODE).getPriority().val();const M=NC(n),R=Kn(p,D),N=dL(R,d,M);l.currentOutputSnapshotRaw=R,l.currentOutputSnapshotResolved=N,l.currentWriteId=VS(n);const j=iL(n.serverSyncTree_,e,N,l.currentWriteId,l.applyLocally);Wo(n.eventQueue_,e,j),BS(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(p,y,C)=>{let D=null;p?s.reject(p):(D=new wp(C,new Zo(n._repo,n._path),xn),s.resolve(new sse(y,D)))},d,i),s.promise}(this._delegate,e,{applyLocally:r}).then(s=>new fse(s.committed,new Td(this.database,s.snapshot)));return t&&i.then(s=>t(null,s.committed,s.snapshot),s=>t(s,!1,null)),i}setPriority(e,t){(0,k.Dv)("Reference.setPriority",1,2,arguments.length),(0,k.Wj)("Reference.setPriority","onComplete",t,!0);const r=function wie(n,e){n=(0,k.m9)(n),qo("setPriority",n._path),_L("setPriority",e,!1);const t=new k.BH;return bL(n._repo,Gn(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,k.Dv)("Reference.push",0,2,arguments.length),(0,k.Wj)("Reference.push","onComplete",t,!0);const r=function vie(n,e){n=(0,k.m9)(n),qo("push",n._path),Fl("push",e,n._path,!0);const t=cW(n._repo),r=Ane(t),i=Cp(n,r),s=Cp(n,r);let l;return l=null!=e?IL(s,e).then(()=>s):Promise.resolve(s),i.then=l.then.bind(l),i.catch=l.then.bind(l,void 0),i}(this._delegate,e),i=r.then(l=>new so(this.database,l));t&&i.then(()=>t(null),l=>t(l));const s=new so(this.database,r);return s.then=i.then.bind(i),s.catch=i.catch.bind(i,void 0),s}onDisconnect(){return qo("Reference.onDisconnect",this._delegate._path),new hse(new bW(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class FC{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete()}}useEmulator(e,t,r={}){!function Qie(n,e,t,r={}){(n=(0,k.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Ol("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Ol('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new fC(fC.OWNER);else if(r.mockUserToken){const l="string"==typeof r.mockUserToken?r.mockUserToken:(0,k.Sg)(r.mockUserToken,n.app.options.projectId);s=new fC(l)}!function qie(n,e,t,r){n.repoInfo_=new D1(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,s)}(this._delegate,e,t,r)}ref(e){if((0,k.Dv)("database.ref",0,1,arguments.length),e instanceof so){const t=CW(this._delegate,e.toString());return new so(this,t)}{const t=wW(this._delegate,e);return new so(this,t)}}refFromURL(e){(0,k.Dv)("database.refFromURL",1,1,arguments.length);const r=CW(this._delegate,e);return new so(this,r)}goOffline(){return(0,k.Dv)("database.goOffline",0,0,arguments.length),function Jie(n){(n=(0,k.m9)(n))._checkNotDeleted("goOffline"),fW(n._repo)}(this._delegate)}goOnline(){return(0,k.Dv)("database.goOnline",0,0,arguments.length),function Xie(n){(n=(0,k.m9)(n))._checkNotDeleted("goOnline"),function hie(n){n.persistentConnection_&&n.persistentConnection_.resume(lW)}(n._repo)}(this._delegate)}}FC.ServerValue={TIMESTAMP:function rse(){return nse}(),increment:n=>function ise(n){return{".sv":{increment:n}}}(n)};var gse=Object.freeze({__proto__:null,initStandalone:function pse({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:s=!1}){Az(t);const l=new qr.zt("auth-internal",new qr.H0("database-standalone"));return l.setComponent(new qr.wA("auth-internal",()=>r,"PRIVATE")),{instance:new FC(RW(n,l,void 0,e,s),n),namespace:i}}});const mse=FC.ServerValue;function OW(n){return null==n}function NW(n){return"function"==typeof n.set}function PW(n,e){return NW(e)?e:n.ref(e)}function FW(n,e){if(function yse(n){return"string"==typeof n}(n))return e.stringCase();if(NW(n))return e.firebaseCase();if(function vse(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function LC(n,e,t="on",r=vc){return new Vn.y(i=>{let s=null;return s=n[t](e,(l,d)=>{r.schedule(()=>{i.next({snapshot:l,prevKey:d})}),"once"===t&&r.schedule(()=>i.complete())},l=>{r.schedule(()=>i.error(l))}),"on"===t?{unsubscribe(){null!=s&&n.off(e,s)}}:{unsubscribe(){}}}).pipe((0,st.U)(i=>{const{snapshot:s,prevKey:l}=i;let d=null;return s.exists()&&(d=s.key),{type:e,payload:s,prevKey:l,key:d}}),(0,tk.B)())}function LW(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function Cse(n,e){const{payload:t,prevKey:r,key:i}=e,s=LW(n,i),l=function wse(n,e){if(OW(e))return 0;{const t=LW(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let d=null;e.payload.forEach(p=>{const y={payload:p,type:"value",prevKey:d,key:p.key};return d=p.key,n=[...n,y],!1})}return n;case"child_added":if(s>-1){const d=n[s-1];(d&&d.key||null)!==r&&(n=n.filter(p=>p.payload.key!==t.key)).splice(l,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(l,0,e)}return n;case"child_removed":return n.filter(d=>d.payload.key!==t.key);case"child_changed":return n.map(d=>d.payload.key===i?e:d);case"child_moved":if(s>-1){const d=n.splice(s,1)[0];return(n=n.slice()).splice(l,0,d),n}return n;default:return n}}function VW(n){return(OW(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function BW(n,e,t){return function bse(n,e,t){return LC(n,"value","once",t).pipe(Nn(r=>{const i=[Ke(r)];return e.forEach(s=>i.push(LC(n,s,"on",t))),(0,Hu.T)(...i).pipe(Rr(Cse,[]))}),Ug())}(n,e=VW(e),t)}function UW(n,e,t){const r=(e=VW(e)).map(i=>LC(n,i,"on",t));return(0,Hu.T)(...r)}function jW(n,e){return function(r,i){return FW(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function Ise(n){return function(t){return t?FW(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function HW(n,e){return function(){return LC(n,"value","on",e)}}!function _se(n){n.INTERNAL.registerComponent(new qr.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new FC(i,r)},"PUBLIC").setServiceProps({Reference:so,Query:Ti,Database:FC,DataSnapshot:Td,enableLogging:ese,INTERNAL:gse,ServerValue:mse}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.1.7")}(sN.Z);const Mse=new u.OlP("angularfire2.realtimeDatabaseURL"),xse=new u.OlP("angularfire2.database.use-emulator");let Rse=(()=>{class n{constructor(t,r,i,s,l,d,p,y,C,D,M,R,N,j,Q){this.schedulers=d;const Te=p,be=(0,Wr.on)(t,l,r);y&&iN(be,l,C,M,R,N,D,j),this.database=(0,Wr.cc)(`${be.name}.database.${i}`,"AngularFireDatabase",be.name,()=>{const He=l.runOutsideAngular(()=>be.database(i||void 0));return Te&&He.useEmulator(...Te),He},[Te])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>PW(this.database,t));let s=i;return r&&(s=r(i)),function Sse(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:jW(r,"update"),set:jW(r,"set"),push:i=>r.push(i),remove:Ise(r),snapshotChanges:i=>BW(n,i,t).pipe(sr),stateChanges:i=>UW(n,i,t).pipe(sr),auditTrail:i=>function Ese(n,e,t){return function Tse(n,e,t){return function Dse(n,e){return LC(n,"value","on",e).pipe((0,st.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function Cte(...n){const e=(0,Ps.jO)(n);return(0,Bn.e)((t,r)=>{const i=n.length,s=new Array(i);let l=n.map(()=>!1),d=!1;for(let p=0;p<i;p++)(0,fs.Xf)(n[p]).subscribe((0,an.x)(r,y=>{s[p]=y,!d&&!l[p]&&(l[p]=!0,(d=l.every(Mi.y))&&(l=null))},ov.Z));t.subscribe((0,an.x)(r,p=>{if(d){const y=[p,...s];r.next(e?e(...y):y)}}))})}(e),(0,st.U)(([i,s])=>{const l=i.lastKeyToLoad,d=s.map(p=>p.key);return{actions:s,lastKeyToLoad:l,loadedKeys:d}}),function Ete(n){return(0,Bn.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,an.x)(t,s=>(r||(r=!n(s,i++)))&&t.next(s)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,st.U)(i=>i.actions))}(n,UW(n,e).pipe(Rr((i,s)=>[...i,s],[])),t)}(n,i,t).pipe(sr),valueChanges:(i,s)=>BW(n,i,t).pipe((0,st.U)(d=>d.map(p=>s&&s.idField?Object.assign(Object.assign({},p.payload.val()),{[s.idField]:p.key}):p.payload.val())),sr)}}(s,this)}object(t){return function Ase(n,e){return{query:n,snapshotChanges:()=>HW(n,e.schedulers.outsideAngular)().pipe(sr),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>HW(n,e.schedulers.outsideAngular)().pipe(sr,(0,st.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>PW(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Wr.Dh),u.LFG(Wr.xv,8),u.LFG(Mse,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(RT),u.LFG(xse,8),u.LFG(jT,8),u.LFG(JO,8),u.LFG(XO,8),u.LFG(eN,8),u.LFG(tN,8),u.LFG(nN,8),u.LFG(rN,8),u.LFG(nw,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),kse=(()=>{class n{constructor(){UT.Z.registerVersion("angularfire",xT.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[Rse]}),n})(),Ose=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n,bootstrap:[fZ]}),n.\u0275inj=u.cJS({providers:[],imports:[[lu,u0,Rx,E0,j4,$4,Em,i4,vZ,u4,Q6,xB,IZ,hY,wte,tQ,kse]]}),n})();(0,u.G48)(),U_().bootstrapModule(Ose).catch(n=>console.error(n))},127:(at,De,F)=>{F.d(De,{Z:()=>u.Z});var u=F(3942);u.Z.registerVersion("firebase","9.6.10","app-compat")},4087:(at,De,F)=>{F.r(De);var u=F(5861),X=F(3942),V=F(2090),fe=F(9681),_e=F(655),we=F(1877),ue=F(4859);const Fe=function $e(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Oe=function xe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},te=new V.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),We=new we.Yd("@firebase/auth");function Je(v,...g){We.logLevel<=we.in.ERROR&&We.error(`Auth (${fe.SDK_VERSION}): ${v}`,...g)}function Ee(v,...g){throw Ge(v,...g)}function he(v,...g){return Ge(v,...g)}function pe(v,g,_){const w=Object.assign(Object.assign({},Oe()),{[g]:_});return new V.LL("auth","Firebase",w).create(g,{appName:v.name})}function Ve(v,g,_){if(!(g instanceof _))throw _.name!==g.constructor.name&&Ee(v,"argument-error"),pe(v,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ge(v,...g){if("string"!=typeof v){const _=g[0],w=[...g.slice(1)];return w[0]&&(w[0].appName=v.name),v._errorFactory.create(_,...w)}return te.create(v,...g)}function ee(v,g,..._){if(!v)throw Ge(g,..._)}function K(v){const g="INTERNAL ASSERTION FAILED: "+v;throw Je(g),new Error(g)}function re(v,g){v||K(g)}const ce=new Map;function ie(v){re(v instanceof Function,"Expected a class definition");let g=ce.get(v);return g?(re(g instanceof v,"Instance stored in cache mismatched with class"),g):(g=new v,ce.set(v,g),g)}function bt(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function Kt(){return"http:"===Qn()||"https:"===Qn()}function Qn(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class Cn{constructor(g,_){this.shortDelay=g,this.longDelay=_,re(_>g,"Short delay should be less than long delay!"),this.isMobile=(0,V.uI)()||(0,V.b$)()}get(){return function rt(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Kt()||(0,V.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function En(v,g){re(v.emulator,"Emulator should always be set here");const{url:_}=v.emulator;return g?`${_}${g.startsWith("/")?g.slice(1):g}`:_}class cs{static initialize(g,_,w){this.fetchImpl=g,_&&(this.headersImpl=_),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void K("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void K("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void K("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const en={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},us=new Cn(3e4,6e4);function tn(v,g){return v.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:v.tenantId}):g}function Nt(v,g,_,w){return ds.apply(this,arguments)}function ds(){return(ds=(0,u.Z)(function*(v,g,_,w,S={}){return Ii(v,S,(0,u.Z)(function*(){let O={},z={};w&&("GET"===g?z=w:O={body:JSON.stringify(w)});const ne=(0,V.xO)(Object.assign({key:v.config.apiKey},z)).slice(1),Pe=yield v._getAdditionalHeaders();return Pe["Content-Type"]="application/json",v.languageCode&&(Pe["X-Firebase-Locale"]=v.languageCode),cs.fetch()(ao(v,v.config.apiHost,_,ne),Object.assign({method:g,headers:Pe,referrerPolicy:"no-referrer"},O))}))})).apply(this,arguments)}function Ii(v,g,_){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,u.Z)(function*(v,g,_){v._canInitEmulator=!1;const w=Object.assign(Object.assign({},en),g);try{const S=new Qo(v),O=yield Promise.race([_(),S.promise]);S.clearNetworkTimeout();const z=yield O.json();if("needConfirmation"in z)throw lo(v,"account-exists-with-different-credential",z);if(O.ok&&!("errorMessage"in z))return z;{const ne=O.ok?z.errorMessage:z.error.message,[Pe,qe]=ne.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Pe)throw lo(v,"credential-already-in-use",z);if("EMAIL_EXISTS"===Pe)throw lo(v,"email-already-in-use",z);const dt=w[Pe]||Pe.toLowerCase().replace(/[_\s]+/g,"-");if(qe)throw pe(v,dt,qe);Ee(v,dt)}}catch(S){if(S instanceof V.ZR)throw S;Ee(v,"network-request-failed")}})).apply(this,arguments)}function Fr(v,g,_,w){return hs.apply(this,arguments)}function hs(){return(hs=(0,u.Z)(function*(v,g,_,w,S={}){const O=yield Nt(v,g,_,w,S);return"mfaPendingCredential"in O&&Ee(v,"multi-factor-auth-required",{_serverResponse:O}),O})).apply(this,arguments)}function ao(v,g,_,w){const S=`${g}${_}?${w}`;return v.config.emulator?En(v.config,S):`${v.config.apiScheme}://${S}`}class Qo{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((_,w)=>{this.timer=setTimeout(()=>w(he(this.auth,"network-request-failed")),us.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function lo(v,g,_){const w={appName:v.name};_.email&&(w.email=_.email),_.phoneNumber&&(w.phoneNumber=_.phoneNumber);const S=he(v,g,w);return S.customData._tokenResponse=_,S}function ji(){return(ji=(0,u.Z)(function*(v,g){return Nt(v,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function Cr(v,g){return cr.apply(this,arguments)}function cr(){return(cr=(0,u.Z)(function*(v,g){return Nt(v,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function co(v,g){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,u.Z)(function*(v,g){return Nt(v,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function vn(v){if(v)try{const g=new Date(Number(v));if(!isNaN(g.getTime()))return g.toUTCString()}catch(g){}}function La(){return(La=(0,u.Z)(function*(v,g=!1){const _=(0,V.m9)(v),w=yield _.getIdToken(g),S=nt(w);ee(S&&S.exp&&S.auth_time&&S.iat,_.auth,"internal-error");const O="object"==typeof S.firebase?S.firebase:void 0,z=null==O?void 0:O.sign_in_provider;return{claims:S,token:w,authTime:vn(Pt(S.auth_time)),issuedAtTime:vn(Pt(S.iat)),expirationTime:vn(Pt(S.exp)),signInProvider:z||null,signInSecondFactor:(null==O?void 0:O.sign_in_second_factor)||null}})).apply(this,arguments)}function Pt(v){return 1e3*Number(v)}function nt(v){const[g,_,w]=v.split(".");if(void 0===g||void 0===_||void 0===w)return Je("JWT malformed, contained fewer than 3 sections"),null;try{const S=(0,V.tV)(_);return S?JSON.parse(S):(Je("Failed to decode base64 JWT payload"),null)}catch(S){return Je("Caught error parsing JWT payload as JSON",S),null}}function Lr(v,g){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,u.Z)(function*(v,g,_=!1){if(_)return g;try{return yield g}catch(w){throw w instanceof V.ZR&&Bt(w)&&v.auth.currentUser===v&&(yield v.auth.signOut()),w}})).apply(this,arguments)}function Bt({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}class Jo{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var _;if(g){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const S=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,S)}}schedule(g=!1){var _=this;if(!this.isRunning)return;const w=this.getInterval(g);this.timerId=setTimeout((0,u.Z)(function*(){yield _.iteration()}),w)}iteration(){var g=this;return(0,u.Z)(function*(){try{yield g.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===_.code&&g.schedule(!0))}g.schedule()})()}}class Dr{constructor(g,_){this.createdAt=g,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=vn(this.lastLoginAt),this.creationTime=vn(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Vr(v){return lt.apply(this,arguments)}function lt(){return(lt=(0,u.Z)(function*(v){var g;const _=v.auth,w=yield v.getIdToken(),S=yield Lr(v,co(_,{idToken:w}));ee(null==S?void 0:S.users.length,_,"internal-error");const O=S.users[0];v._notifyReloadListener(O);const z=(null===(g=O.providerUserInfo)||void 0===g?void 0:g.length)?ve(O.providerUserInfo):[],ne=ze(v.providerData,z),dt=!!v.isAnonymous&&!(v.email&&O.passwordHash||(null==ne?void 0:ne.length)),et={uid:O.localId,displayName:O.displayName||null,photoURL:O.photoUrl||null,email:O.email||null,emailVerified:O.emailVerified||!1,phoneNumber:O.phoneNumber||null,tenantId:O.tenantId||null,providerData:ne,metadata:new Dr(O.createdAt,O.lastLoginAt),isAnonymous:dt};Object.assign(v,et)})).apply(this,arguments)}function Ft(){return(Ft=(0,u.Z)(function*(v){const g=(0,V.m9)(v);yield Vr(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function ze(v,g){return[...v.filter(w=>!g.some(S=>S.providerId===w.providerId)),...g]}function ve(v){return v.map(g=>{var{providerId:_}=g,w=(0,_e._T)(g,["providerId"]);return{providerId:_,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}function ct(){return(ct=(0,u.Z)(function*(v,g){const _=yield Ii(v,{},(0,u.Z)(function*(){const w=(0,V.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:S,apiKey:O}=v.config,z=ao(v,S,"/v1/token",`key=${O}`),ne=yield v._getAdditionalHeaders();return ne["Content-Type"]="application/x-www-form-urlencoded",cs.fetch()(z,{method:"POST",headers:ne,body:w})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class Ut{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){ee(g.idToken,"internal-error"),ee(void 0!==g.idToken,"internal-error"),ee(void 0!==g.refreshToken,"internal-error");const _="expiresIn"in g&&void 0!==g.expiresIn?Number(g.expiresIn):function yt(v){const g=nt(v);return ee(g,"internal-error"),ee(void 0!==g.exp,"internal-error"),ee(void 0!==g.iat,"internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,_)}getToken(g,_=!1){var w=this;return(0,u.Z)(function*(){return ee(!w.accessToken||w.refreshToken,g,"user-token-expired"),_||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(g,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,_){var w=this;return(0,u.Z)(function*(){const{accessToken:S,refreshToken:O,expiresIn:z}=yield function Ze(v,g){return ct.apply(this,arguments)}(g,_);w.updateTokensAndExpiration(S,O,Number(z))})()}updateTokensAndExpiration(g,_,w){this.refreshToken=_||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(g,_){const{refreshToken:w,accessToken:S,expirationTime:O}=_,z=new Ut;return w&&(ee("string"==typeof w,"internal-error",{appName:g}),z.refreshToken=w),S&&(ee("string"==typeof S,"internal-error",{appName:g}),z.accessToken=S),O&&(ee("number"==typeof O,"internal-error",{appName:g}),z.expirationTime=O),z}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new Ut,this.toJSON())}_performRefresh(){return K("not implemented")}}function Rt(v,g){ee("string"==typeof v||void 0===v,"internal-error",{appName:g})}class U{constructor(g){var{uid:_,auth:w,stsTokenManager:S}=g,O=(0,_e._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Jo(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=w,this.stsTokenManager=S,this.accessToken=S.accessToken,this.displayName=O.displayName||null,this.email=O.email||null,this.emailVerified=O.emailVerified||!1,this.phoneNumber=O.phoneNumber||null,this.photoURL=O.photoURL||null,this.isAnonymous=O.isAnonymous||!1,this.tenantId=O.tenantId||null,this.providerData=O.providerData?[...O.providerData]:[],this.metadata=new Dr(O.createdAt||void 0,O.lastLoginAt||void 0)}getIdToken(g){var _=this;return(0,u.Z)(function*(){const w=yield Lr(_,_.stsTokenManager.getToken(_.auth,g));return ee(w,_.auth,"internal-error"),_.accessToken!==w&&(_.accessToken=w,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),w})()}getIdTokenResult(g){return function Ds(v){return La.apply(this,arguments)}(this,g)}reload(){return function si(v){return Ft.apply(this,arguments)}(this)}_assign(g){this!==g&&(ee(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(_=>Object.assign({},_)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){return new U(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(g){ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,_=!1){var w=this;return(0,u.Z)(function*(){let S=!1;g.idToken&&g.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(g),S=!0),_&&(yield Vr(w)),yield w.auth._persistUserIfCurrent(w),S&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var g=this;return(0,u.Z)(function*(){const _=yield g.getIdToken();return yield Lr(g,function ft(v,g){return ji.apply(this,arguments)}(g.auth,{idToken:_})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,_){var w,S,O,z,ne,Pe,qe,dt;const et=null!==(w=_.displayName)&&void 0!==w?w:void 0,bn=null!==(S=_.email)&&void 0!==S?S:void 0,ki=null!==(O=_.phoneNumber)&&void 0!==O?O:void 0,mc=null!==(z=_.photoURL)&&void 0!==z?z:void 0,cl=null!==(ne=_.tenantId)&&void 0!==ne?ne:void 0,ul=null!==(Pe=_._redirectEventId)&&void 0!==Pe?Pe:void 0,kh=null!==(qe=_.createdAt)&&void 0!==qe?qe:void 0,Ey=null!==(dt=_.lastLoginAt)&&void 0!==dt?dt:void 0,{uid:Ao,emailVerified:xu,isAnonymous:Ru,providerData:Oh,stsTokenManager:ku}=_;ee(Ao&&ku,g,"internal-error");const fi=Ut.fromJSON(this.name,ku);ee("string"==typeof Ao,g,"internal-error"),Rt(et,g.name),Rt(bn,g.name),ee("boolean"==typeof xu,g,"internal-error"),ee("boolean"==typeof Ru,g,"internal-error"),Rt(ki,g.name),Rt(mc,g.name),Rt(cl,g.name),Rt(ul,g.name),Rt(kh,g.name),Rt(Ey,g.name);const Nh=new U({uid:Ao,auth:g,email:bn,emailVerified:xu,displayName:et,isAnonymous:Ru,photoURL:mc,phoneNumber:ki,tenantId:cl,stsTokenManager:fi,createdAt:kh,lastLoginAt:Ey});return Oh&&Array.isArray(Oh)&&(Nh.providerData=Oh.map(bg=>Object.assign({},bg))),ul&&(Nh._redirectEventId=ul),Nh}static _fromIdTokenResponse(g,_,w=!1){return(0,u.Z)(function*(){const S=new Ut;S.updateFromServerResponse(_);const O=new U({uid:_.localId,auth:g,stsTokenManager:S,isAnonymous:w});return yield Vr(O),O})()}}const $=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,u.Z)(function*(){return!0})()}_set(_,w){var S=this;return(0,u.Z)(function*(){S.storage[_]=w})()}_get(_){var w=this;return(0,u.Z)(function*(){const S=w.storage[_];return void 0===S?null:S})()}_remove(_){var w=this;return(0,u.Z)(function*(){delete w.storage[_]})()}_addListener(_,w){}_removeListener(_,w){}}return v.type="NONE",v})();function ae(v,g,_){return`firebase:${v}:${g}:${_}`}class Y{constructor(g,_,w){this.persistence=g,this.auth=_,this.userKey=w;const{config:S,name:O}=this.auth;this.fullUserKey=ae(this.userKey,S.apiKey,O),this.fullPersistenceKey=ae("persistence",S.apiKey,O),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,u.Z)(function*(){const _=yield g.persistence._get(g.fullUserKey);return _?U._fromJSON(g.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var _=this;return(0,u.Z)(function*(){if(_.persistence===g)return;const w=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=g,w?_.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,_,w="authUser"){return(0,u.Z)(function*(){if(!_.length)return new Y(ie($),g,w);const S=(yield Promise.all(_.map(function(){var qe=(0,u.Z)(function*(dt){if(yield dt._isAvailable())return dt});return function(dt){return qe.apply(this,arguments)}}()))).filter(qe=>qe);let O=S[0]||ie($);const z=ae(w,g.config.apiKey,g.name);let ne=null;for(const qe of _)try{const dt=yield qe._get(z);if(dt){const et=U._fromJSON(g,dt);qe!==O&&(ne=et),O=qe;break}}catch(dt){}const Pe=S.filter(qe=>qe._shouldAllowMigration);return O._shouldAllowMigration&&Pe.length?(O=Pe[0],ne&&(yield O._set(z,ne.toJSON())),yield Promise.all(_.map(function(){var qe=(0,u.Z)(function*(dt){if(dt!==O)try{yield dt._remove(z)}catch(et){}});return function(dt){return qe.apply(this,arguments)}}())),new Y(O,g,w)):new Y(O,g,w)})()}}function Be(v){const g=v.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(qt(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(gt(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(Mt(g))return"Blackberry";if(ln(g))return"Webos";if(Yt(g))return"Safari";if((g.includes("chrome/")||Tr(g))&&!g.includes("edge/"))return"Chrome";if(On(g))return"Android";{const w=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==w?void 0:w.length))return w[1]}return"Other"}function gt(v=(0,V.z$)()){return/firefox\//i.test(v)}function Yt(v=(0,V.z$)()){const g=v.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function Tr(v=(0,V.z$)()){return/crios\//i.test(v)}function qt(v=(0,V.z$)()){return/iemobile/i.test(v)}function On(v=(0,V.z$)()){return/android/i.test(v)}function Mt(v=(0,V.z$)()){return/blackberry/i.test(v)}function ln(v=(0,V.z$)()){return/webos/i.test(v)}function Jn(v=(0,V.z$)()){return/iphone|ipad|ipod/i.test(v)}function Is(v=(0,V.z$)()){return Jn(v)||On(v)||ln(v)||Mt(v)||/windows phone/i.test(v)||qt(v)}function Jc(v,g=[]){let _;switch(v){case"Browser":_=Be((0,V.z$)());break;case"Worker":_=`${Be((0,V.z$)())}-${v}`;break;default:_=v}const w=g.length?g.join(","):"FirebaseCore-web";return`${_}/JsCore/${fe.SDK_VERSION}/${w}`}class Si{constructor(g,_,w){this.app=g,this.heartbeatServiceProvider=_,this.config=w,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new It(this),this.idTokenSubscription=new It(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=te,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=w.sdkClientVersion}_initializeWithPersistence(g,_){var w=this;return _&&(this._popupRedirectResolver=ie(_)),this._initializationPromise=this.queue((0,u.Z)(function*(){var S,O;if(!w._deleted&&(w.persistenceManager=yield Y.create(w,g),!w._deleted)){if(null===(S=w._popupRedirectResolver)||void 0===S?void 0:S._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch(z){}yield w.initializeCurrentUser(_),w.lastNotifiedUid=(null===(O=w.currentUser)||void 0===O?void 0:O.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,u.Z)(function*(){if(g._deleted)return;const _=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||_){if(g.currentUser&&_&&g.currentUser.uid===_.uid)return g._currentUser._assign(_),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(_)}})()}initializeCurrentUser(g){var _=this;return(0,u.Z)(function*(){var w;let S=yield _.assertedPersistence.getCurrentUser();if(g&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const O=null===(w=_.redirectUser)||void 0===w?void 0:w._redirectEventId,z=null==S?void 0:S._redirectEventId,ne=yield _.tryRedirectSignIn(g);(!O||O===z)&&(null==ne?void 0:ne.user)&&(S=ne.user)}return S?S._redirectEventId?(ee(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===S._redirectEventId?_.directlySetCurrentUser(S):_.reloadAndSetCurrentUserOrClear(S)):_.reloadAndSetCurrentUserOrClear(S):_.directlySetCurrentUser(null)})()}tryRedirectSignIn(g){var _=this;return(0,u.Z)(function*(){let w=null;try{w=yield _._popupRedirectResolver._completeRedirectFn(_,g,!0)}catch(S){yield _._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(g){var _=this;return(0,u.Z)(function*(){try{yield Vr(g)}catch(w){if("auth/network-request-failed"!==w.code)return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function ht(){if("undefined"==typeof navigator)return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var g=this;return(0,u.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var _=this;return(0,u.Z)(function*(){const w=g?(0,V.m9)(g):null;return w&&ee(w.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(w&&w._clone(_))})()}_updateCurrentUser(g){var _=this;return(0,u.Z)(function*(){if(!_._deleted)return g&&ee(_.tenantId===g.tenantId,_,"tenant-id-mismatch"),_.queue((0,u.Z)(function*(){yield _.directlySetCurrentUser(g),_.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,u.Z)(function*(){return(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null)})()}setPersistence(g){var _=this;return this.queue((0,u.Z)(function*(){yield _.assertedPersistence.setPersistence(ie(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new V.LL("auth","Firebase",g())}onAuthStateChanged(g,_,w){return this.registerStateListener(this.authStateSubscription,g,_,w)}onIdTokenChanged(g,_,w){return this.registerStateListener(this.idTokenSubscription,g,_,w)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,_){var w=this;return(0,u.Z)(function*(){const S=yield w.getOrInitRedirectPersistenceManager(_);return null===g?S.removeCurrentUser():S.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var _=this;return(0,u.Z)(function*(){if(!_.redirectPersistenceManager){const w=g&&ie(g)||_._popupRedirectResolver;ee(w,_,"argument-error"),_.redirectPersistenceManager=yield Y.create(_,[ie(w._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(g){var _=this;return(0,u.Z)(function*(){var w,S;return _._isInitialized&&(yield _.queue((0,u.Z)(function*(){}))),(null===(w=_._currentUser)||void 0===w?void 0:w._redirectEventId)===g?_._currentUser:(null===(S=_.redirectUser)||void 0===S?void 0:S._redirectEventId)===g?_.redirectUser:null})()}_persistUserIfCurrent(g){var _=this;return(0,u.Z)(function*(){if(g===_.currentUser)return _.queue((0,u.Z)(function*(){return _.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(_=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,_,w,S){if(this._deleted)return()=>{};const O="function"==typeof _?_:_.next.bind(_),z=this._isInitialized?Promise.resolve():this._initializationPromise;return ee(z,this,"internal-error"),z.then(()=>O(this.currentUser)),"function"==typeof _?g.addObserver(_,w,S):g.addObserver(_)}directlySetCurrentUser(g){var _=this;return(0,u.Z)(function*(){_.currentUser&&_.currentUser!==g&&(_._currentUser._stopProactiveRefresh(),g&&_.isProactiveRefreshEnabled&&g._startProactiveRefresh()),_.currentUser=g,g?yield _.assertedPersistence.setCurrentUser(g):yield _.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=Jc(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,u.Z)(function*(){var _;const w={"X-Client-Version":g.clientVersion};g.app.options.appId&&(w["X-Firebase-gmpid"]=g.app.options.appId);const S=yield null===(_=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();return S&&(w["X-Firebase-Client"]=S),w})()}}function Ae(v){return(0,V.m9)(v)}class It{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,V.ne)(_=>this.observer=_)}get next(){return ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Br(v){const g=v.indexOf(":");return g<0?"":v.substr(0,g+1)}function $n(v){if(!v)return null;const g=Number(v);return isNaN(g)?null:g}class rn{constructor(g,_){this.providerId=g,this.signInMethod=_}toJSON(){return K("not implemented")}_getIdTokenResponse(g){return K("not implemented")}_linkToIdToken(g,_){return K("not implemented")}_getReauthenticationResolver(g){return K("not implemented")}}function ea(v,g){return uo.apply(this,arguments)}function uo(){return(uo=(0,u.Z)(function*(v,g){return Nt(v,"POST","/v1/accounts:resetPassword",tn(v,g))})).apply(this,arguments)}function Dt(v,g){return ta.apply(this,arguments)}function ta(){return(ta=(0,u.Z)(function*(v,g){return Nt(v,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Ba(v,g){return Ul.apply(this,arguments)}function Ul(){return(Ul=(0,u.Z)(function*(v,g){return Nt(v,"POST","/v1/accounts:update",tn(v,g))})).apply(this,arguments)}function dr(){return(dr=(0,u.Z)(function*(v,g){return Fr(v,"POST","/v1/accounts:signInWithPassword",tn(v,g))})).apply(this,arguments)}function As(v,g){return na.apply(this,arguments)}function na(){return(na=(0,u.Z)(function*(v,g){return Nt(v,"POST","/v1/accounts:sendOobCode",tn(v,g))})).apply(this,arguments)}function Ur(v,g){return sn.apply(this,arguments)}function sn(){return(sn=(0,u.Z)(function*(v,g){return As(v,g)})).apply(this,arguments)}function Ip(v,g){return jl.apply(this,arguments)}function jl(){return(jl=(0,u.Z)(function*(v,g){return As(v,g)})).apply(this,arguments)}function oi(v,g){return jr.apply(this,arguments)}function jr(){return(jr=(0,u.Z)(function*(v,g){return As(v,g)})).apply(this,arguments)}function Ad(v,g){return Hl.apply(this,arguments)}function Hl(){return(Hl=(0,u.Z)(function*(v,g){return As(v,g)})).apply(this,arguments)}function ai(){return(ai=(0,u.Z)(function*(v,g){return Fr(v,"POST","/v1/accounts:signInWithEmailLink",tn(v,g))})).apply(this,arguments)}function Sp(){return(Sp=(0,u.Z)(function*(v,g){return Fr(v,"POST","/v1/accounts:signInWithEmailLink",tn(v,g))})).apply(this,arguments)}class Xc extends rn{constructor(g,_,w,S=null){super("password",w),this._email=g,this._password=_,this._tenantId=S}static _fromEmailAndPassword(g,_){return new Xc(g,_,"password")}static _fromEmailAndCode(g,_,w=null){return new Xc(g,_,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g;if((null==_?void 0:_.email)&&(null==_?void 0:_.password)){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(g){var _=this;return(0,u.Z)(function*(){switch(_.signInMethod){case"password":return function Ua(v,g){return dr.apply(this,arguments)}(g,{returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function Gl(v,g){return ai.apply(this,arguments)}(g,{email:_._email,oobCode:_._password});default:Ee(g,"internal-error")}})()}_linkToIdToken(g,_){var w=this;return(0,u.Z)(function*(){switch(w.signInMethod){case"password":return Dt(g,{idToken:_,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function F_(v,g){return Sp.apply(this,arguments)}(g,{idToken:_,email:w._email,oobCode:w._password});default:Ee(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function zn(v,g){return Ap.apply(this,arguments)}function Ap(){return(Ap=(0,u.Z)(function*(v,g){return Fr(v,"POST","/v1/accounts:signInWithIdp",tn(v,g))})).apply(this,arguments)}class Ms extends rn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const _=new Ms(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(_.idToken=g.idToken),g.accessToken&&(_.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(_.nonce=g.nonce),g.pendingToken&&(_.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(_.accessToken=g.oauthToken,_.secret=g.oauthTokenSecret):Ee("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:w,signInMethod:S}=_,O=(0,_e._T)(_,["providerId","signInMethod"]);if(!w||!S)return null;const z=new Ms(w,S);return z.idToken=O.idToken||void 0,z.accessToken=O.accessToken||void 0,z.secret=O.secret,z.nonce=O.nonce,z.pendingToken=O.pendingToken||null,z}_getIdTokenResponse(g){return zn(g,this.buildRequest())}_linkToIdToken(g,_){const w=this.buildRequest();return w.idToken=_,zn(g,w)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,zn(g,_)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),g.postBody=(0,V.xO)(_)}return g}}function BC(v,g){return Mp.apply(this,arguments)}function Mp(){return(Mp=(0,u.Z)(function*(v,g){return Nt(v,"POST","/v1/accounts:sendVerificationCode",tn(v,g))})).apply(this,arguments)}function xp(){return(xp=(0,u.Z)(function*(v,g){return Fr(v,"POST","/v1/accounts:signInWithPhoneNumber",tn(v,g))})).apply(this,arguments)}function Rp(){return(Rp=(0,u.Z)(function*(v,g){const _=yield Fr(v,"POST","/v1/accounts:signInWithPhoneNumber",tn(v,g));if(_.temporaryProof)throw lo(v,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const HC={USER_NOT_FOUND:"user-not-found"};function kp(){return(kp=(0,u.Z)(function*(v,g){return Fr(v,"POST","/v1/accounts:signInWithPhoneNumber",tn(v,Object.assign(Object.assign({},g),{operation:"REAUTH"})),HC)})).apply(this,arguments)}class ja extends rn{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,_){return new ja({verificationId:g,verificationCode:_})}static _fromTokenResponse(g,_){return new ja({phoneNumber:g,temporaryProof:_})}_getIdTokenResponse(g){return function UC(v,g){return xp.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,_){return function jC(v,g){return Rp.apply(this,arguments)}(g,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function GC(v,g){return kp.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:_,verificationId:w,verificationCode:S}=this.params;return g&&_?{temporaryProof:g,phoneNumber:_}:{sessionInfo:w,code:S}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:_,verificationCode:w,phoneNumber:S,temporaryProof:O}=g;return w||_||S||O?new ja({verificationId:_,verificationCode:w,phoneNumber:S,temporaryProof:O}):null}}class ra{constructor(g){var _,w,S,O,z,ne;const Pe=(0,V.zd)((0,V.pd)(g)),qe=null!==(_=Pe.apiKey)&&void 0!==_?_:null,dt=null!==(w=Pe.oobCode)&&void 0!==w?w:null,et=function $C(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(S=Pe.mode)&&void 0!==S?S:null);ee(qe&&dt&&et,"argument-error"),this.apiKey=qe,this.operation=et,this.code=dt,this.continueUrl=null!==(O=Pe.continueUrl)&&void 0!==O?O:null,this.languageCode=null!==(z=Pe.languageCode)&&void 0!==z?z:null,this.tenantId=null!==(ne=Pe.tenantId)&&void 0!==ne?ne:null}static parseLink(g){const _=function Op(v){const g=(0,V.zd)((0,V.pd)(v)).link,_=g?(0,V.zd)((0,V.pd)(g)).deep_link_id:null,w=(0,V.zd)((0,V.pd)(v)).deep_link_id;return(w?(0,V.zd)((0,V.pd)(w)).link:null)||w||_||g||v}(g);try{return new ra(_)}catch(w){return null}}}let Md=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(_,w){return Xc._fromEmailAndPassword(_,w)}static credentialWithLink(_,w){const S=ra.parseLink(w);return ee(S,"argument-error"),Xc._fromEmailAndCode(_,S.code,S.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class ho{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class Ai extends ho{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class Ha extends Ai{static credentialFromJSON(g){const _="string"==typeof g?JSON.parse(g):g;return ee("providerId"in _&&"signInMethod"in _,"argument-error"),Ms._fromParams(_)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return ee(g.idToken||g.accessToken,"argument-error"),Ms._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return Ha.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return Ha.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:_,oauthAccessToken:w,oauthTokenSecret:S,pendingToken:O,nonce:z,providerId:ne}=g;if(!w&&!S&&!_&&!O||!ne)return null;try{return new Ha(ne)._credential({idToken:_,accessToken:w,nonce:z,pendingToken:O})}catch(Pe){return null}}}let Ga=(()=>{class v extends Ai{constructor(){super("facebook.com")}static credential(_){return Ms._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return v.credential(_.oauthAccessToken)}catch(w){return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),$l=(()=>{class v extends Ai{constructor(){super("google.com"),this.addScope("profile")}static credential(_,w){return Ms._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:w})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:w,oauthAccessToken:S}=_;if(!w&&!S)return null;try{return v.credential(w,S)}catch(O){return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),Np=(()=>{class v extends Ai{constructor(){super("github.com")}static credential(_){return Ms._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return v.credential(_.oauthAccessToken)}catch(w){return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class fo extends rn{constructor(g,_){super(g,g),this.pendingToken=_}_getIdTokenResponse(g){return zn(g,this.buildRequest())}_linkToIdToken(g,_){const w=this.buildRequest();return w.idToken=_,zn(g,w)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,zn(g,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:w,signInMethod:S,pendingToken:O}=_;return w&&S&&O&&w===S?new fo(w,O):null}static _create(g,_){return new fo(g,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class eu extends ho{constructor(g){ee(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return eu.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return eu.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const _=fo.fromJSON(g);return ee(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:_,providerId:w}=g;if(!_||!w)return null;try{return fo._create(w,_)}catch(S){return null}}}let tu=(()=>{class v extends Ai{constructor(){super("twitter.com")}static credential(_,w){return Ms._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:w})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:w,oauthTokenSecret:S}=_;if(!w||!S)return null;try{return v.credential(w,S)}catch(O){return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function Pp(v,g){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,u.Z)(function*(v,g){return Fr(v,"POST","/v1/accounts:signUp",tn(v,g))})).apply(this,arguments)}class Ir{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,_,w,S=!1){return(0,u.Z)(function*(){const O=yield U._fromIdTokenResponse(g,w,S),z=L_(w);return new Ir({user:O,providerId:z,_tokenResponse:w,operationType:_})})()}static _forOperation(g,_,w){return(0,u.Z)(function*(){yield g._updateTokensIfNecessary(w,!0);const S=L_(w);return new Ir({user:g,providerId:S,_tokenResponse:w,operationType:_})})()}}function L_(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function Lp(){return(Lp=(0,u.Z)(function*(v){var g;const _=Ae(v);if(yield _._initializationPromise,null===(g=_.currentUser)||void 0===g?void 0:g.isAnonymous)return new Ir({user:_.currentUser,providerId:null,operationType:"signIn"});const w=yield Pp(_,{returnSecureToken:!0}),S=yield Ir._fromIdTokenResponse(_,"signIn",w,!0);return yield _._updateCurrentUser(S.user),S})).apply(this,arguments)}class nu extends V.ZR{constructor(g,_,w,S){var O;super(_.code,_.message),this.operationType=w,this.user=S,Object.setPrototypeOf(this,nu.prototype),this.customData={appName:g.name,tenantId:null!==(O=g.tenantId)&&void 0!==O?O:void 0,_serverResponse:_.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(g,_,w,S){return new nu(g,_,w,S)}}function ru(v,g,_,w){return("reauthenticate"===g?_._getReauthenticationResolver(v):_._getIdTokenResponse(v)).catch(O=>{throw"auth/multi-factor-auth-required"===O.code?nu._fromErrorAndOperation(v,O,g,w):O})}function Rd(v){return new Set(v.map(({providerId:g})=>g).filter(g=>!!g))}function V_(){return(V_=(0,u.Z)(function*(v,g){const _=(0,V.m9)(v);yield $a(!0,_,g);const{providerUserInfo:w}=yield Cr(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[g]}),S=Rd(w||[]);return _.providerData=_.providerData.filter(O=>S.has(O.providerId)),S.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_})).apply(this,arguments)}function pn(v,g){return iu.apply(this,arguments)}function iu(){return(iu=(0,u.Z)(function*(v,g,_=!1){const w=yield Lr(v,g._linkToIdToken(v.auth,yield v.getIdToken()),_);return Ir._forOperation(v,"link",w)})).apply(this,arguments)}function $a(v,g,_){return un.apply(this,arguments)}function un(){return(un=(0,u.Z)(function*(v,g,_){yield Vr(g);const S=!1===v?"provider-already-linked":"no-such-provider";ee(Rd(g.providerData).has(_)===v,g.auth,S)})).apply(this,arguments)}function Vp(v,g){return zl.apply(this,arguments)}function zl(){return(zl=(0,u.Z)(function*(v,g,_=!1){const{auth:w}=v,S="reauthenticate";try{const O=yield Lr(v,ru(w,S,g,v),_);ee(O.idToken,w,"internal-error");const z=nt(O.idToken);ee(z,w,"internal-error");const{sub:ne}=z;return ee(v.uid===ne,w,"user-mismatch"),Ir._forOperation(v,S,O)}catch(O){throw"auth/user-not-found"===(null==O?void 0:O.code)&&Ee(w,"user-mismatch"),O}})).apply(this,arguments)}function ql(v,g){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,u.Z)(function*(v,g,_=!1){const w="signIn",S=yield ru(v,w,g),O=yield Ir._fromIdTokenResponse(v,w,S);return _||(yield v._updateCurrentUser(O.user)),O})).apply(this,arguments)}function su(v,g){return Wl.apply(this,arguments)}function Wl(){return(Wl=(0,u.Z)(function*(v,g){return ql(Ae(v),g)})).apply(this,arguments)}function xs(v,g){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,u.Z)(function*(v,g){const _=(0,V.m9)(v);return yield $a(!1,_,g.providerId),pn(_,g)})).apply(this,arguments)}function za(v,g){return po.apply(this,arguments)}function po(){return(po=(0,u.Z)(function*(v,g){return Vp((0,V.m9)(v),g)})).apply(this,arguments)}function Bp(v,g){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,u.Z)(function*(v,g){return Fr(v,"POST","/v1/accounts:signInWithCustomToken",tn(v,g))})).apply(this,arguments)}function Wa(){return(Wa=(0,u.Z)(function*(v,g){const _=Ae(v),w=yield Bp(_,{token:g,returnSecureToken:!0}),S=yield Ir._fromIdTokenResponse(_,"signIn",w);return yield _._updateCurrentUser(S.user),S})).apply(this,arguments)}class ut{constructor(g,_){this.factorId=g,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(g,_){return"phoneInfo"in _?ou._fromServerResponse(g,_):Ee(g,"internal-error")}}class ou extends ut{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,_){return new ou(_)}}function Zl(v,g,_){var w;ee((null===(w=_.url)||void 0===w?void 0:w.length)>0,v,"invalid-continue-uri"),ee(void 0===_.dynamicLinkDomain||_.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),g.continueUrl=_.url,g.dynamicLinkDomain=_.dynamicLinkDomain,g.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(ee(_.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),g.iOSBundleId=_.iOS.bundleId),_.android&&(ee(_.android.packageName.length>0,v,"missing-android-pkg-name"),g.androidInstallApp=_.android.installApp,g.androidMinimumVersionCode=_.android.minimumVersion,g.androidPackageName=_.android.packageName)}function Od(){return(Od=(0,u.Z)(function*(v,g,_){const w=(0,V.m9)(v),S={requestType:"PASSWORD_RESET",email:g};_&&Zl(w,S,_),yield Ip(w,S)})).apply(this,arguments)}function Nd(){return(Nd=(0,u.Z)(function*(v,g,_){yield ea((0,V.m9)(v),{oobCode:g,newPassword:_})})).apply(this,arguments)}function me(){return(me=(0,u.Z)(function*(v,g){yield Ba((0,V.m9)(v),{oobCode:g})})).apply(this,arguments)}function Ot(v,g){return Pd.apply(this,arguments)}function Pd(){return(Pd=(0,u.Z)(function*(v,g){const _=(0,V.m9)(v),w=yield ea(_,{oobCode:g}),S=w.requestType;switch(ee(S,_,"internal-error"),S){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ee(w.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ee(w.mfaInfo,_,"internal-error");default:ee(w.email,_,"internal-error")}let O=null;return w.mfaInfo&&(O=ut._fromServerResponse(Ae(_),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:O},operation:S}})).apply(this,arguments)}function Za(){return(Za=(0,u.Z)(function*(v,g){const{data:_}=yield Ot((0,V.m9)(v),g);return _.email})).apply(this,arguments)}function li(){return(li=(0,u.Z)(function*(v,g,_){const w=Ae(v),S=yield Pp(w,{returnSecureToken:!0,email:g,password:_}),O=yield Ir._fromIdTokenResponse(w,"signIn",S);return yield w._updateCurrentUser(O.user),O})).apply(this,arguments)}function Hp(){return(Hp=(0,u.Z)(function*(v,g,_){const w=(0,V.m9)(v),S={requestType:"EMAIL_SIGNIN",email:g};ee(_.handleCodeInApp,w,"argument-error"),_&&Zl(w,S,_),yield oi(w,S)})).apply(this,arguments)}function Ka(){return(Ka=(0,u.Z)(function*(v,g,_){const w=(0,V.m9)(v),S=Md.credentialWithLink(g,_||bt());return ee(S._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),su(w,S)})).apply(this,arguments)}function hr(v,g){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,u.Z)(function*(v,g){return Nt(v,"POST","/v1/accounts:createAuthUri",tn(v,g))})).apply(this,arguments)}function go(){return(go=(0,u.Z)(function*(v,g){const w={identifier:g,continueUri:Kt()?bt():"http://localhost"},{signinMethods:S}=yield hr((0,V.m9)(v),w);return S||[]})).apply(this,arguments)}function Vd(){return(Vd=(0,u.Z)(function*(v,g){const _=(0,V.m9)(v),S={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};g&&Zl(_.auth,S,g);const{email:O}=yield Ur(_.auth,S);O!==v.email&&(yield v.reload())})).apply(this,arguments)}function Bd(){return(Bd=(0,u.Z)(function*(v,g,_){const w=(0,V.m9)(v),O={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:g};_&&Zl(w.auth,O,_);const{email:z}=yield Ad(w.auth,O);z!==v.email&&(yield v.reload())})).apply(this,arguments)}function U_(v,g){return Yl.apply(this,arguments)}function Yl(){return(Yl=(0,u.Z)(function*(v,g){return Nt(v,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Ud(){return(Ud=(0,u.Z)(function*(v,{displayName:g,photoURL:_}){if(void 0===g&&void 0===_)return;const w=(0,V.m9)(v),O={idToken:yield w.getIdToken(),displayName:g,photoUrl:_,returnSecureToken:!0},z=yield Lr(w,U_(w.auth,O));w.displayName=z.displayName||null,w.photoURL=z.photoUrl||null;const ne=w.providerData.find(({providerId:Pe})=>"password"===Pe);ne&&(ne.displayName=w.displayName,ne.photoURL=w.photoURL),yield w._updateTokensIfNecessary(z)})).apply(this,arguments)}function qp(v,g,_){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,u.Z)(function*(v,g,_){const{auth:w}=v,O={idToken:yield v.getIdToken(),returnSecureToken:!0};g&&(O.email=g),_&&(O.password=_);const z=yield Lr(v,Dt(w,O));yield v._updateTokensIfNecessary(z,!0)})).apply(this,arguments)}class ia{constructor(g,_,w={}){this.isNewUser=g,this.providerId=_,this.profile=w}}class Zp extends ia{constructor(g,_,w,S){super(g,_,w),this.username=S}}class j_ extends ia{constructor(g,_){super(g,"facebook.com",_)}}class Ql extends Zp{constructor(g,_){super(g,"github.com",_,"string"==typeof(null==_?void 0:_.login)?null==_?void 0:_.login:null)}}class mo extends ia{constructor(g,_){super(g,"google.com",_)}}class H_ extends Zp{constructor(g,_,w){super(g,"twitter.com",_,w)}}function Mr(v){const{user:g,_tokenResponse:_}=v;return g.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function Wp(v){var g,_;if(!v)return null;const{providerId:w}=v,S=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},O=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!w&&(null==v?void 0:v.idToken)){const z=null===(_=null===(g=nt(v.idToken))||void 0===g?void 0:g.firebase)||void 0===_?void 0:_.sign_in_provider;if(z)return new ia(O,"anonymous"!==z&&"custom"!==z?z:null)}if(!w)return null;switch(w){case"facebook.com":return new j_(O,S);case"github.com":return new Ql(O,S);case"google.com":return new mo(O,S);case"twitter.com":return new H_(O,S,v.screenName||null);case"custom":case"anonymous":return new ia(O,null);default:return new ia(O,w,S)}}(_)}class Os{constructor(g,_){this.type=g,this.credential=_}static _fromIdtoken(g){return new Os("enroll",g)}static _fromMfaPendingCredential(g){return new Os("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var _,w;if(null==g?void 0:g.multiFactorSession){if(null===(_=g.multiFactorSession)||void 0===_?void 0:_.pendingCredential)return Os._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null===(w=g.multiFactorSession)||void 0===w?void 0:w.idToken)return Os._fromIdtoken(g.multiFactorSession.idToken)}return null}}class Jl{constructor(g,_,w){this.session=g,this.hints=_,this.signInResolver=w}static _fromError(g,_){const w=Ae(g),S=_.customData._serverResponse,O=(S.mfaInfo||[]).map(ne=>ut._fromServerResponse(w,ne));ee(S.mfaPendingCredential,w,"internal-error");const z=Os._fromMfaPendingCredential(S.mfaPendingCredential);return new Jl(z,O,function(){var ne=(0,u.Z)(function*(Pe){const qe=yield Pe._process(w,z);delete S.mfaInfo,delete S.mfaPendingCredential;const dt=Object.assign(Object.assign({},S),{idToken:qe.idToken,refreshToken:qe.refreshToken});switch(_.operationType){case"signIn":const et=yield Ir._fromIdTokenResponse(w,_.operationType,dt);return yield w._updateCurrentUser(et.user),et;case"reauthenticate":return ee(_.user,w,"internal-error"),Ir._forOperation(_.user,_.operationType,dt);default:Ee(w,"internal-error")}});return function(Pe){return ne.apply(this,arguments)}}())}resolveSignIn(g){var _=this;return(0,u.Z)(function*(){return _.signInResolver(g)})()}}function $d(v,g){return Nt(v,"POST","/v2/accounts/mfaEnrollment:start",tn(v,g))}class Ns{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(w=>ut._fromServerResponse(g.auth,w)))})}static _fromUser(g){return new Ns(g)}getSession(){var g=this;return(0,u.Z)(function*(){return Os._fromIdtoken(yield g.user.getIdToken())})()}enroll(g,_){var w=this;return(0,u.Z)(function*(){const S=g,O=yield w.getSession(),z=yield Lr(w.user,S._process(w.user.auth,O,_));return yield w.user._updateTokensIfNecessary(z),w.user.reload()})()}unenroll(g){var _=this;return(0,u.Z)(function*(){const w="string"==typeof g?g:g.uid,S=yield _.user.getIdToken(),O=yield Lr(_.user,function ZC(v,g){return Nt(v,"POST","/v2/accounts/mfaEnrollment:withdraw",tn(v,g))}(_.user.auth,{idToken:S,mfaEnrollmentId:w}));_.enrolledFactors=_.enrolledFactors.filter(({uid:z})=>z!==w),yield _.user._updateTokensIfNecessary(O);try{yield _.user.reload()}catch(z){if("auth/user-token-expired"!==z.code)throw z}})()}}const Qa=new WeakMap,zd="__sak";class _o{constructor(g,_){this.storageRetriever=g,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(zd,"1"),this.storage.removeItem(zd),Promise.resolve(!0)):Promise.resolve(!1)}catch(g){return Promise.resolve(!1)}}_set(g,_){return this.storage.setItem(g,JSON.stringify(_)),Promise.resolve()}_get(g){const _=this.storage.getItem(g);return Promise.resolve(_?JSON.parse(_):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const Ps=(()=>{class v extends _o{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,w)=>this.onStorageEvent(_,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function qd(){const v=(0,V.z$)();return Yt(v)||Jn(v)}()&&function ur(){try{return!(!window||window===window.top)}catch(v){return!1}}(),this.fallbackToPolling=Is(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const w of Object.keys(this.listeners)){const S=this.storage.getItem(w),O=this.localCache[w];S!==O&&_(w,O,S)}}onStorageEvent(_,w=!1){if(!_.key)return void this.forAllChangedKeys((ne,Pe,qe)=>{this.notifyListeners(ne,qe)});const S=_.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ne=this.storage.getItem(S);if(_.newValue!==ne)null!==_.newValue?this.storage.setItem(S,_.newValue):this.storage.removeItem(S);else if(this.localCache[S]===_.newValue&&!w)return}const O=()=>{const ne=this.storage.getItem(S);!w&&this.localCache[S]===ne||this.notifyListeners(S,ne)},z=this.storage.getItem(S);!function Va(){return(0,V.w1)()&&10===document.documentMode}()||z===_.newValue||_.newValue===_.oldValue?O():setTimeout(O,10)}notifyListeners(_,w){this.localCache[_]=w;const S=this.listeners[_];if(S)for(const O of Array.from(S))O(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,w,S)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:w,newValue:S}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(w)}_removeListener(_,w){this.listeners[_]&&(this.listeners[_].delete(w),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,w){var S=()=>super._set,O=this;return(0,u.Z)(function*(){yield S().call(O,_,w),O.localCache[_]=JSON.stringify(w)})()}_get(_){var w=()=>super._get,S=this;return(0,u.Z)(function*(){const O=yield w().call(S,_);return S.localCache[_]=JSON.stringify(O),O})()}_remove(_){var w=()=>super._remove,S=this;return(0,u.Z)(function*(){yield w().call(S,_),delete S.localCache[_]})()}}return v.type="LOCAL",v})(),St=(()=>{class v extends _o{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,w){}_removeListener(_,w){}}return v.type="SESSION",v})();let Vn=(()=>{class v{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const w=this.receivers.find(O=>O.isListeningto(_));if(w)return w;const S=new v(_);return this.receivers.push(S),S}isListeningto(_){return this.eventTarget===_}handleEvent(_){var w=this;return(0,u.Z)(function*(){const S=_,{eventId:O,eventType:z,data:ne}=S.data,Pe=w.handlersMap[z];if(!(null==Pe?void 0:Pe.size))return;S.ports[0].postMessage({status:"ack",eventId:O,eventType:z});const qe=Array.from(Pe).map(function(){var et=(0,u.Z)(function*(bn){return bn(S.origin,ne)});return function(bn){return et.apply(this,arguments)}}()),dt=yield function xr(v){return Promise.all(v.map(function(){var g=(0,u.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(w){return{fulfilled:!1,reason:w}}});return function(_){return g.apply(this,arguments)}}()))}(qe);S.ports[0].postMessage({status:"done",eventId:O,eventType:z,response:dt})})()}_subscribe(_,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(w)}_unsubscribe(_,w){this.handlersMap[_]&&w&&this.handlersMap[_].delete(w),(!w||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function Ja(v="",g=10){let _="";for(let w=0;w<g;w++)_+=Math.floor(10*Math.random());return v+_}class Yp{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,_,w=50){var S=this;return(0,u.Z)(function*(){const O="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!O)throw new Error("connection_unavailable");let z,ne;return new Promise((Pe,qe)=>{const dt=Ja("",20);O.port1.start();const et=setTimeout(()=>{qe(new Error("unsupported_event"))},w);ne={messageChannel:O,onMessage(bn){const ki=bn;if(ki.data.eventId===dt)switch(ki.data.status){case"ack":clearTimeout(et),z=setTimeout(()=>{qe(new Error("timeout"))},3e3);break;case"done":clearTimeout(z),Pe(ki.data.response);break;default:clearTimeout(et),clearTimeout(z),qe(new Error("invalid_response"))}}},S.handlers.add(ne),O.port1.addEventListener("message",ne.onMessage),S.target.postMessage({eventType:g,eventId:dt,data:_},[O.port2])}).finally(()=>{ne&&S.removeMessageHandler(ne)})})()}}function yn(){return window}function Fs(){return void 0!==yn().WorkerGlobalScope&&"function"==typeof yn().importScripts}function Mi(){return(Mi=(0,u.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(v){return null}})).apply(this,arguments)}const Zd="firebaseLocalStorageDb",Xl="firebaseLocalStorage",an="fbase_key";class sa{constructor(g){this.request=g}toPromise(){return new Promise((g,_)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function Xa(v,g){return v.transaction([Xl],g?"readwrite":"readonly").objectStore(Xl)}function oa(){const v=indexedDB.open(Zd,1);return new Promise((g,_)=>{v.addEventListener("error",()=>{_(v.error)}),v.addEventListener("upgradeneeded",()=>{const w=v.result;try{w.createObjectStore(Xl,{keyPath:an})}catch(S){_(S)}}),v.addEventListener("success",(0,u.Z)(function*(){const w=v.result;w.objectStoreNames.contains(Xl)?g(w):(w.close(),yield function cu(){const v=indexedDB.deleteDatabase(Zd);return new sa(v).toPromise()}(),g(yield oa()))}))})}function Gr(v,g,_){return yo.apply(this,arguments)}function yo(){return(yo=(0,u.Z)(function*(v,g,_){const w=Xa(v,!0).put({[an]:g,value:_});return new sa(w).toPromise()})).apply(this,arguments)}function aa(){return(aa=(0,u.Z)(function*(v,g){const _=Xa(v,!1).get(g),w=yield new sa(_).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function el(v,g){const _=Xa(v,!0).delete(g);return new sa(_).toPromise()}const xi=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,u.Z)(function*(){return _.db||(_.db=yield oa()),_.db})()}_withRetries(_){var w=this;return(0,u.Z)(function*(){let S=0;for(;;)try{const O=yield w._openDb();return yield _(O)}catch(O){if(S++>3)throw O;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,u.Z)(function*(){return Fs()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,u.Z)(function*(){_.receiver=Vn._getInstance(function Qp(){return Fs()?self:null}()),_.receiver._subscribe("keyChanged",function(){var w=(0,u.Z)(function*(S,O){return{keyProcessed:(yield _._poll()).includes(O.key)}});return function(S,O){return w.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var w=(0,u.Z)(function*(S,O){return["keyChanged"]});return function(S,O){return w.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,u.Z)(function*(){var w,S;if(_.activeServiceWorker=yield function Wd(){return Mi.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new Yp(_.activeServiceWorker);const O=yield _.sender._send("ping",{},800);!O||(null===(w=O[0])||void 0===w?void 0:w.fulfilled)&&(null===(S=O[0])||void 0===S?void 0:S.value.includes("keyChanged"))&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var w=this;return(0,u.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function st(){var v;return(null===(v=null==navigator?void 0:navigator.serviceWorker)||void 0===v?void 0:v.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:_},w.serviceWorkerReceiverAvailable?800:50)}catch(S){}})()}_isAvailable(){return(0,u.Z)(function*(){try{if(!indexedDB)return!1;const _=yield oa();return yield Gr(_,zd,"1"),yield el(_,zd),!0}catch(_){}return!1})()}_withPendingWrite(_){var w=this;return(0,u.Z)(function*(){w.pendingWrites++;try{yield _()}finally{w.pendingWrites--}})()}_set(_,w){var S=this;return(0,u.Z)(function*(){return S._withPendingWrite((0,u.Z)(function*(){return yield S._withRetries(O=>Gr(O,_,w)),S.localCache[_]=w,S.notifyServiceWorker(_)}))})()}_get(_){var w=this;return(0,u.Z)(function*(){const S=yield w._withRetries(O=>function Jp(v,g){return aa.apply(this,arguments)}(O,_));return w.localCache[_]=S,S})()}_remove(_){var w=this;return(0,u.Z)(function*(){return w._withPendingWrite((0,u.Z)(function*(){return yield w._withRetries(S=>el(S,_)),delete w.localCache[_],w.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,u.Z)(function*(){const w=yield _._withRetries(z=>{const ne=Xa(z,!1).getAll();return new sa(ne).toPromise()});if(!w)return[];if(0!==_.pendingWrites)return[];const S=[],O=new Set;for(const{fbase_key:z,value:ne}of w)O.add(z),JSON.stringify(_.localCache[z])!==JSON.stringify(ne)&&(_.notifyListeners(z,ne),S.push(z));for(const z of Object.keys(_.localCache))_.localCache[z]&&!O.has(z)&&(_.notifyListeners(z,null),S.push(z));return S})()}notifyListeners(_,w){this.localCache[_]=w;const S=this.listeners[_];if(S)for(const O of Array.from(S))O(w)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,u.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(w)}_removeListener(_,w){this.listeners[_]&&(this.listeners[_].delete(w),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function la(v,g){return Nt(v,"POST","/v2/accounts/mfaSignIn:start",tn(v,g))}function Ls(){return(Ls=(0,u.Z)(function*(v){return(yield Nt(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Nn(v){return new Promise((g,_)=>{const w=document.createElement("script");w.setAttribute("src",v),w.onload=g,w.onerror=S=>{const O=he("internal-error");O.customData=S,_(O)},w.type="text/javascript",w.charset="UTF-8",function Xp(){var v,g;return null!==(g=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==g?g:document}().appendChild(w)})}function $r(v){return`__${v}${Math.floor(1e6*Math.random())}`}const Rr=1e12;class tr{constructor(g){this.auth=g,this.counter=Rr,this._widgets=new Map}render(g,_){const w=this.counter;return this._widgets.set(w,new $i(g,this.auth.name,_||{})),this.counter++,w}reset(g){var _;const w=g||Rr;null===(_=this._widgets.get(w))||void 0===_||_.delete(),this._widgets.delete(w)}getResponse(g){var _;return(null===(_=this._widgets.get(g||Rr))||void 0===_?void 0:_.getResponse())||""}execute(g){var _=this;return(0,u.Z)(function*(){var w;return null===(w=_._widgets.get(g||Rr))||void 0===w||w.execute(),""})()}}class $i{constructor(g,_,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const S="string"==typeof g?document.getElementById(g):g;ee(S,"argument-error",{appName:_}),this.container=S,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function In(v){const g=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<v;w++)g.push(_.charAt(Math.floor(Math.random()*_.length)));return g.join("")}(50);const{callback:g,"expired-callback":_}=this.params;if(g)try{g(this.responseToken)}catch(w){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch(w){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ua=$r("rcb"),Qd=new Cn(3e4,6e4);class q_{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!yn().grecaptcha}load(g,_=""){return ee(function W_(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(_),g,"argument-error"),this.shouldResolveImmediately(_)?Promise.resolve(yn().grecaptcha):new Promise((w,S)=>{const O=yn().setTimeout(()=>{S(he(g,"network-request-failed"))},Qd.get());yn()[ua]=()=>{yn().clearTimeout(O),delete yn()[ua];const ne=yn().grecaptcha;if(!ne)return void S(he(g,"internal-error"));const Pe=ne.render;ne.render=(qe,dt)=>{const et=Pe(qe,dt);return this.counter++,et},this.hostLanguage=_,w(ne)},Nn(`https://www.google.com/recaptcha/api.js??${(0,V.xO)({onload:ua,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(O),S(he(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){return!!yn().grecaptcha&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class QC{load(g){return(0,u.Z)(function*(){return new tr(g)})()}clearedOneInstance(){}}const da="recaptcha",fr={theme:"light",type:"image"};class Z_{constructor(g,_=Object.assign({},fr),w){this.parameters=_,this.type=da,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ae(w),this.isInvisible="invisible"===this.parameters.size,ee("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const S="string"==typeof g?document.getElementById(g):g;ee(S,this.auth,"argument-error"),this.container=S,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new QC:new q_,this.validateStartingState()}verify(){var g=this;return(0,u.Z)(function*(){g.assertNotDestroyed();const _=yield g.render(),w=g.getAssertedRecaptcha();return w.getResponse(_)||new Promise(O=>{const z=ne=>{!ne||(g.tokenChangeListeners.delete(z),O(ne))};g.tokenChangeListeners.add(z),g.isInvisible&&w.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){ee(!this.parameters.sitekey,this.auth,"argument-error"),ee(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ee("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return _=>{if(this.tokenChangeListeners.forEach(w=>w(_)),"function"==typeof g)g(_);else if("string"==typeof g){const w=yn()[g];"function"==typeof w&&w(_)}}}assertNotDestroyed(){ee(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,u.Z)(function*(){if(yield g.init(),!g.widgetId){let _=g.container;if(!g.isInvisible){const w=document.createElement("div");_.appendChild(w),_=w}g.widgetId=g.getAssertedRecaptcha().render(_,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,u.Z)(function*(){ee(Kt()&&!Fs(),g.auth,"internal-error"),yield function vo(){let v=null;return new Promise(g=>{"complete"!==document.readyState?(v=()=>g(),window.addEventListener("load",v)):g()}).catch(g=>{throw v&&window.removeEventListener("load",v),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const _=yield function Bn(v){return Ls.apply(this,arguments)}(g.auth);ee(_,g.auth,"internal-error"),g.parameters.sitekey=_})()}getAssertedRecaptcha(){return ee(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Vs{constructor(g,_){this.verificationId=g,this.onConfirmation=_}confirm(g){const _=ja._fromVerification(this.verificationId,g);return this.onConfirmation(_)}}function An(){return(An=(0,u.Z)(function*(v,g,_){const w=Ae(v),S=yield kr(w,g,(0,V.m9)(_));return new Vs(S,O=>su(w,O))})).apply(this,arguments)}function ha(){return(ha=(0,u.Z)(function*(v,g,_){const w=(0,V.m9)(v);yield $a(!1,w,"phone");const S=yield kr(w.auth,g,(0,V.m9)(_));return new Vs(S,O=>xs(w,O))})).apply(this,arguments)}function Xd(){return(Xd=(0,u.Z)(function*(v,g,_){const w=(0,V.m9)(v),S=yield kr(w.auth,g,(0,V.m9)(_));return new Vs(S,O=>za(w,O))})).apply(this,arguments)}function kr(v,g,_){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,u.Z)(function*(v,g,_){var w;const S=yield _.verify();try{let O;if(ee("string"==typeof S,v,"argument-error"),ee(_.type===da,v,"argument-error"),O="string"==typeof g?{phoneNumber:g}:g,"session"in O){const z=O.session;if("phoneNumber"in O)return ee("enroll"===z.type,v,"internal-error"),(yield $d(v,{idToken:z.credential,phoneEnrollmentInfo:{phoneNumber:O.phoneNumber,recaptchaToken:S}})).phoneSessionInfo.sessionInfo;{ee("signin"===z.type,v,"internal-error");const ne=(null===(w=O.multiFactorHint)||void 0===w?void 0:w.uid)||O.multiFactorUid;return ee(ne,v,"missing-multi-factor-info"),(yield la(v,{mfaPendingCredential:z.credential,mfaEnrollmentId:ne,phoneSignInInfo:{recaptchaToken:S}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:z}=yield BC(v,{phoneNumber:O.phoneNumber,recaptchaToken:S});return z}}finally{_._reset()}})).apply(this,arguments)}function fa(){return(fa=(0,u.Z)(function*(v,g){yield pn((0,V.m9)(v),g)})).apply(this,arguments)}let Bs=(()=>{class v{constructor(_){this.providerId=v.PROVIDER_ID,this.auth=Ae(_)}verifyPhoneNumber(_,w){return kr(this.auth,_,(0,V.m9)(w))}static credential(_,w){return ja._fromVerification(_,w)}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:w,temporaryProof:S}=_;return w&&S?ja._fromTokenResponse(w,S):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function bo(v,g){return g?ie(g):(ee(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class th extends rn{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return zn(g,this._buildIdpRequest())}_linkToIdToken(g,_){return zn(g,this._buildIdpRequest(_))}_getReauthenticationResolver(g){return zn(g,this._buildIdpRequest())}_buildIdpRequest(g){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(_.idToken=g),_}}function K_(v){return ql(v.auth,new th(v),v.bypassAuthState)}function Y_(v){const{auth:g,user:_}=v;return ee(_,g,"internal-error"),Vp(_,new th(v),v.bypassAuthState)}function kt(v){return du.apply(this,arguments)}function du(){return(du=(0,u.Z)(function*(v){const{auth:g,user:_}=v;return ee(_,g,"internal-error"),pn(_,new th(v),v.bypassAuthState)})).apply(this,arguments)}class qn{constructor(g,_,w,S,O=!1){this.auth=g,this.resolver=w,this.user=S,this.bypassAuthState=O,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var g=this;return new Promise(function(){var _=(0,u.Z)(function*(w,S){g.pendingPromise={resolve:w,reject:S};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(O){g.reject(O)}});return function(w,S){return _.apply(this,arguments)}}())}onAuthEvent(g){var _=this;return(0,u.Z)(function*(){const{urlResponse:w,sessionId:S,postBody:O,tenantId:z,error:ne,type:Pe}=g;if(ne)return void _.reject(ne);const qe={auth:_.auth,requestUri:w,sessionId:S,tenantId:z||void 0,postBody:O||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(Pe)(qe))}catch(dt){_.reject(dt)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return K_;case"linkViaPopup":case"linkViaRedirect":return kt;case"reauthViaPopup":case"reauthViaRedirect":return Y_;default:Ee(this.auth,"internal-error")}}resolve(g){re(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){re(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const hu=new Cn(2e3,1e4);function eg(){return(eg=(0,u.Z)(function*(v,g,_){const w=Ae(v);Ve(v,g,ho);const S=bo(w,_);return new pu(w,"signInViaPopup",g,S).executeNotNull()})).apply(this,arguments)}function nh(){return(nh=(0,u.Z)(function*(v,g,_){const w=(0,V.m9)(v);Ve(w.auth,g,ho);const S=bo(w.auth,_);return new pu(w.auth,"reauthViaPopup",g,S,w).executeNotNull()})).apply(this,arguments)}function fu(){return(fu=(0,u.Z)(function*(v,g,_){const w=(0,V.m9)(v);Ve(w.auth,g,ho);const S=bo(w.auth,_);return new pu(w.auth,"linkViaPopup",g,S,w).executeNotNull()})).apply(this,arguments)}let pu=(()=>{class v extends qn{constructor(_,w,S,O,z){super(_,w,O,z),this.provider=S,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var _=this;return(0,u.Z)(function*(){const w=yield _.execute();return ee(w,_.auth,"internal-error"),w})()}onExecution(){var _=this;return(0,u.Z)(function*(){re(1===_.filter.length,"Popup operations only handle one event");const w=Ja();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],w),_.authWindow.associatedEvent=w,_.resolver._originValidation(_.auth).catch(S=>{_.reject(S)}),_.resolver._isIframeWebStorageSupported(_.auth,S=>{S||_.reject(he(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(he(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const _=()=>{var w,S;this.pollId=(null===(S=null===(w=this.authWindow)||void 0===w?void 0:w.window)||void 0===S?void 0:S.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(he(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(_,hu.get())};_()}}return v.currentPopupAction=null,v})();const gu=new Map;class Wn extends qn{constructor(g,_,w=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,w),this.eventId=null}execute(){var g=()=>super.execute,_=this;return(0,u.Z)(function*(){let w=gu.get(_.auth._key());if(!w){try{const O=(yield function ui(v,g){return rg.apply(this,arguments)}(_.resolver,_.auth))?yield g().call(_):null;w=()=>Promise.resolve(O)}catch(S){w=()=>Promise.reject(S)}gu.set(_.auth._key(),w)}return _.bypassAuthState||gu.set(_.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(g){var _=()=>super.onAuthEvent,w=this;return(0,u.Z)(function*(){if("signInViaRedirect"===g.type)return _().call(w,g);if("unknown"!==g.type){if(g.eventId){const S=yield w.auth._redirectUserForId(g.eventId);if(S)return w.user=S,_().call(w,g);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,u.Z)(function*(){})()}cleanUp(){}}function rg(){return(rg=(0,u.Z)(function*(v,g){const _=rh(g),w=ig(v);if(!(yield w._isAvailable()))return!1;const S="true"===(yield w._get(_));return yield w._remove(_),S})).apply(this,arguments)}function pa(v,g){return nl.apply(this,arguments)}function nl(){return(nl=(0,u.Z)(function*(v,g){return ig(v)._set(rh(g),"true")})).apply(this,arguments)}function ig(v){return ie(v._redirectPersistence)}function rh(v){return ae("pendingRedirect",v.config.apiKey,v.name)}function mu(){return(mu=(0,u.Z)(function*(v,g,_){const w=Ae(v);Ve(v,g,ho);const S=bo(w,_);return yield pa(S,w),S._openRedirect(w,g,"signInViaRedirect")})).apply(this,arguments)}function xt(){return(xt=(0,u.Z)(function*(v,g,_){const w=(0,V.m9)(v);Ve(w.auth,g,ho);const S=bo(w.auth,_);yield pa(S,w.auth);const O=yield nc(w);return S._openRedirect(w.auth,g,"reauthViaRedirect",O)})).apply(this,arguments)}function gs(){return(gs=(0,u.Z)(function*(v,g,_){const w=(0,V.m9)(v);Ve(w.auth,g,ho);const S=bo(w.auth,_);yield $a(!1,w,g.providerId),yield pa(S,w.auth);const O=yield nc(w);return S._openRedirect(w.auth,g,"linkViaRedirect",O)})).apply(this,arguments)}function Do(){return(Do=(0,u.Z)(function*(v,g){return yield Ae(v)._initializationPromise,tc(v,g,!1)})).apply(this,arguments)}function tc(v,g){return oh.apply(this,arguments)}function oh(){return(oh=(0,u.Z)(function*(v,g,_=!1){const w=Ae(v),S=bo(w,g),z=yield new Wn(w,S,_).execute();return z&&!_&&(delete z.user._redirectEventId,yield w._persistUserIfCurrent(z.user),yield w._setRedirectUser(null,g)),z})).apply(this,arguments)}function nc(v){return ms.apply(this,arguments)}function ms(){return(ms=(0,u.Z)(function*(v){const g=Ja(`${v.uid}:::`);return v._redirectEventId=g,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),g})).apply(this,arguments)}class il{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let _=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(g,w)&&(_=!0,this.sendToConsumer(g,w),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function rc(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return _u(v);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=g,_=!0)),_}sendToConsumer(g,_){var w;if(g.error&&!_u(g)){const S=(null===(w=g.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";_.onError(he(this.auth,S))}else _.onAuthEvent(g)}isEventForConsumer(g,_){const w=null===_.eventId||!!g.eventId&&g.eventId===_.eventId;return _.filter.includes(g.type)&&w}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(sl(g))}saveEventToCache(g){this.cachedEventUids.add(sl(g)),this.lastProcessedEventTime=Date.now()}}function sl(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(g=>g).join("-")}function _u({type:v,error:g}){return"unknown"===v&&"auth/no-auth-event"===(null==g?void 0:g.code)}function ic(v){return ga.apply(this,arguments)}function ga(){return(ga=(0,u.Z)(function*(v,g={}){return Nt(v,"GET","/v1/projects",g)})).apply(this,arguments)}const og=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,J_=/^https?/;function zi(){return(zi=(0,u.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:g}=yield ic(v);for(const _ of g)try{if(sc(_))return}catch(w){}Ee(v,"unauthorized-domain")})).apply(this,arguments)}function sc(v){const g=bt(),{protocol:_,hostname:w}=new URL(g);if(v.startsWith("chrome-extension://")){const z=new URL(v);return""===z.hostname&&""===w?"chrome-extension:"===_&&v.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===_&&z.hostname===w}if(!J_.test(_))return!1;if(og.test(v))return w===v;const S=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+S+"|"+S+")$","i").test(w)}const ey=new Cn(3e4,6e4);function ty(){const v=yn().___jsl;if(null==v?void 0:v.H)for(const g of Object.keys(v.H))if(v.H[g].r=v.H[g].r||[],v.H[g].L=v.H[g].L||[],v.H[g].r=[...v.H[g].L],v.CP)for(let _=0;_<v.CP.length;_++)v.CP[_]=null}let yu=null;function ny(v){return yu=yu||function ag(v){return new Promise((g,_)=>{var w,S,O;function z(){ty(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{ty(),_(he(v,"network-request-failed"))},timeout:ey.get()})}if(null===(S=null===(w=yn().gapi)||void 0===w?void 0:w.iframes)||void 0===S?void 0:S.Iframe)g(gapi.iframes.getContext());else{if(!(null===(O=yn().gapi)||void 0===O?void 0:O.load)){const ne=$r("iframefcb");return yn()[ne]=()=>{gapi.load?z():_(he(v,"network-request-failed"))},Nn(`https://apis.google.com/js/api.js?onload=${ne}`).catch(Pe=>_(Pe))}z()}}).catch(g=>{throw yu=null,g})}(v),yu}const ah=new Cn(5e3,15e3),js={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},vu=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ma(v){const g=v.config;ee(g.authDomain,v,"auth-domain-config-required");const _=g.emulator?En(g,"emulator/auth/iframe"):`https://${v.config.authDomain}/__/auth/iframe`,w={apiKey:g.apiKey,appName:v.name,v:fe.SDK_VERSION},S=vu.get(v.config.apiHost);S&&(w.eid=S);const O=v._getFrameworks();return O.length&&(w.fw=O.join(",")),`${_}?${(0,V.xO)(w).slice(1)}`}function To(){return To=(0,u.Z)(function*(v){const g=yield ny(v),_=yn().gapi;return ee(_,v,"internal-error"),g.open({where:document.body,url:ma(v),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:js,dontclear:!0},w=>new Promise(function(){var S=(0,u.Z)(function*(O,z){yield w.restyle({setHideOnLeave:!1});const ne=he(v,"network-request-failed"),Pe=yn().setTimeout(()=>{z(ne)},ah.get());function qe(){yn().clearTimeout(Pe),O(w)}w.ping(qe).then(qe,()=>{z(ne)})});return function(O,z){return S.apply(this,arguments)}}()))}),To.apply(this,arguments)}const iy={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Cu{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(g){}}}function dh(v,g,_,w,S,O){ee(v.config.authDomain,v,"auth-domain-config-required"),ee(v.config.apiKey,v,"invalid-api-key");const z={apiKey:v.config.apiKey,appName:v.name,authType:_,redirectUrl:w,v:fe.SDK_VERSION,eventId:S};if(g instanceof ho){g.setDefaultLanguage(v.languageCode),z.providerId=g.providerId||"",(0,V.xb)(g.getCustomParameters())||(z.customParameters=JSON.stringify(g.getCustomParameters()));for(const[Pe,qe]of Object.entries(O||{}))z[Pe]=qe}if(g instanceof Ai){const Pe=g.getScopes().filter(qe=>""!==qe);Pe.length>0&&(z.scopes=Pe.join(","))}v.tenantId&&(z.tid=v.tenantId);const ne=z;for(const Pe of Object.keys(ne))void 0===ne[Pe]&&delete ne[Pe];return`${function oy({config:v}){return v.emulator?En(v,"emulator/auth/handler"):`https://${v.authDomain}/__/auth/handler`}(v)}?${(0,V.xO)(ne).slice(1)}`}const qi="webStorageSupport";class Eu extends class hh{constructor(g){this.factorId=g}_process(g,_,w){switch(_.type){case"enroll":return this._finalizeEnroll(g,_.credential,w);case"signin":return this._finalizeSignIn(g,_.credential);default:return K("unexpected MultiFactorSessionType")}}}{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new Eu(g)}_finalizeEnroll(g,_,w){return function G_(v,g){return Nt(v,"POST","/v2/accounts/mfaEnrollment:finalize",tn(v,g))}(g,{idToken:_,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,_){return function ca(v,g){return Nt(v,"POST","/v2/accounts/mfaSignIn:finalize",tn(v,g))}(g,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let lg=(()=>{class v{constructor(){}static assertion(_){return Eu._fromCredential(_)}}return v.FACTOR_ID="phone",v})();var cg="@firebase/auth",Du="0.19.11";class ug{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var _=this;return(0,u.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const _=this.auth.onIdTokenChanged(w=>{var S;g((null===(S=w)||void 0===S?void 0:S.stsTokenManager.accessToken)||null)});this.internalListeners.set(g,_),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const _=this.internalListeners.get(g);!_||(this.internalListeners.delete(g),_(),this.updateProactiveRefresh())}assertAuthConfigured(){ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function _s(){return window}function ya(){return(ya=(0,u.Z)(function*(v,g,_){var w;const{BuildInfo:S}=_s();re(g.sessionId,"AuthEvent did not contain a session ID");const O=yield va(g.sessionId),z={};return Jn()?z.ibi=S.packageName:On()?z.apn=S.packageName:Ee(v,"operation-not-supported-in-this-environment"),S.displayName&&(z.appDisplayName=S.displayName),z.sessionId=O,dh(v,_,g.type,void 0,null!==(w=g.eventId)&&void 0!==w?w:void 0,z)})).apply(this,arguments)}function di(){return(di=(0,u.Z)(function*(v){const{BuildInfo:g}=_s(),_={};Jn()?_.iosBundleId=g.packageName:On()?_.androidPackageName=g.packageName:Ee(v,"operation-not-supported-in-this-environment"),yield ic(v,_)})).apply(this,arguments)}function Tu(){return(Tu=(0,u.Z)(function*(v,g,_){const{cordova:w}=_s();let S=()=>{};try{yield new Promise((O,z)=>{let ne=null;function Pe(){var et;O();const bn=null===(et=w.plugins.browsertab)||void 0===et?void 0:et.close;"function"==typeof bn&&bn(),"function"==typeof(null==_?void 0:_.close)&&_.close()}function qe(){ne||(ne=window.setTimeout(()=>{z(he(v,"redirect-cancelled-by-user"))},2e3))}function dt(){"visible"===(null==document?void 0:document.visibilityState)&&qe()}g.addPassiveListener(Pe),document.addEventListener("resume",qe,!1),On()&&document.addEventListener("visibilitychange",dt,!1),S=()=>{g.removePassiveListener(Pe),document.removeEventListener("resume",qe,!1),document.removeEventListener("visibilitychange",dt,!1),ne&&window.clearTimeout(ne)}})}finally{S()}})).apply(this,arguments)}function va(v){return hg.apply(this,arguments)}function hg(){return(hg=(0,u.Z)(function*(v){const g=al(v),_=yield crypto.subtle.digest("SHA-256",g);return Array.from(new Uint8Array(_)).map(S=>S.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function al(v){if(re(/[0-9a-zA-Z]+/.test(v),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(v);const g=new ArrayBuffer(v.length),_=new Uint8Array(g);for(let w=0;w<v.length;w++)_[w]=v.charCodeAt(w);return _}!function ly(v){(0,fe._registerComponent)(new ue.wA("auth",(g,{options:_})=>{const w=g.getProvider("app").getImmediate(),S=g.getProvider("heartbeat"),{apiKey:O,authDomain:z}=w.options;return((ne,Pe)=>{ee(O&&!O.includes(":"),"invalid-api-key",{appName:ne.name}),ee(!(null==z?void 0:z.includes(":")),"argument-error",{appName:ne.name});const qe={apiKey:O,authDomain:z,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Jc(v)},dt=new Si(ne,Pe,qe);return function se(v,g){const _=(null==g?void 0:g.persistence)||[],w=(Array.isArray(_)?_:[_]).map(ie);(null==g?void 0:g.errorMap)&&v._updateErrorMap(g.errorMap),v._initializeWithPersistence(w,null==g?void 0:g.popupRedirectResolver)}(dt,_),dt})(w,S)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,_,w)=>{g.getProvider("auth-internal").initialize()})),(0,fe._registerComponent)(new ue.wA("auth-internal",g=>{const _=Ae(g.getProvider("auth").getImmediate());return new ug(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,fe.registerVersion)(cg,Du,function ay(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,fe.registerVersion)(cg,Du,"esm2017")}("Browser");class mh extends il{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(g=>{this.resolveInialized=g})}addPassiveListener(g){this.passiveListeners.add(g)}removePassiveListener(g){this.passiveListeners.delete(g)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(g){return this.resolveInialized(),this.passiveListeners.forEach(_=>_(g)),super.onEvent(g)}initialized(){var g=this;return(0,u.Z)(function*(){yield g.initPromise})()}}function lc(v){return Io.apply(this,arguments)}function Io(){return(Io=(0,u.Z)(function*(v){const g=yield Su()._get(yh(v));return g&&(yield Su()._remove(yh(v))),g})).apply(this,arguments)}function cc(){const v=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=0;_<20;_++){const w=Math.floor(Math.random()*g.length);v.push(g.charAt(w))}return v.join("")}function Su(){return ie(Ps)}function yh(v){return ae("authEvent",v.config.apiKey,v.name)}function dc(v){if(!(null==v?void 0:v.includes("?")))return{};const[g,..._]=v.split("?");return(0,V.zd)(_.join("?"))}function Ch(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:he("no-auth-event")}}function Au(){var v;return(null===(v=null==self?void 0:self.location)||void 0===v?void 0:v.protocol)||null}function pg(v=(0,V.z$)()){return!("file:"!==Au()&&"ionic:"!==Au()||!v.toLowerCase().match(/iphone|ipad|ipod|android/))}function nr(){try{const v=self.localStorage,g=Ja();if(v)return v.setItem(g,"1"),v.removeItem(g),!function So(v=(0,V.z$)()){return function fy(){return(0,V.w1)()&&11===(null==document?void 0:document.documentMode)}()||function py(v=(0,V.z$)()){return/Edge\/\d+/.test(v)}(v)}()||(0,V.hl)()}catch(v){return $s()&&(0,V.hl)()}return!1}function $s(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function fc(){return(function hy(){return"http:"===Au()||"https:"===Au()}()||(0,V.ru)()||pg())&&!function Mu(){return(0,V.b$)()||(0,V.UG)()}()&&nr()&&!$s()}function Eh(){return pg()&&"undefined"!=typeof document}function ba(){return(ba=(0,u.Z)(function*(){return!!Eh()&&new Promise(v=>{const g=setTimeout(()=>{v(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(g),v(!0)})})})).apply(this,arguments)}const hi={LOCAL:"local",NONE:"none",SESSION:"session"},wa=ee,Th="persistence";function Ca(v){return Ih.apply(this,arguments)}function Ih(){return(Ih=(0,u.Z)(function*(v){yield v._initializationPromise;const g=pc(),_=ae(Th,v.config.apiKey,v.name);g&&g.setItem(_,v._getPersistence())})).apply(this,arguments)}function pc(){var v;try{return(null===(v=function Dh(){return"undefined"!=typeof window?window:null}())||void 0===v?void 0:v.sessionStorage)||null}catch(g){return null}}const gy=ee;class zr{constructor(){this.browserResolver=ie(class Gs{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=St,this._completeRedirectFn=tc}_openPopup(g,_,w,S){var O=this;return(0,u.Z)(function*(){var z;re(null===(z=O.eventManagers[g._key()])||void 0===z?void 0:z.manager,"_initialize() not called before _openPopup()");const ne=dh(g,_,w,bt(),S);return function Hs(v,g,_,w=500,S=600){const O=Math.max((window.screen.availHeight-S)/2,0).toString(),z=Math.max((window.screen.availWidth-w)/2,0).toString();let ne="";const Pe=Object.assign(Object.assign({},iy),{width:w.toString(),height:S.toString(),top:O,left:z}),qe=(0,V.z$)().toLowerCase();_&&(ne=Tr(qe)?"_blank":_),gt(qe)&&(g=g||"http://localhost",Pe.scrollbars="yes");const dt=Object.entries(Pe).reduce((bn,[ki,mc])=>`${bn}${ki}=${mc},`,"");if(function Bl(v=(0,V.z$)()){var g;return Jn(v)&&!!(null===(g=window.navigator)||void 0===g?void 0:g.standalone)}(qe)&&"_self"!==ne)return function uh(v,g){const _=document.createElement("a");_.href=v,_.target=g;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(w)}(g||"",ne),new Cu(null);const et=window.open(g||"",ne,dt);ee(et,v,"popup-blocked");try{et.focus()}catch(bn){}return new Cu(et)}(g,ne,Ja())})()}_openRedirect(g,_,w,S){var O=this;return(0,u.Z)(function*(){return yield O._originValidation(g),function $_(v){yn().location.href=v}(dh(g,_,w,bt(),S)),new Promise(()=>{})})()}_initialize(g){const _=g._key();if(this.eventManagers[_]){const{manager:S,promise:O}=this.eventManagers[_];return S?Promise.resolve(S):(re(O,"If manager is not set, promise should be"),O)}const w=this.initAndGetManager(g);return this.eventManagers[_]={promise:w},w.catch(()=>{delete this.eventManagers[_]}),w}initAndGetManager(g){var _=this;return(0,u.Z)(function*(){const w=yield function ry(v){return To.apply(this,arguments)}(g),S=new il(g);return w.register("authEvent",O=>(ee(null==O?void 0:O.authEvent,g,"invalid-auth-event"),{status:S.onEvent(O.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[g._key()]={manager:S},_.iframes[g._key()]=w,S})()}_isIframeWebStorageSupported(g,_){this.iframes[g._key()].send(qi,{type:qi},S=>{var O;const z=null===(O=null==S?void 0:S[0])||void 0===O?void 0:O[qi];void 0!==z&&_(!!z),Ee(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const _=g._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function X_(v){return zi.apply(this,arguments)}(g)),this.originValidationPromises[_]}get _shouldInitProactively(){return Is()||Yt()||Jn()}}),this.cordovaResolver=ie(class wh{constructor(){this._redirectPersistence=St,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=tc}_initialize(g){var _=this;return(0,u.Z)(function*(){const w=g._key();let S=_.eventManagers.get(w);return S||(S=new mh(g),_.eventManagers.set(w,S),_.attachCallbackListeners(g,S)),S})()}_openPopup(g){Ee(g,"operation-not-supported-in-this-environment")}_openRedirect(g,_,w,S){var O=this;return(0,u.Z)(function*(){!function Iu(v){var g,_,w,S,O,z,ne,Pe,qe,dt;const et=_s();ee("function"==typeof(null===(g=null==et?void 0:et.universalLinks)||void 0===g?void 0:g.subscribe),v,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ee(void 0!==(null===(_=null==et?void 0:et.BuildInfo)||void 0===_?void 0:_.packageName),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ee("function"==typeof(null===(O=null===(S=null===(w=null==et?void 0:et.cordova)||void 0===w?void 0:w.plugins)||void 0===S?void 0:S.browsertab)||void 0===O?void 0:O.openUrl),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ee("function"==typeof(null===(Pe=null===(ne=null===(z=null==et?void 0:et.cordova)||void 0===z?void 0:z.plugins)||void 0===ne?void 0:ne.browsertab)||void 0===Pe?void 0:Pe.isAvailable),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ee("function"==typeof(null===(dt=null===(qe=null==et?void 0:et.cordova)||void 0===qe?void 0:qe.InAppBrowser)||void 0===dt?void 0:dt.open),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(g);const z=yield O._initialize(g);yield z.initialized(),z.resetRedirect(),function ec(){gu.clear()}(),yield O._originValidation(g);const ne=function _h(v,g,_=null){return{type:g,eventId:_,urlResponse:null,sessionId:cc(),postBody:null,tenantId:v.tenantId,error:he(v,"no-auth-event")}}(g,w,S);yield function e0(v,g){return Su()._set(yh(v),g)}(g,ne);const Pe=yield function fh(v,g,_){return ya.apply(this,arguments)}(g,ne,_),qe=yield function ac(v){const{cordova:g}=_s();return new Promise(_=>{g.plugins.browsertab.isAvailable(w=>{let S=null;w?g.plugins.browsertab.openUrl(v):S=g.InAppBrowser.open(v,function Vl(v=(0,V.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}()?"_blank":"_system","location=yes"),_(S)})})}(Pe);return function dg(v,g,_){return Tu.apply(this,arguments)}(g,z,qe)})()}_isIframeWebStorageSupported(g,_){throw new Error("Method not implemented.")}_originValidation(g){const _=g._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function ph(v){return di.apply(this,arguments)}(g)),this.originValidationPromises[_]}attachCallbackListeners(g,_){const{universalLinks:w,handleOpenURL:S,BuildInfo:O}=_s(),z=setTimeout((0,u.Z)(function*(){yield lc(g),_.onEvent(Ch())}),500),ne=function(){var dt=(0,u.Z)(function*(et){clearTimeout(z);const bn=yield lc(g);let ki=null;bn&&(null==et?void 0:et.url)&&(ki=function uy(v,g){var _,w;const S=function uc(v){const g=dc(v),_=g.link?decodeURIComponent(g.link):void 0,w=dc(_).link,S=g.deep_link_id?decodeURIComponent(g.deep_link_id):void 0;return dc(S).link||S||w||_||v}(g);if(S.includes("/__/auth/callback")){const O=dc(S),z=O.firebaseError?function vh(v){try{return JSON.parse(v)}catch(g){return null}}(decodeURIComponent(O.firebaseError)):null,ne=null===(w=null===(_=null==z?void 0:z.code)||void 0===_?void 0:_.split("auth/"))||void 0===w?void 0:w[1],Pe=ne?he(ne):null;return Pe?{type:v.type,eventId:v.eventId,tenantId:v.tenantId,error:Pe,urlResponse:null,sessionId:null,postBody:null}:{type:v.type,eventId:v.eventId,tenantId:v.tenantId,sessionId:v.sessionId,urlResponse:S,postBody:null}}return null}(bn,et.url)),_.onEvent(ki||Ch())});return function(bn){return dt.apply(this,arguments)}}();void 0!==w&&"function"==typeof w.subscribe&&w.subscribe(null,ne);const Pe=S,qe=`${O.packageName.toLowerCase()}://`;_s().handleOpenURL=function(){var dt=(0,u.Z)(function*(et){if(et.toLowerCase().startsWith(qe)&&ne({url:et}),"function"==typeof Pe)try{Pe(et)}catch(bn){console.error(bn)}});return function(et){return dt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=St,this._completeRedirectFn=tc}_initialize(g){var _=this;return(0,u.Z)(function*(){return yield _.selectUnderlyingResolver(),_.assertedUnderlyingResolver._initialize(g)})()}_openPopup(g,_,w,S){var O=this;return(0,u.Z)(function*(){return yield O.selectUnderlyingResolver(),O.assertedUnderlyingResolver._openPopup(g,_,w,S)})()}_openRedirect(g,_,w,S){var O=this;return(0,u.Z)(function*(){return yield O.selectUnderlyingResolver(),O.assertedUnderlyingResolver._openRedirect(g,_,w,S)})()}_isIframeWebStorageSupported(g,_){this.assertedUnderlyingResolver._isIframeWebStorageSupported(g,_)}_originValidation(g){return this.assertedUnderlyingResolver._originValidation(g)}get _shouldInitProactively(){return Eh()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return gy(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var g=this;return(0,u.Z)(function*(){if(g.underlyingResolver)return;const _=yield function pr(){return ba.apply(this,arguments)}();g.underlyingResolver=_?g.cordovaResolver:g.browserResolver})()}}function _g(v){return v.unwrap()}function Ea(v){return yg(v)}function yg(v){const{_tokenResponse:g}=v instanceof V.ZR?v.customData:v;if(!g)return null;if(!(v instanceof V.ZR)&&"temporaryProof"in g&&"phoneNumber"in g)return Bs.credentialFromResult(v);const _=g.providerId;if(!_||"password"===_)return null;let w;switch(_){case"google.com":w=$l;break;case"facebook.com":w=Ga;break;case"github.com":w=Np;break;case"twitter.com":w=tu;break;default:const{oauthIdToken:S,oauthAccessToken:O,oauthTokenSecret:z,pendingToken:ne,nonce:Pe}=g;return O||z||S||ne?ne?_.startsWith("saml.")?fo._create(_,ne):Ms._fromParams({providerId:_,signInMethod:_,pendingToken:ne,idToken:S,accessToken:O}):new Ha(_).credential({idToken:S,accessToken:O,rawNonce:Pe}):null}return v instanceof V.ZR?w.credentialFromError(v):w.credentialFromResult(v)}function rr(v,g){return g.catch(_=>{throw _ instanceof V.ZR&&function _y(v,g){var _;const w=null===(_=g.customData)||void 0===_?void 0:_._tokenResponse;if("auth/multi-factor-auth-required"===g.code)g.resolver=new yy(v,function Gd(v,g){var _;const w=(0,V.m9)(v),S=g;return ee(g.customData.operationType,w,"argument-error"),ee(null===(_=S.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,w,"argument-error"),Jl._fromError(w,S)}(v,g));else if(w){const S=yg(g),O=g;S&&(O.credential=S,O.tenantId=w.tenantId||void 0,O.email=w.email||void 0,O.phoneNumber=w.phoneNumber||void 0)}}(v,_),_}).then(_=>{const S=_.user;return{operationType:_.operationType,credential:Ea(_),additionalUserInfo:Mr(_),user:zs.getOrCreate(S)}})}function Sh(v,g){return Ah.apply(this,arguments)}function Ah(){return(Ah=(0,u.Z)(function*(v,g){const _=yield g;return{verificationId:_.verificationId,confirm:w=>rr(v,_.confirm(w))}})).apply(this,arguments)}class yy{constructor(g,_){this.resolver=_,this.auth=function my(v){return v.wrapped()}(g)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(g){return rr(_g(this.auth),this.resolver.resolveSignIn(g))}}class zs{constructor(g){this._delegate=g,this.multiFactor=function KC(v){const g=(0,V.m9)(v);return Qa.has(g)||Qa.set(g,Ns._fromUser(g)),Qa.get(g)}(g)}static getOrCreate(g){return zs.USER_MAP.has(g)||zs.USER_MAP.set(g,new zs(g)),zs.USER_MAP.get(g)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(g){return this._delegate.getIdTokenResult(g)}getIdToken(g){return this._delegate.getIdToken(g)}linkAndRetrieveDataWithCredential(g){return this.linkWithCredential(g)}linkWithCredential(g){var _=this;return(0,u.Z)(function*(){return rr(_.auth,xs(_._delegate,g))})()}linkWithPhoneNumber(g,_){var w=this;return(0,u.Z)(function*(){return Sh(w.auth,function Jd(v,g,_){return ha.apply(this,arguments)}(w._delegate,g,_))})()}linkWithPopup(g){var _=this;return(0,u.Z)(function*(){return rr(_.auth,function ps(v,g,_){return fu.apply(this,arguments)}(_._delegate,g,zr))})()}linkWithRedirect(g){var _=this;return(0,u.Z)(function*(){return yield Ca(Ae(_.auth)),function Mn(v,g,_){return function sg(v,g,_){return gs.apply(this,arguments)}(v,g,_)}(_._delegate,g,zr)})()}reauthenticateAndRetrieveDataWithCredential(g){return this.reauthenticateWithCredential(g)}reauthenticateWithCredential(g){var _=this;return(0,u.Z)(function*(){return rr(_.auth,za(_._delegate,g))})()}reauthenticateWithPhoneNumber(g,_){return Sh(this.auth,function JC(v,g,_){return Xd.apply(this,arguments)}(this._delegate,g,_))}reauthenticateWithPopup(g){return rr(this.auth,function tg(v,g,_){return nh.apply(this,arguments)}(this._delegate,g,zr))}reauthenticateWithRedirect(g){var _=this;return(0,u.Z)(function*(){return yield Ca(Ae(_.auth)),function Co(v,g,_){return function Eo(v,g,_){return xt.apply(this,arguments)}(v,g,_)}(_._delegate,g,zr)})()}sendEmailVerification(g){return function Rs(v,g){return Vd.apply(this,arguments)}(this._delegate,g)}unlink(g){var _=this;return(0,u.Z)(function*(){return yield function kd(v,g){return V_.apply(this,arguments)}(_._delegate,g),_})()}updateEmail(g){return function jd(v,g){return qp((0,V.m9)(v),g,null)}(this._delegate,g)}updatePassword(g){return function qC(v,g){return qp((0,V.m9)(v),null,g)}(this._delegate,g)}updatePhoneNumber(g){return function eh(v,g){return fa.apply(this,arguments)}(this._delegate,g)}updateProfile(g){return function lu(v,g){return Ud.apply(this,arguments)}(this._delegate,g)}verifyBeforeUpdateEmail(g,_){return function zp(v,g,_){return Bd.apply(this,arguments)}(this._delegate,g,_)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}zs.USER_MAP=new WeakMap;const gc=ee;let Mh=(()=>{class v{constructor(_,w){if(this.app=_,w.isInitialized())return this._delegate=w.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:S}=_.options;gc(S,"invalid-api-key",{appName:_.name}),gc(S,"invalid-api-key",{appName:_.name});const O="undefined"!=typeof window?zr:void 0;this._delegate=w.initialize({options:{persistence:vy(S,_.name),popupRedirectResolver:O}}),this._delegate._updateErrorMap(Fe),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?zs.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(_){this._delegate.languageCode=_}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(_){this._delegate.tenantId=_}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(_,w){!function cn(v,g,_){const w=Ae(v);ee(w._canInitEmulator,w,"emulator-config-failed"),ee(/^https?:\/\//.test(g),w,"invalid-emulator-scheme");const S=!!(null==_?void 0:_.disableWarnings),O=Br(g),{host:z,port:ne}=function Xo(v){const g=Br(v),_=/(\/\/)?([^?#/]+)/.exec(v.substr(g.length));if(!_)return{host:"",port:null};const w=_[2].split("@").pop()||"",S=/^(\[[^\]]+\])(:|$)/.exec(w);if(S){const O=S[1];return{host:O,port:$n(w.substr(O.length+1))}}{const[O,z]=w.split(":");return{host:O,port:$n(z)}}}(g);w.config.emulator={url:`${O}//${z}${null===ne?"":`:${ne}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:z,port:ne,protocol:O.replace(":",""),options:Object.freeze({disableWarnings:S})}),S||function Ss(){function v(){const g=document.createElement("p"),_=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}(this._delegate,_,w)}applyActionCode(_){return function B_(v,g){return me.apply(this,arguments)}(this._delegate,_)}checkActionCode(_){return Ot(this._delegate,_)}confirmPasswordReset(_,w){return function jp(v,g,_){return Nd.apply(this,arguments)}(this._delegate,_,w)}createUserWithEmailAndPassword(_,w){var S=this;return(0,u.Z)(function*(){return rr(S._delegate,function Kl(v,g,_){return li.apply(this,arguments)}(S._delegate,_,w))})()}fetchProvidersForEmail(_){return this.fetchSignInMethodsForEmail(_)}fetchSignInMethodsForEmail(_){return function $p(v,g){return go.apply(this,arguments)}(this._delegate,_)}isSignInWithEmailLink(_){return function Gp(v,g){const _=ra.parseLink(g);return"EMAIL_SIGNIN"===(null==_?void 0:_.operation)}(0,_)}getRedirectResult(){var _=this;return(0,u.Z)(function*(){gc(fc(),_._delegate,"operation-not-supported-in-this-environment");const w=yield function sh(v,g){return Do.apply(this,arguments)}(_._delegate,zr);return w?rr(_._delegate,Promise.resolve(w)):{credential:null,user:null}})()}addFrameworkForLogging(_){!function fg(v,g){Ae(v)._logFramework(g)}(this._delegate,_)}onAuthStateChanged(_,w,S){const{next:O,error:z,complete:ne}=xh(_,w,S);return this._delegate.onAuthStateChanged(O,z,ne)}onIdTokenChanged(_,w,S){const{next:O,error:z,complete:ne}=xh(_,w,S);return this._delegate.onIdTokenChanged(O,z,ne)}sendSignInLinkToEmail(_,w){return function Ld(v,g,_){return Hp.apply(this,arguments)}(this._delegate,_,w)}sendPasswordResetEmail(_,w){return function Up(v,g,_){return Od.apply(this,arguments)}(this._delegate,_,w||void 0)}setPersistence(_){var w=this;return(0,u.Z)(function*(){let S;switch(function gg(v,g){wa(Object.values(hi).includes(g),v,"invalid-persistence-type"),(0,V.b$)()?wa(g!==hi.SESSION,v,"unsupported-persistence-type"):(0,V.UG)()?wa(g===hi.NONE,v,"unsupported-persistence-type"):$s()?wa(g===hi.NONE||g===hi.LOCAL&&(0,V.hl)(),v,"unsupported-persistence-type"):wa(g===hi.NONE||nr(),v,"unsupported-persistence-type")}(w._delegate,_),_){case hi.SESSION:S=St;break;case hi.LOCAL:S=(yield ie(xi)._isAvailable())?xi:Ps;break;case hi.NONE:S=$;break;default:return Ee("argument-error",{appName:w._delegate.name})}return w._delegate.setPersistence(S)})()}signInAndRetrieveDataWithCredential(_){return this.signInWithCredential(_)}signInAnonymously(){return rr(this._delegate,function Fp(v){return Lp.apply(this,arguments)}(this._delegate))}signInWithCredential(_){return rr(this._delegate,su(this._delegate,_))}signInWithCustomToken(_){return rr(this._delegate,function qa(v,g){return Wa.apply(this,arguments)}(this._delegate,_))}signInWithEmailAndPassword(_,w){return rr(this._delegate,function Fd(v,g,_){return su((0,V.m9)(v),Md.credential(g,_))}(this._delegate,_,w))}signInWithEmailLink(_,w){return rr(this._delegate,function au(v,g,_){return Ka.apply(this,arguments)}(this._delegate,_,w))}signInWithPhoneNumber(_,w){return Sh(this._delegate,function uu(v,g,_){return An.apply(this,arguments)}(this._delegate,_,w))}signInWithPopup(_){var w=this;return(0,u.Z)(function*(){return gc(fc(),w._delegate,"operation-not-supported-in-this-environment"),rr(w._delegate,function wo(v,g,_){return eg.apply(this,arguments)}(w._delegate,_,zr))})()}signInWithRedirect(_){var w=this;return(0,u.Z)(function*(){return gc(fc(),w._delegate,"operation-not-supported-in-this-environment"),yield Ca(w._delegate),function Q_(v,g,_){return function ih(v,g,_){return mu.apply(this,arguments)}(v,g,_)}(w._delegate,_,zr)})()}updateCurrentUser(_){return this._delegate.updateCurrentUser(_)}verifyPasswordResetCode(_){return function Dn(v,g){return Za.apply(this,arguments)}(this._delegate,_)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return v.Persistence=hi,v})();function xh(v,g,_){let w=v;"function"!=typeof v&&({next:w,error:g,complete:_}=v);const S=w;return{next:z=>S(z&&zs.getOrCreate(z)),error:g,complete:_}}function vy(v,g){const _=function mg(v,g){const _=pc();if(!_)return[];const w=ae(Th,v,g);switch(_.getItem(w)){case hi.NONE:return[$];case hi.LOCAL:return[xi,St];case hi.SESSION:return[St];default:return[]}}(v,g);if("undefined"!=typeof self&&!_.includes(xi)&&_.push(xi),"undefined"!=typeof window)for(const w of[Ps,St])_.includes(w)||_.push(w);return _.includes($)||_.push($),_}class Rh{constructor(){this.providerId="phone",this._delegate=new Bs(_g(X.Z.auth()))}static credential(g,_){return Bs.credential(g,_)}verifyPhoneNumber(g,_){return this._delegate.verifyPhoneNumber(g,_)}unwrap(){return this._delegate}}Rh.PHONE_SIGN_IN_METHOD=Bs.PHONE_SIGN_IN_METHOD,Rh.PROVIDER_ID=Bs.PROVIDER_ID;const by=ee;class wy{constructor(g,_,w=X.Z.app()){var S;by(null===(S=w.options)||void 0===S?void 0:S.apiKey,"invalid-api-key",{appName:w.name}),this._delegate=new Z_(g,_,w.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function vg(v){v.INTERNAL.registerComponent(new ue.wA("auth-compat",g=>{const _=g.getProvider("app-compat").getImmediate(),w=g.getProvider("auth");return new Mh(_,w)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Md,FacebookAuthProvider:Ga,GithubAuthProvider:Np,GoogleAuthProvider:$l,OAuthProvider:Ha,SAMLAuthProvider:eu,PhoneAuthProvider:Rh,PhoneMultiFactorGenerator:lg,RecaptchaVerifier:wy,TwitterAuthProvider:tu,Auth:Mh,AuthCredential:rn,Error:V.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),v.registerVersion("@firebase/auth-compat","0.2.11")}(X.Z)},8306:(at,De,F)=>{F.d(De,{y:()=>G});var u=F(930),X=F(727),V=F(8822),fe=F(4671);var ue=F(2416),ye=F(576),Ie=F(2806);let G=(()=>{class xe{constructor(Oe){Oe&&(this._subscribe=Oe)}lift(Oe){const te=new xe;return te.source=this,te.operator=Oe,te}subscribe(Oe,te,Se){const We=function $e(xe){return xe&&xe instanceof u.Lv||function J(xe){return xe&&(0,ye.m)(xe.next)&&(0,ye.m)(xe.error)&&(0,ye.m)(xe.complete)}(xe)&&(0,X.Nn)(xe)}(Oe)?Oe:new u.Hp(Oe,te,Se);return(0,Ie.x)(()=>{const{operator:Je,source:Ee}=this;We.add(Je?Je.call(We,Ee):Ee?this._subscribe(We):this._trySubscribe(We))}),We}_trySubscribe(Oe){try{return this._subscribe(Oe)}catch(te){Oe.error(te)}}forEach(Oe,te){return new(te=H(te))((Se,We)=>{const Je=new u.Hp({next:Ee=>{try{Oe(Ee)}catch(he){We(he),Je.unsubscribe()}},error:We,complete:Se});this.subscribe(Je)})}_subscribe(Oe){var te;return null===(te=this.source)||void 0===te?void 0:te.subscribe(Oe)}[V.L](){return this}pipe(...Oe){return function we(xe){return 0===xe.length?fe.y:1===xe.length?xe[0]:function(Oe){return xe.reduce((te,Se)=>Se(te),Oe)}}(Oe)(this)}toPromise(Oe){return new(Oe=H(Oe))((te,Se)=>{let We;this.subscribe(Je=>We=Je,Je=>Se(Je),()=>te(We))})}}return xe.create=Fe=>new xe(Fe),xe})();function H(xe){var Fe;return null!==(Fe=null!=xe?xe:ue.v.Promise)&&void 0!==Fe?Fe:Promise}},7579:(at,De,F)=>{F.d(De,{x:()=>ue});var u=F(8306),X=F(727);const fe=(0,F(3888).d)(Ie=>function(){Ie(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var _e=F(8737),we=F(2806);let ue=(()=>{class Ie extends u.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(H){const J=new ye(this,this);return J.operator=H,J}_throwIfClosed(){if(this.closed)throw new fe}next(H){(0,we.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const J of this.currentObservers)J.next(H)}})}error(H){(0,we.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=H;const{observers:J}=this;for(;J.length;)J.shift().error(H)}})}complete(){(0,we.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:H}=this;for(;H.length;)H.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var H;return(null===(H=this.observers)||void 0===H?void 0:H.length)>0}_trySubscribe(H){return this._throwIfClosed(),super._trySubscribe(H)}_subscribe(H){return this._throwIfClosed(),this._checkFinalizedStatuses(H),this._innerSubscribe(H)}_innerSubscribe(H){const{hasError:J,isStopped:$e,observers:xe}=this;return J||$e?X.Lc:(this.currentObservers=null,xe.push(H),new X.w0(()=>{this.currentObservers=null,(0,_e.P)(xe,H)}))}_checkFinalizedStatuses(H){const{hasError:J,thrownError:$e,isStopped:xe}=this;J?H.error($e):xe&&H.complete()}asObservable(){const H=new u.y;return H.source=this,H}}return Ie.create=(G,H)=>new ye(G,H),Ie})();class ye extends ue{constructor(G,H){super(),this.destination=G,this.source=H}next(G){var H,J;null===(J=null===(H=this.destination)||void 0===H?void 0:H.next)||void 0===J||J.call(H,G)}error(G){var H,J;null===(J=null===(H=this.destination)||void 0===H?void 0:H.error)||void 0===J||J.call(H,G)}complete(){var G,H;null===(H=null===(G=this.destination)||void 0===G?void 0:G.complete)||void 0===H||H.call(G)}_subscribe(G){var H,J;return null!==(J=null===(H=this.source)||void 0===H?void 0:H.subscribe(G))&&void 0!==J?J:X.Lc}}},930:(at,De,F)=>{F.d(De,{Hp:()=>Oe,Lv:()=>J});var u=F(576),X=F(727),V=F(2416),fe=F(7849),_e=F(5032);const we=Ie("C",void 0,void 0);function Ie(Ee,he,pe){return{kind:Ee,value:he,error:pe}}var G=F(3410),H=F(2806);class J extends X.w0{constructor(he){super(),this.isStopped=!1,he?(this.destination=he,(0,X.Nn)(he)&&he.add(this)):this.destination=Je}static create(he,pe,Ve){return new Oe(he,pe,Ve)}next(he){this.isStopped?We(function ye(Ee){return Ie("N",Ee,void 0)}(he),this):this._next(he)}error(he){this.isStopped?We(function ue(Ee){return Ie("E",void 0,Ee)}(he),this):(this.isStopped=!0,this._error(he))}complete(){this.isStopped?We(we,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(he){this.destination.next(he)}_error(he){try{this.destination.error(he)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const $e=Function.prototype.bind;function xe(Ee,he){return $e.call(Ee,he)}class Fe{constructor(he){this.partialObserver=he}next(he){const{partialObserver:pe}=this;if(pe.next)try{pe.next(he)}catch(Ve){te(Ve)}}error(he){const{partialObserver:pe}=this;if(pe.error)try{pe.error(he)}catch(Ve){te(Ve)}else te(he)}complete(){const{partialObserver:he}=this;if(he.complete)try{he.complete()}catch(pe){te(pe)}}}class Oe extends J{constructor(he,pe,Ve){let Ge;if(super(),(0,u.m)(he)||!he)Ge={next:null!=he?he:void 0,error:null!=pe?pe:void 0,complete:null!=Ve?Ve:void 0};else{let ee;this&&V.v.useDeprecatedNextContext?(ee=Object.create(he),ee.unsubscribe=()=>this.unsubscribe(),Ge={next:he.next&&xe(he.next,ee),error:he.error&&xe(he.error,ee),complete:he.complete&&xe(he.complete,ee)}):Ge=he}this.destination=new Fe(Ge)}}function te(Ee){V.v.useDeprecatedSynchronousErrorHandling?(0,H.O)(Ee):(0,fe.h)(Ee)}function We(Ee,he){const{onStoppedNotification:pe}=V.v;pe&&G.z.setTimeout(()=>pe(Ee,he))}const Je={closed:!0,next:_e.Z,error:function Se(Ee){throw Ee},complete:_e.Z}},727:(at,De,F)=>{F.d(De,{Lc:()=>we,w0:()=>_e,Nn:()=>ue});var u=F(576);const V=(0,F(3888).d)(Ie=>function(H){Ie(this),this.message=H?`${H.length} errors occurred during unsubscription:\n${H.map((J,$e)=>`${$e+1}) ${J.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=H});var fe=F(8737);class _e{constructor(G){this.initialTeardown=G,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let G;if(!this.closed){this.closed=!0;const{_parentage:H}=this;if(H)if(this._parentage=null,Array.isArray(H))for(const xe of H)xe.remove(this);else H.remove(this);const{initialTeardown:J}=this;if((0,u.m)(J))try{J()}catch(xe){G=xe instanceof V?xe.errors:[xe]}const{_finalizers:$e}=this;if($e){this._finalizers=null;for(const xe of $e)try{ye(xe)}catch(Fe){G=null!=G?G:[],Fe instanceof V?G=[...G,...Fe.errors]:G.push(Fe)}}if(G)throw new V(G)}}add(G){var H;if(G&&G!==this)if(this.closed)ye(G);else{if(G instanceof _e){if(G.closed||G._hasParent(this))return;G._addParent(this)}(this._finalizers=null!==(H=this._finalizers)&&void 0!==H?H:[]).push(G)}}_hasParent(G){const{_parentage:H}=this;return H===G||Array.isArray(H)&&H.includes(G)}_addParent(G){const{_parentage:H}=this;this._parentage=Array.isArray(H)?(H.push(G),H):H?[H,G]:G}_removeParent(G){const{_parentage:H}=this;H===G?this._parentage=null:Array.isArray(H)&&(0,fe.P)(H,G)}remove(G){const{_finalizers:H}=this;H&&(0,fe.P)(H,G),G instanceof _e&&G._removeParent(this)}}_e.EMPTY=(()=>{const Ie=new _e;return Ie.closed=!0,Ie})();const we=_e.EMPTY;function ue(Ie){return Ie instanceof _e||Ie&&"closed"in Ie&&(0,u.m)(Ie.remove)&&(0,u.m)(Ie.add)&&(0,u.m)(Ie.unsubscribe)}function ye(Ie){(0,u.m)(Ie)?Ie():Ie.unsubscribe()}},2416:(at,De,F)=>{F.d(De,{v:()=>u});const u={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(at,De,F)=>{F.d(De,{E:()=>X});const X=new(F(8306).y)(_e=>_e.complete())},8996:(at,De,F)=>{F.d(De,{D:()=>he});var u=F(8421),X=F(5363),V=F(9468),we=F(8306),ye=F(2202),Ie=F(576),G=F(9672);function J(pe,Ve){if(!pe)throw new Error("Iterable cannot be null");return new we.y(Ge=>{(0,G.f)(Ge,Ve,()=>{const ee=pe[Symbol.asyncIterator]();(0,G.f)(Ge,Ve,()=>{ee.next().then(K=>{K.done?Ge.complete():Ge.next(K.value)})},0,!0)})})}var $e=F(3670),xe=F(8239),Fe=F(1144),Oe=F(6495),te=F(2206),Se=F(4532),We=F(3260);function he(pe,Ve){return Ve?function Ee(pe,Ve){if(null!=pe){if((0,$e.c)(pe))return function fe(pe,Ve){return(0,u.Xf)(pe).pipe((0,V.R)(Ve),(0,X.Q)(Ve))}(pe,Ve);if((0,Fe.z)(pe))return function ue(pe,Ve){return new we.y(Ge=>{let ee=0;return Ve.schedule(function(){ee===pe.length?Ge.complete():(Ge.next(pe[ee++]),Ge.closed||this.schedule())})})}(pe,Ve);if((0,xe.t)(pe))return function _e(pe,Ve){return(0,u.Xf)(pe).pipe((0,V.R)(Ve),(0,X.Q)(Ve))}(pe,Ve);if((0,te.D)(pe))return J(pe,Ve);if((0,Oe.T)(pe))return function H(pe,Ve){return new we.y(Ge=>{let ee;return(0,G.f)(Ge,Ve,()=>{ee=pe[ye.h](),(0,G.f)(Ge,Ve,()=>{let K,re;try{({value:K,done:re}=ee.next())}catch(ce){return void Ge.error(ce)}re?Ge.complete():Ge.next(K)},0,!0)}),()=>(0,Ie.m)(null==ee?void 0:ee.return)&&ee.return()})}(pe,Ve);if((0,We.L)(pe))return function Je(pe,Ve){return J((0,We.Q)(pe),Ve)}(pe,Ve)}throw(0,Se.z)(pe)}(pe,Ve):(0,u.Xf)(pe)}},8421:(at,De,F)=>{F.d(De,{Xf:()=>$e});var u=F(655),X=F(1144),V=F(8239),fe=F(8306),_e=F(3670),we=F(2206),ue=F(4532),ye=F(6495),Ie=F(3260),G=F(576),H=F(7849),J=F(8822);function $e(Ee){if(Ee instanceof fe.y)return Ee;if(null!=Ee){if((0,_e.c)(Ee))return function xe(Ee){return new fe.y(he=>{const pe=Ee[J.L]();if((0,G.m)(pe.subscribe))return pe.subscribe(he);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ee);if((0,X.z)(Ee))return function Fe(Ee){return new fe.y(he=>{for(let pe=0;pe<Ee.length&&!he.closed;pe++)he.next(Ee[pe]);he.complete()})}(Ee);if((0,V.t)(Ee))return function Oe(Ee){return new fe.y(he=>{Ee.then(pe=>{he.closed||(he.next(pe),he.complete())},pe=>he.error(pe)).then(null,H.h)})}(Ee);if((0,we.D)(Ee))return Se(Ee);if((0,ye.T)(Ee))return function te(Ee){return new fe.y(he=>{for(const pe of Ee)if(he.next(pe),he.closed)return;he.complete()})}(Ee);if((0,Ie.L)(Ee))return function We(Ee){return Se((0,Ie.Q)(Ee))}(Ee)}throw(0,ue.z)(Ee)}function Se(Ee){return new fe.y(he=>{(function Je(Ee,he){var pe,Ve,Ge,ee;return(0,u.mG)(this,void 0,void 0,function*(){try{for(pe=(0,u.KL)(Ee);!(Ve=yield pe.next()).done;)if(he.next(Ve.value),he.closed)return}catch(K){Ge={error:K}}finally{try{Ve&&!Ve.done&&(ee=pe.return)&&(yield ee.call(pe))}finally{if(Ge)throw Ge.error}}he.complete()})})(Ee,he).catch(pe=>he.error(pe))})}},6451:(at,De,F)=>{F.d(De,{T:()=>we});var u=F(8189),X=F(8421),V=F(515),fe=F(3269),_e=F(8996);function we(...ue){const ye=(0,fe.yG)(ue),Ie=(0,fe._6)(ue,1/0),G=ue;return G.length?1===G.length?(0,X.Xf)(G[0]):(0,u.J)(Ie)((0,_e.D)(G,ye)):V.E}},5403:(at,De,F)=>{F.d(De,{x:()=>X});var u=F(930);function X(fe,_e,we,ue,ye){return new V(fe,_e,we,ue,ye)}class V extends u.Lv{constructor(_e,we,ue,ye,Ie,G){super(_e),this.onFinalize=Ie,this.shouldUnsubscribe=G,this._next=we?function(H){try{we(H)}catch(J){_e.error(J)}}:super._next,this._error=ye?function(H){try{ye(H)}catch(J){_e.error(J)}finally{this.unsubscribe()}}:super._error,this._complete=ue?function(){try{ue()}catch(H){_e.error(H)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var _e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:we}=this;super.unsubscribe(),!we&&(null===(_e=this.onFinalize)||void 0===_e||_e.call(this))}}}},4004:(at,De,F)=>{F.d(De,{U:()=>V});var u=F(4482),X=F(5403);function V(fe,_e){return(0,u.e)((we,ue)=>{let ye=0;we.subscribe((0,X.x)(ue,Ie=>{ue.next(fe.call(_e,Ie,ye++))}))})}},8189:(at,De,F)=>{F.d(De,{J:()=>V});var u=F(5577),X=F(4671);function V(fe=1/0){return(0,u.z)(X.y,fe)}},5577:(at,De,F)=>{F.d(De,{z:()=>ye});var u=F(4004),X=F(8421),V=F(4482),fe=F(9672),_e=F(5403),ue=F(576);function ye(Ie,G,H=1/0){return(0,ue.m)(G)?ye((J,$e)=>(0,u.U)((xe,Fe)=>G(J,xe,$e,Fe))((0,X.Xf)(Ie(J,$e))),H):("number"==typeof G&&(H=G),(0,V.e)((J,$e)=>function we(Ie,G,H,J,$e,xe,Fe,Oe){const te=[];let Se=0,We=0,Je=!1;const Ee=()=>{Je&&!te.length&&!Se&&G.complete()},he=Ve=>Se<J?pe(Ve):te.push(Ve),pe=Ve=>{xe&&G.next(Ve),Se++;let Ge=!1;(0,X.Xf)(H(Ve,We++)).subscribe((0,_e.x)(G,ee=>{null==$e||$e(ee),xe?he(ee):G.next(ee)},()=>{Ge=!0},void 0,()=>{if(Ge)try{for(Se--;te.length&&Se<J;){const ee=te.shift();Fe?(0,fe.f)(G,Fe,()=>pe(ee)):pe(ee)}Ee()}catch(ee){G.error(ee)}}))};return Ie.subscribe((0,_e.x)(G,he,()=>{Je=!0,Ee()})),()=>{null==Oe||Oe()}}(J,$e,Ie,H)))}},5363:(at,De,F)=>{F.d(De,{Q:()=>fe});var u=F(9672),X=F(4482),V=F(5403);function fe(_e,we=0){return(0,X.e)((ue,ye)=>{ue.subscribe((0,V.x)(ye,Ie=>(0,u.f)(ye,_e,()=>ye.next(Ie),we),()=>(0,u.f)(ye,_e,()=>ye.complete(),we),Ie=>(0,u.f)(ye,_e,()=>ye.error(Ie),we)))})}},3099:(at,De,F)=>{F.d(De,{B:()=>we});var u=F(8996),X=F(5698),V=F(7579),fe=F(930),_e=F(4482);function we(ye={}){const{connector:Ie=(()=>new V.x),resetOnError:G=!0,resetOnComplete:H=!0,resetOnRefCountZero:J=!0}=ye;return $e=>{let xe=null,Fe=null,Oe=null,te=0,Se=!1,We=!1;const Je=()=>{null==Fe||Fe.unsubscribe(),Fe=null},Ee=()=>{Je(),xe=Oe=null,Se=We=!1},he=()=>{const pe=xe;Ee(),null==pe||pe.unsubscribe()};return(0,_e.e)((pe,Ve)=>{te++,!We&&!Se&&Je();const Ge=Oe=null!=Oe?Oe:Ie();Ve.add(()=>{te--,0===te&&!We&&!Se&&(Fe=ue(he,J))}),Ge.subscribe(Ve),xe||(xe=new fe.Hp({next:ee=>Ge.next(ee),error:ee=>{We=!0,Je(),Fe=ue(Ee,G,ee),Ge.error(ee)},complete:()=>{Se=!0,Je(),Fe=ue(Ee,H),Ge.complete()}}),(0,u.D)(pe).subscribe(xe))})($e)}}function ue(ye,Ie,...G){return!0===Ie?(ye(),null):!1===Ie?null:Ie(...G).pipe((0,X.q)(1)).subscribe(()=>ye())}},9468:(at,De,F)=>{F.d(De,{R:()=>X});var u=F(4482);function X(V,fe=0){return(0,u.e)((_e,we)=>{we.add(V.schedule(()=>_e.subscribe(we),fe))})}},5698:(at,De,F)=>{F.d(De,{q:()=>fe});var u=F(515),X=F(4482),V=F(5403);function fe(_e){return _e<=0?()=>u.E:(0,X.e)((we,ue)=>{let ye=0;we.subscribe((0,V.x)(ue,Ie=>{++ye<=_e&&(ue.next(Ie),_e<=ye&&ue.complete())}))})}},3410:(at,De,F)=>{F.d(De,{z:()=>u});const u={setTimeout(X,V,...fe){const{delegate:_e}=u;return(null==_e?void 0:_e.setTimeout)?_e.setTimeout(X,V,...fe):setTimeout(X,V,...fe)},clearTimeout(X){const{delegate:V}=u;return((null==V?void 0:V.clearTimeout)||clearTimeout)(X)},delegate:void 0}},2202:(at,De,F)=>{F.d(De,{h:()=>X});const X=function u(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(at,De,F)=>{F.d(De,{L:()=>u});const u="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(at,De,F)=>{F.d(De,{jO:()=>fe,yG:()=>_e,_6:()=>we});var u=F(576),X=F(3532);function V(ue){return ue[ue.length-1]}function fe(ue){return(0,u.m)(V(ue))?ue.pop():void 0}function _e(ue){return(0,X.K)(V(ue))?ue.pop():void 0}function we(ue,ye){return"number"==typeof V(ue)?ue.pop():ye}},8737:(at,De,F)=>{function u(X,V){if(X){const fe=X.indexOf(V);0<=fe&&X.splice(fe,1)}}F.d(De,{P:()=>u})},3888:(at,De,F)=>{function u(X){const fe=X(_e=>{Error.call(_e),_e.stack=(new Error).stack});return fe.prototype=Object.create(Error.prototype),fe.prototype.constructor=fe,fe}F.d(De,{d:()=>u})},2806:(at,De,F)=>{F.d(De,{x:()=>V,O:()=>fe});var u=F(2416);let X=null;function V(_e){if(u.v.useDeprecatedSynchronousErrorHandling){const we=!X;if(we&&(X={errorThrown:!1,error:null}),_e(),we){const{errorThrown:ue,error:ye}=X;if(X=null,ue)throw ye}}else _e()}function fe(_e){u.v.useDeprecatedSynchronousErrorHandling&&X&&(X.errorThrown=!0,X.error=_e)}},9672:(at,De,F)=>{function u(X,V,fe,_e=0,we=!1){const ue=V.schedule(function(){fe(),we?X.add(this.schedule(null,_e)):this.unsubscribe()},_e);if(X.add(ue),!we)return ue}F.d(De,{f:()=>u})},4671:(at,De,F)=>{function u(X){return X}F.d(De,{y:()=>u})},1144:(at,De,F)=>{F.d(De,{z:()=>u});const u=X=>X&&"number"==typeof X.length&&"function"!=typeof X},2206:(at,De,F)=>{F.d(De,{D:()=>X});var u=F(576);function X(V){return Symbol.asyncIterator&&(0,u.m)(null==V?void 0:V[Symbol.asyncIterator])}},576:(at,De,F)=>{function u(X){return"function"==typeof X}F.d(De,{m:()=>u})},3670:(at,De,F)=>{F.d(De,{c:()=>V});var u=F(8822),X=F(576);function V(fe){return(0,X.m)(fe[u.L])}},6495:(at,De,F)=>{F.d(De,{T:()=>V});var u=F(2202),X=F(576);function V(fe){return(0,X.m)(null==fe?void 0:fe[u.h])}},8239:(at,De,F)=>{F.d(De,{t:()=>X});var u=F(576);function X(V){return(0,u.m)(null==V?void 0:V.then)}},3260:(at,De,F)=>{F.d(De,{Q:()=>V,L:()=>fe});var u=F(655),X=F(576);function V(_e){return(0,u.FC)(this,arguments,function*(){const ue=_e.getReader();try{for(;;){const{value:ye,done:Ie}=yield(0,u.qq)(ue.read());if(Ie)return yield(0,u.qq)(void 0);yield yield(0,u.qq)(ye)}}finally{ue.releaseLock()}})}function fe(_e){return(0,X.m)(null==_e?void 0:_e.getReader)}},3532:(at,De,F)=>{F.d(De,{K:()=>X});var u=F(576);function X(V){return V&&(0,u.m)(V.schedule)}},4482:(at,De,F)=>{F.d(De,{A:()=>X,e:()=>V});var u=F(576);function X(fe){return(0,u.m)(null==fe?void 0:fe.lift)}function V(fe){return _e=>{if(X(_e))return _e.lift(function(we){try{return fe(we,this)}catch(ue){this.error(ue)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(at,De,F)=>{function u(){}F.d(De,{Z:()=>u})},7849:(at,De,F)=>{F.d(De,{h:()=>V});var u=F(2416),X=F(3410);function V(fe){X.z.setTimeout(()=>{const{onUnhandledError:_e}=u.v;if(!_e)throw fe;_e(fe)})}},4532:(at,De,F)=>{function u(X){return new TypeError(`You provided ${null!==X&&"object"==typeof X?"an invalid object":`'${X}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}F.d(De,{z:()=>u})},655:(at,De,F)=>{function fe(K,re){var ce={};for(var ie in K)Object.prototype.hasOwnProperty.call(K,ie)&&re.indexOf(ie)<0&&(ce[ie]=K[ie]);if(null!=K&&"function"==typeof Object.getOwnPropertySymbols){var ke=0;for(ie=Object.getOwnPropertySymbols(K);ke<ie.length;ke++)re.indexOf(ie[ke])<0&&Object.prototype.propertyIsEnumerable.call(K,ie[ke])&&(ce[ie[ke]]=K[ie[ke]])}return ce}function ye(K,re,ce,ie){return new(ce||(ce=Promise))(function(se,bt){function Kt(ht){try{rt(ie.next(ht))}catch(Cn){bt(Cn)}}function Qn(ht){try{rt(ie.throw(ht))}catch(Cn){bt(Cn)}}function rt(ht){ht.done?se(ht.value):function ke(se){return se instanceof ce?se:new ce(function(bt){bt(se)})}(ht.value).then(Kt,Qn)}rt((ie=ie.apply(K,re||[])).next())})}function te(K){return this instanceof te?(this.v=K,this):new te(K)}function Se(K,re,ce){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ke,ie=ce.apply(K,re||[]),se=[];return ke={},bt("next"),bt("throw"),bt("return"),ke[Symbol.asyncIterator]=function(){return this},ke;function bt(En){ie[En]&&(ke[En]=function(cs){return new Promise(function(en,us){se.push([En,cs,en,us])>1||Kt(En,cs)})})}function Kt(En,cs){try{!function Qn(En){En.value instanceof te?Promise.resolve(En.value.v).then(rt,ht):Cn(se[0][2],En)}(ie[En](cs))}catch(en){Cn(se[0][3],en)}}function rt(En){Kt("next",En)}function ht(En){Kt("throw",En)}function Cn(En,cs){En(cs),se.shift(),se.length&&Kt(se[0][0],se[0][1])}}function Je(K){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ce,re=K[Symbol.asyncIterator];return re?re.call(K):(K=function J(K){var re="function"==typeof Symbol&&Symbol.iterator,ce=re&&K[re],ie=0;if(ce)return ce.call(K);if(K&&"number"==typeof K.length)return{next:function(){return K&&ie>=K.length&&(K=void 0),{value:K&&K[ie++],done:!K}}};throw new TypeError(re?"Object is not iterable.":"Symbol.iterator is not defined.")}(K),ce={},ie("next"),ie("throw"),ie("return"),ce[Symbol.asyncIterator]=function(){return this},ce);function ie(se){ce[se]=K[se]&&function(bt){return new Promise(function(Kt,Qn){!function ke(se,bt,Kt,Qn){Promise.resolve(Qn).then(function(rt){se({value:rt,done:Kt})},bt)}(Kt,Qn,(bt=K[se](bt)).done,bt.value)})}}}F.d(De,{_T:()=>fe,mG:()=>ye,qq:()=>te,FC:()=>Se,KL:()=>Je})},5e3:(at,De,F)=>{F.d(De,{deG:()=>q_,tb:()=>HD,AFp:()=>UD,ip1:()=>BD,CZH:()=>Mc,hGG:()=>xm,z2F:()=>Cm,sBO:()=>nT,Sil:()=>sR,_Vd:()=>Ic,EJc:()=>GD,SBq:()=>gf,qLn:()=>rr,vpe:()=>Xs,tBr:()=>ms,XFs:()=>ft,OlP:()=>Sn,zs3:()=>xo,ZZ4:()=>Mm,aQg:()=>Nr,soG:()=>xc,YKP:()=>fD,h0i:()=>Ku,PXZ:()=>mR,R0b:()=>eo,FiY:()=>rl,Lbi:()=>nR,g9A:()=>tR,Qsj:()=>db,FYo:()=>cx,JOm:()=>ne,q3G:()=>Wt,tp0:()=>sl,Rgc:()=>bf,dDg:()=>qD,GfV:()=>lD,s_b:()=>pm,ifc:()=>Pt,eFA:()=>wm,G48:()=>eT,Gpc:()=>H,f3M:()=>gs,X6Q:()=>XD,_c5:()=>zb,VLi:()=>NB,c2e:()=>Sb,zSh:()=>Ng,wAp:()=>pt,vHH:()=>Fe,EiD:()=>dc,mCW:()=>ya,qzn:()=>Gs,JVY:()=>hh,pB0:()=>Du,eBb:()=>lg,L6k:()=>Eu,LAX:()=>cg,cg1:()=>Hv,kL8:()=>VE,yhl:()=>_a,dqk:()=>Bt,sIi:()=>Lg,CqO:()=>dM,QGY:()=>aE,F4k:()=>uM,RDi:()=>Rd,AaK:()=>ye,z3N:()=>qi,qOj:()=>gv,TTD:()=>Ga,_Bn:()=>rD,xp6:()=>Tg,uIk:()=>J0,ekj:()=>xv,Suo:()=>SD,Xpm:()=>Rt,lG2:()=>Yt,Yz7:()=>en,cJS:()=>tn,oAB:()=>Y,Yjl:()=>Tr,Y36:()=>Bg,_UZ:()=>sE,GkF:()=>oE,BQk:()=>Ev,ynx:()=>Cv,qZA:()=>wv,TgZ:()=>bv,EpF:()=>cM,n5z:()=>Xp,Ikx:()=>Uv,LFG:()=>Mn,$8M:()=>$r,$Z:()=>lM,NdJ:()=>lE,CRH:()=>Cb,oxw:()=>pM,Hsn:()=>dE,F$t:()=>gM,Q6J:()=>rE,iGM:()=>Px,MAs:()=>QA,CHM:()=>Pd,LSH:()=>ll,Udp:()=>Mv,WFA:()=>cE,d8E:()=>jv,YNc:()=>YA,_uU:()=>Hg,Oqu:()=>wE,hij:()=>af,Gf:()=>Fx});var u=F(7579),X=F(727),V=F(8306),fe=F(6451),_e=F(3099);function we(o){for(let a in o)if(o[a]===we)return a;throw Error("Could not find renamed property on target object.")}function ue(o,a){for(const c in a)a.hasOwnProperty(c)&&!o.hasOwnProperty(c)&&(o[c]=a[c])}function ye(o){if("string"==typeof o)return o;if(Array.isArray(o))return"["+o.map(ye).join(", ")+"]";if(null==o)return""+o;if(o.overriddenName)return`${o.overriddenName}`;if(o.name)return`${o.name}`;const a=o.toString();if(null==a)return""+a;const c=a.indexOf("\n");return-1===c?a:a.substring(0,c)}function Ie(o,a){return null==o||""===o?null===a?"":a:null==a||""===a?o:o+" "+a}const G=we({__forward_ref__:we});function H(o){return o.__forward_ref__=H,o.toString=function(){return ye(this())},o}function J(o){return $e(o)?o():o}function $e(o){return"function"==typeof o&&o.hasOwnProperty(G)&&o.__forward_ref__===H}class Fe extends Error{constructor(a,c){super(function Oe(o,a){return`NG0${Math.abs(o)}${a?": "+a:""}`}(a,c)),this.code=a}}function te(o){return"string"==typeof o?o:null==o?"":String(o)}function Se(o){return"function"==typeof o?o.name||o.toString():"object"==typeof o&&null!=o&&"function"==typeof o.type?o.type.name||o.type.toString():te(o)}function he(o,a){const c=a?` in ${a}`:"";throw new Fe(-201,`No provider for ${Se(o)} found${c}`)}function rt(o,a){null==o&&function ht(o,a,c,h){throw new Error(`ASSERTION ERROR: ${o}`+(null==h?"":` [Expected=> ${c} ${h} ${a} <=Actual]`))}(a,o,null,"!=")}function en(o){return{token:o.token,providedIn:o.providedIn||null,factory:o.factory,value:void 0}}function tn(o){return{providers:o.providers||[],imports:o.imports||[]}}function Nt(o){return ds(o,hs)||ds(o,Qo)}function ds(o,a){return o.hasOwnProperty(a)?o[a]:null}function Fr(o){return o&&(o.hasOwnProperty(ao)||o.hasOwnProperty(lo))?o[ao]:null}const hs=we({\u0275prov:we}),ao=we({\u0275inj:we}),Qo=we({ngInjectableDef:we}),lo=we({ngInjectorDef:we});var ft=(()=>((ft=ft||{})[ft.Default=0]="Default",ft[ft.Host=1]="Host",ft[ft.Self=2]="Self",ft[ft.SkipSelf=4]="SkipSelf",ft[ft.Optional=8]="Optional",ft))();let ji;function cr(o){const a=ji;return ji=o,a}function co(o,a,c){const h=Nt(o);return h&&"root"==h.providedIn?void 0===h.value?h.value=h.factory():h.value:c&ft.Optional?null:void 0!==a?a:void he(ye(o),"Injector")}function vn(o){return{toString:o}.toString()}var Er=(()=>((Er=Er||{})[Er.OnPush=0]="OnPush",Er[Er.Default=1]="Default",Er))(),Pt=(()=>{return(o=Pt||(Pt={}))[o.Emulated=0]="Emulated",o[o.None=2]="None",o[o.ShadowDom=3]="ShadowDom",Pt;var o})();const nt="undefined"!=typeof globalThis&&globalThis,yt="undefined"!=typeof window&&window,Lr="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Bt=nt||"undefined"!=typeof global&&global||yt||Lr,Vr={},lt=[],si=we({\u0275cmp:we}),Ft=we({\u0275dir:we}),ze=we({\u0275pipe:we}),ve=we({\u0275mod:we}),Ze=we({\u0275fac:we}),ct=we({__NG_ELEMENT_ID__:we});let Ut=0;function Rt(o){return vn(()=>{const c={},h={type:o.type,providersResolver:null,decls:o.decls,vars:o.vars,factory:null,template:o.template||null,consts:o.consts||null,ngContentSelectors:o.ngContentSelectors,hostBindings:o.hostBindings||null,hostVars:o.hostVars||0,hostAttrs:o.hostAttrs||null,contentQueries:o.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:o.exportAs||null,onPush:o.changeDetection===Er.OnPush,directiveDefs:null,pipeDefs:null,selectors:o.selectors||lt,viewQuery:o.viewQuery||null,features:o.features||null,data:o.data||{},encapsulation:o.encapsulation||Pt.Emulated,id:"c",styles:o.styles||lt,_:null,setInput:null,schemas:o.schemas||null,tView:null},f=o.directives,m=o.features,b=o.pipes;return h.id+=Ut++,h.inputs=gt(o.inputs,c),h.outputs=gt(o.outputs),m&&m.forEach(E=>E(h)),h.directiveDefs=f?()=>("function"==typeof f?f():f).map(L):null,h.pipeDefs=b?()=>("function"==typeof b?b():b).map($):null,h})}function L(o){return qt(o)||function On(o){return o[Ft]||null}(o)}function $(o){return function Mt(o){return o[ze]||null}(o)}const ae={};function Y(o){return vn(()=>{const a={type:o.type,bootstrap:o.bootstrap||lt,declarations:o.declarations||lt,imports:o.imports||lt,exports:o.exports||lt,transitiveCompileScopes:null,schemas:o.schemas||null,id:o.id||null};return null!=o.id&&(ae[o.id]=o.type),a})}function gt(o,a){if(null==o)return Vr;const c={};for(const h in o)if(o.hasOwnProperty(h)){let f=o[h],m=f;Array.isArray(f)&&(m=f[1],f=f[0]),c[f]=h,a&&(a[f]=m)}return c}const Yt=Rt;function Tr(o){return{type:o.type,name:o.name,factory:null,pure:!1!==o.pure,onDestroy:o.type.prototype.ngOnDestroy||null}}function qt(o){return o[si]||null}function ln(o,a){const c=o[ve]||null;if(!c&&!0===a)throw new Error(`Type ${ye(o)} does not have '\u0275mod' property.`);return c}function oi(o){return Array.isArray(o)&&"object"==typeof o[1]}function jr(o){return Array.isArray(o)&&!0===o[1]}function Ad(o){return 0!=(8&o.flags)}function Hl(o){return 2==(2&o.flags)}function Gl(o){return 1==(1&o.flags)}function ai(o){return null!==o.template}function F_(o){return 0!=(512&o[2])}function Ai(o,a){return o.hasOwnProperty(Ze)?o[Ze]:null}class Ha{constructor(a,c,h){this.previousValue=a,this.currentValue=c,this.firstChange=h}isFirstChange(){return this.firstChange}}function Ga(){return $l}function $l(o){return o.type.prototype.ngOnChanges&&(o.setInput=zC),Np}function Np(){const o=xd(this),a=null==o?void 0:o.current;if(a){const c=o.previous;if(c===Vr)o.previous=a;else for(let h in a)c[h]=a[h];o.current=null,this.ngOnChanges(a)}}function zC(o,a,c,h){const f=xd(o)||function eu(o,a){return o[fo]=a}(o,{previous:Vr,current:null}),m=f.current||(f.current={}),b=f.previous,E=this.declaredInputs[c],T=b[E];m[E]=new Ha(T&&T.currentValue,a,b===Vr),o[h]=a}Ga.ngInherit=!0;const fo="__ngSimpleChanges__";function xd(o){return o[fo]||null}let ru;function Rd(o){ru=o}function pn(o){return!!o.listen}const iu={createRenderer:(o,a)=>function kd(){return void 0!==ru?ru:"undefined"!=typeof document?document:void 0}()};function un(o){for(;Array.isArray(o);)o=o[0];return o}function ql(o,a){return un(a[o])}function Sr(o,a){return un(a[o.index])}function Wl(o,a){return o.data[a]}function Ar(o,a){const c=a[o];return oi(c)?c:c[0]}function za(o){return 4==(4&o[2])}function po(o){return 128==(128&o[2])}function Hi(o,a){return null==a?null:o[a]}function qa(o){o[18]=0}function Wa(o,a){o[5]+=a;let c=o,h=o[3];for(;null!==h&&(1===a&&1===c[5]||-1===a&&0===c[5]);)h[5]+=a,c=h,h=h[3]}const ut={lFrame:ia(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function jp(){return ut.bindingsEnabled}function me(){return ut.lFrame.lView}function Ot(){return ut.lFrame.tView}function Pd(o){return ut.lFrame.contextLView=o,o[8]}function Dn(){let o=Za();for(;null!==o&&64===o.type;)o=o.parent;return o}function Za(){return ut.lFrame.currentTNode}function li(o,a){const c=ut.lFrame;c.currentTNode=o,c.isParent=a}function Fd(){return ut.lFrame.isParent}function Ld(){ut.lFrame.isParent=!1}function au(){return ut.isInCheckNoChangesMode}function Ka(o){ut.isInCheckNoChangesMode=o}function go(){return ut.lFrame.bindingIndex++}function Bd(o,a){const c=ut.lFrame;c.bindingIndex=c.bindingRootIndex=o,Yl(a)}function Yl(o){ut.lFrame.currentDirectiveIndex=o}function lu(o){const a=ut.lFrame.currentDirectiveIndex;return-1===a?null:o[a]}function Ud(){return ut.lFrame.currentQueryIndex}function jd(o){ut.lFrame.currentQueryIndex=o}function qC(o){const a=o[1];return 2===a.type?a.declTNode:1===a.type?o[6]:null}function qp(o,a,c){if(c&ft.SkipSelf){let f=a,m=o;for(;!(f=f.parent,null!==f||c&ft.Host||(f=qC(m),null===f||(m=m[15],10&f.type))););if(null===f)return!1;a=f,o=m}const h=ut.lFrame=Wp();return h.currentTNode=a,h.lView=o,!0}function Ya(o){const a=Wp(),c=o[1];ut.lFrame=a,a.currentTNode=c.firstChild,a.lView=o,a.tView=c,a.contextLView=o,a.bindingIndex=c.bindingStartIndex,a.inI18n=!1}function Wp(){const o=ut.lFrame,a=null===o?null:o.child;return null===a?ia(o):a}function ia(o){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:o,child:null,inI18n:!1};return null!==o&&(o.child=a),a}function Zp(){const o=ut.lFrame;return ut.lFrame=o.parent,o.currentTNode=null,o.lView=null,o}const j_=Zp;function Ql(){const o=Zp();o.isParent=!0,o.tView=null,o.selectedIndex=-1,o.contextLView=null,o.elementDepthCount=0,o.currentDirectiveIndex=-1,o.currentNamespace=null,o.bindingRootIndex=-1,o.bindingIndex=-1,o.currentQueryIndex=0}function Mr(){return ut.lFrame.selectedIndex}function ks(o){ut.lFrame.selectedIndex=o}function Tn(){const o=ut.lFrame;return Wl(o.tView,o.selectedIndex)}function Os(o,a){for(let c=a.directiveStart,h=a.directiveEnd;c<h;c++){const m=o.data[c].type.prototype,{ngAfterContentInit:b,ngAfterContentChecked:E,ngAfterViewInit:T,ngAfterViewChecked:I,ngOnDestroy:x}=m;b&&(o.contentHooks||(o.contentHooks=[])).push(-c,b),E&&((o.contentHooks||(o.contentHooks=[])).push(c,E),(o.contentCheckHooks||(o.contentCheckHooks=[])).push(c,E)),T&&(o.viewHooks||(o.viewHooks=[])).push(-c,T),I&&((o.viewHooks||(o.viewHooks=[])).push(c,I),(o.viewCheckHooks||(o.viewCheckHooks=[])).push(c,I)),null!=x&&(o.destroyHooks||(o.destroyHooks=[])).push(c,x)}}function Jl(o,a,c){G_(o,a,3,c)}function Gd(o,a,c,h){(3&o[2])===c&&G_(o,a,c,h)}function $d(o,a){let c=o[2];(3&c)===a&&(c&=2047,c+=1,o[2]=c)}function G_(o,a,c,h){const m=null!=h?h:-1,b=a.length-1;let E=0;for(let T=void 0!==h?65535&o[18]:0;T<b;T++)if("number"==typeof a[T+1]){if(E=a[T],null!=h&&E>=h)break}else a[T]<0&&(o[18]+=65536),(E<m||-1==m)&&(ZC(o,c,a,T),o[18]=(4294901760&o[18])+T+2),T++}function ZC(o,a,c,h){const f=c[h]<0,m=c[h+1],E=o[f?-c[h]:c[h]];if(f){if(o[2]>>11<o[18]>>16&&(3&o[2])===a){o[2]+=2048;try{m.call(E)}finally{}}}else try{m.call(E)}finally{}}class Qa{constructor(a,c,h){this.factory=a,this.resolving=!1,this.canSeeViewProviders=c,this.injectImpl=h}}function Ke(o,a,c){const h=pn(o);let f=0;for(;f<c.length;){const m=c[f];if("number"==typeof m){if(0!==m)break;f++;const b=c[f++],E=c[f++],T=c[f++];h?o.setAttribute(a,E,T,b):a.setAttributeNS(b,E,T)}else{const b=m,E=c[++f];xr(b)?h&&o.setProperty(a,b,E):h?o.setAttribute(a,b,E):a.setAttribute(b,E),f++}}return f}function St(o){return 3===o||4===o||6===o}function xr(o){return 64===o.charCodeAt(0)}function Vn(o,a){if(null!==a&&0!==a.length)if(null===o||0===o.length)o=a.slice();else{let c=-1;for(let h=0;h<a.length;h++){const f=a[h];"number"==typeof f?c=f:0===c||Ja(o,c,f,null,-1===c||2===c?a[++h]:null)}}return o}function Ja(o,a,c,h,f){let m=0,b=o.length;if(-1===a)b=-1;else for(;m<o.length;){const E=o[m++];if("number"==typeof E){if(E===a){b=-1;break}if(E>a){b=m-1;break}}}for(;m<o.length;){const E=o[m];if("number"==typeof E)break;if(E===c){if(null===h)return void(null!==f&&(o[m+1]=f));if(h===o[m+1])return void(o[m+2]=f)}m++,null!==h&&m++,null!==f&&m++}-1!==b&&(o.splice(b,0,a),m=b+1),o.splice(m++,0,c),null!==h&&o.splice(m++,0,h),null!==f&&o.splice(m++,0,f)}function Yp(o){return-1!==o}function yn(o){return 32767&o}function Fs(o,a){let c=function $_(o){return o>>16}(o),h=a;for(;c>0;)h=h[15],c--;return h}let Wd=!0;function Mi(o){const a=Wd;return Wd=o,a}let Kd=0;function an(o,a){const c=Xa(o,a);if(-1!==c)return c;const h=a[1];h.firstCreatePass&&(o.injectorIndex=a.length,sa(h.data,o),sa(a,null),sa(h.blueprint,null));const f=cu(o,a),m=o.injectorIndex;if(Yp(f)){const b=yn(f),E=Fs(f,a),T=E[1].data;for(let I=0;I<8;I++)a[m+I]=E[b+I]|T[b+I]}return a[m+8]=f,m}function sa(o,a){o.push(0,0,0,0,0,0,0,0,a)}function Xa(o,a){return-1===o.injectorIndex||o.parent&&o.parent.injectorIndex===o.injectorIndex||null===a[o.injectorIndex+8]?-1:o.injectorIndex}function cu(o,a){if(o.parent&&-1!==o.parent.injectorIndex)return o.parent.injectorIndex;let c=0,h=null,f=a;for(;null!==f;){const m=f[1],b=m.type;if(h=2===b?m.declTNode:1===b?f[6]:null,null===h)return-1;if(c++,f=f[15],-1!==h.injectorIndex)return h.injectorIndex|c<<16}return-1}function oa(o,a,c){!function Xl(o,a,c){let h;"string"==typeof c?h=c.charCodeAt(0)||0:c.hasOwnProperty(ct)&&(h=c[ct]),null==h&&(h=c[ct]=Kd++);const f=255&h;a.data[o+(f>>5)]|=1<<f}(o,a,c)}function yo(o,a,c){if(c&ft.Optional)return o;he(a,"NodeInjector")}function Jp(o,a,c,h){if(c&ft.Optional&&void 0===h&&(h=null),0==(c&(ft.Self|ft.Host))){const f=o[9],m=cr(void 0);try{return f?f.get(a,h,c&ft.Optional):co(a,h,c&ft.Optional)}finally{cr(m)}}return yo(h,a,c)}function aa(o,a,c,h=ft.Default,f){if(null!==o){const m=function la(o){if("string"==typeof o)return o.charCodeAt(0)||0;const a=o.hasOwnProperty(ct)?o[ct]:void 0;return"number"==typeof a?a>=0?255&a:z_:a}(c);if("function"==typeof m){if(!qp(a,o,h))return h&ft.Host?yo(f,c,h):Jp(a,c,h,f);try{const b=m(h);if(null!=b||h&ft.Optional)return b;he(c)}finally{j_()}}else if("number"==typeof m){let b=null,E=Xa(o,a),T=-1,I=h&ft.Host?a[16][6]:null;for((-1===E||h&ft.SkipSelf)&&(T=-1===E?cu(o,a):a[E+8],-1!==T&&Bn(h,!1)?(b=a[1],E=yn(T),a=Fs(T,a)):E=-1);-1!==E;){const x=a[1];if(ca(m,E,x.data)){const P=Yd(E,a,c,b,h,I);if(P!==el)return P}T=a[E+8],-1!==T&&Bn(h,a[1].data[E+8]===I)&&ca(m,E,a)?(b=x,E=yn(T),a=Fs(T,a)):E=-1}}}return Jp(a,c,h,f)}const el={};function z_(){return new Ls(Dn(),me())}function Yd(o,a,c,h,f,m){const b=a[1],E=b.data[o+8],x=fs(E,b,c,null==h?Hl(E)&&Wd:h!=b&&0!=(3&E.type),f&ft.Host&&m===E);return null!==x?xi(a,b,x,E):el}function fs(o,a,c,h,f){const m=o.providerIndexes,b=a.data,E=1048575&m,T=o.directiveStart,x=m>>20,B=f?E+x:o.directiveEnd;for(let W=h?E:E+x;W<B;W++){const de=b[W];if(W<T&&c===de||W>=T&&de.type===c)return W}if(f){const W=b[T];if(W&&ai(W)&&W.type===c)return T}return null}function xi(o,a,c,h){let f=o[c];const m=a.data;if(function KC(o){return o instanceof Qa}(f)){const b=f;b.resolving&&function We(o,a){const c=a?`. Dependency path: ${a.join(" > ")} > ${o}`:"";throw new Fe(-200,`Circular dependency in DI detected for ${o}${c}`)}(Se(m[c]));const E=Mi(b.canSeeViewProviders);b.resolving=!0;const T=b.injectImpl?cr(b.injectImpl):null;qp(o,h,ft.Default);try{f=o[c]=b.factory(void 0,m,o,h),a.firstCreatePass&&c>=h.directiveStart&&function Hd(o,a,c){const{ngOnChanges:h,ngOnInit:f,ngDoCheck:m}=a.type.prototype;if(h){const b=$l(a);(c.preOrderHooks||(c.preOrderHooks=[])).push(o,b),(c.preOrderCheckHooks||(c.preOrderCheckHooks=[])).push(o,b)}f&&(c.preOrderHooks||(c.preOrderHooks=[])).push(0-o,f),m&&((c.preOrderHooks||(c.preOrderHooks=[])).push(o,m),(c.preOrderCheckHooks||(c.preOrderCheckHooks=[])).push(o,m))}(c,m[c],a)}finally{null!==T&&cr(T),Mi(E),b.resolving=!1,j_()}}return f}function ca(o,a,c){return!!(c[a+(o>>5)]&1<<o)}function Bn(o,a){return!(o&ft.Self||o&ft.Host&&a)}class Ls{constructor(a,c){this._tNode=a,this._lView=c}get(a,c,h){return aa(this._tNode,this._lView,a,h,c)}}function Xp(o){return vn(()=>{const a=o.prototype.constructor,c=a[Ze]||Nn(a),h=Object.prototype;let f=Object.getPrototypeOf(o.prototype).constructor;for(;f&&f!==h;){const m=f[Ze]||Nn(f);if(m&&m!==c)return m;f=Object.getPrototypeOf(f)}return m=>new m})}function Nn(o){return $e(o)?()=>{const a=Nn(J(o));return a&&a()}:Ai(o)}function $r(o){return function Gr(o,a){if("class"===a)return o.classes;if("style"===a)return o.styles;const c=o.attrs;if(c){const h=c.length;let f=0;for(;f<h;){const m=c[f];if(St(m))break;if(0===m)f+=2;else if("number"==typeof m)for(f++;f<h&&"string"==typeof c[f];)f++;else{if(m===a)return c[f+1];f+=2}}}return null}(Dn(),o)}const tl="__parameters__";function In(o,a,c){return vn(()=>{const h=function $i(o){return function(...c){if(o){const h=o(...c);for(const f in h)this[f]=h[f]}}}(a);function f(...m){if(this instanceof f)return h.apply(this,m),this;const b=new f(...m);return E.annotation=b,E;function E(T,I,x){const P=T.hasOwnProperty(tl)?T[tl]:Object.defineProperty(T,tl,{value:[]})[tl];for(;P.length<=x;)P.push(null);return(P[x]=P[x]||[]).push(b),T}}return c&&(f.prototype=Object.create(c.prototype)),f.prototype.ngMetadataName=o,f.annotationCls=f,f})}class Sn{constructor(a,c){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof c?this.__NG_ELEMENT_ID__=c:void 0!==c&&(this.\u0275prov=en({token:this,providedIn:c.providedIn||"root",factory:c.factory}))}toString(){return`InjectionToken ${this._desc}`}}const q_=new Sn("AnalyzeForEntryComponents");function kr(o,a){void 0===a&&(a=o);for(let c=0;c<o.length;c++){let h=o[c];Array.isArray(h)?(a===o&&(a=o.slice(0,c)),kr(h,a)):a!==o&&a.push(h)}return a}function Ri(o,a){o.forEach(c=>Array.isArray(c)?Ri(c,a):a(c))}function eh(o,a,c){a>=o.length?o.push(c):o.splice(a,0,c)}function fa(o,a){return a>=o.length-1?o.pop():o.splice(a,1)[0]}function Bs(o,a){const c=[];for(let h=0;h<o;h++)c.push(a);return c}function qn(o,a,c){let h=wo(o,a);return h>=0?o[1|h]=c:(h=~h,function K_(o,a,c,h){let f=o.length;if(f==a)o.push(c,h);else if(1===f)o.push(h,o[0]),o[0]=c;else{for(f--,o.push(o[f-1],o[f]);f>a;)o[f]=o[f-2],f--;o[a]=c,o[a+1]=h}}(o,h,a,c)),h}function hu(o,a){const c=wo(o,a);if(c>=0)return o[1|c]}function wo(o,a){return function tg(o,a,c){let h=0,f=o.length>>c;for(;f!==h;){const m=h+(f-h>>1),b=o[m<<c];if(a===b)return m<<c;b>a?f=m:h=m+1}return~(f<<c)}(o,a,1)}const pa={},nl="__NG_DI_FLAG__",ec="ngTempTokenPath",rh=/\n/gm,ih="__source",mu=we({provide:String,useValue:we});let Co;function Eo(o){const a=Co;return Co=o,a}function xt(o,a=ft.Default){if(void 0===Co)throw new Fe(203,"");return null===Co?co(o,void 0,a):Co.get(o,a&ft.Optional?null:void 0,a)}function Mn(o,a=ft.Default){return(function Cr(){return ji}()||xt)(J(o),a)}const gs=Mn;function sh(o){const a=[];for(let c=0;c<o.length;c++){const h=J(o[c]);if(Array.isArray(h)){if(0===h.length)throw new Fe(900,"");let f,m=ft.Default;for(let b=0;b<h.length;b++){const E=h[b],T=tc(E);"number"==typeof T?-1===T?f=E.token:m|=T:f=E}a.push(Mn(f,m))}else a.push(Mn(h))}return a}function Do(o,a){return o[nl]=a,o.prototype[nl]=a,o}function tc(o){return o[nl]}const ms=Do(In("Inject",o=>({token:o})),-1),rl=Do(In("Optional"),8),sl=Do(In("SkipSelf"),4);let js;function ma(o){var a;return(null===(a=function vu(){if(void 0===js&&(js=null,Bt.trustedTypes))try{js=Bt.trustedTypes.createPolicy("angular",{createHTML:o=>o,createScript:o=>o,createScriptURL:o=>o})}catch(o){}return js}())||void 0===a?void 0:a.createHTML(o))||o}class Hs{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class uh extends Hs{getTypeName(){return"HTML"}}class sy extends Hs{getTypeName(){return"Style"}}class oc extends Hs{getTypeName(){return"Script"}}class dh extends Hs{getTypeName(){return"URL"}}class oy extends Hs{getTypeName(){return"ResourceURL"}}function qi(o){return o instanceof Hs?o.changingThisBreaksApplicationSecurity:o}function Gs(o,a){const c=_a(o);if(null!=c&&c!==a){if("ResourceURL"===c&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${c} (see https://g.co/ng/security#xss)`)}return c===a}function _a(o){return o instanceof Hs&&o.getTypeName()||null}function hh(o){return new uh(o)}function Eu(o){return new sy(o)}function lg(o){return new oc(o)}function cg(o){return new dh(o)}function Du(o){return new oy(o)}class ay{constructor(a){this.inertDocumentHelper=a}getInertBodyElement(a){a="<body><remove></remove>"+a;try{const c=(new window.DOMParser).parseFromString(ma(a),"text/html").body;return null===c?this.inertDocumentHelper.getInertBodyElement(a):(c.removeChild(c.firstChild),c)}catch(c){return null}}}class ly{constructor(a){if(this.defaultDoc=a,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const c=this.inertDocument.createElement("html");this.inertDocument.appendChild(c);const h=this.inertDocument.createElement("body");c.appendChild(h)}}getInertBodyElement(a){const c=this.inertDocument.createElement("template");if("content"in c)return c.innerHTML=ma(a),c;const h=this.inertDocument.createElement("body");return h.innerHTML=ma(a),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(h),h}stripCustomNsAttrs(a){const c=a.attributes;for(let f=c.length-1;0<f;f--){const b=c.item(f).name;("xmlns:ns1"===b||0===b.indexOf("ns1:"))&&a.removeAttribute(b)}let h=a.firstChild;for(;h;)h.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(h),h=h.nextSibling}}const _s=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,fh=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function ya(o){return(o=String(o)).match(_s)||o.match(fh)?o:"unsafe:"+o}function di(o){const a={};for(const c of o.split(","))a[c]=!0;return a}function ac(...o){const a={};for(const c of o)for(const h in c)c.hasOwnProperty(h)&&(a[h]=!0);return a}const dg=di("area,br,col,hr,img,wbr"),Tu=di("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Iu=di("rp,rt"),gh=ac(dg,ac(Tu,di("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),ac(Iu,di("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),ac(Iu,Tu)),mh=di("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),_h=di("srcset"),Io=ac(mh,_h,di("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),di("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),uy=di("script,style,template");class cc{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(a){let c=a.firstChild,h=!0;for(;c;)if(c.nodeType===Node.ELEMENT_NODE?h=this.startElement(c):c.nodeType===Node.TEXT_NODE?this.chars(c.nodeValue):this.sanitizedSomething=!0,h&&c.firstChild)c=c.firstChild;else for(;c;){c.nodeType===Node.ELEMENT_NODE&&this.endElement(c);let f=this.checkClobberedElement(c,c.nextSibling);if(f){c=f;break}c=this.checkClobberedElement(c,c.parentNode)}return this.buf.join("")}startElement(a){const c=a.nodeName.toLowerCase();if(!gh.hasOwnProperty(c))return this.sanitizedSomething=!0,!uy.hasOwnProperty(c);this.buf.push("<"),this.buf.push(c);const h=a.attributes;for(let f=0;f<h.length;f++){const m=h.item(f),b=m.name,E=b.toLowerCase();if(!Io.hasOwnProperty(E)){this.sanitizedSomething=!0;continue}let T=m.value;mh[E]&&(T=ya(T)),_h[E]&&(o=T,T=(o=String(o)).split(",").map(a=>ya(a.trim())).join(", ")),this.buf.push(" ",b,'="',vh(T),'"')}var o;return this.buf.push(">"),!0}endElement(a){const c=a.nodeName.toLowerCase();gh.hasOwnProperty(c)&&!dg.hasOwnProperty(c)&&(this.buf.push("</"),this.buf.push(c),this.buf.push(">"))}chars(a){this.buf.push(vh(a))}checkClobberedElement(a,c){if(c&&(a.compareDocumentPosition(c)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${a.outerHTML}`);return c}}const Su=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,yh=/([^\#-~ |!])/g;function vh(o){return o.replace(/&/g,"&amp;").replace(Su,function(a){return"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";"}).replace(yh,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let uc;function dc(o,a){let c=null;try{uc=uc||function ug(o){const a=new ly(o);return function cy(){try{return!!(new window.DOMParser).parseFromString(ma(""),"text/html")}catch(o){return!1}}()?new ay(a):a}(o);let h=a?String(a):"";c=uc.getInertBodyElement(h);let f=5,m=h;do{if(0===f)throw new Error("Failed to sanitize html because the input is unstable");f--,h=m,m=c.innerHTML,c=uc.getInertBodyElement(h)}while(h!==m);return ma((new cc).sanitizeChildren(bh(c)||c))}finally{if(c){const h=bh(c)||c;for(;h.firstChild;)h.removeChild(h.firstChild)}}}function bh(o){return"content"in o&&function wh(o){return o.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===o.nodeName}(o)?o.content:null}var Wt=(()=>((Wt=Wt||{})[Wt.NONE=0]="NONE",Wt[Wt.HTML=1]="HTML",Wt[Wt.STYLE=2]="STYLE",Wt[Wt.SCRIPT=3]="SCRIPT",Wt[Wt.URL=4]="URL",Wt[Wt.RESOURCE_URL=5]="RESOURCE_URL",Wt))();function ll(o){const a=function So(){const o=me();return o&&o[12]}();return a?a.sanitize(Wt.URL,o)||"":Gs(o,"URL")?qi(o):ya(te(o))}const Eh="__ngContext__";function pr(o,a){o[Eh]=a}function Dh(o){const a=function ba(o){return o[Eh]||null}(o);return a?Array.isArray(a)?a:a.lView:null}function Ea(o){return o.ngOriginalError}function yg(o,...a){o.error(...a)}class rr{constructor(){this._console=console}handleError(a){const c=this._findOriginalError(a),h=function _y(o){return o&&o.ngErrorLogger||yg}(a);h(this._console,"ERROR",a),c&&h(this._console,"ORIGINAL ERROR",c)}_findOriginalError(a){let c=a&&Ea(a);for(;c&&Ea(c);)c=Ea(c);return c||null}}const wy=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Bt))();function _(o){return o instanceof Function?o():o}var ne=(()=>((ne=ne||{})[ne.Important=1]="Important",ne[ne.DashCase=2]="DashCase",ne))();function qe(o,a){return undefined(o,a)}function bn(o){const a=o[3];return jr(a)?a[3]:a}function cl(o){return kh(o[13])}function ul(o){return kh(o[4])}function kh(o){for(;null!==o&&!jr(o);)o=o[4];return o}function Ao(o,a,c,h,f){if(null!=h){let m,b=!1;jr(h)?m=h:oi(h)&&(b=!0,h=h[0]);const E=un(h);0===o&&null!==c?null==f?My(a,c,E):Wi(a,c,E,f||null,!0):1===o&&null!==c?Wi(a,c,E,f||null,!0):2===o?function Oy(o,a,c){const h=Ph(o,a);h&&function QS(o,a,c,h){pn(o)?o.removeChild(a,c,h):a.removeChild(c)}(o,h,a,c)}(a,E,b):3===o&&a.destroyNode(E),null!=m&&function d0(o,a,c,h,f){const m=c[7];m!==un(c)&&Ao(a,o,h,m,f);for(let E=10;E<c.length;E++){const T=c[E];Eg(T[1],T,o,a,h,m)}}(a,o,m,c,f)}}function ku(o,a,c){if(pn(o))return o.createElement(a,c);{const h=null!==c?function nu(o){const a=o.toLowerCase();return"svg"===a?"http://www.w3.org/2000/svg":"math"===a?"http://www.w3.org/1998/MathML/":null}(c):null;return null===h?o.createElement(a):o.createElementNS(h,a)}}function t0(o,a){const c=o[9],h=c.indexOf(a),f=a[3];1024&a[2]&&(a[2]&=-1025,Wa(f,-1)),c.splice(h,1)}function Iy(o,a){if(o.length<=10)return;const c=10+a,h=o[c];if(h){const f=h[17];null!==f&&f!==o&&t0(f,h),a>0&&(o[c-1][4]=h[4]);const m=fa(o,10+a);!function fi(o,a){Eg(o,a,a[11],2,null,null),a[0]=null,a[6]=null}(h[1],h);const b=m[19];null!==b&&b.detachView(m[1]),h[3]=null,h[4]=null,h[2]&=-129}return h}function Sy(o,a){if(!(256&a[2])){const c=a[11];pn(c)&&c.destroyNode&&Eg(o,a,c,3,null,null),function Dy(o){let a=o[13];if(!a)return Ay(o[1],o);for(;a;){let c=null;if(oi(a))c=a[13];else{const h=a[10];h&&(c=h)}if(!c){for(;a&&!a[4]&&a!==o;)oi(a)&&Ay(a[1],a),a=a[3];null===a&&(a=o),oi(a)&&Ay(a[1],a),c=a&&a[4]}a=c}}(a)}}function Ay(o,a){if(!(256&a[2])){a[2]&=-129,a[2]|=256,function r0(o,a){let c;if(null!=o&&null!=(c=o.destroyHooks))for(let h=0;h<c.length;h+=2){const f=a[c[h]];if(!(f instanceof Qa)){const m=c[h+1];if(Array.isArray(m))for(let b=0;b<m.length;b+=2){const E=f[m[b]],T=m[b+1];try{T.call(E)}finally{}}else try{m.call(f)}finally{}}}}(o,a),function n0(o,a){const c=o.cleanup,h=a[7];let f=-1;if(null!==c)for(let m=0;m<c.length-1;m+=2)if("string"==typeof c[m]){const b=c[m+1],E="function"==typeof b?b(a):un(a[b]),T=h[f=c[m+2]],I=c[m+3];"boolean"==typeof I?E.removeEventListener(c[m],T,I):I>=0?h[f=I]():h[f=-I].unsubscribe(),m+=2}else{const b=h[f=c[m+1]];c[m].call(b)}if(null!==h){for(let m=f+1;m<h.length;m++)h[m]();a[7]=null}}(o,a),1===a[1].type&&pn(a[11])&&a[11].destroy();const c=a[17];if(null!==c&&jr(a[3])){c!==a[3]&&t0(c,a);const h=a[19];null!==h&&h.detachView(o)}}}function wg(o,a,c){return function YS(o,a,c){let h=a;for(;null!==h&&40&h.type;)h=(a=h).parent;if(null===h)return c[0];if(2&h.flags){const f=o.data[h.directiveStart].encapsulation;if(f===Pt.None||f===Pt.Emulated)return null}return Sr(h,c)}(o,a.parent,c)}function Wi(o,a,c,h,f){pn(o)?o.insertBefore(a,c,h,f):a.insertBefore(c,h,f)}function My(o,a,c){pn(o)?o.appendChild(a,c):a.appendChild(c)}function s0(o,a,c,h,f){null!==h?Wi(o,a,c,h,f):My(o,a,c)}function Ph(o,a){return pn(o)?o.parentNode(a):a.parentNode}function o0(o,a,c){return xy(o,a,c)}let xy=function a0(o,a,c){return 40&o.type?Sr(o,c):null};function Cg(o,a,c,h){const f=wg(o,h,a),m=a[11],E=o0(h.parent||a[6],h,a);if(null!=f)if(Array.isArray(c))for(let T=0;T<c.length;T++)s0(m,f,c[T],E,!1);else s0(m,f,c,E,!1)}function Nu(o,a){if(null!==a){const c=a.type;if(3&c)return Sr(a,o);if(4&c)return ky(-1,o[a.index]);if(8&c){const h=a.child;if(null!==h)return Nu(o,h);{const f=o[a.index];return jr(f)?ky(-1,f):un(f)}}if(32&c)return qe(a,o)()||un(o[a.index]);{const h=c0(o,a);return null!==h?Array.isArray(h)?h[0]:Nu(bn(o[16]),h):Nu(o,a.next)}}return null}function c0(o,a){return null!==a?o[16][6].projection[a.projection]:null}function ky(o,a){const c=10+o+1;if(c<a.length){const h=a[c],f=h[1].firstChild;if(null!==f)return Nu(h,f)}return a[7]}function Ny(o,a,c,h,f,m,b){for(;null!=c;){const E=h[c.index],T=c.type;if(b&&0===a&&(E&&pr(un(E),h),c.flags|=4),64!=(64&c.flags))if(8&T)Ny(o,a,c.child,h,f,m,!1),Ao(a,o,f,E,m);else if(32&T){const I=qe(c,h);let x;for(;x=I();)Ao(a,o,f,x,m);Ao(a,o,f,E,m)}else 16&T?u0(o,a,h,c,f,m):Ao(a,o,f,E,m);c=b?c.projectionNext:c.next}}function Eg(o,a,c,h,f,m){Ny(c,h,o.firstChild,a,f,m,!1)}function u0(o,a,c,h,f,m){const b=c[16],T=b[6].projection[h.projection];if(Array.isArray(T))for(let I=0;I<T.length;I++)Ao(a,o,f,T[I],m);else Ny(o,a,T,b[3],f,m,!0)}function Zi(o,a,c){pn(o)?o.setAttribute(a,"style",c):a.style.cssText=c}function Py(o,a,c){pn(o)?""===c?o.removeAttribute(a,"class"):o.setAttribute(a,"class",c):a.className=c}function f0(o,a,c){let h=o.length;for(;;){const f=o.indexOf(a,c);if(-1===f)return f;if(0===f||o.charCodeAt(f-1)<=32){const m=a.length;if(f+m===h||o.charCodeAt(f+m)<=32)return f}c=f+1}}const p0="ng-template";function g0(o,a,c){let h=0;for(;h<o.length;){let f=o[h++];if(c&&"class"===f){if(f=o[h],-1!==f0(f.toLowerCase(),a,0))return!0}else if(1===f){for(;h<o.length&&"string"==typeof(f=o[h++]);)if(f.toLowerCase()===a)return!0;return!1}}return!1}function Fy(o){return 4===o.type&&o.value!==p0}function dl(o,a,c){return a===(4!==o.type||c?o.value:p0)}function RL(o,a,c){let h=4;const f=o.attrs||[],m=function _0(o){for(let a=0;a<o.length;a++)if(St(o[a]))return a;return o.length}(f);let b=!1;for(let E=0;E<a.length;E++){const T=a[E];if("number"!=typeof T){if(!b)if(4&h){if(h=2|1&h,""!==T&&!dl(o,T,c)||""===T&&1===a.length){if(qs(h))return!1;b=!0}}else{const I=8&h?T:a[++E];if(8&h&&null!==o.attrs){if(!g0(o.attrs,I,c)){if(qs(h))return!1;b=!0}continue}const P=eA(8&h?"class":T,f,Fy(o),c);if(-1===P){if(qs(h))return!1;b=!0;continue}if(""!==I){let B;B=P>m?"":f[P+1].toLowerCase();const W=8&h?B:null;if(W&&-1!==f0(W,I,0)||2&h&&I!==B){if(qs(h))return!1;b=!0}}}}else{if(!b&&!qs(h)&&!qs(T))return!1;if(b&&qs(T))continue;b=!1,h=T|1&h}}return qs(h)||b}function qs(o){return 0==(1&o)}function eA(o,a,c,h){if(null===a)return-1;let f=0;if(h||!c){let m=!1;for(;f<a.length;){const b=a[f];if(b===o)return f;if(3===b||6===b)m=!0;else{if(1===b||2===b){let E=a[++f];for(;"string"==typeof E;)E=a[++f];continue}if(4===b)break;if(0===b){f+=4;continue}}f+=m?1:2}return-1}return function tA(o,a){let c=o.indexOf(4);if(c>-1)for(c++;c<o.length;){const h=o[c];if("number"==typeof h)return-1;if(h===a)return c;c++}return-1}(a,o)}function Ly(o,a,c=!1){for(let h=0;h<a.length;h++)if(RL(o,a[h],c))return!0;return!1}function Fh(o,a){e:for(let c=0;c<a.length;c++){const h=a[c];if(o.length===h.length){for(let f=0;f<o.length;f++)if(o[f]!==h[f])continue e;return!0}}return!1}function Zn(o,a){return o?":not("+a.trim()+")":a}function Vy(o){let a=o[0],c=1,h=2,f="",m=!1;for(;c<o.length;){let b=o[c];if("string"==typeof b)if(2&h){const E=o[++c];f+="["+b+(E.length>0?'="'+E+'"':"")+"]"}else 8&h?f+="."+b:4&h&&(f+=" "+b);else""!==f&&!qs(b)&&(a+=Zn(m,f),f=""),h=b,m=m||!qs(h);c++}return""!==f&&(a+=Zn(m,f)),a}const Ct={};function Tg(o){Lh(Ot(),me(),Mr()+o,au())}function Lh(o,a,c,h){if(!h)if(3==(3&a[2])){const m=o.preOrderCheckHooks;null!==m&&Jl(a,m,c)}else{const m=o.preOrderHooks;null!==m&&Gd(a,m,0,c)}ks(c)}function Vh(o,a){return o<<17|a<<2}function Ws(o){return o>>17&32767}function y0(o){return 2|o}function hl(o){return(131068&o)>>2}function v0(o,a){return-131069&o|a<<2}function b0(o){return 1|o}function dA(o,a){const c=o.contentQueries;if(null!==c)for(let h=0;h<c.length;h+=2){const f=c[h],m=c[h+1];if(-1!==m){const b=o.data[m];jd(f),b.contentQueries(2,a[m],m)}}}function gl(o,a,c,h,f,m,b,E,T,I){const x=a.blueprint.slice();return x[0]=f,x[2]=140|h,qa(x),x[3]=x[15]=o,x[8]=c,x[10]=b||o&&o[10],x[11]=E||o&&o[11],x[12]=T||o&&o[12]||null,x[9]=I||o&&o[9]||null,x[6]=m,x[16]=2==a.type?o[16]:x,x}function yc(o,a,c,h,f){let m=o.data[a];if(null===m)m=function Zy(o,a,c,h,f){const m=Za(),b=Fd(),T=o.data[a]=function Qy(o,a,c,h,f,m){return{type:c,index:h,insertBeforeIndex:null,injectorIndex:a?a.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,b?m:m&&m.parent,c,a,h,f);return null===o.firstChild&&(o.firstChild=T),null!==m&&(b?null==m.child&&null!==T.parent&&(m.child=T):null===m.next&&(m.next=T)),T}(o,a,c,h,f),function Vd(){return ut.lFrame.inI18n}()&&(m.flags|=64);else if(64&m.type){m.type=c,m.value=h,m.attrs=f;const b=function Kl(){const o=ut.lFrame,a=o.currentTNode;return o.isParent?a:a.parent}();m.injectorIndex=null===b?-1:b.injectorIndex}return li(m,!0),m}function Gh(o,a,c,h){if(0===c)return-1;const f=a.length;for(let m=0;m<c;m++)a.push(h),o.blueprint.push(h),o.data.push(null);return f}function $h(o,a,c){Ya(a);try{const h=o.viewQuery;null!==h&&B0(1,h,c);const f=o.template;null!==f&&T0(o,a,f,1,c),o.firstCreatePass&&(o.firstCreatePass=!1),o.staticContentQueries&&dA(o,a),o.staticViewQueries&&B0(2,o.viewQuery,c);const m=o.components;null!==m&&function Wy(o,a){for(let c=0;c<a.length;c++)CA(o,a[c])}(a,m)}catch(h){throw o.firstCreatePass&&(o.incompleteFirstPass=!0,o.firstCreatePass=!1),h}finally{a[2]&=-5,Ql()}}function Lu(o,a,c,h){const f=a[2];if(256==(256&f))return;Ya(a);const m=au();try{qa(a),function $p(o){return ut.lFrame.bindingIndex=o}(o.bindingStartIndex),null!==c&&T0(o,a,c,2,h);const b=3==(3&f);if(!m)if(b){const I=o.preOrderCheckHooks;null!==I&&Jl(a,I,null)}else{const I=o.preOrderHooks;null!==I&&Gd(a,I,0,null),$d(a,0)}if(function bA(o){for(let a=cl(o);null!==a;a=ul(a)){if(!a[2])continue;const c=a[9];for(let h=0;h<c.length;h++){const f=c[h],m=f[3];0==(1024&f[2])&&Wa(m,1),f[2]|=1024}}}(a),function ZL(o){for(let a=cl(o);null!==a;a=ul(a))for(let c=10;c<a.length;c++){const h=a[c],f=h[1];po(h)&&Lu(f,h,f.template,h[8])}}(a),null!==o.contentQueries&&dA(o,a),!m)if(b){const I=o.contentCheckHooks;null!==I&&Jl(a,I)}else{const I=o.contentHooks;null!==I&&Gd(a,I,1),$d(a,1)}!function uA(o,a){const c=o.hostBindingOpCodes;if(null!==c)try{for(let h=0;h<c.length;h++){const f=c[h];if(f<0)ks(~f);else{const m=f,b=c[++h],E=c[++h];Bd(b,m),E(2,a[m])}}}finally{ks(-1)}}(o,a);const E=o.components;null!==E&&function hA(o,a){for(let c=0;c<a.length;c++)wA(o,a[c])}(a,E);const T=o.viewQuery;if(null!==T&&B0(2,T,h),!m)if(b){const I=o.viewCheckHooks;null!==I&&Jl(a,I)}else{const I=o.viewHooks;null!==I&&Gd(a,I,2),$d(a,2)}!0===o.firstUpdatePass&&(o.firstUpdatePass=!1),m||(a[2]&=-73),1024&a[2]&&(a[2]&=-1025,Wa(a[3],-1))}finally{Ql()}}function Mg(o,a,c,h){const f=a[10],m=!au(),b=za(a);try{m&&!b&&f.begin&&f.begin(),b&&$h(o,a,h),Lu(o,a,c,h)}finally{m&&!b&&f.end&&f.end()}}function T0(o,a,c,h,f){const m=Mr(),b=2&h;try{ks(-1),b&&a.length>20&&Lh(o,a,20,au()),c(h,f)}finally{ks(m)}}function I0(o,a,c){if(Ad(a)){const f=a.directiveEnd;for(let m=a.directiveStart;m<f;m++){const b=o.data[m];b.contentQueries&&b.contentQueries(1,c[m],m)}}}function Ky(o,a,c){!jp()||(function mA(o,a,c,h){const f=c.directiveStart,m=c.directiveEnd;o.firstCreatePass||an(c,a),pr(h,a);const b=c.initialInputs;for(let E=f;E<m;E++){const T=o.data[E],I=ai(T);I&&zL(a,c,T);const x=xi(a,o,E,c);pr(x,a),null!==b&&qL(0,E-f,x,T,0,b),I&&(Ar(c.index,a)[8]=x)}}(o,a,c,Sr(c,a)),128==(128&c.flags)&&function Xy(o,a,c){const h=c.directiveStart,f=c.directiveEnd,b=c.index,E=function U_(){return ut.lFrame.currentDirectiveIndex}();try{ks(b);for(let T=h;T<f;T++){const I=o.data[T],x=a[T];Yl(T),(null!==I.hostBindings||0!==I.hostVars||null!==I.hostAttrs)&&ml(I,x)}}finally{ks(-1),Yl(E)}}(o,a,c))}function S0(o,a,c=Sr){const h=a.localNames;if(null!==h){let f=a.index+1;for(let m=0;m<h.length;m+=2){const b=h[m+1],E=-1===b?c(a,o):o[b];o[f++]=E}}}function vc(o){const a=o.tView;return null===a||a.incompleteFirstPass?o.tView=xg(1,null,o.template,o.decls,o.vars,o.directiveDefs,o.pipeDefs,o.viewQuery,o.schemas,o.consts):a}function xg(o,a,c,h,f,m,b,E,T,I){const x=20+h,P=x+f,B=function fA(o,a){const c=[];for(let h=0;h<a;h++)c.push(h<o?null:Ct);return c}(x,P),W="function"==typeof I?I():I;return B[1]={type:o,blueprint:B,template:c,queries:null,viewQuery:E,declTNode:a,data:B.slice().fill(null,x),bindingStartIndex:x,expandoStartIndex:P,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof b?b():b,firstChild:null,schemas:T,consts:W,incompleteFirstPass:!1}}function Yy(o,a,c,h){const f=EA(a);null===c?f.push(h):(f.push(c),o.firstCreatePass&&DA(o).push(h,f.length-1))}function pi(o,a,c){for(let h in o)if(o.hasOwnProperty(h)){const f=o[h];(c=null===c?{}:c).hasOwnProperty(h)?c[h].push(a,f):c[h]=[a,f]}return c}function Oi(o,a,c,h,f,m,b,E){const T=Sr(a,c);let x,I=a.inputs;!E&&null!=I&&(x=I[h])?(sv(o,c,x,h,f),Hl(a)&&function x0(o,a){const c=Ar(a,o);16&c[2]||(c[2]|=64)}(c,a.index)):3&a.type&&(h=function Vu(o){return"class"===o?"className":"for"===o?"htmlFor":"formaction"===o?"formAction":"innerHtml"===o?"innerHTML":"readonly"===o?"readOnly":"tabindex"===o?"tabIndex":o}(h),f=null!=b?b(f,a.value||"",h):f,pn(m)?m.setProperty(T,h,f):xr(h)||(T.setProperty?T.setProperty(h,f):T[h]=f))}function R0(o,a,c,h){let f=!1;if(jp()){const m=function ev(o,a,c){const h=o.directiveRegistry;let f=null;if(h)for(let m=0;m<h.length;m++){const b=h[m];Ly(c,b.selectors,!1)&&(f||(f=[]),oa(an(c,a),o,b.type),ai(b)?(k0(o,c),f.unshift(b)):f.push(b))}return f}(o,a,c),b=null===h?null:{"":-1};if(null!==m){f=!0,O0(c,o.data.length,m.length);for(let x=0;x<m.length;x++){const P=m[x];P.providersResolver&&P.providersResolver(P)}let E=!1,T=!1,I=Gh(o,a,m.length,null);for(let x=0;x<m.length;x++){const P=m[x];c.mergedAttrs=Vn(c.mergedAttrs,P.hostAttrs),Uu(o,c,a,I,P),yA(I,P,b),null!==P.contentQueries&&(c.flags|=8),(null!==P.hostBindings||null!==P.hostAttrs||0!==P.hostVars)&&(c.flags|=128);const B=P.type.prototype;!E&&(B.ngOnChanges||B.ngOnInit||B.ngDoCheck)&&((o.preOrderHooks||(o.preOrderHooks=[])).push(c.index),E=!0),!T&&(B.ngOnChanges||B.ngDoCheck)&&((o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(c.index),T=!0),I++}!function GL(o,a){const h=a.directiveEnd,f=o.data,m=a.attrs,b=[];let E=null,T=null;for(let I=a.directiveStart;I<h;I++){const x=f[I],P=x.inputs,B=null===m||Fy(a)?null:WL(P,m);b.push(B),E=pi(P,I,E),T=pi(x.outputs,I,T)}null!==E&&(E.hasOwnProperty("class")&&(a.flags|=16),E.hasOwnProperty("style")&&(a.flags|=32)),a.initialInputs=b,a.inputs=E,a.outputs=T}(o,c)}b&&function _A(o,a,c){if(a){const h=o.localNames=[];for(let f=0;f<a.length;f+=2){const m=c[a[f+1]];if(null==m)throw new Fe(-301,!1);h.push(a[f],m)}}}(c,h,b)}return c.mergedAttrs=Vn(c.mergedAttrs,c.attrs),f}function Rg(o,a,c,h,f,m){const b=m.hostBindings;if(b){let E=o.hostBindingOpCodes;null===E&&(E=o.hostBindingOpCodes=[]);const T=~a.index;(function gA(o){let a=o.length;for(;a>0;){const c=o[--a];if("number"==typeof c&&c<0)return c}return 0})(E)!=T&&E.push(T),E.push(h,f,b)}}function ml(o,a){null!==o.hostBindings&&o.hostBindings(1,a)}function k0(o,a){a.flags|=2,(o.components||(o.components=[])).push(a.index)}function yA(o,a,c){if(c){if(a.exportAs)for(let h=0;h<a.exportAs.length;h++)c[a.exportAs[h]]=o;ai(a)&&(c[""]=o)}}function O0(o,a,c){o.flags|=1,o.directiveStart=a,o.directiveEnd=a+c,o.providerIndexes=a}function Uu(o,a,c,h,f){o.data[h]=f;const m=f.factory||(f.factory=Ai(f.type)),b=new Qa(m,ai(f),null);o.blueprint[h]=b,c[h]=b,Rg(o,a,0,h,Gh(o,c,f.hostVars,Ct),f)}function zL(o,a,c){const h=Sr(a,o),f=vc(c),m=o[10],b=nv(o,gl(o,f,null,c.onPush?64:16,h,a,m,m.createRenderer(h,c),null,null));o[a.index]=b}function Ni(o,a,c,h,f,m){const b=Sr(o,a);!function N0(o,a,c,h,f,m,b){if(null==m)pn(o)?o.removeAttribute(a,f,c):a.removeAttribute(f);else{const E=null==b?te(m):b(m,h||"",f);pn(o)?o.setAttribute(a,f,E,c):c?a.setAttributeNS(c,f,E):a.setAttribute(f,E)}}(a[11],b,m,o.value,c,h,f)}function qL(o,a,c,h,f,m){const b=m[a];if(null!==b){const E=h.setInput;for(let T=0;T<b.length;){const I=b[T++],x=b[T++],P=b[T++];null!==E?h.setInput(c,P,I,x):c[x]=P}}}function WL(o,a){let c=null,h=0;for(;h<a.length;){const f=a[h];if(0!==f)if(5!==f){if("number"==typeof f)break;o.hasOwnProperty(f)&&(null===c&&(c=[]),c.push(f,o[f],a[h+1])),h+=2}else h+=2;else h+=4}return c}function vA(o,a,c,h){return new Array(o,!0,!1,a,null,0,h,c,null,null)}function wA(o,a){const c=Ar(a,o);if(po(c)){const h=c[1];80&c[2]?Lu(h,c,h.template,c[8]):c[5]>0&&P0(c)}}function P0(o){for(let h=cl(o);null!==h;h=ul(h))for(let f=10;f<h.length;f++){const m=h[f];if(1024&m[2]){const b=m[1];Lu(b,m,b.template,m[8])}else m[5]>0&&P0(m)}const c=o[1].components;if(null!==c)for(let h=0;h<c.length;h++){const f=Ar(c[h],o);po(f)&&f[5]>0&&P0(f)}}function CA(o,a){const c=Ar(a,o),h=c[1];(function tv(o,a){for(let c=a.length;c<o.blueprint.length;c++)a.push(o.blueprint[c])})(h,c),$h(h,c,c[8])}function nv(o,a){return o[13]?o[14][4]=a:o[13]=a,o[14]=a,a}function F0(o){for(;o;){o[2]|=64;const a=bn(o);if(F_(o)&&!a)return o;o=a}return null}function V0(o,a,c){const h=a[10];h.begin&&h.begin();try{Lu(o,a,o.template,c)}catch(f){throw Og(a,f),f}finally{h.end&&h.end()}}function rv(o){!function L0(o){for(let a=0;a<o.components.length;a++){const c=o.components[a],h=Dh(c),f=h[1];Mg(f,h,f.template,c)}}(o[8])}function B0(o,a,c){jd(0),a(o,c)}const QL=(()=>Promise.resolve(null))();function EA(o){return o[7]||(o[7]=[])}function DA(o){return o.cleanup||(o.cleanup=[])}function kg(o,a,c){return(null===o||ai(o))&&(c=function Vp(o){for(;Array.isArray(o);){if("object"==typeof o[1])return o;o=o[0]}return null}(c[a.index])),c[11]}function Og(o,a){const c=o[9],h=c?c.get(rr,null):null;h&&h.handleError(a)}function sv(o,a,c,h,f){for(let m=0;m<c.length;){const b=c[m++],E=c[m++],T=a[b],I=o.data[b];null!==I.setInput?I.setInput(T,f,h,E):T[E]=f}}function Da(o,a,c){const h=ql(a,o);!function Ru(o,a,c){pn(o)?o.setValue(a,c):a.textContent=c}(o[11],h,c)}function ju(o,a,c){let h=c?o.styles:null,f=c?o.classes:null,m=0;if(null!==a)for(let b=0;b<a.length;b++){const E=a[b];"number"==typeof E?m=E:1==m?f=Ie(f,E):2==m&&(h=Ie(h,E+": "+a[++b]+";"))}c?o.styles=h:o.stylesWithoutHost=h,c?o.classes=f:o.classesWithoutHost=f}const U0=new Sn("INJECTOR",-1);class IA{get(a,c=pa){if(c===pa){const h=new Error(`NullInjectorError: No provider for ${ye(a)}!`);throw h.name="NullInjectorError",h}return c}}const Ng=new Sn("Set Injector scope."),Pg={},j0={};let H0;function Hu(){return void 0===H0&&(H0=new IA),H0}function ov(o,a=null,c=null,h){const f=Zs(o,a,c,h);return f._resolveInjectorDefTypes(),f}function Zs(o,a=null,c=null,h){return new G0(o,c,a||Hu(),h)}class G0{constructor(a,c,h,f=null){this.parent=h,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const m=[];c&&Ri(c,E=>this.processProvider(E,a,c)),Ri([a],E=>this.processInjectorType(E,[],m)),this.records.set(U0,_l(void 0,this));const b=this.records.get(Ng);this.scope=null!=b?b.value:null,this.source=f||("object"==typeof a?null:ye(a))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(a=>a.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(a,c=pa,h=ft.Default){this.assertNotDestroyed();const f=Eo(this),m=cr(void 0);try{if(!(h&ft.SkipSelf)){let E=this.records.get(a);if(void 0===E){const T=function nV(o){return"function"==typeof o||"object"==typeof o&&o instanceof Sn}(a)&&Nt(a);E=T&&this.injectableDefInScope(T)?_l(av(a),Pg):null,this.records.set(a,E)}if(null!=E)return this.hydrate(a,E)}return(h&ft.Self?Hu():this.parent).get(a,c=h&ft.Optional&&c===pa?null:c)}catch(b){if("NullInjectorError"===b.name){if((b[ec]=b[ec]||[]).unshift(ye(a)),f)throw b;return function oh(o,a,c,h){const f=o[ec];throw a[ih]&&f.unshift(a[ih]),o.message=function nc(o,a,c,h=null){o=o&&"\n"===o.charAt(0)&&"\u0275"==o.charAt(1)?o.substr(2):o;let f=ye(a);if(Array.isArray(a))f=a.map(ye).join(" -> ");else if("object"==typeof a){let m=[];for(let b in a)if(a.hasOwnProperty(b)){let E=a[b];m.push(b+":"+("string"==typeof E?JSON.stringify(E):ye(E)))}f=`{${m.join(", ")}}`}return`${c}${h?"("+h+")":""}[${f}]: ${o.replace(rh,"\n  ")}`}("\n"+o.message,f,c,h),o.ngTokenPath=f,o[ec]=null,o}(b,a,"R3InjectorError",this.source)}throw b}finally{cr(m),Eo(f)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(a=>this.get(a))}toString(){const a=[];return this.records.forEach((h,f)=>a.push(ye(f))),`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Fe(205,!1)}processInjectorType(a,c,h){if(!(a=J(a)))return!1;let f=Fr(a);const m=null==f&&a.ngModule||void 0,b=void 0===m?a:m,E=-1!==h.indexOf(b);if(void 0!==m&&(f=Fr(m)),null==f)return!1;if(null!=f.imports&&!E){let x;h.push(b);try{Ri(f.imports,P=>{this.processInjectorType(P,c,h)&&(void 0===x&&(x=[]),x.push(P))})}finally{}if(void 0!==x)for(let P=0;P<x.length;P++){const{ngModule:B,providers:W}=x[P];Ri(W,de=>this.processProvider(de,B,W||lt))}}this.injectorDefTypes.add(b);const T=Ai(b)||(()=>new b);this.records.set(b,_l(T,Pg));const I=f.providers;if(null!=I&&!E){const x=a;Ri(I,P=>this.processProvider(P,x,I))}return void 0!==m&&void 0!==a.providers}processProvider(a,c,h){let f=bc(a=J(a))?a:J(a&&a.provide);const m=function SA(o,a,c){return cv(o)?_l(void 0,o.useValue):_l(lv(o),Pg)}(a);if(bc(a)||!0!==a.multi)this.records.get(f);else{let b=this.records.get(f);b||(b=_l(void 0,Pg,!0),b.factory=()=>sh(b.multi),this.records.set(f,b)),f=a,b.multi.push(a)}this.records.set(f,m)}hydrate(a,c){return c.value===Pg&&(c.value=j0,c.value=c.factory()),"object"==typeof c.value&&c.value&&function xA(o){return null!==o&&"object"==typeof o&&"function"==typeof o.ngOnDestroy}(c.value)&&this.onDestroy.add(c.value),c.value}injectableDefInScope(a){if(!a.providedIn)return!1;const c=J(a.providedIn);return"string"==typeof c?"any"===c||c===this.scope:this.injectorDefTypes.has(c)}}function av(o){const a=Nt(o),c=null!==a?a.factory:Ai(o);if(null!==c)return c;if(o instanceof Sn)throw new Fe(204,!1);if(o instanceof Function)return function XL(o){const a=o.length;if(a>0)throw Bs(a,"?"),new Fe(204,!1);const c=function Ii(o){const a=o&&(o[hs]||o[Qo]);if(a){const c=function Yo(o){if(o.hasOwnProperty("name"))return o.name;const a=(""+o).match(/^function\s*([^\s(]+)/);return null===a?"":a[1]}(o);return console.warn(`DEPRECATED: DI is instantiating a token "${c}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${c}" class.`),a}return null}(o);return null!==c?()=>c.factory(o):()=>new o}(o);throw new Fe(204,!1)}function lv(o,a,c){let h;if(bc(o)){const f=J(o);return Ai(f)||av(f)}if(cv(o))h=()=>J(o.useValue);else if(function MA(o){return!(!o||!o.useFactory)}(o))h=()=>o.useFactory(...sh(o.deps||[]));else if(function AA(o){return!(!o||!o.useExisting)}(o))h=()=>Mn(J(o.useExisting));else{const f=J(o&&(o.useClass||o.provide));if(!function tV(o){return!!o.deps}(o))return Ai(f)||av(f);h=()=>new f(...sh(o.deps))}return h}function _l(o,a,c=!1){return{factory:o,value:a,multi:c?[]:void 0}}function cv(o){return null!==o&&"object"==typeof o&&mu in o}function bc(o){return"function"==typeof o}let xo=(()=>{class o{static create(c,h){var f;if(Array.isArray(c))return ov({name:""},h,c,"");{const m=null!==(f=c.name)&&void 0!==f?f:"";return ov({name:m},c.parent,c.providers,m)}}}return o.THROW_IF_NOT_FOUND=pa,o.NULL=new IA,o.\u0275prov=en({token:o,providedIn:"any",factory:()=>Mn(U0)}),o.__NG_ELEMENT_ID__=-1,o})();function aV(o,a){Os(Dh(o)[1],Dn())}function gv(o){let a=function VA(o){return Object.getPrototypeOf(o.prototype).constructor}(o.type),c=!0;const h=[o];for(;a;){let f;if(ai(o))f=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new Fe(903,"");f=a.\u0275dir}if(f){if(c){h.push(f);const b=o;b.inputs=mv(o.inputs),b.declaredInputs=mv(o.declaredInputs),b.outputs=mv(o.outputs);const E=f.hostBindings;E&&UA(o,E);const T=f.viewQuery,I=f.contentQueries;if(T&&lV(o,T),I&&cV(o,I),ue(o.inputs,f.inputs),ue(o.declaredInputs,f.declaredInputs),ue(o.outputs,f.outputs),ai(f)&&f.data.animation){const x=o.data;x.animation=(x.animation||[]).concat(f.data.animation)}}const m=f.features;if(m)for(let b=0;b<m.length;b++){const E=m[b];E&&E.ngInherit&&E(o),E===gv&&(c=!1)}}a=Object.getPrototypeOf(a)}!function BA(o){let a=0,c=null;for(let h=o.length-1;h>=0;h--){const f=o[h];f.hostVars=a+=f.hostVars,f.hostAttrs=Vn(f.hostAttrs,c=Vn(c,f.hostAttrs))}}(h)}function mv(o){return o===Vr?{}:o===lt?[]:o}function lV(o,a){const c=o.viewQuery;o.viewQuery=c?(h,f)=>{a(h,f),c(h,f)}:a}function cV(o,a){const c=o.contentQueries;o.contentQueries=c?(h,f,m)=>{a(h,f,m),c(h,f,m)}:a}function UA(o,a){const c=o.hostBindings;o.hostBindings=c?(h,f)=>{a(h,f),c(h,f)}:a}let _v=null;function Wh(){if(!_v){const o=Bt.Symbol;if(o&&o.iterator)_v=o.iterator;else{const a=Object.getOwnPropertyNames(Map.prototype);for(let c=0;c<a.length;++c){const h=a[c];"entries"!==h&&"size"!==h&&Map.prototype[h]===Map.prototype.entries&&(_v=h)}}}return _v}function Lg(o){return!!Q0(o)&&(Array.isArray(o)||!(o instanceof Map)&&Wh()in o)}function Q0(o){return null!==o&&("function"==typeof o||"object"==typeof o)}function gi(o,a,c){return!Object.is(o[a],c)&&(o[a]=c,!0)}function J0(o,a,c,h){const f=me();return gi(f,go(),a)&&(Ot(),Ni(Tn(),f,o,a,c,h)),J0}function YA(o,a,c,h,f,m,b,E){const T=me(),I=Ot(),x=o+20,P=I.firstCreatePass?function mV(o,a,c,h,f,m,b,E,T){const I=a.consts,x=yc(a,o,4,b||null,Hi(I,E));R0(a,c,x,Hi(I,T)),Os(a,x);const P=x.tViews=xg(2,x,h,f,m,a.directiveRegistry,a.pipeRegistry,null,a.schemas,I);return null!==a.queries&&(a.queries.template(a,x),P.queries=a.queries.embeddedTView(x)),x}(x,I,T,a,c,h,f,m,b):I.data[x];li(P,!1);const B=T[11].createComment("");Cg(I,T,B,P),pr(B,T),nv(T,T[x]=vA(B,T,B,P)),Gl(P)&&Ky(I,T,P),null!=b&&S0(T,P,E)}function QA(o){return function xs(o,a){return o[a]}(function Gp(){return ut.lFrame.contextLView}(),20+o)}function Bg(o,a=ft.Default){const c=me();return null===c?Mn(o,a):aa(Dn(),c,J(o),a)}function lM(){throw new Error("invalid")}function rE(o,a,c){const h=me();return gi(h,go(),a)&&Oi(Ot(),Tn(),h,o,a,h[11],c,!1),rE}function iE(o,a,c,h,f){const b=f?"class":"style";sv(o,c,a.inputs[b],b,h)}function bv(o,a,c,h){const f=me(),m=Ot(),b=20+o,E=f[11],T=f[b]=ku(E,a,function KS(){return ut.lFrame.currentNamespace}()),I=m.firstCreatePass?function VV(o,a,c,h,f,m,b){const E=a.consts,I=yc(a,o,2,f,Hi(E,m));return R0(a,c,I,Hi(E,b)),null!==I.attrs&&ju(I,I.attrs,!1),null!==I.mergedAttrs&&ju(I,I.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,I),I}(b,m,f,0,a,c,h):m.data[b];li(I,!0);const x=I.mergedAttrs;null!==x&&Ke(E,T,x);const P=I.classes;null!==P&&Py(E,T,P);const B=I.styles;return null!==B&&Zi(E,T,B),64!=(64&I.flags)&&Cg(m,f,T,I),0===function Zl(){return ut.lFrame.elementDepthCount}()&&pr(T,f),function Up(){ut.lFrame.elementDepthCount++}(),Gl(I)&&(Ky(m,f,I),I0(m,I,f)),null!==h&&S0(f,I),bv}function wv(){let o=Dn();Fd()?Ld():(o=o.parent,li(o,!1));const a=o;!function Od(){ut.lFrame.elementDepthCount--}();const c=Ot();return c.firstCreatePass&&(Os(c,o),Ad(o)&&c.queries.elementEnd(o)),null!=a.classesWithoutHost&&function Kp(o){return 0!=(16&o.flags)}(a)&&iE(c,a,me(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function YC(o){return 0!=(32&o.flags)}(a)&&iE(c,a,me(),a.stylesWithoutHost,!1),wv}function sE(o,a,c,h){return bv(o,a,c,h),wv(),sE}function Cv(o,a,c){const h=me(),f=Ot(),m=o+20,b=f.firstCreatePass?function BV(o,a,c,h,f){const m=a.consts,b=Hi(m,h),E=yc(a,o,8,"ng-container",b);return null!==b&&ju(E,b,!0),R0(a,c,E,Hi(m,f)),null!==a.queries&&a.queries.elementStart(a,E),E}(m,f,h,a,c):f.data[m];li(b,!0);const E=h[m]=h[11].createComment("");return Cg(f,h,E,b),pr(E,h),Gl(b)&&(Ky(f,h,b),I0(f,b,h)),null!=c&&S0(h,b),Cv}function Ev(){let o=Dn();const a=Ot();return Fd()?Ld():(o=o.parent,li(o,!1)),a.firstCreatePass&&(Os(a,o),Ad(o)&&a.queries.elementEnd(o)),Ev}function oE(o,a,c){return Cv(o,a,c),Ev(),oE}function cM(){return me()}function aE(o){return!!o&&"function"==typeof o.then}function uM(o){return!!o&&"function"==typeof o.subscribe}const dM=uM;function lE(o,a,c,h){const f=me(),m=Ot(),b=Dn();return hM(m,f,f[11],b,o,a,!!c,h),lE}function cE(o,a){const c=Dn(),h=me(),f=Ot();return hM(f,h,kg(lu(f.data),c,h),c,o,a,!1),cE}function hM(o,a,c,h,f,m,b,E){const T=Gl(h),x=o.firstCreatePass&&DA(o),P=a[8],B=EA(a);let W=!0;if(3&h.type||E){const Le=Sr(h,a),Ye=E?E(Le):Le,ge=B.length,it=E?Ht=>E(un(Ht[h.index])):h.index;if(pn(c)){let Ht=null;if(!E&&T&&(Ht=function UV(o,a,c,h){const f=o.cleanup;if(null!=f)for(let m=0;m<f.length-1;m+=2){const b=f[m];if(b===c&&f[m+1]===h){const E=a[7],T=f[m+2];return E.length>T?E[T]:null}"string"==typeof b&&(m+=2)}return null}(o,a,f,h.index)),null!==Ht)(Ht.__ngLastListenerFn__||Ht).__ngNextListenerFn__=m,Ht.__ngLastListenerFn__=m,W=!1;else{m=uE(h,a,P,m,!1);const Qt=c.listen(Ye,f,m);B.push(m,Qt),x&&x.push(f,it,ge,ge+1)}}else m=uE(h,a,P,m,!0),Ye.addEventListener(f,m,b),B.push(m),x&&x.push(f,it,ge,b)}else m=uE(h,a,P,m,!1);const de=h.outputs;let Me;if(W&&null!==de&&(Me=de[f])){const Le=Me.length;if(Le)for(let Ye=0;Ye<Le;Ye+=2){const Qi=a[Me[Ye]][Me[Ye+1]].subscribe(m),Dl=B.length;B.push(m,Qi),x&&x.push(f,h.index,Dl,-(Dl+1))}}}function fM(o,a,c,h){try{return!1!==c(h)}catch(f){return Og(o,f),!1}}function uE(o,a,c,h,f){return function m(b){if(b===Function)return h;const E=2&o.flags?Ar(o.index,a):a;0==(32&a[2])&&F0(E);let T=fM(a,0,h,b),I=m.__ngNextListenerFn__;for(;I;)T=fM(a,0,I,b)&&T,I=I.__ngNextListenerFn__;return f&&!1===T&&(b.preventDefault(),b.returnValue=!1),T}}function pM(o=1){return function mo(o){return(ut.lFrame.contextLView=function H_(o,a){for(;o>0;)a=a[15],o--;return a}(o,ut.lFrame.contextLView))[8]}(o)}function jV(o,a){let c=null;const h=function m0(o){const a=o.attrs;if(null!=a){const c=a.indexOf(5);if(0==(1&c))return a[c+1]}return null}(o);for(let f=0;f<a.length;f++){const m=a[f];if("*"!==m){if(null===h?Ly(o,m,!0):Fh(h,m))return f}else c=f}return c}function gM(o){const a=me()[16][6];if(!a.projection){const h=a.projection=Bs(o?o.length:1,null),f=h.slice();let m=a.child;for(;null!==m;){const b=o?jV(m,o):0;null!==b&&(f[b]?f[b].projectionNext=m:h[b]=m,f[b]=m),m=m.next}}}function dE(o,a=0,c){const h=me(),f=Ot(),m=yc(f,20+o,16,null,c||null);null===m.projection&&(m.projection=a),Ld(),64!=(64&m.flags)&&function XS(o,a,c){u0(a[11],0,a,c,wg(o,c,a),o0(c.parent||a[6],c,a))}(f,h,m)}function bM(o,a,c,h,f){const m=o[c+1],b=null===a;let E=h?Ws(m):hl(m),T=!1;for(;0!==E&&(!1===T||b);){const x=o[E+1];GV(o[E],a)&&(T=!0,o[E+1]=h?b0(x):y0(x)),E=h?Ws(x):hl(x)}T&&(o[c+1]=h?y0(m):b0(m))}function GV(o,a){return null===o||null==a||(Array.isArray(o)?o[1]:o)===a||!(!Array.isArray(o)||"string"!=typeof a)&&wo(o,a)>=0}function Mv(o,a,c){return ko(o,a,c,!1),Mv}function xv(o,a){return ko(o,a,null,!0),xv}function ko(o,a,c,h){const f=me(),m=Ot(),b=function Rs(o){const a=ut.lFrame,c=a.bindingIndex;return a.bindingIndex=a.bindingIndex+o,c}(2);m.firstUpdatePass&&function SM(o,a,c,h){const f=o.data;if(null===f[c+1]){const m=f[Mr()],b=function IM(o,a){return a>=o.expandoStartIndex}(o,c);(function sf(o,a){return 0!=(o.flags&(a?16:32))})(m,h)&&null===a&&!b&&(a=!1),a=function vE(o,a,c,h){const f=lu(o);let m=h?a.residualClasses:a.residualStyles;if(null===f)0===(h?a.classBindings:a.styleBindings)&&(c=No(c=jg(null,o,a,c,h),a.attrs,h),m=null);else{const b=a.directiveStylingLast;if(-1===b||o[b]!==f)if(c=jg(f,o,a,c,h),null===m){let T=function bE(o,a,c){const h=c?a.classBindings:a.styleBindings;if(0!==hl(h))return o[Ws(h)]}(o,a,h);void 0!==T&&Array.isArray(T)&&(T=jg(null,o,a,T[1],h),T=No(T,a.attrs,h),function AM(o,a,c,h){o[Ws(c?a.classBindings:a.styleBindings)]=h}(o,a,h,T))}else m=function MM(o,a,c){let h;const f=a.directiveEnd;for(let m=1+a.directiveStylingLast;m<f;m++)h=No(h,o[m].hostAttrs,c);return No(h,a.attrs,c)}(o,a,h)}return void 0!==m&&(h?a.residualClasses=m:a.residualStyles=m),c}(f,m,a,h),function vM(o,a,c,h,f,m){let b=m?a.classBindings:a.styleBindings,E=Ws(b),T=hl(b);o[h]=c;let x,I=!1;if(Array.isArray(c)){const P=c;x=P[1],(null===x||wo(P,x)>0)&&(I=!0)}else x=c;if(f)if(0!==T){const B=Ws(o[E+1]);o[h+1]=Vh(B,E),0!==B&&(o[B+1]=v0(o[B+1],h)),o[E+1]=function kL(o,a){return 131071&o|a<<17}(o[E+1],h)}else o[h+1]=Vh(E,0),0!==E&&(o[E+1]=v0(o[E+1],h)),E=h;else o[h+1]=Vh(T,0),0===E?E=h:o[T+1]=v0(o[T+1],h),T=h;I&&(o[h+1]=y0(o[h+1])),bM(o,x,h,!0),bM(o,x,h,!1),function HV(o,a,c,h,f){const m=f?o.residualClasses:o.residualStyles;null!=m&&"string"==typeof a&&wo(m,a)>=0&&(c[h+1]=b0(c[h+1]))}(a,x,o,h,m),b=Vh(E,T),m?a.classBindings=b:a.styleBindings=b}(f,m,a,c,b,h)}}(m,o,b,h),a!==Ct&&gi(f,b,a)&&function OM(o,a,c,h,f,m,b,E){if(!(3&a.type))return;const T=o.data,I=T[E+1];Rv(function rA(o){return 1==(1&o)}(I)?NM(T,a,c,f,hl(I),b):void 0)||(Rv(m)||function nA(o){return 2==(2&o)}(I)&&(m=NM(T,null,c,f,E,b)),function h0(o,a,c,h,f){const m=pn(o);if(a)f?m?o.addClass(c,h):c.classList.add(h):m?o.removeClass(c,h):c.classList.remove(h);else{let b=-1===h.indexOf("-")?void 0:ne.DashCase;if(null==f)m?o.removeStyle(c,h,b):c.style.removeProperty(h);else{const E="string"==typeof f&&f.endsWith("!important");E&&(f=f.slice(0,-10),b|=ne.Important),m?o.setStyle(c,h,f,b):c.style.setProperty(h,f,E?"important":"")}}}(h,b,ql(Mr(),c),f,m))}(m,m.data[Mr()],f,f[11],o,f[b+1]=function PM(o,a){return null==o||("string"==typeof a?o+=a:"object"==typeof o&&(o=ye(qi(o)))),o}(a,c),h,b)}function jg(o,a,c,h,f){let m=null;const b=c.directiveEnd;let E=c.directiveStylingLast;for(-1===E?E=c.directiveStart:E++;E<b&&(m=a[E],h=No(h,m.hostAttrs,f),m!==o);)E++;return null!==o&&(c.directiveStylingLast=E),h}function No(o,a,c){const h=c?1:2;let f=-1;if(null!==a)for(let m=0;m<a.length;m++){const b=a[m];"number"==typeof b?f=b:f===h&&(Array.isArray(o)||(o=void 0===o?[]:["",o]),qn(o,b,!!c||a[++m]))}return void 0===o?null:o}function NM(o,a,c,h,f,m){const b=null===a;let E;for(;f>0;){const T=o[f],I=Array.isArray(T),x=I?T[1]:T,P=null===x;let B=c[f+1];B===Ct&&(B=P?lt:void 0);let W=P?hu(B,h):x===h?B:void 0;if(I&&!Rv(W)&&(W=hu(T,h)),Rv(W)&&(E=W,b))return E;const de=o[f+1];f=b?Ws(de):hl(de)}if(null!==a){let T=m?a.residualClasses:a.residualStyles;null!=T&&(E=hu(T,h))}return E}function Rv(o){return void 0!==o}function Hg(o,a=""){const c=me(),h=Ot(),f=o+20,m=h.firstCreatePass?yc(h,f,1,a,null):h.data[f],b=c[f]=function xu(o,a){return pn(o)?o.createText(a):o.createTextNode(a)}(c[11],a);Cg(h,c,b,m),li(m,!1)}function wE(o){return af("",o,""),wE}function af(o,a,c){const h=me(),f=function Kh(o,a,c,h){return gi(o,go(),c)?a+te(c)+h:Ct}(h,o,a,c);return f!==Ct&&Da(h,Mr(),f),af}function Uv(o,a,c){const h=me();return gi(h,go(),a)&&Oi(Ot(),Tn(),h,o,a,h[11],c,!0),Uv}function jv(o,a,c){const h=me();if(gi(h,go(),a)){const m=Ot(),b=Tn();Oi(m,b,h,o,a,kg(lu(m.data),b,h),c,!0)}return jv}const zu=void 0;var VM=["en",[["a","p"],["AM","PM"],zu],[["AM","PM"],zu,zu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],zu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],zu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",zu,"{1} 'at' {0}",zu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function LM(o){const c=Math.floor(Math.abs(o)),h=o.toString().replace(/^[^.]*\.?/,"").length;return 1===c&&0===h?1:5}];let qu={};function Hv(o){const a=function BM(o){return o.toLowerCase().replace(/_/g,"-")}(o);let c=BE(a);if(c)return c;const h=a.split("-")[0];if(c=BE(h),c)return c;if("en"===h)return VM;throw new Error(`Missing locale data for the locale "${o}".`)}function VE(o){return Hv(o)[pt.PluralCase]}function BE(o){return o in qu||(qu[o]=Bt.ng&&Bt.ng.common&&Bt.ng.common.locales&&Bt.ng.common.locales[o]),qu[o]}var pt=(()=>((pt=pt||{})[pt.LocaleId=0]="LocaleId",pt[pt.DayPeriodsFormat=1]="DayPeriodsFormat",pt[pt.DayPeriodsStandalone=2]="DayPeriodsStandalone",pt[pt.DaysFormat=3]="DaysFormat",pt[pt.DaysStandalone=4]="DaysStandalone",pt[pt.MonthsFormat=5]="MonthsFormat",pt[pt.MonthsStandalone=6]="MonthsStandalone",pt[pt.Eras=7]="Eras",pt[pt.FirstDayOfWeek=8]="FirstDayOfWeek",pt[pt.WeekendRange=9]="WeekendRange",pt[pt.DateFormat=10]="DateFormat",pt[pt.TimeFormat=11]="TimeFormat",pt[pt.DateTimeFormat=12]="DateTimeFormat",pt[pt.NumberSymbols=13]="NumberSymbols",pt[pt.NumberFormats=14]="NumberFormats",pt[pt.CurrencyCode=15]="CurrencyCode",pt[pt.CurrencySymbol=16]="CurrencySymbol",pt[pt.CurrencyName=17]="CurrencyName",pt[pt.Currencies=18]="Currencies",pt[pt.Directionality=19]="Directionality",pt[pt.PluralCase=20]="PluralCase",pt[pt.ExtraData=21]="ExtraData",pt))();const zg="en-US";let UE=zg;function ob(o,a,c,h,f){if(o=J(o),Array.isArray(o))for(let m=0;m<o.length;m++)ob(o[m],a,c,h,f);else{const m=Ot(),b=me();let E=bc(o)?o:J(o.provide),T=lv(o);const I=Dn(),x=1048575&I.providerIndexes,P=I.directiveStart,B=I.providerIndexes>>20;if(bc(o)||!o.multi){const W=new Qa(T,f,Bg),de=lb(E,a,f?x:x+B,P);-1===de?(oa(an(I,b),m,E),ab(m,o,a.length),a.push(E),I.directiveStart++,I.directiveEnd++,f&&(I.providerIndexes+=1048576),c.push(W),b.push(W)):(c[de]=W,b[de]=W)}else{const W=lb(E,a,x+B,P),de=lb(E,a,x,x+B),Me=W>=0&&c[W],Le=de>=0&&c[de];if(f&&!Le||!f&&!Me){oa(an(I,b),m,E);const Ye=function sm(o,a,c,h,f){const m=new Qa(o,c,Bg);return m.multi=[],m.index=a,m.componentProviders=0,ff(m,f,h&&!c),m}(f?cb:Tc,c.length,f,h,T);!f&&Le&&(c[de].providerFactory=Ye),ab(m,o,a.length,0),a.push(E),I.directiveStart++,I.directiveEnd++,f&&(I.providerIndexes+=1048576),c.push(Ye),b.push(Ye)}else ab(m,o,W>-1?W:de,ff(c[f?de:W],T,!f&&h));!f&&h&&Le&&c[de].componentProviders++}}}function ab(o,a,c,h){const f=bc(a),m=function eV(o){return!!o.useClass}(a);if(f||m){const T=(m?J(a.useClass):a).prototype.ngOnDestroy;if(T){const I=o.destroyHooks||(o.destroyHooks=[]);if(!f&&a.multi){const x=I.indexOf(c);-1===x?I.push(c,[h,T]):I[x+1].push(h,T)}else I.push(c,T)}}}function ff(o,a,c){return c&&o.componentProviders++,o.multi.push(a)-1}function lb(o,a,c,h){for(let f=c;f<h;f++)if(a[f]===o)return f;return-1}function Tc(o,a,c,h){return pf(this.multi,[])}function cb(o,a,c,h){const f=this.multi;let m;if(this.providerFactory){const b=this.providerFactory.componentProviders,E=xi(c,c[1],this.providerFactory.index,h);m=E.slice(0,b),pf(f,m);for(let T=b;T<E.length;T++)m.push(E[T])}else m=[],pf(f,m);return m}function pf(o,a){for(let c=0;c<o.length;c++)a.push((0,o[c])());return a}function rD(o,a=[]){return c=>{c.providersResolver=(h,f)=>function sx(o,a,c){const h=Ot();if(h.firstCreatePass){const f=ai(o);ob(c,h.data,h.blueprint,f,!0),ob(a,h.data,h.blueprint,f,!1)}}(h,f?f(o):o,a)}}class iD{}class lx{resolveComponentFactory(a){throw function ax(o){const a=Error(`No component factory found for ${ye(o)}. Did you add it to @NgModule.entryComponents?`);return a.ngComponent=o,a}(a)}}let Ic=(()=>{class o{}return o.NULL=new lx,o})();function ub(){return Sa(Dn(),me())}function Sa(o,a){return new gf(Sr(o,a))}let gf=(()=>{class o{constructor(c){this.nativeElement=c}}return o.__NG_ELEMENT_ID__=ub,o})();function aD(o){return o instanceof gf?o.nativeElement:o}class cx{}let db=(()=>{class o{}return o.__NG_ELEMENT_ID__=()=>function ux(){const o=me(),c=Ar(Dn().index,o);return function aB(o){return o[11]}(oi(c)?c:o)}(),o})(),dx=(()=>{class o{}return o.\u0275prov=en({token:o,providedIn:"root",factory:()=>null}),o})();class lD{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const cD=new lD("13.2.7"),mf={};function _f(o,a,c,h,f=!1){for(;null!==c;){const m=a[c.index];if(null!==m&&h.push(un(m)),jr(m))for(let E=10;E<m.length;E++){const T=m[E],I=T[1].firstChild;null!==I&&_f(T[1],T,I,h)}const b=c.type;if(8&b)_f(o,a,c.child,h);else if(32&b){const E=qe(c,a);let T;for(;T=E();)h.push(T)}else if(16&b){const E=c0(a,c);if(Array.isArray(E))h.push(...E);else{const T=bn(a[16]);_f(T[1],T,E,h,!0)}}c=f?c.projectionNext:c.next}return h}class yf{constructor(a,c){this._lView=a,this._cdRefInjectingView=c,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const a=this._lView,c=a[1];return _f(c,a,c.firstChild,[])}get context(){return this._lView[8]}set context(a){this._lView[8]=a}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[3];if(jr(a)){const c=a[8],h=c?c.indexOf(this):-1;h>-1&&(Iy(a,h),fa(c,h))}this._attachedToViewContainer=!1}Sy(this._lView[1],this._lView)}onDestroy(a){Yy(this._lView[1],this._lView,null,a)}markForCheck(){F0(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){V0(this._lView[1],this._lView,this.context)}checkNoChanges(){!function iv(o,a,c){Ka(!0);try{V0(o,a,c)}finally{Ka(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Fe(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function bg(o,a){Eg(o,a,a[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new Fe(902,"");this._appRef=a}}class hx extends yf{constructor(a){super(a),this._view=a}detectChanges(){rv(this._view)}checkNoChanges(){!function YL(o){Ka(!0);try{rv(o)}finally{Ka(!1)}}(this._view)}get context(){return null}}class uD extends Ic{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const c=qt(a);return new hb(c,this.ngModule)}}function dD(o){const a=[];for(let c in o)o.hasOwnProperty(c)&&a.push({propName:o[c],templateName:c});return a}class hb extends iD{constructor(a,c){super(),this.componentDef=a,this.ngModule=c,this.componentType=a.type,this.selector=function By(o){return o.map(Vy).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!c}get inputs(){return dD(this.componentDef.inputs)}get outputs(){return dD(this.componentDef.outputs)}create(a,c,h,f){const m=(f=f||this.ngModule)?function hD(o,a){return{get:(c,h,f)=>{const m=o.get(c,mf,f);return m!==mf||h===mf?m:a.get(c,h,f)}}}(a,f.injector):a,b=m.get(cx,iu),E=m.get(dx,null),T=b.createRenderer(null,this.componentDef),I=this.componentDef.selectors[0][0]||"div",x=h?function M0(o,a,c){if(pn(o))return o.selectRootElement(a,c===Pt.ShadowDom);let h="string"==typeof a?o.querySelector(a):a;return h.textContent="",h}(T,h,this.componentDef.encapsulation):ku(b.createRenderer(null,this.componentDef),I,function fx(o){const a=o.toLowerCase();return"svg"===a?"svg":"math"===a?"math":null}(I)),P=this.componentDef.onPush?576:528,B=function LA(o,a){return{components:[],scheduler:o||wy,clean:QL,playerHandler:a||null,flags:0}}(),W=xg(0,null,null,1,0,null,null,null,null,null),de=gl(null,W,B,P,null,null,b,T,E,m);let Me,Le;Ya(de);try{const Ye=function pv(o,a,c,h,f,m){const b=c[1];c[20]=o;const T=yc(b,20,2,"#host",null),I=T.mergedAttrs=a.hostAttrs;null!==I&&(ju(T,I,!0),null!==o&&(Ke(f,o,I),null!==T.classes&&Py(f,o,T.classes),null!==T.styles&&Zi(f,o,T.styles)));const x=h.createRenderer(o,a),P=gl(c,vc(a),null,a.onPush?64:16,c[20],T,h,x,m||null,null);return b.firstCreatePass&&(oa(an(T,c),b,a.type),k0(b,T),O0(T,c.length,1)),nv(c,P),c[20]=P}(x,this.componentDef,de,b,T);if(x)if(h)Ke(T,x,["ng-version",cD.full]);else{const{attrs:ge,classes:it}=function Dg(o){const a=[],c=[];let h=1,f=2;for(;h<o.length;){let m=o[h];if("string"==typeof m)2===f?""!==m&&a.push(m,o[++h]):8===f&&c.push(m);else{if(!qs(f))break;f=m}h++}return{attrs:a,classes:c}}(this.componentDef.selectors[0]);ge&&Ke(T,x,ge),it&&it.length>0&&Py(T,x,it.join(" "))}if(Le=Wl(W,20),void 0!==c){const ge=Le.projection=[];for(let it=0;it<this.ngContentSelectors.length;it++){const Ht=c[it];ge.push(null!=Ht?Array.from(Ht):null)}}Me=function FA(o,a,c,h,f){const m=c[1],b=function pA(o,a,c){const h=Dn();o.firstCreatePass&&(c.providersResolver&&c.providersResolver(c),Uu(o,h,a,Gh(o,a,1,null),c));const f=xi(a,o,h.directiveStart,h);pr(f,a);const m=Sr(h,a);return m&&pr(m,a),f}(m,c,a);if(h.components.push(b),o[8]=b,f&&f.forEach(T=>T(b,a)),a.contentQueries){const T=Dn();a.contentQueries(1,b,T.directiveStart)}const E=Dn();return!m.firstCreatePass||null===a.hostBindings&&null===a.hostAttrs||(ks(E.index),Rg(c[1],E,0,E.directiveStart,E.directiveEnd,a),ml(a,b)),b}(Ye,this.componentDef,de,B,[aV]),$h(W,de,null)}finally{Ql()}return new mx(this.componentType,Me,Sa(Le,de),de,Le)}}class mx extends class ox{}{constructor(a,c,h,f,m){super(),this.location=h,this._rootLView=f,this._tNode=m,this.instance=c,this.hostView=this.changeDetectorRef=new hx(f),this.componentType=a}get injector(){return new Ls(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}class Ku{}class fD{}const Yu=new Map;class lm extends Ku{constructor(a,c){super(),this._parent=c,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new uD(this);const h=ln(a);this._bootstrapComponents=_(h.bootstrap),this._r3Injector=Zs(a,c,[{provide:Ku,useValue:this},{provide:Ic,useValue:this.componentFactoryResolver}],ye(a)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(a)}get(a,c=xo.THROW_IF_NOT_FOUND,h=ft.Default){return a===xo||a===Ku||a===U0?this:this._r3Injector.get(a,c,h)}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(c=>c()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class gb extends fD{constructor(a){super(),this.moduleType=a,null!==ln(a)&&function _x(o){const a=new Set;!function c(h){const f=ln(h,!0),m=f.id;null!==m&&(function pb(o,a,c){if(a&&a!==c)throw new Error(`Duplicate module registered for ${o} - ${ye(a)} vs ${ye(a.name)}`)}(m,Yu.get(m),h),Yu.set(m,h));const b=_(f.imports);for(const E of b)a.has(E)||(a.add(E),c(E))}(o)}(a)}create(a){return new lm(this.moduleType,a)}}function bb(o){return a=>{setTimeout(o,void 0,a)}}const Xs=class Ix extends u.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,c,h){var f,m,b;let E=a,T=c||(()=>null),I=h;if(a&&"object"==typeof a){const P=a;E=null===(f=P.next)||void 0===f?void 0:f.bind(P),T=null===(m=P.error)||void 0===m?void 0:m.bind(P),I=null===(b=P.complete)||void 0===b?void 0:b.bind(P)}this.__isAsync&&(T=bb(T),E&&(E=bb(E)),I&&(I=bb(I)));const x=super.subscribe({next:E,error:T,complete:I});return a instanceof X.w0&&a.add(x),x}};function dm(){return this._results[Wh()]()}class hm{constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const c=Wh(),h=hm.prototype;h[c]||(h[c]=dm)}get changes(){return this._changes||(this._changes=new Xs)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,c){return this._results.reduce(a,c)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,c){const h=this;h.dirty=!1;const f=kr(a);(this._changesDetected=!function Xd(o,a,c){if(o.length!==a.length)return!1;for(let h=0;h<o.length;h++){let f=o[h],m=a[h];if(c&&(f=c(f),m=c(m)),m!==f)return!1}return!0}(h._results,f,c))&&(h._results=f,h.length=f.length,h.last=f[this.length-1],h.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let bf=(()=>{class o{}return o.__NG_ELEMENT_ID__=Ax,o})();const wD=bf,Sx=class extends wD{constructor(a,c,h){super(),this._declarationLView=a,this._declarationTContainer=c,this.elementRef=h}createEmbeddedView(a){const c=this._declarationTContainer.tViews,h=gl(this._declarationLView,c,a,16,null,c.declTNode,null,null,null,null);h[17]=this._declarationLView[this._declarationTContainer.index];const m=this._declarationLView[19];return null!==m&&(h[19]=m.createEmbeddedView(c)),$h(c,h,a),new yf(h)}};function Ax(){return fm(Dn(),me())}function fm(o,a){return 4&o.type?new Sx(a,o,Sa(o,a)):null}let pm=(()=>{class o{}return o.__NG_ELEMENT_ID__=Mx,o})();function Mx(){return CD(Dn(),me())}const xx=pm,Sc=class extends xx{constructor(a,c,h){super(),this._lContainer=a,this._hostTNode=c,this._hostLView=h}get element(){return Sa(this._hostTNode,this._hostLView)}get injector(){return new Ls(this._hostTNode,this._hostLView)}get parentInjector(){const a=cu(this._hostTNode,this._hostLView);if(Yp(a)){const c=Fs(a,this._hostLView),h=yn(a);return new Ls(c[1].data[h+8],c)}return new Ls(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const c=wb(this._lContainer);return null!==c&&c[a]||null}get length(){return this._lContainer.length-10}createEmbeddedView(a,c,h){const f=a.createEmbeddedView(c||{});return this.insert(f,h),f}createComponent(a,c,h,f,m){const b=a&&!function ha(o){return"function"==typeof o}(a);let E;if(b)E=c;else{const P=c||{};E=P.index,h=P.injector,f=P.projectableNodes,m=P.ngModuleRef}const T=b?a:new hb(qt(a)),I=h||this.parentInjector;if(!m&&null==T.ngModule){const B=(b?I:this.parentInjector).get(Ku,null);B&&(m=B)}const x=T.create(I,f,void 0,m);return this.insert(x.hostView,E),x}insert(a,c){const h=a._lView,f=h[1];if(function Bp(o){return jr(o[3])}(h)){const x=this.indexOf(a);if(-1!==x)this.detach(x);else{const P=h[3],B=new Sc(P,P[6],P[3]);B.detach(B.indexOf(a))}}const m=this._adjustIndex(c),b=this._lContainer;!function Ty(o,a,c,h){const f=10+h,m=c.length;h>0&&(c[f-1][4]=a),h<m-10?(a[4]=c[f],eh(c,10+h,a)):(c.push(a),a[4]=null),a[3]=c;const b=a[17];null!==b&&c!==b&&function Ou(o,a){const c=o[9];a[16]!==a[3][3][16]&&(o[2]=!0),null===c?o[9]=[a]:c.push(a)}(b,a);const E=a[19];null!==E&&E.insertView(o),a[2]|=128}(f,h,b,m);const E=ky(m,b),T=h[11],I=Ph(T,b[7]);return null!==I&&function Nh(o,a,c,h,f,m){h[0]=f,h[6]=a,Eg(o,h,c,1,f,m)}(f,b[6],T,h,I,E),a.attachToViewContainerRef(),eh(gm(b),m,a),a}move(a,c){return this.insert(a,c)}indexOf(a){const c=wb(this._lContainer);return null!==c?c.indexOf(a):-1}remove(a){const c=this._adjustIndex(a,-1),h=Iy(this._lContainer,c);h&&(fa(gm(this._lContainer),c),Sy(h[1],h))}detach(a){const c=this._adjustIndex(a,-1),h=Iy(this._lContainer,c);return h&&null!=fa(gm(this._lContainer),c)?new yf(h):null}_adjustIndex(a,c=0){return null==a?this.length+c:a}};function wb(o){return o[8]}function gm(o){return o[8]||(o[8]=[])}function CD(o,a){let c;const h=a[o.index];if(jr(h))c=h;else{let f;if(8&o.type)f=un(h);else{const m=a[11];f=m.createComment("");const b=Sr(o,a);Wi(m,Ph(m,b),f,function JS(o,a){return pn(o)?o.nextSibling(a):a.nextSibling}(m,b),!1)}a[o.index]=c=vA(h,a,f,o),nv(a,c)}return new Sc(c,o,a)}class ED{constructor(a){this.queryList=a,this.matches=null}clone(){return new ED(this.queryList)}setDirty(){this.queryList.setDirty()}}class DD{constructor(a=[]){this.queries=a}createEmbeddedView(a){const c=a.queries;if(null!==c){const h=null!==a.contentQueries?a.contentQueries[0]:c.length,f=[];for(let m=0;m<h;m++){const b=c.getByIndex(m);f.push(this.queries[b.indexInDeclarationView].clone())}return new DD(f)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let c=0;c<this.queries.length;c++)null!==Vx(a,c).matches&&this.queries[c].setDirty()}}class kx{constructor(a,c,h=null){this.predicate=a,this.flags=c,this.read=h}}class TD{constructor(a=[]){this.queries=a}elementStart(a,c){for(let h=0;h<this.queries.length;h++)this.queries[h].elementStart(a,c)}elementEnd(a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementEnd(a)}embeddedTView(a){let c=null;for(let h=0;h<this.length;h++){const f=null!==c?c.length:0,m=this.getByIndex(h).embeddedTView(a,f);m&&(m.indexInDeclarationView=h,null!==c?c.push(m):c=[m])}return null!==c?new TD(c):null}template(a,c){for(let h=0;h<this.queries.length;h++)this.queries[h].template(a,c)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class mm{constructor(a,c=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=c}elementStart(a,c){this.isApplyingToNode(c)&&this.matchTNode(a,c)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,c){this.elementStart(a,c)}embeddedTView(a,c){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,c),new mm(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const c=this._declarationNodeIndex;let h=a.parent;for(;null!==h&&8&h.type&&h.index!==c;)h=h.parent;return c===(null!==h?h.index:-1)}return this._appliesToNextNode}matchTNode(a,c){const h=this.metadata.predicate;if(Array.isArray(h))for(let f=0;f<h.length;f++){const m=h[f];this.matchTNodeWithReadOption(a,c,uB(c,m)),this.matchTNodeWithReadOption(a,c,fs(c,a,m,!1,!1))}else h===bf?4&c.type&&this.matchTNodeWithReadOption(a,c,-1):this.matchTNodeWithReadOption(a,c,fs(c,a,h,!1,!1))}matchTNodeWithReadOption(a,c,h){if(null!==h){const f=this.metadata.read;if(null!==f)if(f===gf||f===pm||f===bf&&4&c.type)this.addMatch(c.index,-2);else{const m=fs(c,a,f,!1,!1);null!==m&&this.addMatch(c.index,m)}else this.addMatch(c.index,h)}}addMatch(a,c){null===this.matches?this.matches=[a,c]:this.matches.push(a,c)}}function uB(o,a){const c=o.localNames;if(null!==c)for(let h=0;h<c.length;h+=2)if(c[h]===a)return c[h+1];return null}function Ox(o,a,c,h){return-1===c?function dB(o,a){return 11&o.type?Sa(o,a):4&o.type?fm(o,a):null}(a,o):-2===c?function Nx(o,a,c){return c===gf?Sa(a,o):c===bf?fm(a,o):c===pm?CD(a,o):void 0}(o,a,h):xi(o,o[1],c,a)}function mr(o,a,c,h){const f=a[19].queries[h];if(null===f.matches){const m=o.data,b=c.matches,E=[];for(let T=0;T<b.length;T+=2){const I=b[T];E.push(I<0?null:Ox(a,m[I],b[T+1],c.metadata.read))}f.matches=E}return f.matches}function ID(o,a,c,h){const f=o.queries.getByIndex(c),m=f.matches;if(null!==m){const b=mr(o,a,f,c);for(let E=0;E<m.length;E+=2){const T=m[E];if(T>0)h.push(b[E/2]);else{const I=m[E+1],x=a[-T];for(let P=10;P<x.length;P++){const B=x[P];B[17]===B[3]&&ID(B[1],B,I,h)}if(null!==x[9]){const P=x[9];for(let B=0;B<P.length;B++){const W=P[B];ID(W[1],W,I,h)}}}}}return h}function Px(o){const a=me(),c=Ot(),h=Ud();jd(h+1);const f=Vx(c,h);if(o.dirty&&za(a)===(2==(2&f.metadata.flags))){if(null===f.matches)o.reset([]);else{const m=f.crossesNgTemplate?ID(c,a,h,[]):mr(c,a,f,h);o.reset(m,aD),o.notifyOnChanges()}return!0}return!1}function Fx(o,a,c){const h=Ot();h.firstCreatePass&&(MD(h,new kx(o,a,c),-1),2==(2&a)&&(h.staticViewQueries=!0)),Lx(h,me(),a)}function SD(o,a,c,h){const f=Ot();if(f.firstCreatePass){const m=Dn();MD(f,new kx(a,c,h),m.index),function hB(o,a){const c=o.contentQueries||(o.contentQueries=[]);a!==(c.length?c[c.length-1]:-1)&&c.push(o.queries.length-1,a)}(f,o),2==(2&c)&&(f.staticContentQueries=!0)}Lx(f,me(),c)}function Cb(){return function AD(o,a){return o[19].queries[a].queryList}(me(),Ud())}function Lx(o,a,c){const h=new hm(4==(4&c));Yy(o,a,h,h.destroy),null===a[19]&&(a[19]=new DD),a[19].queries.push(new ED(h))}function MD(o,a,c){null===o.queries&&(o.queries=new TD),o.queries.track(new mm(a,c))}function Vx(o,a){return o.queries.getByIndex(a)}function bm(...o){}const BD=new Sn("Application Initializer");let Mc=(()=>{class o{constructor(c){this.appInits=c,this.resolve=bm,this.reject=bm,this.initialized=!1,this.done=!1,this.donePromise=new Promise((h,f)=>{this.resolve=h,this.reject=f})}runInitializers(){if(this.initialized)return;const c=[],h=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const m=this.appInits[f]();if(aE(m))c.push(m);else if(dM(m)){const b=new Promise((E,T)=>{m.subscribe({complete:E,error:T})});c.push(b)}}Promise.all(c).then(()=>{h()}).catch(f=>{this.reject(f)}),0===c.length&&h(),this.initialized=!0}}return o.\u0275fac=function(c){return new(c||o)(Mn(BD,8))},o.\u0275prov=en({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const UD=new Sn("AppId",{providedIn:"root",factory:function eR(){return`${jD()}${jD()}${jD()}`}});function jD(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const tR=new Sn("Platform Initializer"),nR=new Sn("Platform ID"),HD=new Sn("appBootstrapListener");let Sb=(()=>{class o{log(c){console.log(c)}warn(c){console.warn(c)}}return o.\u0275fac=function(c){return new(c||o)},o.\u0275prov=en({token:o,factory:o.\u0275fac}),o})();const xc=new Sn("LocaleId",{providedIn:"root",factory:()=>gs(xc,ft.Optional|ft.SkipSelf)||function Ab(){return"undefined"!=typeof $localize&&$localize.locale||zg}()}),GD=new Sn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class iR{constructor(a,c){this.ngModuleFactory=a,this.componentFactories=c}}let sR=(()=>{class o{compileModuleSync(c){return new gb(c)}compileModuleAsync(c){return Promise.resolve(this.compileModuleSync(c))}compileModuleAndAllComponentsSync(c){const h=this.compileModuleSync(c),m=_(ln(c).declarations).reduce((b,E)=>{const T=qt(E);return T&&b.push(new hb(T)),b},[]);return new iR(h,m)}compileModuleAndAllComponentsAsync(c){return Promise.resolve(this.compileModuleAndAllComponentsSync(c))}clearCache(){}clearCacheFor(c){}getModuleId(c){}}return o.\u0275fac=function(c){return new(c||o)},o.\u0275prov=en({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const aR=(()=>Promise.resolve(0))();function Mb(o){"undefined"==typeof Zone?aR.then(()=>{o&&o.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",o)}class eo{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:c=!1,shouldCoalesceRunChangeDetection:h=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Xs(!1),this.onMicrotaskEmpty=new Xs(!1),this.onStable=new Xs(!1),this.onError=new Xs(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const f=this;f._nesting=0,f._outer=f._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!h&&c,f.shouldCoalesceRunChangeDetection=h,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function lR(){let o=Bt.requestAnimationFrame,a=Bt.cancelAnimationFrame;if("undefined"!=typeof Zone&&o&&a){const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c);const h=a[Zone.__symbol__("OriginalDelegate")];h&&(a=h)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function dR(o){const a=()=>{!function uR(o){o.isCheckStableRunning||-1!==o.lastRequestAnimationFrameId||(o.lastRequestAnimationFrameId=o.nativeRequestAnimationFrame.call(Bt,()=>{o.fakeTopEventTask||(o.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{o.lastRequestAnimationFrameId=-1,Rb(o),o.isCheckStableRunning=!0,xb(o),o.isCheckStableRunning=!1},void 0,()=>{},()=>{})),o.fakeTopEventTask.invoke()}),Rb(o))}(o)};o._inner=o._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(c,h,f,m,b,E)=>{try{return $D(o),c.invokeTask(f,m,b,E)}finally{(o.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||o.shouldCoalesceRunChangeDetection)&&a(),zD(o)}},onInvoke:(c,h,f,m,b,E,T)=>{try{return $D(o),c.invoke(f,m,b,E,T)}finally{o.shouldCoalesceRunChangeDetection&&a(),zD(o)}},onHasTask:(c,h,f,m)=>{c.hasTask(f,m),h===f&&("microTask"==m.change?(o._hasPendingMicrotasks=m.microTask,Rb(o),xb(o)):"macroTask"==m.change&&(o.hasPendingMacrotasks=m.macroTask))},onHandleError:(c,h,f,m)=>(c.handleError(f,m),o.runOutsideAngular(()=>o.onError.emit(m)),!1)})}(f)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!eo.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(eo.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(a,c,h){return this._inner.run(a,c,h)}runTask(a,c,h,f){const m=this._inner,b=m.scheduleEventTask("NgZoneEvent: "+f,a,cR,bm,bm);try{return m.runTask(b,c,h)}finally{m.cancelTask(b)}}runGuarded(a,c,h){return this._inner.runGuarded(a,c,h)}runOutsideAngular(a){return this._outer.run(a)}}const cR={};function xb(o){if(0==o._nesting&&!o.hasPendingMicrotasks&&!o.isStable)try{o._nesting++,o.onMicrotaskEmpty.emit(null)}finally{if(o._nesting--,!o.hasPendingMicrotasks)try{o.runOutsideAngular(()=>o.onStable.emit(null))}finally{o.isStable=!0}}}function Rb(o){o.hasPendingMicrotasks=!!(o._hasPendingMicrotasks||(o.shouldCoalesceEventChangeDetection||o.shouldCoalesceRunChangeDetection)&&-1!==o.lastRequestAnimationFrameId)}function $D(o){o._nesting++,o.isStable&&(o.isStable=!1,o.onUnstable.emit(null))}function zD(o){o._nesting--,xb(o)}class hR{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Xs,this.onMicrotaskEmpty=new Xs,this.onStable=new Xs,this.onError=new Xs}run(a,c,h){return a.apply(c,h)}runGuarded(a,c,h){return a.apply(c,h)}runOutsideAngular(a){return a()}runTask(a,c,h,f){return a.apply(c,h)}}let qD=(()=>{class o{constructor(c){this._ngZone=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),c.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{eo.assertNotInAngularZone(),Mb(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Mb(()=>{for(;0!==this._callbacks.length;){let c=this._callbacks.pop();clearTimeout(c.timeoutId),c.doneCb(this._didWork)}this._didWork=!1});else{let c=this.getPendingTasks();this._callbacks=this._callbacks.filter(h=>!h.updateCb||!h.updateCb(c)||(clearTimeout(h.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(c=>({source:c.source,creationLocation:c.creationLocation,data:c.data})):[]}addCallback(c,h,f){let m=-1;h&&h>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(b=>b.timeoutId!==m),c(this._didWork,this.getPendingTasks())},h)),this._callbacks.push({doneCb:c,timeoutId:m,updateCb:f})}whenStable(c,h,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(c,h,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(c,h,f){return[]}}return o.\u0275fac=function(c){return new(c||o)(Mn(eo))},o.\u0275prov=en({token:o,factory:o.\u0275fac}),o})(),fR=(()=>{class o{constructor(){this._applications=new Map,kb.addToWindow(this)}registerApplication(c,h){this._applications.set(c,h)}unregisterApplication(c){this._applications.delete(c)}unregisterAllApplications(){this._applications.clear()}getTestability(c){return this._applications.get(c)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(c,h=!0){return kb.findTestabilityInTree(this,c,h)}}return o.\u0275fac=function(c){return new(c||o)},o.\u0275prov=en({token:o,factory:o.\u0275fac}),o})();class pR{addToWindow(a){}findTestabilityInTree(a,c,h){return null}}function NB(o){kb=o}let Yi,kb=new pR;const gR=new Sn("AllowMultipleToken");class mR{constructor(a,c){this.name=a,this.token=c}}function wm(o,a,c=[]){const h=`Platform: ${a}`,f=new Sn(h);return(m=[])=>{let b=yR();if(!b||b.injector.get(gR,!1))if(o)o(c.concat(m).concat({provide:f,useValue:!0}));else{const E=c.concat(m).concat({provide:f,useValue:!0},{provide:Ng,useValue:"platform"});!function LB(o){if(Yi&&!Yi.destroyed&&!Yi.injector.get(gR,!1))throw new Fe(400,"");Yi=o.get(WD);const a=o.get(tR,null);a&&a.forEach(c=>c())}(xo.create({providers:E,name:h}))}return function _R(o){const a=yR();if(!a)throw new Fe(401,"");return a}()}}function yR(){return Yi&&!Yi.destroyed?Yi:null}let WD=(()=>{class o{constructor(c){this._injector=c,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(c,h){const E=function BB(o,a){let c;return c="noop"===o?new hR:("zone.js"===o?void 0:o)||new eo({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==a?void 0:a.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==a?void 0:a.ngZoneRunCoalescing)}),c}(h?h.ngZone:void 0,{ngZoneEventCoalescing:h&&h.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:h&&h.ngZoneRunCoalescing||!1}),T=[{provide:eo,useValue:E}];return E.run(()=>{const I=xo.create({providers:T,parent:this.injector,name:c.moduleType.name}),x=c.create(I),P=x.injector.get(rr,null);if(!P)throw new Fe(402,"");return E.runOutsideAngular(()=>{const B=E.onError.subscribe({next:W=>{P.handleError(W)}});x.onDestroy(()=>{Ob(this._modules,x),B.unsubscribe()})}),function ZD(o,a,c){try{const h=c();return aE(h)?h.catch(f=>{throw a.runOutsideAngular(()=>o.handleError(f)),f}):h}catch(h){throw a.runOutsideAngular(()=>o.handleError(h)),h}}(P,E,()=>{const B=x.injector.get(Mc);return B.runInitializers(),B.donePromise.then(()=>(function GM(o){rt(o,"Expected localeId to be defined"),"string"==typeof o&&(UE=o.toLowerCase().replace(/_/g,"-"))}(x.injector.get(xc,zg)||zg),this._moduleDoBootstrap(x),x))})})}bootstrapModule(c,h=[]){const f=KD({},h);return function PB(o,a,c){const h=new gb(c);return Promise.resolve(h)}(0,0,c).then(m=>this.bootstrapModuleFactory(m,f))}_moduleDoBootstrap(c){const h=c.injector.get(Cm);if(c._bootstrapComponents.length>0)c._bootstrapComponents.forEach(f=>h.bootstrap(f));else{if(!c.instance.ngDoBootstrap)throw new Fe(403,"");c.instance.ngDoBootstrap(h)}this._modules.push(c)}onDestroy(c){this._destroyListeners.push(c)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Fe(404,"");this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c()),this._destroyed=!0}get destroyed(){return this._destroyed}}return o.\u0275fac=function(c){return new(c||o)(Mn(xo))},o.\u0275prov=en({token:o,factory:o.\u0275fac}),o})();function KD(o,a){return Array.isArray(a)?a.reduce(KD,o):Object.assign(Object.assign({},o),a)}let Cm=(()=>{class o{constructor(c,h,f,m,b){this._zone=c,this._injector=h,this._exceptionHandler=f,this._componentFactoryResolver=m,this._initStatus=b,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const E=new V.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),T=new V.y(I=>{let x;this._zone.runOutsideAngular(()=>{x=this._zone.onStable.subscribe(()=>{eo.assertNotInAngularZone(),Mb(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const P=this._zone.onUnstable.subscribe(()=>{eo.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{x.unsubscribe(),P.unsubscribe()}});this.isStable=(0,fe.T)(E,T.pipe((0,_e.B)()))}bootstrap(c,h){if(!this._initStatus.done)throw new Fe(405,"");let f;f=c instanceof iD?c:this._componentFactoryResolver.resolveComponentFactory(c),this.componentTypes.push(f.componentType);const m=function FB(o){return o.isBoundToModule}(f)?void 0:this._injector.get(Ku),E=f.create(xo.NULL,[],h||f.selector,m),T=E.location.nativeElement,I=E.injector.get(qD,null),x=I&&E.injector.get(fR);return I&&x&&x.registerApplication(T,I),E.onDestroy(()=>{this.detachView(E.hostView),Ob(this.components,E),x&&x.unregisterApplication(T)}),this._loadComponent(E),E}tick(){if(this._runningTick)throw new Fe(101,"");try{this._runningTick=!0;for(let c of this._views)c.detectChanges()}catch(c){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(c))}finally{this._runningTick=!1}}attachView(c){const h=c;this._views.push(h),h.attachToAppRef(this)}detachView(c){const h=c;Ob(this._views,h),h.detachFromAppRef()}_loadComponent(c){this.attachView(c.hostView),this.tick(),this.components.push(c),this._injector.get(HD,[]).concat(this._bootstrapListeners).forEach(f=>f(c))}ngOnDestroy(){this._views.slice().forEach(c=>c.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return o.\u0275fac=function(c){return new(c||o)(Mn(eo),Mn(xo),Mn(rr),Mn(Ic),Mn(Mc))},o.\u0275prov=en({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function Ob(o,a){const c=o.indexOf(a);c>-1&&o.splice(c,1)}let JD=!0,Em=!1;function XD(){return Em=!0,JD}function eT(){if(Em)throw new Error("Cannot enable prod mode after platform setup.");JD=!1}let nT=(()=>{class o{}return o.__NG_ELEMENT_ID__=vR,o})();function vR(o){return function bR(o,a,c){if(Hl(o)&&!c){const h=Ar(o.index,a);return new yf(h,h)}return 47&o.type?new yf(a[16],a):null}(Dn(),me(),16==(16&o))}class Lb{constructor(){}supports(a){return Lg(a)}create(a){return new Vb(a)}}const sT=(o,a)=>a;class Vb{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||sT}forEachItem(a){let c;for(c=this._itHead;null!==c;c=c._next)a(c)}forEachOperation(a){let c=this._itHead,h=this._removalsHead,f=0,m=null;for(;c||h;){const b=!h||c&&c.currentIndex<jb(h,f,m)?c:h,E=jb(b,f,m),T=b.currentIndex;if(b===h)f--,h=h._nextRemoved;else if(c=c._next,null==b.previousIndex)f++;else{m||(m=[]);const I=E-f,x=T-f;if(I!=x){for(let B=0;B<I;B++){const W=B<m.length?m[B]:m[B]=0,de=W+B;x<=de&&de<I&&(m[B]=W+1)}m[b.previousIndex]=x-I}}E!==T&&a(b,E,T)}}forEachPreviousItem(a){let c;for(c=this._previousItHead;null!==c;c=c._nextPrevious)a(c)}forEachAddedItem(a){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)a(c)}forEachMovedItem(a){let c;for(c=this._movesHead;null!==c;c=c._nextMoved)a(c)}forEachRemovedItem(a){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)a(c)}forEachIdentityChange(a){let c;for(c=this._identityChangesHead;null!==c;c=c._nextIdentityChange)a(c)}diff(a){if(null==a&&(a=[]),!Lg(a))throw new Fe(900,"");return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let f,m,b,c=this._itHead,h=!1;if(Array.isArray(a)){this.length=a.length;for(let E=0;E<this.length;E++)m=a[E],b=this._trackByFn(E,m),null!==c&&Object.is(c.trackById,b)?(h&&(c=this._verifyReinsertion(c,m,b,E)),Object.is(c.item,m)||this._addIdentityChange(c,m)):(c=this._mismatch(c,m,b,E),h=!0),c=c._next}else f=0,function gV(o,a){if(Array.isArray(o))for(let c=0;c<o.length;c++)a(o[c]);else{const c=o[Wh()]();let h;for(;!(h=c.next()).done;)a(h.value)}}(a,E=>{b=this._trackByFn(f,E),null!==c&&Object.is(c.trackById,b)?(h&&(c=this._verifyReinsertion(c,E,b,f)),Object.is(c.item,E)||this._addIdentityChange(c,E)):(c=this._mismatch(c,E,b,f),h=!0),c=c._next,f++}),this.length=f;return this._truncate(c),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,c,h,f){let m;return null===a?m=this._itTail:(m=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null))?(Object.is(a.item,c)||this._addIdentityChange(a,c),this._reinsertAfter(a,m,f)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(h,f))?(Object.is(a.item,c)||this._addIdentityChange(a,c),this._moveAfter(a,m,f)):a=this._addAfter(new oT(c,h),m,f),a}_verifyReinsertion(a,c,h,f){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null);return null!==m?a=this._reinsertAfter(m,a._prev,f):a.currentIndex!=f&&(a.currentIndex=f,this._addToMoves(a,f)),a}_truncate(a){for(;null!==a;){const c=a._next;this._addToRemovals(this._unlink(a)),a=c}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,c,h){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const f=a._prevRemoved,m=a._nextRemoved;return null===f?this._removalsHead=m:f._nextRemoved=m,null===m?this._removalsTail=f:m._prevRemoved=f,this._insertAfter(a,c,h),this._addToMoves(a,h),a}_moveAfter(a,c,h){return this._unlink(a),this._insertAfter(a,c,h),this._addToMoves(a,h),a}_addAfter(a,c,h){return this._insertAfter(a,c,h),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,c,h){const f=null===c?this._itHead:c._next;return a._next=f,a._prev=c,null===f?this._itTail=a:f._prev=a,null===c?this._itHead=a:c._next=a,null===this._linkedRecords&&(this._linkedRecords=new Ub),this._linkedRecords.put(a),a.currentIndex=h,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const c=a._prev,h=a._next;return null===c?this._itHead=h:c._next=h,null===h?this._itTail=c:h._prev=c,a}_addToMoves(a,c){return a.previousIndex===c||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Ub),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,c){return a.item=c,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class oT{constructor(a,c){this.item=a,this.trackById=c,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Bb{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,c){let h;for(h=this._head;null!==h;h=h._nextDup)if((null===c||c<=h.currentIndex)&&Object.is(h.trackById,a))return h;return null}remove(a){const c=a._prevDup,h=a._nextDup;return null===c?this._head=h:c._nextDup=h,null===h?this._tail=c:h._prevDup=c,null===this._head}}class Ub{constructor(){this.map=new Map}put(a){const c=a.trackById;let h=this.map.get(c);h||(h=new Bb,this.map.set(c,h)),h.add(a)}get(a,c){const f=this.map.get(a);return f?f.get(a,c):null}remove(a){const c=a.trackById;return this.map.get(c).remove(a)&&this.map.delete(c),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function jb(o,a,c){const h=o.previousIndex;if(null===h)return h;let f=0;return c&&h<c.length&&(f=c[h]),h+a+f}class Hb{constructor(){}supports(a){return a instanceof Map||Q0(a)}create(){return new Gb}}class Gb{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let c;for(c=this._mapHead;null!==c;c=c._next)a(c)}forEachPreviousItem(a){let c;for(c=this._previousMapHead;null!==c;c=c._nextPrevious)a(c)}forEachChangedItem(a){let c;for(c=this._changesHead;null!==c;c=c._nextChanged)a(c)}forEachAddedItem(a){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)a(c)}forEachRemovedItem(a){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)a(c)}diff(a){if(a){if(!(a instanceof Map||Q0(a)))throw new Fe(900,"")}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let c=this._mapHead;if(this._appendAfter=null,this._forEach(a,(h,f)=>{if(c&&c.key===f)this._maybeAddToChanges(c,h),this._appendAfter=c,c=c._next;else{const m=this._getOrCreateRecordForKey(f,h);c=this._insertBeforeOrAppend(c,m)}}),c){c._prev&&(c._prev._next=null),this._removalsHead=c;for(let h=c;null!==h;h=h._nextRemoved)h===this._mapHead&&(this._mapHead=null),this._records.delete(h.key),h._nextRemoved=h._next,h.previousValue=h.currentValue,h.currentValue=null,h._prev=null,h._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,c){if(a){const h=a._prev;return c._next=a,c._prev=h,a._prev=c,h&&(h._next=c),a===this._mapHead&&(this._mapHead=c),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=c,c._prev=this._appendAfter):this._mapHead=c,this._appendAfter=c,null}_getOrCreateRecordForKey(a,c){if(this._records.has(a)){const f=this._records.get(a);this._maybeAddToChanges(f,c);const m=f._prev,b=f._next;return m&&(m._next=b),b&&(b._prev=m),f._next=null,f._prev=null,f}const h=new Am(a);return this._records.set(a,h),h.currentValue=c,this._addToAdditions(h),h}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,c){Object.is(c,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=c,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,c){a instanceof Map?a.forEach(c):Object.keys(a).forEach(h=>c(a[h],h))}}class Am{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function $b(){return new Mm([new Lb])}let Mm=(()=>{class o{constructor(c){this.factories=c}static create(c,h){if(null!=h){const f=h.factories.slice();c=c.concat(f)}return new o(c)}static extend(c){return{provide:o,useFactory:h=>o.create(c,h||$b()),deps:[[o,new sl,new rl]]}}find(c){const h=this.factories.find(f=>f.supports(c));if(null!=h)return h;throw new Fe(901,"")}}return o.\u0275prov=en({token:o,providedIn:"root",factory:$b}),o})();function Uo(){return new Nr([new Hb])}let Nr=(()=>{class o{constructor(c){this.factories=c}static create(c,h){if(h){const f=h.factories.slice();c=c.concat(f)}return new o(c)}static extend(c){return{provide:o,useFactory:h=>o.create(c,h||Uo()),deps:[[o,new sl,new rl]]}}find(c){const h=this.factories.find(m=>m.supports(c));if(h)return h;throw new Fe(901,"")}}return o.\u0275prov=en({token:o,providedIn:"root",factory:Uo}),o})();const zb=wm(null,"core",[{provide:nR,useValue:"unknown"},{provide:WD,deps:[xo]},{provide:fR,deps:[]},{provide:Sb,deps:[]}]);let xm=(()=>{class o{constructor(c){}}return o.\u0275fac=function(c){return new(c||o)(Mn(Cm))},o.\u0275mod=Y({type:o}),o.\u0275inj=tn({}),o})()},3942:(at,De,F)=>{F.d(De,{Z:()=>Fe});var u=F(2090),X=F(4859),V=F(9681),fe=F(1877);class _e{constructor(te,Se){this._delegate=te,this.firebase=Se,(0,V._addComponent)(te,new X.wA("app-compat",()=>this,"PUBLIC")),this.container=te.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(te){this._delegate.automaticDataCollectionEnabled=te}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(te=>{this._delegate.checkDestroyed(),te()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,V.deleteApp)(this._delegate)))}_getService(te,Se=V._DEFAULT_ENTRY_NAME){var We;this._delegate.checkDestroyed();const Je=this._delegate.container.getProvider(te);return!Je.isInitialized()&&"EXPLICIT"===(null===(We=Je.getComponent())||void 0===We?void 0:We.instantiationMode)&&Je.initialize(),Je.getImmediate({identifier:Se})}_removeServiceInstance(te,Se=V._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(te).clearInstance(Se)}_addComponent(te){(0,V._addComponent)(this._delegate,te)}_addOrOverwriteComponent(te){(0,V._addOrOverwriteComponent)(this._delegate,te)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ue=new u.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),G=function Ie(){const Oe=function ye(Oe){const te={},Se={__esModule:!0,initializeApp:function Ee(Ge,ee={}){const K=V.initializeApp(Ge,ee);if((0,u.r3)(te,K.name))return te[K.name];const re=new Oe(K,Se);return te[K.name]=re,re},app:Je,registerVersion:V.registerVersion,setLogLevel:V.setLogLevel,onLog:V.onLog,apps:null,SDK_VERSION:V.SDK_VERSION,INTERNAL:{registerComponent:function pe(Ge){const ee=Ge.name,K=ee.replace("-compat","");if(V._registerComponent(Ge)&&"PUBLIC"===Ge.type){const re=(ce=Je())=>{if("function"!=typeof ce[K])throw ue.create("invalid-app-argument",{appName:ee});return ce[K]()};void 0!==Ge.serviceProps&&(0,u.ZB)(re,Ge.serviceProps),Se[K]=re,Oe.prototype[K]=function(...ce){return this._getService.bind(this,ee).apply(this,Ge.multipleInstances?ce:[])}}return"PUBLIC"===Ge.type?Se[K]:null},removeApp:function We(Ge){delete te[Ge]},useAsService:function Ve(Ge,ee){return"serverAuth"===ee?null:ee},modularAPIs:V}};function Je(Ge){if(!(0,u.r3)(te,Ge=Ge||V._DEFAULT_ENTRY_NAME))throw ue.create("no-app",{appName:Ge});return te[Ge]}return Se.default=Se,Object.defineProperty(Se,"apps",{get:function he(){return Object.keys(te).map(Ge=>te[Ge])}}),Je.App=Oe,Se}(_e);return Oe.INTERNAL=Object.assign(Object.assign({},Oe.INTERNAL),{createFirebaseNamespace:Ie,extendNamespace:function te(Se){(0,u.ZB)(Oe,Se)},createSubscribe:u.ne,ErrorFactory:u.LL,deepExtend:u.ZB}),Oe}(),H=new fe.Yd("@firebase/app-compat");if((0,u.jU)()&&void 0!==self.firebase){H.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Oe=self.firebase.SDK_VERSION;Oe&&Oe.indexOf("LITE")>=0&&H.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Fe=G;!function xe(Oe){(0,V.registerVersion)("@firebase/app-compat","0.1.21",Oe)}()},9681:(at,De,F)=>{F.r(De),F.d(De,{FirebaseError:()=>fe.ZR,SDK_VERSION:()=>Fr,_DEFAULT_ENTRY_NAME:()=>Qn,_addComponent:()=>En,_addOrOverwriteComponent:()=>cs,_apps:()=>ht,_clearComponents:()=>Nt,_components:()=>Cn,_getProvider:()=>us,_registerComponent:()=>en,_removeServiceInstance:()=>tn,deleteApp:()=>lo,getApp:()=>ao,getApps:()=>Qo,initializeApp:()=>hs,onLog:()=>Cr,registerVersion:()=>ji,setLogLevel:()=>cr});var u=F(5861),X=F(4859),V=F(1877),fe=F(2090);class _e{constructor(ve){this.container=ve}getPlatformInfoString(){return this.container.getProviders().map(Ze=>{if(function we(ze){const ve=ze.getComponent();return"VERSION"===(null==ve?void 0:ve.type)}(Ze)){const ct=Ze.getImmediate();return`${ct.library}/${ct.version}`}return null}).filter(Ze=>Ze).join(" ")}}const ue="@firebase/app",Ie=new V.Yd("@firebase/app"),Qn="[DEFAULT]",rt={[ue]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ht=new Map,Cn=new Map;function En(ze,ve){try{ze.container.addComponent(ve)}catch(Ze){Ie.debug(`Component ${ve.name} failed to register with FirebaseApp ${ze.name}`,Ze)}}function cs(ze,ve){ze.container.addOrOverwriteComponent(ve)}function en(ze){const ve=ze.name;if(Cn.has(ve))return Ie.debug(`There were multiple attempts to register component ${ve}.`),!1;Cn.set(ve,ze);for(const Ze of ht.values())En(Ze,ze);return!0}function us(ze,ve){const Ze=ze.container.getProvider("heartbeat").getImmediate({optional:!0});return Ze&&Ze.triggerHeartbeat(),ze.container.getProvider(ve)}function tn(ze,ve,Ze=Qn){us(ze,ve).clearInstance(Ze)}function Nt(){Cn.clear()}const Ii=new fe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Yo{constructor(ve,Ze,ct){this._isDeleted=!1,this._options=Object.assign({},ve),this._config=Object.assign({},Ze),this._name=Ze.name,this._automaticDataCollectionEnabled=Ze.automaticDataCollectionEnabled,this._container=ct,this.container.addComponent(new X.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ve){this.checkDestroyed(),this._automaticDataCollectionEnabled=ve}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ve){this._isDeleted=ve}checkDestroyed(){if(this.isDeleted)throw Ii.create("app-deleted",{appName:this._name})}}const Fr="9.6.10";function hs(ze,ve={}){"object"!=typeof ve&&(ve={name:ve});const Ze=Object.assign({name:Qn,automaticDataCollectionEnabled:!1},ve),ct=Ze.name;if("string"!=typeof ct||!ct)throw Ii.create("bad-app-name",{appName:String(ct)});const Ut=ht.get(ct);if(Ut){if((0,fe.vZ)(ze,Ut.options)&&(0,fe.vZ)(Ze,Ut.config))return Ut;throw Ii.create("duplicate-app",{appName:ct})}const Rt=new X.H0(ct);for(const L of Cn.values())Rt.addComponent(L);const U=new Yo(ze,Ze,Rt);return ht.set(ct,U),U}function ao(ze=Qn){const ve=ht.get(ze);if(!ve)throw Ii.create("no-app",{appName:ze});return ve}function Qo(){return Array.from(ht.values())}function lo(ze){return ft.apply(this,arguments)}function ft(){return(ft=(0,u.Z)(function*(ze){const ve=ze.name;ht.has(ve)&&(ht.delete(ve),yield Promise.all(ze.container.getProviders().map(Ze=>Ze.delete())),ze.isDeleted=!0)})).apply(this,arguments)}function ji(ze,ve,Ze){var ct;let Ut=null!==(ct=rt[ze])&&void 0!==ct?ct:ze;Ze&&(Ut+=`-${Ze}`);const Rt=Ut.match(/\s|\//),U=ve.match(/\s|\//);if(Rt||U){const L=[`Unable to register library "${Ut}" with version "${ve}":`];return Rt&&L.push(`library name "${Ut}" contains illegal characters (whitespace or "/")`),Rt&&U&&L.push("and"),U&&L.push(`version name "${ve}" contains illegal characters (whitespace or "/")`),void Ie.warn(L.join(" "))}en(new X.wA(`${Ut}-version`,()=>({library:Ut,version:ve}),"VERSION"))}function Cr(ze,ve){if(null!==ze&&"function"!=typeof ze)throw Ii.create("invalid-log-argument");(0,V.Am)(ze,ve)}function cr(ze){(0,V.Ub)(ze)}const vn="firebase-heartbeat-store";let Er=null;function Ds(){return Er||(Er=(0,fe.X3)("firebase-heartbeat-database",1,(ze,ve)=>{0===ve&&ze.createObjectStore(vn)}).catch(ze=>{throw Ii.create("storage-open",{originalErrorMessage:ze.message})})),Er}function Pt(){return(Pt=(0,u.Z)(function*(ze){try{return(yield Ds()).transaction(vn).objectStore(vn).get(Lr(ze))}catch(ve){throw Ii.create("storage-get",{originalErrorMessage:ve.message})}})).apply(this,arguments)}function nt(ze,ve){return yt.apply(this,arguments)}function yt(){return(yt=(0,u.Z)(function*(ze,ve){try{const ct=(yield Ds()).transaction(vn,"readwrite");return yield ct.objectStore(vn).put(ve,Lr(ze)),ct.complete}catch(Ze){throw Ii.create("storage-set",{originalErrorMessage:Ze.message})}})).apply(this,arguments)}function Lr(ze){return`${ze.name}!${ze.options.appId}`}class Jo{constructor(ve){this.container=ve,this._heartbeatsCache=null;const Ze=this.container.getProvider("app").getImmediate();this._storage=new lt(Ze),this._heartbeatsCachePromise=this._storage.read().then(ct=>(this._heartbeatsCache=ct,ct))}triggerHeartbeat(){var ve=this;return(0,u.Z)(function*(){const ct=ve.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ut=Dr();if(null===ve._heartbeatsCache&&(ve._heartbeatsCache=yield ve._heartbeatsCachePromise),ve._heartbeatsCache.lastSentHeartbeatDate!==Ut&&!ve._heartbeatsCache.heartbeats.some(Rt=>Rt.date===Ut))return ve._heartbeatsCache.heartbeats.push({date:Ut,agent:ct}),ve._heartbeatsCache.heartbeats=ve._heartbeatsCache.heartbeats.filter(Rt=>{const U=new Date(Rt.date).valueOf();return Date.now()-U<=2592e6}),ve._storage.overwrite(ve._heartbeatsCache)})()}getHeartbeatsHeader(){var ve=this;return(0,u.Z)(function*(){if(null===ve._heartbeatsCache&&(yield ve._heartbeatsCachePromise),null===ve._heartbeatsCache||0===ve._heartbeatsCache.heartbeats.length)return"";const Ze=Dr(),{heartbeatsToSend:ct,unsentEntries:Ut}=function Vr(ze,ve=1024){const Ze=[];let ct=ze.slice();for(const Ut of ze){const Rt=Ze.find(U=>U.agent===Ut.agent);if(Rt){if(Rt.dates.push(Ut.date),si(Ze)>ve){Rt.dates.pop();break}}else if(Ze.push({agent:Ut.agent,dates:[Ut.date]}),si(Ze)>ve){Ze.pop();break}ct=ct.slice(1)}return{heartbeatsToSend:Ze,unsentEntries:ct}}(ve._heartbeatsCache.heartbeats),Rt=(0,fe.L)(JSON.stringify({version:2,heartbeats:ct}));return ve._heartbeatsCache.lastSentHeartbeatDate=Ze,Ut.length>0?(ve._heartbeatsCache.heartbeats=Ut,yield ve._storage.overwrite(ve._heartbeatsCache)):(ve._heartbeatsCache.heartbeats=[],ve._storage.overwrite(ve._heartbeatsCache)),Rt})()}}function Dr(){return(new Date).toISOString().substring(0,10)}class lt{constructor(ve){this.app=ve,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,u.Z)(function*(){return!!(0,fe.hl)()&&(0,fe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var ve=this;return(0,u.Z)(function*(){return(yield ve._canUseIndexedDBPromise)&&(yield function La(ze){return Pt.apply(this,arguments)}(ve.app))||{heartbeats:[]}})()}overwrite(ve){var Ze=this;return(0,u.Z)(function*(){var ct;if(yield Ze._canUseIndexedDBPromise){const Rt=yield Ze.read();return nt(Ze.app,{lastSentHeartbeatDate:null!==(ct=ve.lastSentHeartbeatDate)&&void 0!==ct?ct:Rt.lastSentHeartbeatDate,heartbeats:ve.heartbeats})}})()}add(ve){var Ze=this;return(0,u.Z)(function*(){var ct;if(yield Ze._canUseIndexedDBPromise){const Rt=yield Ze.read();return nt(Ze.app,{lastSentHeartbeatDate:null!==(ct=ve.lastSentHeartbeatDate)&&void 0!==ct?ct:Rt.lastSentHeartbeatDate,heartbeats:[...Rt.heartbeats,...ve.heartbeats]})}})()}}function si(ze){return(0,fe.L)(JSON.stringify({version:2,heartbeats:ze})).length}!function Ft(ze){en(new X.wA("platform-logger",ve=>new _e(ve),"PRIVATE")),en(new X.wA("heartbeat",ve=>new Jo(ve),"PRIVATE")),ji(ue,"0.7.20",ze),ji(ue,"0.7.20","esm2017"),ji("fire-js","")}("")},4859:(at,De,F)=>{F.d(De,{wA:()=>V,H0:()=>ye,zt:()=>_e});var u=F(5861),X=F(2090);class V{constructor(G,H,J){this.name=G,this.instanceFactory=H,this.type=J,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(G){return this.instantiationMode=G,this}setMultipleInstances(G){return this.multipleInstances=G,this}setServiceProps(G){return this.serviceProps=G,this}setInstanceCreatedCallback(G){return this.onInstanceCreated=G,this}}const fe="[DEFAULT]";class _e{constructor(G,H){this.name=G,this.container=H,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(G){const H=this.normalizeInstanceIdentifier(G);if(!this.instancesDeferred.has(H)){const J=new X.BH;if(this.instancesDeferred.set(H,J),this.isInitialized(H)||this.shouldAutoInitialize())try{const $e=this.getOrInitializeService({instanceIdentifier:H});$e&&J.resolve($e)}catch($e){}}return this.instancesDeferred.get(H).promise}getImmediate(G){var H;const J=this.normalizeInstanceIdentifier(null==G?void 0:G.identifier),$e=null!==(H=null==G?void 0:G.optional)&&void 0!==H&&H;if(!this.isInitialized(J)&&!this.shouldAutoInitialize()){if($e)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:J})}catch(xe){if($e)return null;throw xe}}getComponent(){return this.component}setComponent(G){if(G.name!==this.name)throw Error(`Mismatching Component ${G.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=G,this.shouldAutoInitialize()){if(function ue(Ie){return"EAGER"===Ie.instantiationMode}(G))try{this.getOrInitializeService({instanceIdentifier:fe})}catch(H){}for(const[H,J]of this.instancesDeferred.entries()){const $e=this.normalizeInstanceIdentifier(H);try{const xe=this.getOrInitializeService({instanceIdentifier:$e});J.resolve(xe)}catch(xe){}}}}clearInstance(G=fe){this.instancesDeferred.delete(G),this.instancesOptions.delete(G),this.instances.delete(G)}delete(){var G=this;return(0,u.Z)(function*(){const H=Array.from(G.instances.values());yield Promise.all([...H.filter(J=>"INTERNAL"in J).map(J=>J.INTERNAL.delete()),...H.filter(J=>"_delete"in J).map(J=>J._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(G=fe){return this.instances.has(G)}getOptions(G=fe){return this.instancesOptions.get(G)||{}}initialize(G={}){const{options:H={}}=G,J=this.normalizeInstanceIdentifier(G.instanceIdentifier);if(this.isInitialized(J))throw Error(`${this.name}(${J}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const $e=this.getOrInitializeService({instanceIdentifier:J,options:H});for(const[xe,Fe]of this.instancesDeferred.entries())J===this.normalizeInstanceIdentifier(xe)&&Fe.resolve($e);return $e}onInit(G,H){var J;const $e=this.normalizeInstanceIdentifier(H),xe=null!==(J=this.onInitCallbacks.get($e))&&void 0!==J?J:new Set;xe.add(G),this.onInitCallbacks.set($e,xe);const Fe=this.instances.get($e);return Fe&&G(Fe,$e),()=>{xe.delete(G)}}invokeOnInitCallbacks(G,H){const J=this.onInitCallbacks.get(H);if(J)for(const $e of J)try{$e(G,H)}catch(xe){}}getOrInitializeService({instanceIdentifier:G,options:H={}}){let J=this.instances.get(G);if(!J&&this.component&&(J=this.component.instanceFactory(this.container,{instanceIdentifier:(Ie=G,Ie===fe?void 0:Ie),options:H}),this.instances.set(G,J),this.instancesOptions.set(G,H),this.invokeOnInitCallbacks(J,G),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,G,J)}catch($e){}var Ie;return J||null}normalizeInstanceIdentifier(G=fe){return this.component?this.component.multipleInstances?G:fe:G}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ye{constructor(G){this.name=G,this.providers=new Map}addComponent(G){const H=this.getProvider(G.name);if(H.isComponentSet())throw new Error(`Component ${G.name} has already been registered with ${this.name}`);H.setComponent(G)}addOrOverwriteComponent(G){this.getProvider(G.name).isComponentSet()&&this.providers.delete(G.name),this.addComponent(G)}getProvider(G){if(this.providers.has(G))return this.providers.get(G);const H=new _e(G,this);return this.providers.set(G,H),H}getProviders(){return Array.from(this.providers.values())}}},1877:(at,De,F)=>{F.d(De,{in:()=>X,Yd:()=>ue,Ub:()=>ye,Am:()=>Ie});const u=[];var X=(()=>{return(G=X||(X={}))[G.DEBUG=0]="DEBUG",G[G.VERBOSE=1]="VERBOSE",G[G.INFO=2]="INFO",G[G.WARN=3]="WARN",G[G.ERROR=4]="ERROR",G[G.SILENT=5]="SILENT",X;var G})();const V={debug:X.DEBUG,verbose:X.VERBOSE,info:X.INFO,warn:X.WARN,error:X.ERROR,silent:X.SILENT},fe=X.INFO,_e={[X.DEBUG]:"log",[X.VERBOSE]:"log",[X.INFO]:"info",[X.WARN]:"warn",[X.ERROR]:"error"},we=(G,H,...J)=>{if(H<G.logLevel)return;const $e=(new Date).toISOString(),xe=_e[H];if(!xe)throw new Error(`Attempted to log a message with an invalid logType (value: ${H})`);console[xe](`[${$e}]  ${G.name}:`,...J)};class ue{constructor(H){this.name=H,this._logLevel=fe,this._logHandler=we,this._userLogHandler=null,u.push(this)}get logLevel(){return this._logLevel}set logLevel(H){if(!(H in X))throw new TypeError(`Invalid value "${H}" assigned to \`logLevel\``);this._logLevel=H}setLogLevel(H){this._logLevel="string"==typeof H?V[H]:H}get logHandler(){return this._logHandler}set logHandler(H){if("function"!=typeof H)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=H}get userLogHandler(){return this._userLogHandler}set userLogHandler(H){this._userLogHandler=H}debug(...H){this._userLogHandler&&this._userLogHandler(this,X.DEBUG,...H),this._logHandler(this,X.DEBUG,...H)}log(...H){this._userLogHandler&&this._userLogHandler(this,X.VERBOSE,...H),this._logHandler(this,X.VERBOSE,...H)}info(...H){this._userLogHandler&&this._userLogHandler(this,X.INFO,...H),this._logHandler(this,X.INFO,...H)}warn(...H){this._userLogHandler&&this._userLogHandler(this,X.WARN,...H),this._logHandler(this,X.WARN,...H)}error(...H){this._userLogHandler&&this._userLogHandler(this,X.ERROR,...H),this._logHandler(this,X.ERROR,...H)}}function ye(G){u.forEach(H=>{H.setLogLevel(G)})}function Ie(G,H){for(const J of u){let $e=null;H&&H.level&&($e=V[H.level]),J.userLogHandler=null===G?null:(xe,Fe,...Oe)=>{const te=Oe.map(Se=>{if(null==Se)return null;if("string"==typeof Se)return Se;if("number"==typeof Se||"boolean"==typeof Se)return Se.toString();if(Se instanceof Error)return Se.message;try{return JSON.stringify(Se)}catch(We){return null}}).filter(Se=>Se).join(" ");Fe>=(null!=$e?$e:xe.logLevel)&&G({level:X[Fe].toLowerCase(),message:te,args:Oe,type:xe.name})}}}},5861:(at,De,F)=>{function u(V,fe,_e,we,ue,ye,Ie){try{var G=V[ye](Ie),H=G.value}catch(J){return void _e(J)}G.done?fe(H):Promise.resolve(H).then(we,ue)}function X(V){return function(){var fe=this,_e=arguments;return new Promise(function(we,ue){var ye=V.apply(fe,_e);function Ie(H){u(ye,we,ue,Ie,G,"next",H)}function G(H){u(ye,we,ue,Ie,G,"throw",H)}Ie(void 0)})}}F.d(De,{Z:()=>X})}},at=>{at(at.s=872)}]);